(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(t,e,n){t.exports=n("zUnb")},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n("mrSG"),s=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("zVF4"),c=n("x7I3"),l=n("S+S0"),u=s.SDK_VERSION,h=new o.Logger("@firebase/firestore");function d(){return h.logLevel}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.DEBUG){var r=e.map(g);h.debug.apply(h,i.__spreadArrays(["Firestore ("+u+"): "+t],r))}}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.ERROR){var r=e.map(g);h.error.apply(h,i.__spreadArrays(["Firestore ("+u+"): "+t],r))}}function g(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function m(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+u+") INTERNAL ASSERTION FAILED: "+t;throw f(e),new Error(e)}function y(t,e){t||m()}function v(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var w=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _(t,e){return t<e?-1:t>e?1:0}function S(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function C(t){return t+"\0"}var E=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},I=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return _(this.projectId,t.projectId)||_(this.database,t.database)},t}();function T(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function x(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var A=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.u(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){x(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}}))},t.prototype._=function(){return k(this.l)},t}(),O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(e,t),e}(Error),R=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new D(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new D(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new D(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new D(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?_(this.nanoseconds,t.nanoseconds):_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),P=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new R(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.A=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.R=function(){return this.timestamp},t}(),N=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m(),void 0===n?n=t.length-e:n>t.length-e&&m(),this.segments=t,this.offset=e,this.m=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return this.V(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new D(O.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e}(N);F.k=new F([]);var L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return L.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.L=function(){return 1===this.length&&"__name__"===this.get(0)},e.O=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new D(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new D(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new D(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e}(N);M.k=new M([]);var V=function(){function t(t){this.path=t}return t.q=function(e){return new t(F.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===F.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return F.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new F(e.slice()))},t}();function j(t){return null==t}function U(t){return-0===t&&1/t==-1/0}function B(t){return"number"==typeof t&&Number.isInteger(t)&&!U(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}V.EMPTY=new V(new F([]));var z=function(){function t(t){this.K=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.K)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},t.prototype.G=function(){return 2*this.K.length},t.prototype.o=function(t){return _(this.K,t.K)},t.prototype.isEqual=function(t){return this.K===t.K},t}();z.H=new z("");var H,G,$=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=P.min()),void 0===s&&(s=P.min()),void 0===o&&(o=z.H),this.target=t,this.targetId=e,this.Y=n,this.sequenceNumber=r,this.J=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.X=function(e){return new t(this.target,this.targetId,this.Y,e,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Z=function(e,n){return new t(this.target,this.targetId,this.Y,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.tt=function(e){return new t(this.target,this.targetId,this.Y,this.sequenceNumber,this.J,e,this.resumeToken)},t}(),q=function(t){this.count=t};function W(t){switch(t){case O.OK:return m();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return m()}}function Q(t){if(void 0===t)return f("GRPC error has no .code"),O.UNKNOWN;switch(t){case H.OK:return O.OK;case H.CANCELLED:return O.CANCELLED;case H.UNKNOWN:return O.UNKNOWN;case H.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case H.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case H.INTERNAL:return O.INTERNAL;case H.UNAVAILABLE:return O.UNAVAILABLE;case H.UNAUTHENTICATED:return O.UNAUTHENTICATED;case H.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case H.NOT_FOUND:return O.NOT_FOUND;case H.ALREADY_EXISTS:return O.ALREADY_EXISTS;case H.PERMISSION_DENIED:return O.PERMISSION_DENIED;case H.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case H.ABORTED:return O.ABORTED;case H.OUT_OF_RANGE:return O.OUT_OF_RANGE;case H.UNIMPLEMENTED:return O.UNIMPLEMENTED;case H.DATA_LOSS:return O.DATA_LOSS;default:return m()}}(G=H||(H={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var Y=function(){function t(t,e){this.P=t,this.root=e||Z.EMPTY}return t.prototype.et=function(e,n){return new t(this.P,this.root.et(e,n,this.P).st(null,null,Z.nt,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).st(null,null,Z.nt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new K(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new K(this.root,t,this.P,!1)},t.prototype.ct=function(){return new K(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new K(this.root,t,this.P,!0)},t}(),K=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),Z=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.st=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.et=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.st(null,null,null,r.left.et(t,e,n),null):0===i?r.st(null,e,null,null,null):r.st(null,null,null,null,r.right.et(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.st(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.st(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.st(r.key,r.value,null,null,i.right.It())}i=i.st(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.pt()),t},t.prototype.Rt=function(){var t=this.pt();return t.right.left.At()&&(t=(t=(t=t.st(null,null,null,null,t.right.Pt())).gt()).pt()),t},t.prototype.Vt=function(){var t=this.pt();return t.left.left.At()&&(t=(t=t.Pt()).pt()),t},t.prototype.gt=function(){var e=this.st(null,null,t.RED,null,this.right.left);return this.right.st(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.st(null,null,t.RED,this.left.right,null);return this.left.st(null,null,this.color,null,e)},t.prototype.pt=function(){var t=this.left.st(null,null,!this.left.color,null,null),e=this.right.st(null,null,!this.right.color,null,null);return this.st(null,null,!this.color,t,e)},t.prototype.yt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw m();if(this.right.At())throw m();var t=this.left.bt();if(t!==this.right.bt())throw m();return t+(this.At()?0:1)},t}();Z.EMPTY=null,Z.RED=!0,Z.nt=!1,Z.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m()},enumerable:!0,configurable:!0}),t.prototype.st=function(t,e,n,r,i){return this},t.prototype.et=function(t,e,n){return new Z(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.yt=function(){return!0},t.prototype.bt=function(){return 0},t}());var X=function(){function t(t){this.P=t,this.data=new Y(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new J(this.data.at())},t.prototype.ut=function(t){return new J(this.data.ut(t))},t.prototype.add=function(t){return this.st(this.data.remove(t).et(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.st(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,s=r.dt().key;if(0!==this.P(i,s))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.st=function(e){var n=new t(this.P);return n.data=e,n},t}(),J=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),tt=new Y(V.P);function et(){return tt}function nt(){return et()}var rt=new Y(V.P);function it(){return rt}var st=new Y(V.P),ot=new X(V.P);function at(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ot,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var ct=new X(_);function lt(){return ct}var ut=function(){function t(t){this.P=t?function(e,n){return t(e,n)||V.P(e.key,n.key)}:function(t,e){return V.P(t.key,e.key)},this.Nt=it(),this.$t=new Y(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.st(e.Nt.et(t.key,t),e.$t.et(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.st(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,s=r.dt().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.st=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),ht=function(){function t(){this.xt=new Y(V.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.et(e,t):3===t.type&&1!==n.type?this.xt=this.xt.et(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.et(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.et(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):m():this.xt=this.xt.et(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),dt=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.Ot=i,this.fromCache=s,this.Bt=o,this.qt=a}return t.Ut=function(e,n,r,i){var s=[];return n.forEach((function(t){s.push({type:0,doc:t})})),new t(e,n,ut.kt(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ot._()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Ot.isEqual(t.Ot)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),pt=function(){function t(t,e,n,r,i){this.J=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,ft.zt(e,n)),new t(P.min(),r,lt(),et(),at())},t}(),ft=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(z.H,n,at(),at(),at())},t}(),gt=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},mt=function(t,e){this.targetId=t,this.ee=e},yt=function(t,e,n,r){void 0===n&&(n=z.H),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vt=function(){function t(){this.se=0,this.ne=_t(),this.ie=z.H,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.se},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!0,configurable:!0}),t.prototype.ue=function(t){t.G()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=at(),e=at(),n=at();return this.ne.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:m()}})),new ft(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.ne=_t()},t.prototype._e=function(t,e){this.oe=!0,this.ne=this.ne.et(t,e)},t.prototype.fe=function(t){this.oe=!0,this.ne=this.ne.remove(t)},t.prototype.de=function(){this.se+=1},t.prototype.we=function(){this.se-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),bt=function(){function t(t){this.Ee=t,this.Ie=new Map,this.Ae=et(),this.Re=wt(),this.me=new X(_)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Le?this.Ve(r,t.te):t.te instanceof Me&&this.ge(r,t.key,t.te)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.ge(s[i],t.key,t.te)},t.prototype.pe=function(t){var e=this;this.ye(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:m()}}))},t.prototype.ye=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(en(i))if(0===n){var s=new V(i.path);this.ge(e,s,new Me(s,P.min()))}else y(1===n);else this.Fe(e)!==n&&(this.Se(e),this.me=this.me.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var s=e.Ce(i);if(s){if(r.Ht&&en(s.target)){var o=new V(s.target.path);null!==e.Ae.get(o)||e.$e(i,o)||e.ge(i,o,new Me(o,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=at();this.Re.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.Y||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new pt(t,n,this.me,this.Ae,r);return this.Ae=et(),this.Re=wt(),this.me=new X(_),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.Ae=this.Ae.et(e.key,e),this.Re=this.Re.et(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Re=this.Re.et(e,this.ke(e).delete(t)),n&&(this.Ae=this.Ae.et(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new vt,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new X(_),this.Re=this.Re.et(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new vt),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();function wt(){return new Y(V.P)}function _t(){return new Y(V.P)}function St(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ct(t){var e=Dt(t.mapValue.fields.__local_write_time__.timestampValue);return new R(e.seconds,e.nanos)}var Et=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function It(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?St(t)?4:10:m()}function Tt(t,e){var n=It(t);if(n!==It(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ct(t).isEqual(Ct(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Dt(t.timestampValue),r=Dt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Pt(t.bytesValue).isEqual(Pt(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Rt(t.geoPointValue.latitude)===Rt(e.geoPointValue.latitude)&&Rt(t.geoPointValue.longitude)===Rt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Rt(t.integerValue)===Rt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Rt(t.doubleValue),r=Rt(e.doubleValue);return n===r?U(n)===U(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return S(t.arrayValue.values||[],e.arrayValue.values||[],Tt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(T(n)!==T(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tt(n[i],r[i])))return!1;return!0}(t,e);default:return m()}}function xt(t,e){return void 0!==(t.values||[]).find((function(t){return Tt(t,e)}))}function kt(t,e){var n=It(t),r=It(e);if(n!==r)return _(n,r);switch(n){case 0:return 0;case 1:return _(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Rt(t.integerValue||t.doubleValue),r=Rt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return At(t.timestampValue,e.timestampValue);case 4:return At(Ct(t),Ct(e));case 5:return _(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Pt(t),r=Pt(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=_(n[i],r[i]);if(0!==s)return s}return _(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_(Rt(t.latitude),Rt(e.latitude));return 0!==n?n:_(Rt(t.longitude),Rt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=kt(n[i],r[i]);if(s)return s}return _(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=_(r[o],s[o]);if(0!==a)return a;var c=kt(n[r[o]],i[s[o]]);if(0!==c)return c}return _(r.length,s.length)}(t.mapValue,e.mapValue);default:throw m()}}function At(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _(t,e);var n=Dt(t),r=Dt(e),i=_(n.seconds,r.seconds);return 0!==i?i:_(n.nanos,r.nanos)}function Ot(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Dt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pt(e.bytesValue).toBase64():"referenceValue"in e?V.q(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,s=e.values||[];i<s.length;i++)r?r=!1:n+=",",n+=t(s[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,s=Object.keys(e.fields||{}).sort();i<s.length;i++){var o=s[i];r?r=!1:n+=",",n+=o+":"+t(e.fields[o])}return n+"}"}(e.mapValue):m();var n}(t)}function Dt(t){if(y(!!t),"string"==typeof t){var e=0,n=Et.exec(t);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Pt(t){return"string"==typeof t?z.fromBase64String(t):z.fromUint8Array(t)}function Nt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function Ft(t){return!!t&&"integerValue"in t}function Lt(t){return!!t&&"arrayValue"in t}function Mt(t){return!!t&&"nullValue"in t}function Vt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jt(t){return!!t&&"mapValue"in t}var Ut={asc:"ASCENDING",desc:"DESCENDING"},Bt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zt=function(t,e){this.s=t,this.Le=e};function Ht(t){return{integerValue:""+t}}function Gt(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:U(e)?"-0":e}}function $t(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qt(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Wt(t,e){return t.Le?(y(void 0===e||"string"==typeof e),z.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),z.fromUint8Array(e||new Uint8Array))}function Qt(t,e){return $t(t,e.R())}function Yt(t){return y(!!t),P.I(function(t){var e=Dt(t);return new R(e.seconds,e.nanos)}(t))}function Kt(t,e){return function(t){return new F(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function Zt(t){var e=F.$(t);return y(me(e)),e}function Xt(t,e){return Kt(t.s,e.path)}function Jt(t,e){var n=Zt(e);return y(n.get(1)===t.s.projectId),y(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new V(re(n))}function te(t,e){return Kt(t.s,e)}function ee(t){var e=Zt(t);return 4===e.length?F.k:re(e)}function ne(t){return new F(["projects",t.s.projectId,"databases",t.s.database]).N()}function re(t){return y(t.length>4&&"documents"===t.get(4)),t.g(5)}function ie(t,e,n){return{name:Xt(t,e),fields:n.proto.mapValue.fields}}function se(t,e){var n;if(e instanceof xe)n={update:ie(t,e.key,e.value)};else if(e instanceof Oe)n={delete:Xt(t,e.key)};else if(e instanceof ke)n={update:ie(t,e.key,e.data),updateMask:ge(e.Oe)};else if(e instanceof Ae)n={transform:{document:Xt(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ye)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof ve)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof be)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof we)return{fieldPath:e.field.N(),increment:n.Be};throw m()}(0,t)}))}};else{if(!(e instanceof De))return m();n={verify:Xt(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qt(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:m()}(t,e.Ue)),n}function oe(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ie.updateTime(Yt(t.updateTime)):void 0!==t.exists?Ie.exists(t.exists):Ie.Qe()}(e.currentDocument):Ie.Qe();if(e.update){var r=Jt(t,e.update.name),i=new Re({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Se((t.fieldPaths||[]).map((function(t){return M.B(t)})))}(e.updateMask);return new ke(r,i,s,n)}return new xe(r,i,n)}if(e.delete){var o=Jt(t,e.delete);return new Oe(o,n)}if(e.transform){var a=Jt(t,e.transform.document),c=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(y("REQUEST_TIME"===e.setToServerValue),n=ye.instance):"appendMissingElements"in e?n=new ve(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new be(e.removeAllFromArray.values||[]):"increment"in e?n=new we(t,e.increment):m();var r=M.B(e.fieldPath);return new Ce(r,n)}(t,e)}));return y(!0===n.exists),new Ae(a,c)}if(e.verify){var l=Jt(t,e.verify);return new De(l,n)}return m()}function ae(t,e){return{documents:[te(t,e.path)]}}function ce(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=te(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=te(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof Ue?function(t){if("=="===t.op){if(Vt(t.value))return{unaryFilter:{field:he(t.field),op:"IS_NAN"}};if(Mt(t.value))return{unaryFilter:{field:he(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:he(t.field),op:(e=t.op,Bt[e]),value:t.value}};var e}(t):m()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map((function(t){return{field:he((e=t).field),direction:(n=e.dir,Ut[n])};var e,n}))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.Le||j(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=le(e.startAt)),e.endAt&&(n.structuredQuery.endAt=le(e.endAt)),n}function le(t){return{before:t.before,values:t.position}}function ue(t){return new qe(t.values||[],!!t.before)}function he(t){return{fieldPath:t.N()}}function de(t){return M.B(t.fieldPath)}function pe(t){return Ue.create(de(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return m()}}(t.fieldFilter.op),t.fieldFilter.value)}function fe(t){switch(t.unaryFilter.op){case"IS_NAN":var e=de(t.unaryFilter.field);return Ue.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=de(t.unaryFilter.field);return Ue.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return m()}}function ge(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function me(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ye=function(){function t(){}return t.prototype.je=function(t,e){return function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(e,t)},t.prototype.Ke=function(t,e){return e},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t}();ye.instance=new ye;var ve=function(){function t(t){this.elements=t}return t.prototype.je=function(t,e){return this.apply(t)},t.prototype.Ke=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=_e(t),n=function(t){e.some((function(e){return Tt(e,t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&S(this.elements,e.elements,Tt)},t}(),be=function(){function t(t){this.elements=t}return t.prototype.je=function(t,e){return this.apply(t)},t.prototype.Ke=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=_e(t),n=function(t){e=e.filter((function(e){return!Tt(e,t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return{arrayValue:{values:e}}},t.prototype.Ge=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&S(this.elements,e.elements,Tt)},t}(),we=function(){function t(t,e){this.serializer=t,this.Be=e}return t.prototype.je=function(t,e){var n=this.Ge(t),r=this.asNumber(n)+this.asNumber(this.Be);return Ft(n)&&Ft(this.Be)?Ht(r):Gt(this.serializer,r)},t.prototype.Ke=function(t,e){return e},t.prototype.Ge=function(t){return Ft(e=t)||function(t){return!!t&&"doubleValue"in t}(e)?t:{integerValue:0};var e},t.prototype.isEqual=function(e){return e instanceof t&&Tt(this.Be,e.Be)},t.prototype.asNumber=function(t){return Rt(t.integerValue||t.doubleValue)},t}();function _e(t){return Lt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Se=function(){function t(t){this.fields=t,t.sort(M.P)}return t.prototype.ze=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return S(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ce=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),Ee=function(t,e){this.version=t,this.transformResults=e},Ie=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.He=function(t){return void 0!==this.updateTime?t instanceof Le&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof Le},t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),Te=function(){function t(){}return t.prototype.Ye=function(t){},t.Je=function(t){return t instanceof Le?t.version:P.min()},t}(),xe=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return i.__extends(e,t),e.prototype.Ke=function(t,e){return this.Ye(t),new Le(this.key,e.version,this.value,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Te.Je(t);return new Le(this.key,r,this.value,{Xe:!0})},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Ue.isEqual(t.Ue)},e}(Te),ke=function(t){function e(e,n,r,i){var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Oe=r,s.Ue=i,s.type=1,s}return i.__extends(e,t),e.prototype.Ke=function(t,e){if(this.Ye(t),!this.Ue.He(t))return new Ve(this.key,e.version);var n=this.ts(t);return new Le(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Te.Je(t),i=this.ts(t);return new Le(this.key,r,i,{Xe:!0})},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Oe.isEqual(t.Oe)&&this.Ue.isEqual(t.Ue)},e.prototype.ts=function(t){var e;return e=t instanceof Le?t.data():Re.empty(),this.es(e)},e.prototype.es=function(t){var e=this,n=new Pe(t);return this.Oe.fields.forEach((function(t){if(!t._()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.ss()},e}(Te),Ae=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=Ie.exists(!0),r}return i.__extends(e,t),e.prototype.Ke=function(t,e){if(this.Ye(t),y(null!=e.transformResults),!this.Ue.He(t))return new Ve(this.key,e.version);var n=this.ns(t),r=this.rs(t,e.transformResults),i=e.version,s=this.os(n.data(),r);return new Le(this.key,i,s,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=this.ns(t),i=this.hs(n,t,e),s=this.os(r.data(),i);return new Le(this.key,r.version,s,{Xe:!0})},e.prototype.Ze=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],s=t instanceof Le?t.field(i.field):void 0,o=i.transform.Ge(s||null);null!=o&&(e=null==e?(new Pe).set(i.field,o):e.set(i.field,o))}return e?e.ss():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&S(this.fieldTransforms,t.fieldTransforms,(function(t,e){return t.isEqual(e)}))&&this.Ue.isEqual(t.Ue)},e.prototype.ns=function(t){return t},e.prototype.rs=function(t,e){var n=[];y(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],s=i.transform,o=null;t instanceof Le&&(o=t.field(i.field)),n.push(s.Ke(o,e[r]))}return n},e.prototype.hs=function(t,e,n){for(var r=[],i=0,s=this.fieldTransforms;i<s.length;i++){var o=s[i],a=o.transform,c=null;e instanceof Le&&(c=e.field(o.field)),null===c&&n instanceof Le&&(c=n.field(o.field)),r.push(a.je(c,t))}return r},e.prototype.os=function(t,e){for(var n=new Pe(t),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.ss()},e}(Te),Oe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return i.__extends(e,t),e.prototype.Ke=function(t,e){return this.Ye(t),new Me(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.je=function(t,e,n){return this.Ye(t),this.Ue.He(t)?new Me(this.key,P.min()):t},e.prototype.Ze=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},e}(Te),De=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return i.__extends(e,t),e.prototype.Ke=function(t,e){m()},e.prototype.je=function(t,e,n){m()},e.prototype.Ze=function(t){m()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},e}(Te),Re=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!jt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Tt(this.proto,t.proto)},t}(),Pe=function(){function t(t){void 0===t&&(t=Re.empty()),this.as=t,this.us=new Map}return t.prototype.set=function(t,e){return this.cs(t,e),this},t.prototype.delete=function(t){return this.cs(t,null),this},t.prototype.cs=function(t,e){for(var n=this.us,r=0;r<t.length-1;++r){var i=t.get(r),s=n.get(i);s instanceof Map?n=s:s&&10===It(s)?(s=new Map(Object.entries(s.mapValue.fields||{})),n.set(i,s),n=s):(s=new Map,n.set(i,s),n=s)}n.set(t.S(),e)},t.prototype.ss=function(){var t=this.ls(M.k,this.us);return null!=t?new Re(t):this.as},t.prototype.ls=function(t,e){var n=this,r=!1,i=this.as.field(t),s=jt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var o=n.ls(t.child(i),e);null!=o&&(s[i]=o,r=!0)}else null!==e?(s[i]=e,r=!0):s.hasOwnProperty(i)&&(delete s[i],r=!0)})),r?{mapValue:{fields:s}}:null},t}();function Ne(t){var e=[];return x(t.fields||{},(function(t,n){var r=new M([t]);if(jt(n)){var i=Ne(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)})),new Se(e)}var Fe=function(t,e){this.key=t,this.version=e},Le=function(t){function e(e,n,r,i){var s=this;return(s=t.call(this,e,n)||this)._s=r,s.Xe=!!i.Xe,s.hasCommittedMutations=!!i.hasCommittedMutations,s}return i.__extends(e,t),e.prototype.field=function(t){return this._s.field(t)},e.prototype.data=function(){return this._s},e.prototype.fs=function(){return this._s.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xe===t.Xe&&this.hasCommittedMutations===t.hasCommittedMutations&&this._s.isEqual(t._s)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this._s.toString()+", {hasLocalMutations: "+this.Xe+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Xe||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e}(Fe),Me=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fe),je=function(){function t(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.ds=n,this.filters=r,this.limit=i,this.ws=s,this.startAt=o,this.endAt=a,this.Ts=null,this.Es=null,this.startAt&&this.Is(this.startAt),this.endAt&&this.Is(this.endAt)}return t.As=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Ts){this.Ts=[];var t=this.Rs(),e=this.ms();if(null!==t&&null===e)t.L()||this.Ts.push(new Ke(t)),this.Ts.push(new Ke(M.O(),"asc"));else{for(var n=!1,r=0,i=this.ds;r<i.length;r++){var s=i[r];this.Ts.push(s),s.field.L()&&(n=!0)}if(!n){var o=this.ds.length>0?this.ds[this.ds.length-1].dir:"asc";this.Ts.push(new Ke(M.O(),o))}}}return this.Ts},enumerable:!0,configurable:!0}),t.prototype.Ps=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.ds.slice(),n,this.limit,this.ws,this.startAt,this.endAt)},t.prototype.Vs=function(e){var n=this.ds.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},t.prototype.gs=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.ps=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.ys=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,e,this.endAt)},t.prototype.bs=function(e){return new t(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,e)},t.prototype.vs=function(e){return new t(e,null,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},t.prototype.Ss=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.ds.length||1===this.ds.length&&this.ds[0].field.L())},t.prototype.canonicalId=function(){return Je(this.We())+"|lt:"+this.ws},t.prototype.toString=function(){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.join(", ")+"]"),j(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.join(", ")+"]"),t.startAt&&(e+=", startAt: "+We(t.startAt)),t.endAt&&(e+=", endAt: "+We(t.endAt)),"Target("+e+")"}(this.We())+"; limitType="+this.ws+")"},t.prototype.isEqual=function(t){return tn(this.We(),t.We())&&this.ws===t.ws},t.prototype.Ds=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var s=i[r],o=s.compare(t,e);if(0!==o)return o;n=n||s.field.L()}return 0},t.prototype.matches=function(t){return this.Cs(t)&&this.Fs(t)&&this.Ns(t)&&this.$s(t)},t.prototype.ks=function(){return!j(this.limit)&&"F"===this.ws},t.prototype.xs=function(){return!j(this.limit)&&"L"===this.ws},t.prototype.ms=function(){return this.ds.length>0?this.ds[0].field:null},t.prototype.Rs=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ue&&n.Ms())return n.field}return null},t.prototype.Ls=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Ue&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Os=function(){return en(this.We())},t.prototype.Bs=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.Es)if("F"===this.ws)this.Es=Xe(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new Ke(r.field,"desc"===r.dir?"asc":"desc"))}var i=this.endAt?new qe(this.endAt.position,!this.endAt.before):null,s=this.startAt?new qe(this.startAt.position,!this.startAt.before):null;this.Es=Xe(this.path,this.collectionGroup,t,this.filters,this.limit,i,s)}return this.Es},t.prototype.Cs=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.U(this.collectionGroup)&&this.path.D(e):V.W(this.path)?this.path.isEqual(e):this.path.C(e)},t.prototype.Fs=function(t){for(var e=0,n=this.ds;e<n.length;e++){var r=n[e];if(!r.field.L()&&null===t.field(r.field))return!1}return!0},t.prototype.Ns=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.$s=function(t){return!(this.startAt&&!Qe(this.startAt,this.orderBy,t)||this.endAt&&Qe(this.endAt,this.orderBy,t))},t.prototype.Is=function(t){},t}(),Ue=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i.__extends(e,t),e.create=function(t,n,r){if(t.L())return"in"===n?new ze(t,r):new Be(t,n,r);if(Mt(r)){if("=="!==n)throw new D(O.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Vt(r)){if("=="!==n)throw new D(O.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new He(t,r):"in"===n?new Ge(t,r):"array-contains-any"===n?new $e(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&It(this.value)===It(e)&&this.qs(kt(e,this.value))},e.prototype.qs=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return m()}},e.prototype.Ms=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.N()+this.op.toString()+Ot(this.value)},e.prototype.isEqual=function(t){return t instanceof e&&this.op===t.op&&this.field.isEqual(t.field)&&Tt(this.value,t.value)},e.prototype.toString=function(){return this.field.N()+" "+this.op+" "+Ot(this.value)},e}((function(){})),Be=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=V.q(r.referenceValue),i}return i.__extends(e,t),e.prototype.matches=function(t){var e=V.P(t.key,this.key);return this.qs(e)},e}(Ue),ze=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return V.q(t.referenceValue)})),r}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ue),He=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Lt(e)&&xt(e.arrayValue,this.value)},e}(Ue),Ge=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&xt(this.value.arrayValue,e)},e}(Ue),$e=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Lt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return xt(e.value.arrayValue,t)}))},e}(Ue),qe=function(t,e){this.position=t,this.before=e};function We(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ot(t)})).join(",")}function Qe(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.L()?V.P(V.q(o.referenceValue),n.key):kt(o,n.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ye(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Tt(t.position[n],e.position[n]))return!1;return!0}var Ke=function(){function t(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.Us=t.L()}return t.prototype.compare=function(t,e){var n=this.Us?V.P(t.key,e.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?kt(r,i):m()}(this.field,t,e);switch(this.dir){case"asc":return n;case"desc":return-1*n;default:return m()}},t.prototype.canonicalId=function(){return this.field.N()+this.dir.toString()},t.prototype.toString=function(){return this.field.N()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),Ze=function(t){function e(e,n,r,i,s,o,a){void 0===n&&(n=null),void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var c=this;return(c=t.call(this,e,n,r,i,s,o,a)||this).Qs=null,c}return i.__extends(e,t),e}((function(t,e,n,r,i,s,o){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o}));function Xe(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Ze(t,e,n,r,i,s,o)}function Je(t){var e=v(t);if(null===e.Qs){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return t.canonicalId()})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return t.canonicalId()})).join(","),j(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=We(e.startAt)),e.endAt&&(n+="|ub:",n+=We(e.endAt)),e.Qs=n}return e.Qs}function tn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!t.orderBy[n].isEqual(e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(!t.filters[r].isEqual(e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ye(t.startAt,e.startAt)&&Ye(t.endAt,e.endAt)}function en(t){return V.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var nn=function(){function t(t,e,n,r){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ke=function(t,e,n){for(var r=n.js,i=0;i<this.mutations.length;i++){var s=this.mutations[i];s.key.isEqual(t)&&(e=s.Ke(e,r[i]))}return e},t.prototype.je=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.je(e,e,this.Ws))}for(var s=e,o=0,a=this.mutations;o<a.length;o++){var c=a[o];c.key.isEqual(t)&&(e=c.je(e,s,this.Ws))}return e},t.prototype.Ks=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.je(r.key,t.get(r.key));i&&(n=n.et(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),at())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&S(this.mutations,t.mutations,(function(t,e){return t.isEqual(e)}))&&S(this.baseMutations,t.baseMutations,(function(t,e){return t.isEqual(e)}))},t}(),rn=function(){function t(t,e,n,r){this.batch=t,this.Gs=e,this.js=n,this.zs=r}return t.from=function(e,n,r){y(e.mutations.length===r.length);for(var i=st,s=e.mutations,o=0;o<s.length;o++)i=i.et(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),sn=function(){function t(t){var e=this;this.Hs=null,this.Ys=null,this.result=void 0,this.error=void 0,this.Js=!1,this.Xs=!1,t((function(t){e.Js=!0,e.result=t,e.Hs&&e.Hs(t)}),(function(t){e.Js=!0,e.error=t,e.Ys&&e.Ys(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Xs&&m(),this.Xs=!0,this.Js?this.error?this.Zs(n,this.error):this.tn(e,this.result):new t((function(t,i){r.Hs=function(n){r.tn(e,n).next(t,i)},r.Ys=function(e){r.Zs(n,e).next(t,i)}}))},t.prototype.en=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.sn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.tn=function(e,n){return e?this.sn((function(){return e(n)})):t.resolve(n)},t.prototype.Zs=function(e,n){return e?this.sn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.nn=function(e){return new t((function(t,n){var r=0,i=0,s=!1;e.forEach((function(e){++r,e.next((function(){++i,s&&i===r&&t()}),(function(t){return n(t)}))})),s=!0,i===r&&t()}))},t.rn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.nn(r)},t}(),on=function(){function t(){this.on=new A((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.hn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.an},set:function(t){this.an=t},enumerable:!0,configurable:!0}),t.prototype.un=function(t,e){this.cn(),this.readTime=e,this.on.set(t.key,t)},t.prototype.ln=function(t,e){this.cn(),e&&(this.readTime=e),this.on.set(t,null)},t.prototype._n=function(t,e){this.cn();var n=this.on.get(e);return void 0!==n?sn.resolve(n):this.fn(t,e)},t.prototype.getEntries=function(t,e){return this.dn(t,e)},t.prototype.apply=function(t){return this.cn(),this.hn=!0,this.wn(t)},t.prototype.cn=function(){},t}(),an="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cn=function(){function t(){this.Tn=[]}return t.prototype.En=function(t){this.Tn.push(t)},t.prototype.In=function(){this.Tn.forEach((function(t){return t()}))},t}(),ln=function(){function t(t,e,n){this.An=t,this.Rn=e,this.mn=n}return t.prototype.Pn=function(t,e){var n=this;return this.Rn.Vn(t,e).next((function(r){return n.gn(t,e,r)}))},t.prototype.gn=function(t,e,n){return this.An._n(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].je(e,t);return t}))},t.prototype.pn=function(t,e,n){var r=nt();return e.forEach((function(t,e){for(var i=0,s=n;i<s.length;i++)e=s[i].je(t,e);r=r.et(t,e)})),r},t.prototype.yn=function(t,e){var n=this;return this.An.getEntries(t,e).next((function(e){return n.bn(t,e)}))},t.prototype.bn=function(t,e){var n=this;return this.Rn.vn(t,e).next((function(r){var i=n.pn(t,e,r),s=et();return i.forEach((function(t,e){e||(e=new Me(t,P.min())),s=s.et(t,e)})),s}))},t.prototype.Sn=function(t,e,n){return e.Os()?this.Dn(t,e.path):e.Bs()?this.Cn(t,e,n):this.Fn(t,e,n)},t.prototype.Dn=function(t,e){return this.Pn(t,new V(e)).next((function(t){var e=it();return t instanceof Le&&(e=e.et(t.key,t)),e}))},t.prototype.Cn=function(t,e,n){var r=this,i=e.collectionGroup,s=it();return this.mn.Nn(t,i).next((function(o){return sn.forEach(o,(function(o){var a=e.vs(o.child(i));return r.Fn(t,a,n).next((function(t){t.forEach((function(t,e){s=s.et(t,e)}))}))})).next((function(){return s}))}))},t.prototype.Fn=function(t,e,n){var r,i,s=this;return this.An.Sn(t,e,n).next((function(n){return r=n,s.Rn.$n(t,e)})).next((function(e){return s.kn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var c=a[o],l=c.key,u=r.get(l),h=c.je(u,u,s.Ws);r=h instanceof Le?r.et(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.kn=function(t,e,n){for(var r=at(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var c=a[o];c instanceof ke&&null===n.get(c.key)&&(r=r.add(c.key))}var l=n;return this.An.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Le&&(l=l.et(t,e))})),l}))},t}(),un=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.xn=n,this.Mn=r}return t.Ln=function(e,n){for(var r=at(),i=at(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),hn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.On=function(t){return n.Bn(t)},this.qn=function(t){return e.Un(t)})}return t.prototype.Bn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.qn&&this.qn(t),t},t}();hn.Qn=-1;var dn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},pn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Wn=t,this.jn=e,this.Kn=n,this.Gn=r,this.zn=i,this.Hn=0,this.Yn=null,this.Jn=Date.now(),this.reset()}return t.prototype.reset=function(){this.Hn=0},t.prototype.Xn=function(){this.Hn=this.zn},t.prototype.Zn=function(t){var e=this;this.cancel();var n=Math.floor(this.Hn+this.ti()),r=Math.max(0,Date.now()-this.Jn),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Hn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Yn=this.Wn.ei(this.jn,i,(function(){return e.Jn=Date.now(),t()})),this.Hn*=this.Gn,this.Hn<this.Kn&&(this.Hn=this.Kn),this.Hn>this.zn&&(this.Hn=this.zn)},t.prototype.si=function(){null!==this.Yn&&(this.Yn.ni(),this.Yn=null)},t.prototype.cancel=function(){null!==this.Yn&&(this.Yn.cancel(),this.Yn=null)},t.prototype.ti=function(){return(Math.random()-.5)*this.Hn},t}();function fn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mn(e)),e=gn(t.get(n),e);return mn(e)}function gn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function mn(t){return t+"\x01\x01"}function yn(t){var e=t.length;if(y(e>=2),2===e)return y("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),F.k;for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&m(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),c=void 0;0===i.length?c=a:(c=i+=a,i=""),r.push(c);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:m()}s=o+2}return new F(r)}var vn=function(){function t(){this.ii=new bn}return t.prototype.ri=function(t,e){return this.ii.add(e),sn.resolve()},t.prototype.Nn=function(t,e){return sn.resolve(this.ii.getEntries(e))},t}(),bn=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new X(F.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new X(F.P)).F()},t}(),wn=function(){function t(){this.oi=new bn}return t.prototype.ri=function(t,e){var n=this;if(!this.oi.has(e)){var r=e.S(),i=e.p();t.En((function(){n.oi.add(e)}));var s={collectionId:r,parent:fn(i)};return _n(t).put(s)}return sn.resolve()},t.prototype.Nn=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[C(e),""],!1,!0);return _n(t).hi(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(yn(s.parent))}return n}))},t}();function _n(t){return Gn.ai(t,gr.store)}var Sn=function(t){this.ui=t};function Cn(t,e){if(e.document)return function(t,e,n){var r=Jt(t,e.name),i=Yt(e.updateTime),s=new Re({mapValue:{fields:e.fields}});return new Le(r,i,s,{hasCommittedMutations:!!n})}(t.ui,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=V.j(e.noDocument.path),r=kn(e.noDocument.readTime);return new Me(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=V.j(e.unknownDocument.path),s=kn(e.unknownDocument.version);return new Ve(i,s)}return m()}function En(t,e,n){var r=In(n),i=e.key.path.p().F();if(e instanceof Le){var s=function(t,e){return{name:Xt(t,e.key),fields:e.fs().mapValue.fields,updateTime:$t(t,e.version.R())}}(t.ui,e);return new ur(null,null,s,e.hasCommittedMutations,r,i)}if(e instanceof Me){var o=e.key.path.F(),a=xn(e.version),c=e.hasCommittedMutations;return new ur(null,new cr(o,a),null,c,r,i)}if(e instanceof Ve){var l=e.key.path.F(),u=xn(e.version);return new ur(new lr(l,u),null,null,!0,r,i)}return m()}function In(t){var e=t.R();return[e.seconds,e.nanoseconds]}function Tn(t){var e=new R(t[0],t[1]);return P.I(e)}function xn(t){var e=t.R();return new rr(e.seconds,e.nanoseconds)}function kn(t){var e=new R(t.seconds,t.nanoseconds);return P.I(e)}function An(t,e){var n=(e.baseMutations||[]).map((function(e){return oe(t.ui,e)})),r=e.mutations.map((function(e){return oe(t.ui,e)})),i=R.fromMillis(e.localWriteTimeMs);return new nn(e.batchId,i,n,r)}function On(t){var e,n=kn(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?kn(t.lastLimboFreeSnapshotVersion):P.min();return e=void 0!==t.query.documents?function(t){return y(1===t.documents.length),je.As(ee(t.documents[0])).We()}(t.query):function(t){var e=ee(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[fe(e)]:void 0!==e.fieldFilter?[pe(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):m():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Ke(de((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var c=null;n.limit&&(c=function(t){var e;return j(e="object"==typeof t?t.value:t)?null:e}(n.limit));var l=null;n.startAt&&(l=ue(n.startAt));var u=null;return n.endAt&&(u=ue(n.endAt)),new je(e,i,a,o,c,"F",l,u).We()}(t.query),new $(e,t.targetId,0,t.lastListenSequenceNumber,n,r,z.fromBase64String(t.resumeToken))}function Dn(t,e){var n,r=xn(e.J),i=xn(e.lastLimboFreeSnapshotVersion);n=en(e.target)?ae(t.ui,e.target):ce(t.ui,e.target);var s=e.resumeToken.toBase64();return new dr(e.targetId,Je(e.target),r,s,e.sequenceNumber,i,n)}var Rn=function(){function t(t,e){this.serializer=t,this.mn=e}return t.prototype.un=function(t,e,n){return Nn(t).put(Fn(e),n)},t.prototype.ln=function(t,e){var n=Nn(t),r=Fn(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ci(t,r)}))},t.prototype._n=function(t,e){var n=this;return Nn(t).get(Fn(e)).next((function(t){return n.li(t)}))},t.prototype._i=function(t,e){var n=this;return Nn(t).get(Fn(e)).next((function(t){var e=n.li(t);return e?{fi:e,size:Ln(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=nt();return this.di(t,e,(function(t,e){var i=n.li(e);r=r.et(t,i)})).next((function(){return r}))},t.prototype.wi=function(t,e){var n=this,r=nt(),i=new Y(V.P);return this.di(t,e,(function(t,e){var s=n.li(e);s?(r=r.et(t,s),i=i.et(t,Ln(e))):(r=r.et(t,null),i=i.et(t,0))})).next((function(){return{Ti:r,Ei:i}}))},t.prototype.di=function(t,e,n){if(e._())return sn.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),s=i.dt();return Nn(t).Ii({range:r},(function(t,e,r){for(var o=V.j(t);s&&V.P(s,o)<0;)n(s,null),s=i.dt();s&&s.isEqual(o)&&(n(s,e),s=i.wt()?i.dt():null),s?r.Ai(s.path.F()):r.done()})).next((function(){for(;s;)n(s,null),s=i.wt()?i.dt():null}))},t.prototype.Sn=function(t,e,n){var r=this,i=it(),s=e.path.length+1,o={};if(n.isEqual(P.min())){var a=e.path.F();o.range=IDBKeyRange.lowerBound(a)}else{var c=e.path.F(),l=In(n);o.range=IDBKeyRange.lowerBound([c,l],!0),o.index=ur.collectionReadTimeIndex}return Nn(t).Ii(o,(function(t,n,o){if(t.length===s){var a=Cn(r.serializer,n);e.path.D(a.key.path)?a instanceof Le&&e.matches(a)&&(i=i.et(a.key,a)):o.done()}})).next((function(){return i}))},t.prototype.Ri=function(t,e){var n=this,r=et(),i=In(e),s=Nn(t),o=IDBKeyRange.lowerBound(i,!0);return s.Ii({index:ur.readTimeIndex,range:o},(function(t,e){var s=Cn(n.serializer,e);r=r.et(s.key,s),i=e.readTime})).next((function(){return{mi:r,readTime:Tn(i)}}))},t.prototype.Pi=function(t){var e=Nn(t),n=P.min();return e.Ii({index:ur.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Tn(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.Vi=function(e){return new t.gi(this,!!e&&e.pi)},t.prototype.yi=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Pn(t).get(hr.key).next((function(t){return y(!!t),t}))},t.prototype.ci=function(t,e){return Pn(t).put(hr.key,e)},t.prototype.li=function(t){if(t){var e=Cn(this.serializer,t);return e instanceof Me&&e.version.isEqual(P.min())?null:e}return null},t}();function Pn(t){return Gn.ai(t,hr.store)}function Nn(t){return Gn.ai(t,ur.store)}function Fn(t){return t.path.F()}function Ln(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m();e=t.noDocument}return JSON.stringify(e).length}Rn.gi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).bi=e,r.pi=n,r.vi=new A((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i.__extends(e,t),e.prototype.wn=function(t){var e=this,n=[],r=0,i=new X((function(t,e){return _(t.N(),e.N())}));return this.on.forEach((function(s,o){var a=e.vi.get(s);if(o){var c=En(e.bi.serializer,o,e.readTime);i=i.add(s.path.p());var l=Ln(c);r+=l-a,n.push(e.bi.un(t,s,c))}else if(r-=a,e.pi){var u=En(e.bi.serializer,new Me(s,P.min()),e.readTime);n.push(e.bi.un(t,s,u))}else n.push(e.bi.ln(t,s))})),i.forEach((function(r){n.push(e.bi.mn.ri(t,r))})),n.push(this.bi.updateMetadata(t,r)),sn.nn(n)},e.prototype.fn=function(t,e){var n=this;return this.bi._i(t,e).next((function(t){return null===t?(n.vi.set(e,0),null):(n.vi.set(e,t.size),t.fi)}))},e.prototype.dn=function(t,e){var n=this;return this.bi.wi(t,e).next((function(t){var e=t.Ti;return t.Ei.forEach((function(t,e){n.vi.set(t,e)})),e}))},e}(on);var Mn=function(){function t(t){this.Si=t}return t.prototype.next=function(){return this.Si+=2,this.Si},t.Di=function(){return new t(0)},t.Ci=function(){return new t(-1)},t}(),Vn=function(){function t(t,e){this.Fi=t,this.serializer=e}return t.prototype.Ni=function(t){var e=this;return this.$i(t).next((function(n){var r=new Mn(n.highestTargetId);return n.highestTargetId=r.next(),e.ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.xi=function(t){return this.$i(t).next((function(t){return P.I(new R(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Mi=function(t){return this.$i(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Li=function(t,e,n){var r=this;return this.$i(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.R()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ki(t,i)}))},t.prototype.Oi=function(t,e){var n=this;return this.Bi(t,e).next((function(){return n.$i(t).next((function(r){return r.targetCount+=1,n.qi(e,r),n.ki(t,r)}))}))},t.prototype.Ui=function(t,e){return this.Bi(t,e)},t.prototype.Qi=function(t,e){var n=this;return this.Wi(t,e.targetId).next((function(){return jn(t).delete(e.targetId)})).next((function(){return n.$i(t)})).next((function(e){return y(e.targetCount>0),e.targetCount-=1,n.ki(t,e)}))},t.prototype.ji=function(t,e,n){var r=this,i=0,s=[];return jn(t).Ii((function(o,a){var c=On(a);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,s.push(r.Qi(t,c)))})).next((function(){return sn.nn(s)})).next((function(){return i}))},t.prototype.ye=function(t,e){return jn(t).Ii((function(t,n){var r=On(n);e(r)}))},t.prototype.$i=function(t){return Un(t).get(fr.key).next((function(t){return y(null!==t),t}))},t.prototype.ki=function(t,e){return Un(t).put(fr.key,e)},t.prototype.Bi=function(t,e){return jn(t).put(Dn(this.serializer,e))},t.prototype.qi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Ki=function(t){return this.$i(t).next((function(t){return t.targetCount}))},t.prototype.Gi=function(t,e){var n=Je(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return jn(t).Ii({range:r,index:dr.queryTargetsIndexName},(function(t,n,r){var s=On(n);tn(e,s.target)&&(i=s,r.done())})).next((function(){return i}))},t.prototype.zi=function(t,e,n){var r=this,i=[],s=Bn(t);return e.forEach((function(e){var o=fn(e.path);i.push(s.put(new pr(n,o))),i.push(r.Fi.Hi(t,n,e))})),sn.nn(i)},t.prototype.Yi=function(t,e,n){var r=this,i=Bn(t);return sn.forEach(e,(function(e){var s=fn(e.path);return sn.nn([i.delete([n,s]),r.Fi.Ji(t,n,e)])}))},t.prototype.Wi=function(t,e){var n=Bn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Xi=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bn(t),i=at();return r.Ii({range:n,Zi:!0},(function(t,e,n){var r=yn(t[1]),s=new V(r);i=i.add(s)})).next((function(){return i}))},t.prototype.tr=function(t,e){var n=fn(e.path),r=IDBKeyRange.bound([n],[C(n)],!1,!0),i=0;return Bn(t).Ii({index:pr.documentTargetsIndex,Zi:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return jn(t).get(e).next((function(t){return t?On(t):null}))},t}();function jn(t){return Gn.ai(t,dr.store)}function Un(t){return Gn.ai(t,fr.store)}function Bn(t){return Gn.ai(t,pr.store)}var zn="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).er=e,r.sr=n,r}return i.__extends(e,t),e}(cn),Gn=function(){function t(e,n,r,i,s,o,a,c,l,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Wn=s,this.window=o,this.document=a,this.nr=l,this.ir=u,this.rr=null,this.or=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hr=null,this.inForeground=!1,this.ar=null,this.ur=null,this.cr=Number.NEGATIVE_INFINITY,this.lr=function(t){return Promise.resolve()},!t._r())throw new D(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Fi=new Wn(this,i),this.dr=n+t.wr,this.serializer=new Sn(c),this.Tr=new Vn(this.Fi,this.serializer),this.mn=new wn,this.An=new Rn(this.serializer,this.mn),this.window&&this.window.localStorage?this.Er=this.window.localStorage:(this.Er=null,!1===u&&f("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.ai=function(t,e){if(t instanceof Hn)return br.ai(t.er,e);throw m()},t.prototype.start=function(){var t=this;return br.Ir(this.dr,er,new nr(this.serializer)).then((function(e){return t.Ar=e,t.Rr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new D(O.FAILED_PRECONDITION,zn);return t.mr(),t.Pr(),t.Vr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Tr.Mi(e)}))})).then((function(e){t.rr=new hn(e,t.nr)})).then((function(){t.or=!0})).catch((function(e){return t.Ar&&t.Ar.close(),Promise.reject(e)}))},t.prototype.gr=function(t){var e=this;return this.lr=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.pr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.yr=function(t){var e=this;this.Ar.br((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.vr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Wn.Sr((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.pr?[4,this.Rr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Rr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return qn(e).put(new yr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Dr(e).next((function(e){e||(t.isPrimary=!1,t.Wn.Cr((function(){return t.lr(!1)})))}))})).next((function(){return t.Fr(e)})).next((function(n){return t.isPrimary&&!n?t.Nr(e).next((function(){return!1})):!!n&&t.$r(e).next((function(){return!0}))}))})).catch((function(e){if(Sr(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Wn.Cr((function(){return t.lr(e)})),t.isPrimary=e}))},t.prototype.Dr=function(t){var e=this;return $n(t).get(ir.key).next((function(t){return sn.resolve(e.kr(t))}))},t.prototype.xr=function(t){return qn(t).delete(this.clientId)},t.prototype.Mr=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Lr(this.cr,18e5)?[3,2]:(this.cr=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.ai(e,yr.store);return n.hi().next((function(t){var e=s.Or(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return sn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.Er)for(n=0,r=e;n<r.length;n++)this.Er.removeItem(this.Br(r[n].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Vr=function(){var t=this;this.ur=this.Wn.ei("client_metadata_refresh",4e3,(function(){return t.Rr().then((function(){return t.Mr()})).then((function(){return t.Vr()}))}))},t.prototype.kr=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Fr=function(t){var e=this;return this.ir?sn.resolve(!0):$n(t).get(ir.key).next((function(n){if(null!==n&&e.Lr(n.leaseTimestampMs,5e3)&&!e.qr(n.ownerId)){if(e.kr(n)&&e.networkEnabled)return!0;if(!e.kr(n)){if(!n.allowTabSynchronization)throw new D(O.FAILED_PRECONDITION,zn);return!1}}return!(!e.networkEnabled||!e.inForeground)||qn(t).hi().next((function(t){return void 0===e.Or(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Ur=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.or=!1,this.Qr(),this.ur&&(this.ur.cancel(),this.ur=null),this.Wr(),this.jr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Nr(e).next((function(){return t.xr(e)}))})).catch((function(t){p("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.Ar.close(),this.Kr(),[2]}}))}))},t.prototype.Or=function(t,e){var n=this;return t.filter((function(t){return n.Lr(t.updateTimeMs,e)&&!n.qr(t.clientId)}))},t.prototype.Gr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return qn(e).hi().next((function(e){return t.Or(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return t._r()?[4,br.delete(e+t.wr)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),t.prototype.zr=function(t){return Yn.Hr(t,this.serializer,this.mn,this.Fi)},t.prototype.Yr=function(){return this.Tr},t.prototype.Jr=function(){return this.An},t.prototype.Xr=function(){return this.mn},t.prototype.runTransaction=function(t,e,n){var r,i=this;return p("IndexedDbPersistence","Starting transaction:",t),this.Ar.runTransaction("readonly"===e?"readonly":"readwrite",vr,(function(s){return r=new Hn(s,i.rr?i.rr.next():hn.Qn),"readwrite-primary"===e?i.Dr(r).next((function(t){return!!t||i.Fr(r)})).next((function(e){if(!e)throw f("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Wn.Cr((function(){return i.lr(!1)})),new D(O.FAILED_PRECONDITION,an);return n(r)})).next((function(t){return i.$r(r).next((function(){return t}))})):i.Zr(r).next((function(){return n(r)}))})).then((function(t){return r.In(),t}))},t.prototype.Zr=function(t){var e=this;return $n(t).get(ir.key).next((function(t){if(null!==t&&e.Lr(t.leaseTimestampMs,5e3)&&!e.qr(t.ownerId)&&!e.kr(t)&&!(e.ir||e.allowTabSynchronization&&t.allowTabSynchronization))throw new D(O.FAILED_PRECONDITION,zn)}))},t.prototype.$r=function(t){var e=new ir(this.clientId,this.allowTabSynchronization,Date.now());return $n(t).put(ir.key,e)},t._r=function(){return br._r()},t.to=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Nr=function(t){var e=this,n=$n(t);return n.get(ir.key).next((function(t){return e.kr(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(ir.key)):sn.resolve()}))},t.prototype.Lr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(f("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.mr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ar=function(){t.Wn.Sr((function(){return t.inForeground="visible"===t.document.visibilityState,t.Rr()}))},this.document.addEventListener("visibilitychange",this.ar),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Wr=function(){this.ar&&(this.document.removeEventListener("visibilitychange",this.ar),this.ar=null)},t.prototype.Pr=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.hr=function(){e.Qr(),e.Wn.Sr((function(){return e.Ur()}))},this.window.addEventListener("unload",this.hr))},t.prototype.jr=function(){this.hr&&(this.window.removeEventListener("unload",this.hr),this.hr=null)},t.prototype.qr=function(t){var e;try{var n=null!==(null===(e=this.Er)||void 0===e?void 0:e.getItem(this.Br(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return f("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Qr=function(){if(this.Er)try{this.Er.setItem(this.Br(this.clientId),String(Date.now()))}catch(t){f("Failed to set zombie client id.",t)}},t.prototype.Kr=function(){if(this.Er)try{this.Er.removeItem(this.Br(this.clientId))}catch(t){}},t.prototype.Br=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function $n(t){return Gn.ai(t,ir.store)}function qn(t){return Gn.ai(t,yr.store)}Gn.wr="main";var Wn=function(){function t(t,e){this.db=t,this.eo=new Mr(this,e)}return t.prototype.so=function(t){var e=this.no(t);return this.db.Yr().Ki(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.no=function(t){var e=0;return this.io(t,(function(t){e++})).next((function(){return e}))},t.prototype.ye=function(t,e){return this.db.Yr().ye(t,e)},t.prototype.io=function(t,e){return this.ro(t,(function(t,n){return e(n)}))},t.prototype.Hi=function(t,e,n){return Qn(t,n)},t.prototype.Ji=function(t,e,n){return Qn(t,n)},t.prototype.ji=function(t,e,n){return this.db.Yr().ji(t,e,n)},t.prototype.oo=function(t,e){return Qn(t,e)},t.prototype.ho=function(t,e){return function(t,e){var n=!1;return tr(t).ao((function(r){return Kn(t,r,e).next((function(t){return t&&(n=!0),sn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.uo=function(t,e){var n=this,r=this.db.Jr().Vi(),i=[],s=0;return this.ro(t,(function(o,a){if(a<=e){var c=n.ho(t,o).next((function(e){if(!e)return s++,r._n(t,o).next((function(){return r.ln(o),Bn(t).delete([0,fn(o.path)])}))}));i.push(c)}})).next((function(){return sn.nn(i)})).next((function(){return r.apply(t)})).next((function(){return s}))},t.prototype.removeTarget=function(t,e){var n=e.X(t.sr);return this.db.Yr().Ui(t,n)},t.prototype.co=function(t,e){return Qn(t,e)},t.prototype.ro=function(t,e){var n,r=Bn(t),i=hn.Qn;return r.Ii({index:pr.documentTargetsIndex},(function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==hn.Qn&&e(new V(yn(n)),i),i=o,n=s):i=hn.Qn})).next((function(){i!==hn.Qn&&e(new V(yn(n)),i)}))},t.prototype.lo=function(t){return this.db.Jr().yi(t)},t}();function Qn(t,e){return Bn(t).put(function(t,e){return new pr(0,fn(t.path),e)}(e,t.sr))}var Yn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.mn=n,this.Fi=r,this._o={}}return t.Hr=function(e,n,r,i){return y(""!==e.uid),new t(e.fo()?e.uid:"",n,r,i)},t.prototype.do=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xn(t).Ii({index:or.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.wo=function(t,e,n,r){var i=this,s=Jn(t),o=Xn(t);return o.add({}).next((function(a){y("number"==typeof a);for(var c=new nn(a,e,n,r),l=function(t,e,n){var r=n.baseMutations.map((function(e){return se(t.ui,e)})),i=n.mutations.map((function(e){return se(t.ui,e)}));return new or(e,n.batchId,n.Ws.toMillis(),r,i)}(i.serializer,i.userId,c),u=[],h=new X((function(t,e){return _(t.N(),e.N())})),d=0,p=r;d<p.length;d++){var f=p[d],g=ar.key(i.userId,f.key.path,a);h=h.add(f.key.path.p()),u.push(o.put(l)),u.push(s.put(g,ar.PLACEHOLDER))}return h.forEach((function(e){u.push(i.mn.ri(t,e))})),t.En((function(){i._o[a]=c.keys()})),sn.nn(u).next((function(){return c}))}))},t.prototype.To=function(t,e){var n=this;return Xn(t).get(e).next((function(t){return t?(y(t.userId===n.userId),An(n.serializer,t)):null}))},t.prototype.Eo=function(t,e){var n=this;return this._o[e]?sn.resolve(this._o[e]):this.To(t,e).next((function(t){if(t){var r=t.keys();return n._o[e]=r,r}return null}))},t.prototype.Io=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Xn(t).Ii({index:or.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(y(e.batchId>=r),s=An(n.serializer,e)),i.done()})).next((function(){return s}))},t.prototype.Ao=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Xn(t).Ii({index:or.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Ro=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xn(t).hi(or.userMutationsIndex,n).next((function(t){return t.map((function(t){return An(e.serializer,t)}))}))},t.prototype.Vn=function(t,e){var n=this,r=ar.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Jn(t).Ii({range:i},(function(r,i,o){var a=r[0],c=r[2],l=yn(r[1]);if(a===n.userId&&e.path.isEqual(l))return Xn(t).get(c).next((function(t){if(!t)throw m();y(t.userId===n.userId),s.push(An(n.serializer,t))}));o.done()})).next((function(){return s}))},t.prototype.vn=function(t,e){var n=this,r=new X(_),i=[];return e.forEach((function(e){var s=ar.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Jn(t).Ii({range:o},(function(t,i,s){var o=t[0],a=t[2],c=yn(t[1]);o===n.userId&&e.path.isEqual(c)?r=r.add(a):s.done()}));i.push(a)})),sn.nn(i).next((function(){return n.mo(t,r)}))},t.prototype.$n=function(t,e){var n=this,r=e.path,i=r.length+1,s=ar.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new X(_);return Jn(t).Ii({range:o},(function(t,e,s){var o=t[0],c=t[2],l=yn(t[1]);o===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):s.done()})).next((function(){return n.mo(t,a)}))},t.prototype.mo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Xn(t).get(e).next((function(t){if(null===t)throw m();y(t.userId===n.userId),r.push(An(n.serializer,t))})))})),sn.nn(i).next((function(){return r}))},t.prototype.Po=function(t,e){var n=this;return Zn(t.er,this.userId,e).next((function(r){return t.En((function(){n.Vo(e.batchId)})),sn.forEach(r,(function(e){return n.Fi.oo(t,e)}))}))},t.prototype.Vo=function(t){delete this._o[t]},t.prototype.po=function(t){var e=this;return this.do(t).next((function(n){if(!n)return sn.resolve();var r=IDBKeyRange.lowerBound(ar.prefixForUser(e.userId)),i=[];return Jn(t).Ii({range:r},(function(t,n,r){if(t[0]===e.userId){var s=yn(t[1]);i.push(s)}else r.done()})).next((function(){y(0===i.length)}))}))},t.prototype.tr=function(t,e){return Kn(t,this.userId,e)},t.prototype.yo=function(t){var e=this;return tr(t).get(this.userId).next((function(t){return t||new sr(e.userId,-1,"")}))},t}();function Kn(t,e,n){var r=ar.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Jn(t).Ii({range:s,Zi:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()})).next((function(){return o}))}function Zn(t,e,n){var r=t.store(or.store),i=t.store(ar.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.Ii({range:o},(function(t,e,n){return a++,n.delete()}));s.push(c.next((function(){y(1===a)})));for(var l=[],u=0,h=n.mutations;u<h.length;u++){var d=h[u],p=ar.key(e,d.key.path,n.batchId);s.push(i.delete(p)),l.push(d.key)}return sn.nn(s).next((function(){return l}))}function Xn(t){return Gn.ai(t,or.store)}function Jn(t){return Gn.ai(t,ar.store)}function tr(t){return Gn.ai(t,sr.store)}var er=10,nr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=er);var s=new Cr(e);n<1&&r>=1&&(function(t){t.createObjectStore(ir.store)}(t),function(t){t.createObjectStore(sr.store,{keyPath:sr.keyPath}),t.createObjectStore(or.store,{keyPath:or.keyPath,autoIncrement:!0}).createIndex(or.userMutationsIndex,or.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ar.store)}(t),mr(t),function(t){t.createObjectStore(ur.store)}(t));var o=sn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(pr.store),t.deleteObjectStore(dr.store),t.deleteObjectStore(fr.store)}(t),mr(t)),o=o.next((function(){return function(t){var e=t.store(fr.store),n=new fr(0,0,P.min().R(),0);return e.put(fr.key,n)}(s)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(t,e){return e.store(or.store).hi().next((function(n){t.deleteObjectStore(or.store),t.createObjectStore(or.store,{keyPath:or.keyPath,autoIncrement:!0}).createIndex(or.userMutationsIndex,or.userMutationsKeyPath,{unique:!0});var r=e.store(or.store),i=n.map((function(t){return r.put(t)}));return sn.nn(i)}))}(t,s)}))),o=o.next((function(){!function(t){t.createObjectStore(yr.store,{keyPath:yr.keyPath})}(t)}))),n<5&&r>=5&&(o=o.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&r>=6&&(o=o.next((function(){return function(t){t.createObjectStore(hr.store)}(t),i.addDocumentGlobal(s)}))),n<7&&r>=7&&(o=o.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&r>=8&&(o=o.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&r>=9&&(o=o.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ur.store);e.createIndex(ur.readTimeIndex,ur.readTimeIndexPath,{unique:!1}),e.createIndex(ur.collectionReadTimeIndex,ur.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.rewriteCanonicalIds(s)}))),o},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(ur.store).Ii((function(t,n){e+=Ln(n)})).next((function(){var n=new hr(e);return t.store(hr.store).put(hr.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(sr.store),r=t.store(or.store);return n.hi().next((function(n){return sn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.hi(or.userMutationsIndex,i).next((function(r){return sn.forEach(r,(function(r){y(r.userId===n.userId);var i=An(e.serializer,r);return Zn(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(pr.store),n=t.store(ur.store);return t.store(fr.store).get(fr.key).next((function(t){var r=[];return n.Ii((function(n,i){var s=new F(n),o=function(t){return[0,fn(t)]}(s);r.push(e.get(o).next((function(n){return n?sn.resolve():function(n){return e.put(new pr(0,fn(n),t.highestListenSequenceNumber))}(s)})))})).next((function(){return sn.nn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(gr.store,{keyPath:gr.keyPath});var n=e.store(gr.store),r=new bn,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:fn(i)})}};return e.store(ur.store).Ii({Zi:!0},(function(t,e){var n=new F(t);return i(n.p())})).next((function(){return e.store(ar.store).Ii({Zi:!0},(function(t,e){var n=yn(t[1]);return i(n.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(dr.store);return n.Ii((function(t,r){var i=On(r),s=Dn(e.serializer,i);return n.put(s)}))},t}(),rr=function(t,e){this.seconds=t,this.nanoseconds=e},ir=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ir.store="owner",ir.key="owner";var sr=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};sr.store="mutationQueues",sr.keyPath="userId";var or=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};or.store="mutations",or.keyPath="batchId",or.userMutationsIndex="userMutationsIndex",or.userMutationsKeyPath=["userId","batchId"];var ar=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fn(e)]},t.key=function(t,e,n){return[t,fn(e),n]},t}();ar.store="documentMutations",ar.PLACEHOLDER=new ar;var cr=function(t,e){this.path=t,this.readTime=e},lr=function(t,e){this.path=t,this.version=e},ur=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};ur.store="remoteDocuments",ur.readTimeIndex="readTimeIndex",ur.readTimeIndexPath="readTime",ur.collectionReadTimeIndex="collectionReadTimeIndex",ur.collectionReadTimeIndexPath=["parentPath","readTime"];var hr=function(t){this.byteSize=t};hr.store="remoteDocumentGlobal",hr.key="remoteDocumentGlobalKey";var dr=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};dr.store="targets",dr.keyPath="targetId",dr.queryTargetsIndexName="queryTargetsIndex",dr.queryTargetsKeyPath=["canonicalId","targetId"];var pr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};pr.store="targetDocuments",pr.keyPath=["targetId","path"],pr.documentTargetsIndex="documentTargetsIndex",pr.documentTargetsKeyPath=["path","targetId"];var fr=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fr.key="targetGlobalKey",fr.store="targetGlobal";var gr=function(t,e){this.collectionId=t,this.parent=e};function mr(t){t.createObjectStore(pr.store,{keyPath:pr.keyPath}).createIndex(pr.documentTargetsIndex,pr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dr.store,{keyPath:dr.keyPath}).createIndex(dr.queryTargetsIndexName,dr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fr.store)}gr.store="collectionParents",gr.keyPath=["collectionId","parent"];var yr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yr.store="clientMetadata",yr.keyPath="clientId";var vr=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([sr.store,or.store,ar.store,ur.store,dr.store,ir.store,fr.store,pr.store],[yr.store]),[hr.store]),[gr.store]),br=function(){function t(e){this.db=e,12.2===t.bo(a.getUA())&&f("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.Ir=function(e,n,r){return p("SimpleDb","Opening database:",e),new sn((function(i,s){var o=indexedDB.open(e,n);o.onsuccess=function(e){i(new t(e.target.result))},o.onblocked=function(){s(new D(O.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(t){var e=t.target.error;s("VersionError"===e.name?new D(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},o.onupgradeneeded=function(t){p("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,o.transaction,t.oldVersion,er).next((function(){p("SimpleDb","Database upgrade to version "+er+" complete")}))}})).en()},t.delete=function(t){return p("SimpleDb","Removing database:",t),Ir(window.indexedDB.deleteDatabase(t)).en()},t._r=function(){if("undefined"==typeof indexedDB)return!1;if(t.vo())return!0;var e=a.getUA(),n=t.bo(e),r=0<n&&n<10,i=t.So(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.vo=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.Do)},t.ai=function(t,e){return t.store(e)},t.bo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.So=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.br=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,s,o,a,c;return i.__generator(this,(function(l){switch(l.label){case 0:r="readonly"===t,s=0,o=function(){var t,o,c,l,u;return i.__generator(this,(function(i){switch(i.label){case 0:++s,t=Cr.open(a.db,r?"readonly":"readwrite",e),i.label=1;case 1:return i.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),sn.reject(e)})).en(),c={},o.catch((function(){})),[4,t.Co];case 2:return[2,(c.value=(i.sent(),o),c)];case 3:return p("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(l=i.sent()).message,u="FirebaseError"!==l.name&&s<3),u?[3,4]:[2,{value:Promise.reject(l)}];case 4:return[2]}}))},a=this,l.label=1;case 1:return[5,o()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),wr=function(){function t(t){this.Fo=t,this.No=!1,this.$o=null}return Object.defineProperty(t.prototype,"Js",{get:function(){return this.No},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ko",{get:function(){return this.$o},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Fo=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.No=!0},t.prototype.Ai=function(t){this.$o=t},t.prototype.delete=function(){return Ir(this.Fo.delete())},t}(),_r=function(t){function e(e){var n=this;return(n=t.call(this,O.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i.__extends(e,t),e}(D);function Sr(t){return"IndexedDbTransactionError"===t.name}var Cr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.xo=new dn,this.transaction.oncomplete=function(){e.xo.resolve()},this.transaction.onabort=function(){t.error?e.xo.reject(new _r(t.error)):e.xo.resolve()},this.transaction.onerror=function(t){var n=xr(t.target.error);e.xo.reject(new _r(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"Co",{get:function(){return this.xo.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.xo.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Er(e)},t}(),Er=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ir(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),Ir(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ir(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),Ir(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Ir(this.store.count())},t.prototype.hi=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Lo=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Zi=!1;var r=this.cursor(n);return this.Mo(r,(function(t,e,n){return n.delete()}))},t.prototype.Ii=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mo(r,e)},t.prototype.ao=function(t){var e=this.cursor({});return new sn((function(n,r){e.onerror=function(t){var e=xr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Mo=function(t,e){var n=[];return new sn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new wr(i),o=e(i.primaryKey,i.value,s);if(o instanceof sn){var a=o.catch((function(t){return s.done(),sn.reject(t)}));n.push(a)}s.Js?r():null===s.ko?i.continue():i.continue(s.ko)}else r()}})).next((function(){return sn.nn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Zi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ir(t){return new sn((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xr(t.target.error);n(e)}}))}var Tr=!1;function xr(t){var e=br.bo(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Tr||(Tr=!0,setTimeout((function(){throw r}),0)),r}}return t}function kr(){return"undefined"!=typeof window?window:null}var Ar=function(){function t(t,e,n,r,i){this.Oo=t,this.jn=e,this.Bo=n,this.op=r,this.qo=i,this.Uo=new dn,this.then=this.Uo.promise.then.bind(this.Uo.promise),this.Uo.promise.catch((function(t){}))}return t.Qo=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.Wo=setTimeout((function(){return e.jo()}),t)},t.prototype.ni=function(){return this.jo()},t.prototype.cancel=function(t){null!==this.Wo&&(this.clearTimeout(),this.Uo.reject(new D(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.jo=function(){var t=this;this.Oo.Sr((function(){return null!==t.Wo?(t.clearTimeout(),t.op().then((function(e){return t.Uo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Wo&&(this.qo(this),clearTimeout(this.Wo),this.Wo=null)},t}(),Or=function(){function t(){var t=this;this.Ko=Promise.resolve(),this.Go=Promise.resolve(),this.zo=!1,this.Ho=[],this.Yo=null,this.Jo=!1,this.Xo=[],this.Zo=new pn(this,"async_queue_retry"),this.th=function(){return t.Zo.si()};var e=kr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.th)}return Object.defineProperty(t.prototype,"eh",{get:function(){return this.zo},enumerable:!0,configurable:!0}),t.prototype.Sr=function(t){this.enqueue(t)},t.prototype.sh=function(t){this.nh(),this.ih(t)},t.prototype.rh=function(t){return this.nh(),this.ih(t)},t.prototype.oh=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.nh(),this.zo?[3,2]:(this.zo=!0,(e=kr())&&e.removeEventListener("visibilitychange",this.th),[4,this.rh(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.nh(),this.zo?new Promise((function(t){})):this.ih(t)},t.prototype.Cr=function(t){var e=this;this.nh(),this.zo||(this.Go=this.Go.then((function(){var n=new dn,r=function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t()];case 1:return i.sent(),n.resolve(),this.Zo.reset(),[3,3];case 2:if(!Sr(e=i.sent()))throw n.resolve(),e;return p("AsyncQueue","Operation failed with retryable error: "+e),this.Zo.Zn(r),[3,3];case 3:return[2]}}))}))};return e.Sr(r),n.promise})))},t.prototype.ih=function(t){var e=this,n=this.Ko.then((function(){return e.Jo=!0,t().catch((function(t){throw e.Yo=t,e.Jo=!1,f("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Jo=!1,t}))}));return this.Ko=n,n},t.prototype.ei=function(t,e,n){var r=this;this.nh(),this.Xo.indexOf(t)>-1&&(e=0);var i=Ar.Qo(this,t,e,n,(function(t){return r.hh(t)}));return this.Ho.push(i),i},t.prototype.nh=function(){this.Yo&&m()},t.prototype.ah=function(){},t.prototype.uh=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ko];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ko)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.lh=function(t){for(var e=0,n=this.Ho;e<n.length;e++)if(n[e].jn===t)return!0;return!1},t.prototype._h=function(t){var e=this;return this.uh().then((function(){e.Ho.sort((function(t,e){return t.Bo-e.Bo}));for(var n=0,r=e.Ho;n<r.length;n++){var i=r[n];if(i.ni(),"all"!==t&&i.jn===t)break}return e.uh()}))},t.prototype.fh=function(t){this.Xo.push(t)},t.prototype.hh=function(t){var e=this.Ho.indexOf(t);this.Ho.splice(e,1)},t}();function Dr(t,e){if(f("AsyncQueue",e+": "+t),Sr(t))return new D(O.UNAVAILABLE,e+": "+t);throw t}function Rr(t,e){var n=t[1],r=e[1],i=_(t[0],e[0]);return 0===i?_(n,r):i}var Pr=function(){function t(t){this.dh=t,this.buffer=new X(Rr),this.wh=0}return t.prototype.Th=function(){return++this.wh},t.prototype.Eh=function(t){var e=[t,this.Th()];if(this.buffer.size<this.dh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Rr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Nr={Ih:!1,Ah:0,Rh:0,mh:0},Fr=function(){function t(t,e,n){this.Ph=t,this.Vh=e,this.gh=n}return t.ph=function(e){return new t(e,t.yh,t.bh)},t}();Fr.vh=-1,Fr.Sh=1048576,Fr.Dh=41943040,Fr.yh=10,Fr.bh=1e3,Fr.Ch=new Fr(Fr.Dh,Fr.yh,Fr.bh),Fr.DISABLED=new Fr(Fr.vh,0,0);var Lr=function(){function t(t,e){this.eo=t,this.Oo=e,this.Fh=!1,this.Nh=null}return t.prototype.start=function(t){this.eo.$h.Ph!==Fr.vh&&this.kh(t)},t.prototype.stop=function(){this.Nh&&(this.Nh.cancel(),this.Nh=null)},Object.defineProperty(t.prototype,"pr",{get:function(){return null!==this.Nh},enumerable:!0,configurable:!0}),t.prototype.kh=function(t){var e=this,n=this.Fh?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Nh=this.Oo.ei("lru_garbage_collection",n,(function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:this.Nh=null,this.Fh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.xh(this.eo)];case 2:return n.sent(),[3,7];case 3:return Sr(e=n.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ur(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.kh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Mr=function(){function t(t,e){this.Mh=t,this.$h=e}return t.prototype.Lh=function(t,e){return this.Mh.so(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Oh=function(t,e){var n=this;if(0===e)return sn.resolve(hn.Qn);var r=new Pr(e);return this.Mh.ye(t,(function(t){return r.Eh(t.sequenceNumber)})).next((function(){return n.Mh.io(t,(function(t){return r.Eh(t)}))})).next((function(){return r.maxValue}))},t.prototype.ji=function(t,e,n){return this.Mh.ji(t,e,n)},t.prototype.uo=function(t,e){return this.Mh.uo(t,e)},t.prototype.Bh=function(t,e){var n=this;return this.$h.Ph===Fr.vh?(p("LruGarbageCollector","Garbage collection skipped; disabled"),sn.resolve(Nr)):this.lo(t).next((function(r){return r<n.$h.Ph?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.$h.Ph),Nr):n.qh(t,e)}))},t.prototype.lo=function(t){return this.Mh.lo(t)},t.prototype.qh=function(t,e){var n,r,i,s,a,c,l,u=this,h=Date.now();return this.Lh(t,this.$h.Vh).next((function(e){return e>u.$h.gh?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.$h.gh+" from "+e),r=u.$h.gh):r=e,s=Date.now(),u.Oh(t,r)})).next((function(r){return n=r,a=Date.now(),u.ji(t,n,e)})).next((function(e){return i=e,c=Date.now(),u.uo(t,n)})).next((function(t){return l=Date.now(),d()<=o.LogLevel.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(c-a)+"ms\n\tRemoved "+t+" documents in "+(l-c)+"ms\nTotal Duration: "+(l-h)+"ms"),sn.resolve({Ih:!0,Ah:r,Rh:i,mh:t})}))},t}(),Vr=function(){function t(t,e,n){this.persistence=t,this.Uh=e,this.Qh=new Y(_),this.Wh=new A((function(t){return Je(t)}),tn),this.jh=P.min(),this.Rn=t.zr(n),this.Kh=t.Jr(),this.Tr=t.Yr(),this.Gh=new ln(this.Kh,this.Rn,this.persistence.Xr()),this.Uh.zh(this.Gh)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Hh=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return e=this.Rn,n=this.Gh,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var i;return s.Rn.Ro(r).next((function(o){return i=o,e=s.persistence.zr(t),n=new ln(s.Kh,e,s.persistence.Xr()),e.Ro(r)})).next((function(t){for(var e=[],s=[],o=at(),a=0,c=i;a<c.length;a++){var l=c[a];e.push(l.batchId);for(var u=0,h=l.mutations;u<h.length;u++)o=o.add(h[u].key)}for(var d=0,p=t;d<p.length;d++){var f=p[d];s.push(f.batchId);for(var g=0,m=f.mutations;g<m.length;g++)o=o.add(m[g].key)}return n.yn(r,o).next((function(t){return{Yh:t,Jh:e,Xh:s}}))}))}))];case 1:return r=i.sent(),[2,(this.Rn=e,this.Gh=n,this.Uh.zh(this.Gh),r)]}}))}))},t.prototype.Zh=function(t){var e,n=this,r=R.now(),i=t.reduce((function(t,e){return t.add(e.key)}),at());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(s){return n.Gh.yn(s,i).next((function(i){e=i;for(var o=[],a=0,c=t;a<c.length;a++){var l=c[a],u=l.Ze(e.get(l.key));null!=u&&o.push(new ke(l.key,u,Ne(u.proto.mapValue),Ie.exists(!0)))}return n.Rn.wo(s,r,o,t)}))})).then((function(t){var n=t.Ks(e);return{batchId:t.batchId,on:n}}))},t.prototype.ta=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Kh.Vi({pi:!0});return e.ea(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.Rn.po(n)})).next((function(){return e.Gh.yn(n,r)}))}))},t.prototype.sa=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.Rn.To(n,t).next((function(t){return y(null!==t),r=t.keys(),e.Rn.Po(n,t)})).next((function(){return e.Rn.po(n)})).next((function(){return e.Gh.yn(n,r)}))}))},t.prototype.Ao=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Rn.Ao(e)}))},t.prototype.xi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Tr.xi(e)}))},t.prototype.na=function(e){var n=this,r=e.J,i=this.Qh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(s){var o=n.Kh.Vi({pi:!0});i=n.Qh;var a=[];e.Qt.forEach((function(e,o){var c=i.get(o);if(c){a.push(n.Tr.Yi(s,e.Xt,o).next((function(){return n.Tr.zi(s,e.Yt,o)})));var l=e.resumeToken;if(l.G()>0){var u=c.Z(l,r).X(s.sr);i=i.et(o,u),t.ia(c,u,e)&&a.push(n.Tr.Ui(s,u))}}}));var c=et(),l=at();if(e.jt.forEach((function(t,e){l=l.add(t)})),a.push(o.getEntries(s,l).next((function(t){e.jt.forEach((function(i,l){var u=t.get(i);l instanceof Me&&l.version.isEqual(P.min())?(o.ln(i,r),c=c.et(i,l)):null==u||l.version.o(u.version)>0||0===l.version.o(u.version)&&u.hasPendingWrites?(o.un(l,r),c=c.et(i,l)):p("LocalStore","Ignoring outdated watch update for ",i,". Current version:",u.version," Watch version:",l.version),e.Kt.has(i)&&a.push(n.persistence.Fi.co(s,i))}))}))),!r.isEqual(P.min())){var u=n.Tr.xi(s).next((function(t){return n.Tr.Li(s,s.sr,r)}));a.push(u)}return sn.nn(a).next((function(){return o.apply(s)})).next((function(){return n.Gh.bn(s,c)}))})).then((function(t){return n.Qh=i,t}))},t.ia=function(t,e,n){return y(e.resumeToken.G()>0),0===t.resumeToken.G()||e.J.A()-t.J.A()>=this.ra||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.oa=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s,o,a,c,l=this;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return sn.forEach(t,(function(t){return sn.forEach(t.xn,(function(n){return l.persistence.Fi.Hi(e,t.targetId,n)})).next((function(){return sn.forEach(t.Mn,(function(n){return l.persistence.Fi.Ji(e,t.targetId,n)}))}))}))}))];case 1:return i.sent(),[3,3];case 2:if(!Sr(e=i.sent()))throw e;return p("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)o=(s=r[n]).targetId,s.fromCache||(a=this.Qh.get(o),c=a.tt(a.J),this.Qh=this.Qh.et(o,c));return[2]}}))}))},t.prototype.ha=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.Rn.Io(n,t)}))},t.prototype.aa=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Gh.Pn(n,t)}))},t.prototype.ua=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Tr.Gi(n,t).next((function(i){return i?sn.resolve(r=i):e.Tr.Ni(n).next((function(i){return r=new $(t,i,0,n.sr),e.Tr.Oi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.Qh.get(n.targetId);return(null===r||n.J.o(r.J)>0)&&(e.Qh=e.Qh.et(n.targetId,n),e.Wh.set(t,n.targetId)),n}))},t.prototype.Gi=function(t,e){var n=this.Wh.get(e);return void 0!==n?sn.resolve(this.Qh.get(n)):this.Tr.Gi(t,e)},t.prototype.ca=function(t,e){var n=this,r=this.Qh.get(t);return this.persistence.runTransaction("Release target",e?"readwrite":"readwrite-primary",(function(t){return e?sn.resolve():n.persistence.Fi.removeTarget(t,r)})).then((function(){n.Qh=n.Qh.remove(t),n.Wh.delete(r.target)}))},t.prototype.la=function(t,e){var n=this,r=P.min(),i=at();return this.persistence.runTransaction("Execute query","readonly",(function(s){return n.Gi(s,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Tr.Xi(s,t.targetId).next((function(t){i=t}))})).next((function(){return n.Uh.Sn(s,t,e?r:P.min(),e?i:at())})).next((function(t){return{documents:t,_a:i}}))}))},t.prototype.ea=function(t,e,n){var r=this,i=e.batch,s=i.keys(),o=sn.resolve();return s.forEach((function(r){o=o.next((function(){return n._n(t,r)})).next((function(t){var s=t,o=e.zs.get(r);y(null!==o),(!s||s.version.o(o)<0)&&(s=i.Ke(r,s,e))&&n.un(s,e.Gs)}))})),o.next((function(){return r.Rn.Po(t,i)}))},t.prototype.xh=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Bh(n,e.Qh)}))},t}();Vr.ra=3e8;var jr=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.Rn=e.zr(r),i.Kh=e.Jr(),i.Tr=e.Yr(),i}return i.__extends(e,t),e.prototype.start=function(){return this.fa()},e.prototype.da=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.Rn.Eo(n,t).next((function(t){return t?e.Gh.yn(n,t):sn.resolve(null)}))}))},e.prototype.wa=function(t){this.Rn.Vo(t)},e.prototype.vr=function(t){this.persistence.vr(t)},e.prototype.Gr=function(){return this.persistence.Gr()},e.prototype.Ta=function(t){var e=this,n=this.Qh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Tr.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.Ri=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Kh.Ri(e,t.jh)})).then((function(e){var n=e.mi;return t.jh=e.readTime,n}))},e.prototype.fa=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Kh.Pi(t)}))];case 1:return t.jh=n.sent(),[2]}}))}))},e}(Vr);function Ur(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==O.FAILED_PRECONDITION||t.message!==an)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Br=function(){function t(){this.Ea=new X(zr.Ia),this.Aa=new X(zr.Ra)}return t.prototype._=function(){return this.Ea._()},t.prototype.Hi=function(t,e){var n=new zr(t,e);this.Ea=this.Ea.add(n),this.Aa=this.Aa.add(n)},t.prototype.ma=function(t,e){var n=this;t.forEach((function(t){return n.Hi(t,e)}))},t.prototype.Ji=function(t,e){this.Pa(new zr(t,e))},t.prototype.Va=function(t,e){var n=this;t.forEach((function(t){return n.Ji(t,e)}))},t.prototype.ga=function(t){var e=this,n=V.EMPTY,r=new zr(n,t),i=new zr(n,t+1),s=[];return this.Aa.vt([r,i],(function(t){e.Pa(t),s.push(t.key)})),s},t.prototype.pa=function(){var t=this;this.Ea.forEach((function(e){return t.Pa(e)}))},t.prototype.Pa=function(t){this.Ea=this.Ea.delete(t),this.Aa=this.Aa.delete(t)},t.prototype.ya=function(t){var e=V.EMPTY,n=new zr(e,t),r=new zr(e,t+1),i=at();return this.Aa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.tr=function(t){var e=new zr(t,0),n=this.Ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),zr=function(){function t(t,e){this.key=t,this.ba=e}return t.Ia=function(t,e){return V.P(t.key,e.key)||_(t.ba,e.ba)},t.Ra=function(t,e){return _(t.ba,e.ba)||V.P(t.key,e.key)},t}();function Hr(t,e){if(0!==e.length)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ai(e.length,"argument")+".")}function Gr(t,e,n){if(e.length!==n)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires "+ai(n,"argument")+", but was called with "+ai(e.length,"argument")+".")}function $r(t,e,n){if(e.length<n)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ai(n,"argument")+", but was called with "+ai(e.length,"argument")+".")}function qr(t,e,n,r){if(e.length<n||e.length>r)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ai(e.length,"argument")+".")}function Wr(t,e,n,r){Jr(t,e,oi(n)+" argument",r)}function Qr(t,e,n,r){void 0!==r&&Wr(t,e,n,r)}function Yr(t,e,n,r){Jr(t,e,n+" option",r)}function Kr(t,e,n,r){void 0!==r&&Yr(t,e,n,r)}function Zr(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var s=[],o=0,a=i;o<a.length;o++){var c=a[o];if(c===r)return;s.push(ei(c))}var l=ei(r);throw new D(O.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+s.join(", "))}(t,0,n,r,i)}function Xr(t,e,n,r){if(!e.some((function(t){return t===r})))throw new D(O.INVALID_ARGUMENT,"Invalid value "+ei(r)+" provided to function "+t+"() for its "+oi(n)+" argument. Acceptable values: "+e.join(", "));return r}function Jr(t,e,n,r){if(!("object"===e?ti(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=ei(r);throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function ti(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function ei(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m()}function ni(t,e,n){if(void 0===n)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+oi(e)+" argument, but it was undefined.")}function ri(t,e,n){x(e,(function(e,r){if(n.indexOf(e)<0)throw new D(O.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function ii(t,e,n,r){var i=ei(r);return new D(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+oi(n)+" argument to be a "+e+", but it was: "+i)}function si(t,e,n){if(n<=0)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+oi(e)+" argument to be a positive number, but it was: "+n+".")}function oi(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ai(t,e){return t+" "+e+(1===t?"":"s")}function ci(){if("undefined"==typeof Uint8Array)throw new D(O.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function li(){if("undefined"==typeof atob)throw new D(O.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ui=function(){function t(t){li(),this.va=t}return t.fromBase64String=function(e){Gr("Blob.fromBase64String",arguments,1),Wr("Blob.fromBase64String","string",1,e),li();try{return new t(z.fromBase64String(e))}catch(e){throw new D(O.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Gr("Blob.fromUint8Array",arguments,1),ci(),!(e instanceof Uint8Array))throw ii("Blob.fromUint8Array","Uint8Array",1,e);return new t(z.fromUint8Array(e))},t.prototype.toBase64=function(){return Gr("Blob.toBase64",arguments,0),li(),this.va.toBase64()},t.prototype.toUint8Array=function(){return Gr("Blob.toUint8Array",arguments,0),ci(),this.va.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.va.isEqual(t.va)},t}(),hi=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new D(O.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+ai(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Wr("FieldPath","string",e,t[e]),0===t[e].length)throw new D(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Sa=new M(t)},di=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i.__extends(e,t),e.documentId=function(){return e.Da},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","FieldPath",1,t);return this.Sa.isEqual(t.Sa)},e}(hi);di.Da=new di(M.O().N());var pi=new RegExp("[~\\*/\\[\\]]"),fi=function(){this.Ca=this},gi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return i.__extends(e,t),e.prototype.Na=function(t){if(2!==t.$a)throw t.ka(1===t.$a?this.Fa+"() can only appear at the top level of your update data":this.Fa+"() cannot be used with set() unless you pass {merge:true}");return t.Oe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fi),mi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return i.__extends(e,t),e.prototype.Na=function(t){return new Ce(t.path,ye.instance)},e.prototype.isEqual=function(t){return t instanceof e},e}(fi),yi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.xa=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new Ai({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map((function(t){return Di(t,e)})),r=new ve(n);return new Ce(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fi),vi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.xa=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new Ai({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map((function(t){return Di(t,e)})),r=new be(n);return new Ce(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fi),bi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Fa=e,r.La=n,r}return i.__extends(e,t),e.prototype.Na=function(t){var e=new Ai({$a:3,methodName:this.Fa},t.s,t.serializer,t.ignoreUndefinedProperties),n=Di(this.La,e),r=new we(t.serializer,n);return new Ce(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fi),wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.delete=function(){return Hr("FieldValue.delete",arguments),new _i(new gi("FieldValue.delete"))},e.serverTimestamp=function(){return Hr("FieldValue.serverTimestamp",arguments),new _i(new mi("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $r("FieldValue.arrayUnion",arguments,1),new _i(new yi("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $r("FieldValue.arrayRemove",arguments,1),new _i(new vi("FieldValue.arrayRemove",t))},e.increment=function(t){return Wr("FieldValue.increment","number",1,t),Gr("FieldValue.increment",arguments,1),new _i(new bi("FieldValue.increment",t))},e}(fi),_i=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ca=e,n.Fa=e.Fa,n}return i.__extends(e,t),e.prototype.Na=function(t){return this.Ca.Na(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.Ca.isEqual(t.Ca)},e}(wi),Si=function(){function t(t,e){if(Gr("GeoPoint",arguments,2),Wr("GeoPoint","number",1,t),Wr("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new D(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new D(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Oa=t,this.Ba=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Oa},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Ba},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.Oa===t.Oa&&this.Ba===t.Ba},t.prototype.T=function(t){return _(this.Oa,t.Oa)||_(this.Ba,t.Ba)},t}();function Ci(t){return new zt(t,!0)}var Ei=/^__.*__$/,Ii=function(t,e,n){this.qa=t,this.Ua=e,this.Qa=n},Ti=function(){function t(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}return t.prototype.Wa=function(t,e){var n=[];return n.push(null!==this.Oe?new ke(t,this.data,this.Oe,e):new xe(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ae(t,this.fieldTransforms)),n},t}(),xi=function(){function t(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}return t.prototype.Wa=function(t,e){var n=[new ke(t,this.data,this.Oe,e)];return this.fieldTransforms.length>0&&n.push(new Ae(t,this.fieldTransforms)),n},t}();function ki(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var Ai=function(){function t(t,e,n,r,i,s){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ja(),this.fieldTransforms=i||[],this.Oe=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$a",{get:function(){return this.settings.$a},enumerable:!0,configurable:!0}),t.prototype.Ka=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Oe)},t.prototype.Ga=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.za(t),r},t.prototype.Ha=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.ja(),r},t.prototype.Ya=function(t){return this.Ka({path:void 0,Ma:!0})},t.prototype.ka=function(t){var e=!this.path||this.path._()?"":" (found in field "+this.path.toString()+")";return new D(O.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.Oe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.ja=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.za(this.path.get(t))},t.prototype.za=function(t){if(0===t.length)throw this.ka("Document fields must not be empty");if(ki(this.$a)&&Ei.test(t))throw this.ka('Document fields cannot begin and end with "__"')},t}(),Oi=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ci(t)}return t.prototype.Ja=function(t,e,n){void 0===n&&(n={});var r=this.Xa(n.merge||n.mergeFields?2:0,t);Ni("Data must be an object, but it was:",r,e);var i,s,o=Ri(e,r);if(n.merge)i=new Se(r.Oe),s=r.fieldTransforms;else if(n.mergeFields){for(var a=[],c=0,l=n.mergeFields;c<l.length;c++){var u=l[c],h=void 0;if(u instanceof hi)h=u.Sa;else{if("string"!=typeof u)throw m();h=Li(t,u)}if(!r.contains(h))throw new D(O.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");Mi(a,h)||a.push(h)}i=new Se(a),s=r.fieldTransforms.filter((function(t){return i.ze(t.field)}))}else i=null,s=r.fieldTransforms;return new Ti(new Re(o),i,s)},t.prototype.Za=function(t,e){var n=this.Xa(1,t);Ni("Data must be an object, but it was:",n,e);var r=[],i=new Pe;x(e,(function(e,s){var o=Li(t,e),a=n.Ha(o);if(s instanceof fi&&s.Ca instanceof gi)r.push(o);else{var c=Di(s,a);null!=c&&(r.push(o),i.set(o,c))}}));var s=new Se(r);return new xi(i.ss(),s,n.fieldTransforms)},t.prototype.tu=function(t,e,n,r){var i=this.Xa(1,t),s=[Fi(t,e)],o=[n];if(r.length%2!=0)throw new D(O.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)s.push(Fi(t,r[a])),o.push(r[a+1]);for(var c=[],l=new Pe,u=s.length-1;u>=0;--u)if(!Mi(c,s[u])){var h=s[u],d=o[u],p=i.Ha(h);if(d instanceof fi&&d.Ca instanceof gi)c.push(h);else{var f=Di(d,p);null!=f&&(c.push(h),l.set(h,f))}}var g=new Se(c);return new xi(l.ss(),g,i.fieldTransforms)},t.prototype.Xa=function(t,e){return new Ai({$a:t,methodName:e,path:M.k,Ma:!1},this.s,this.serializer,this.ignoreUndefinedProperties)},t.prototype.eu=function(t,e,n){return void 0===n&&(n=!1),Di(e,this.Xa(n?4:3,t))},t}();function Di(t,e){if(Pi(t))return Ni("Unsupported field value:",e,t),Ri(t,e);if(t instanceof fi)return function(t,e){if(!ki(e.$a))throw e.ka(t.Fa+"() can only be used with update() and set()");if(!e.path)throw e.ka(t.Fa+"() is not currently supported inside arrays");var n=t.Na(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Oe.push(e.path),t instanceof Array){if(e.settings.Ma&&4!==e.$a)throw e.ka("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Di(s[i],e.Ya(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return function(t,e){return B(e)?Ht(e):Gt(t,e)}(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=R.fromDate(t);return{timestampValue:$t(e.serializer,n)}}if(t instanceof R){var r=new R(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$t(e.serializer,r)}}if(t instanceof Si)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ui)return{bytesValue:qt(e.serializer,t)};if(t instanceof Ii){var i=e.s,s=t.qa;if(!s.isEqual(i))throw e.ka("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Kt(t.qa||e.s,t.Ua.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ka("Unsupported field value: "+ei(t))}(t,e)}function Ri(t,e){var n={};return k(t)?e.path&&e.path.length>0&&e.Oe.push(e.path):x(t,(function(t,r){var i=Di(r,e.Ga(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Pi(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof R||t instanceof Si||t instanceof ui||t instanceof Ii||t instanceof fi)}function Ni(t,e,n){if(!Pi(n)||!ti(n)){var r=ei(n);throw e.ka("an object"===r?t+" a custom object":t+" "+r)}}function Fi(t,e){if(e instanceof hi)return e.Sa;if("string"==typeof e)return Li(t,e);throw new D(O.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Li(t,e){try{return function(t){if(t.search(pi)>=0)throw new D(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(di.bind.apply(di,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new D(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Sa}catch(e){var n=(r=e)instanceof Error?r.message:r.toString();throw new D(O.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}var r}function Mi(t,e){return t.some((function(t){return t.isEqual(e)}))}var Vi=function(){function t(t){this.uid=t}return t.prototype.fo=function(){return null!=this.uid},t.prototype.su=function(){return this.fo()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Vi.UNAUTHENTICATED=new Vi(null),Vi.nu=new Vi("google-credentials-uid"),Vi.iu=new Vi("first-party-uid");var ji=function(t,e){this.user=e,this.type="OAuth",this.ru={},this.ru.Authorization="Bearer "+t},Ui=function(){function t(){this.ou=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.hu=function(){},t.prototype.au=function(t){this.ou=t,t(Vi.UNAUTHENTICATED)},t.prototype.uu=function(){this.ou=null},t}(),Bi=function(){function t(t){var e=this;this.cu=null,this.currentUser=Vi.UNAUTHENTICATED,this.lu=!1,this._u=0,this.ou=null,this.forceRefresh=!1,this.cu=function(){e._u++,e.currentUser=e.fu(),e.lu=!0,e.ou&&e.ou(e.currentUser)},this._u=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.cu):(this.cu(null),t.get().then((function(t){e.auth=t,e.cu&&e.auth.addAuthTokenListener(e.cu)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this._u,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t._u!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(y("string"==typeof n.accessToken),new ji(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.hu=function(){this.forceRefresh=!0},t.prototype.au=function(t){this.ou=t,this.lu&&t(this.currentUser)},t.prototype.uu=function(){this.auth&&this.auth.removeAuthTokenListener(this.cu),this.cu=null,this.ou=null},t.prototype.fu=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new Vi(t)},t}(),zi=function(){function t(t,e){this.du=t,this.wu=e,this.type="FirstParty",this.user=Vi.iu}return Object.defineProperty(t.prototype,"ru",{get:function(){var t={"X-Goog-AuthUser":this.wu},e=this.du.auth.Tu([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Hi=function(){function t(t,e){this.du=t,this.wu=e}return t.prototype.getToken=function(){return Promise.resolve(new zi(this.du,this.wu))},t.prototype.au=function(t){t(Vi.iu)},t.prototype.uu=function(){},t.prototype.hu=function(){},t}(),Gi=function(){function t(t,e,n,r,i,s){this.Wn=t,this.Eu=n,this.Iu=r,this.Au=i,this.listener=s,this.state=0,this.Ru=0,this.mu=null,this.stream=null,this.Zo=new pn(t,e)}return t.prototype.Pu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Vu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.gu()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Pu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.pu=function(){this.state=0,this.Zo.reset()},t.prototype.yu=function(){var t=this;this.Vu()&&null===this.mu&&(this.mu=this.Wn.ei(this.Eu,6e4,(function(){return t.bu()})))},t.prototype.vu=function(t){this.Su(),this.stream.send(t)},t.prototype.bu=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Vu()?[2,this.close(0)]:[2]}))}))},t.prototype.Su=function(){this.mu&&(this.mu.cancel(),this.mu=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Su(),this.Zo.cancel(),this.Ru++,3!==t?this.Zo.reset():e&&e.code===O.RESOURCE_EXHAUSTED?(f(e.toString()),f("Using maximum backoff delay to prevent overloading the backend."),this.Zo.Xn()):e&&e.code===O.UNAUTHENTICATED&&this.Au.hu(),null!==this.stream&&(this.Du(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Cu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Du=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Fu(this.Ru),n=this.Ru;this.Au.getToken().then((function(e){t.Ru===n&&t.Nu(e)}),(function(n){e((function(){var e=new D(O.UNKNOWN,"Fetching auth token failed: "+n.message);return t.$u(e)}))}))},t.prototype.Nu=function(t){var e=this,n=this.Fu(this.Ru);this.stream=this.ku(t),this.stream.xu((function(){n((function(){return e.state=2,e.listener.xu()}))})),this.stream.Cu((function(t){n((function(){return e.$u(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.gu=function(){var t=this;this.state=4,this.Zo.Zn((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.$u=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Fu=function(t){var e=this;return function(n){e.Wn.Sr((function(){return e.Ru===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),$i=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).serializer=i,o}return i.__extends(e,t),e.prototype.ku=function(t){return this.Iu.Mu("Listen",t)},e.prototype.onMessage=function(t){this.Zo.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=Wt(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){var e=void 0===t.code?O.UNKNOWN:Q(t.code);return new D(e,t.message||"")}(o);n=new yt(r,i,s,a||null)}else if("documentChange"in e){var c=e.documentChange,l=Jt(t,c.document.name),u=Yt(c.document.updateTime),h=new Re({mapValue:{fields:c.document.fields}}),d=new Le(l,u,h,{});n=new gt(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){var p=e.documentDelete,f=Jt(t,p.document),g=p.readTime?Yt(p.readTime):P.min(),y=new Me(f,g);n=new gt([],p.removedTargetIds||[],y.key,y)}else if("documentRemove"in e){var v=e.documentRemove,b=Jt(t,v.document);n=new gt([],v.removedTargetIds||[],b,null)}else{if(!("filter"in e))return m();var w=e.filter,_=new q(w.count||0);n=new mt(w.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return P.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?P.min():e.readTime?Yt(e.readTime):P.min()}(t);return this.listener.Lu(e,n)},e.prototype.Ou=function(t){var e={};e.database=ne(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=en(r)?{documents:ae(t,r)}:{query:ce(t,r)}).targetId=e.targetId,e.resumeToken.G()>0&&(n.resumeToken=qt(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.Y);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.vu(e)},e.prototype.Bu=function(t){var e={};e.database=ne(this.serializer),e.removeTarget=t,this.vu(e)},e}(Gi),qi=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).serializer=i,o.qu=!1,o.lastStreamToken=z.H,o}return i.__extends(e,t),Object.defineProperty(e.prototype,"Uu",{get:function(){return this.qu},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.qu=!1,this.lastStreamToken=z.H,t.prototype.start.call(this)},e.prototype.Du=function(){this.qu&&this.Qu([])},e.prototype.ku=function(t){return this.Iu.Mu("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken),this.lastStreamToken=Wt(this.serializer,t.streamToken),this.qu){this.Zo.reset();var e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((function(t){return function(t,e){var n=Yt(t.updateTime?t.updateTime:e);n.isEqual(P.min())&&(n=Yt(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ee(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Yt(t.commitTime);return this.listener.Wu(n,e)}return y(!t.writeResults||0===t.writeResults.length),this.qu=!0,this.listener.ju()},e.prototype.Ku=function(){var t={};t.database=ne(this.serializer),this.vu(t)},e.prototype.Qu=function(t){var e=this,n={streamToken:qt(this.serializer,this.lastStreamToken),writes:t.map((function(t){return se(e.serializer,t)}))};this.vu(n)},e}(Gi),Wi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Iu=e,i.credentials=n,i.serializer=r,i.zu=!1,i}return i.__extends(e,t),e.prototype.Hu=function(){if(this.zu)throw new D(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Yu=function(t,e){var n=this;return this.Hu(),this.credentials.getToken().then((function(r){return n.Iu.Yu(t,e,r)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&n.credentials.hu(),t}))},e.prototype.Ju=function(t,e){var n=this;return this.Hu(),this.credentials.getToken().then((function(r){return n.Iu.Ju(t,e,r)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&n.credentials.hu(),t}))},e}((function(){this.Gu=void 0})),Qi=function(){function t(t){this.Xu=t,this.Zu=new Map,this.mutations=[],this.tc=!1,this.ec=null,this.sc=new Set}return t.prototype.nc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.ic(),this.mutations.length>0)throw new D(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(t),r={database:ne(n.serializer),documents:e.map((function(t){return Xt(n.serializer,t)}))},[4,n.Ju("BatchGetDocuments",r)];case 1:return s=i.sent(),o=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){y(!!e.found);var n=Jt(t,e.found.name),r=Yt(e.found.updateTime),i=new Re({mapValue:{fields:e.found.fields}});return new Le(n,r,i,{})}(t,e):"missing"in e?function(t,e){y(!!e.missing),y(!!e.readTime);var n=Jt(t,e.missing),r=Yt(e.readTime);return new Me(n,r)}(t,e):m()}(n.serializer,t);o.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=o.get(t.toString());y(!!e),a.push(e)})),a)]}}))}))}(this.Xu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Me||t instanceof Le?n.rc(t):m()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.Wa(t,this.Ue(t))),this.sc.add(t)},t.prototype.update=function(t,e){try{this.write(e.Wa(t,this.oc(t)))}catch(t){this.ec=t}this.sc.add(t)},t.prototype.delete=function(t){this.write([new Oe(t,this.Ue(t))]),this.sc.add(t)},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.ic(),this.ec)throw this.ec;return t=this.Zu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new V(F.$(n));e.mutations.push(new De(r,e.Ue(r)))})),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return n=v(t),r={database:ne(n.serializer),writes:e.map((function(t){return se(n.serializer,t)}))},[4,n.Yu("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Xu,this.mutations)];case 1:return n.sent(),this.tc=!0,[2]}}))}))},t.prototype.rc=function(t){var e;if(t instanceof Le)e=t.version;else{if(!(t instanceof Me))throw m();e=P.min()}var n=this.Zu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new D(O.ABORTED,"Document version changed between two reads.")}else this.Zu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Zu.get(t.toString());return!this.sc.has(t)&&e?Ie.updateTime(e):Ie.Qe()},t.prototype.oc=function(t){var e=this.Zu.get(t.toString());if(!this.sc.has(t)&&e){if(e.isEqual(P.min()))throw new D(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ie.updateTime(e)}return Ie.exists(!0)},t.prototype.write=function(t){this.ic(),this.mutations=this.mutations.concat(t)},t.prototype.ic=function(){},t}(),Yi=function(){function t(t,e){this.Oo=t,this.hc=e,this.state="Unknown",this.ac=0,this.uc=null,this.cc=!0}return t.prototype.lc=function(){var t=this;0===this.ac&&(this._c("Unknown"),this.uc=this.Oo.ei("online_state_timeout",1e4,(function(){return t.uc=null,t.fc("Backend didn't respond within 10 seconds."),t._c("Offline"),Promise.resolve()})))},t.prototype.dc=function(t){"Online"===this.state?this._c("Unknown"):(this.ac++,this.ac>=1&&(this.wc(),this.fc("Connection failed 1 times. Most recent error: "+t.toString()),this._c("Offline")))},t.prototype.set=function(t){this.wc(),this.ac=0,"Online"===t&&(this.cc=!1),this._c(t)},t.prototype._c=function(t){t!==this.state&&(this.state=t,this.hc(t))},t.prototype.fc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.cc?(f(e),this.cc=!1):p("OnlineStateTracker",e)},t.prototype.wc=function(){null!==this.uc&&(this.uc.cancel(),this.uc=null)},t}(),Ki=function(){function t(t,e,n,r,s){var o=this;this.Tc=t,this.Xu=e,this.Oo=n,this.Ec=[],this.Ic=new Map,this.Ac=null,this.Rc=new Set,this.mc=s,this.mc.Pc((function(t){n.Sr((function(){return i.__awaiter(o,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Vc()?(p("RemoteStore","Restarting streams for network reachability change."),[4,this.gc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.pc=new Yi(n,r),this.yc=function(t,e,n){var r=v(t);return new $i(e,r.Iu,r.credentials,r.serializer,n)}(this.Xu,n,{xu:this.bc.bind(this),Cu:this.vc.bind(this),Lu:this.Sc.bind(this)}),this.Dc=function(t,e,n){var r=v(t);return new qi(e,r.Iu,r.credentials,r.serializer,n)}(this.Xu,n,{xu:this.Cc.bind(this),Cu:this.Fc.bind(this),ju:this.Nc.bind(this),Wu:this.Wu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.Rc.delete(0),this.$c()},t.prototype.$c=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Vc()?(this.kc()?this.xc():this.pc.set("Unknown"),[4,this.Mc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Rc.add(0),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),[2]}}))}))},t.prototype.Lc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Dc.stop()];case 1:return t.sent(),[4,this.yc.stop()];case 2:return t.sent(),this.Ec.length>0&&(p("RemoteStore","Stopping write stream with "+this.Ec.length+" pending writes"),this.Ec=[]),this.Oc(),[2]}}))}))},t.prototype.Ur=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return p("RemoteStore","RemoteStore shutting down."),this.Rc.add(5),[4,this.Lc()];case 1:return t.sent(),this.mc.Ur(),this.pc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Ic.has(t.targetId)||(this.Ic.set(t.targetId,t),this.kc()?this.xc():this.yc.Vu()&&this.Bc(t))},t.prototype.qc=function(t){this.Ic.delete(t),this.yc.Vu()&&this.Uc(t),0===this.Ic.size&&(this.yc.Vu()?this.yc.yu():this.Vc()&&this.pc.set("Unknown"))},t.prototype.Me=function(t){return this.Ic.get(t)||null},t.prototype.xe=function(t){return this.Qc.xe(t)},t.prototype.Bc=function(t){this.Ac.de(t.targetId),this.yc.Ou(t)},t.prototype.Uc=function(t){this.Ac.de(t),this.yc.Bu(t)},t.prototype.xc=function(){this.Ac=new bt(this),this.yc.start(),this.pc.lc()},t.prototype.kc=function(){return this.Vc()&&!this.yc.Pu()&&this.Ic.size>0},t.prototype.Vc=function(){return 0===this.Rc.size},t.prototype.Oc=function(){this.Ac=null},t.prototype.bc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){return this.Ic.forEach((function(e,n){t.Bc(e)})),[2]}))}))},t.prototype.vc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.Oc(),this.kc()?(this.pc.dc(t),this.xc()):this.pc.set("Unknown"),[2]}))}))},t.prototype.Sc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:if(this.pc.set("Online"),!(t instanceof yt&&2===t.state&&t.cause))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this.Wc(t)];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.jc(n)];case 4:return i.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof gt?this.Ac.Pe(t):t instanceof mt?this.Ac.De(t):this.Ac.pe(t),e.isEqual(P.min()))return[3,13];i.label=7;case 7:return i.trys.push([7,11,,13]),[4,this.Tc.xi()];case 8:return r=i.sent(),e.o(r)>=0?[4,this.Kc(e)]:[3,10];case 9:i.sent(),i.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",s=i.sent()),[4,this.jc(s)];case 12:return i.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.jc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(!Sr(t))throw t;return this.Rc.add(1),[4,this.Lc()];case 1:return r.sent(),this.pc.set("Offline"),e||(e=function(){return n.Tc.xi()}),this.Oo.Cr((function(){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Rc.delete(1),[4,this.$c()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.Gc=function(t){var e=this;return t().catch((function(n){return e.jc(n,t)}))},t.prototype.Kc=function(t){var e=this,n=this.Ac.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.G()>0){var i=e.Ic.get(r);i&&e.Ic.set(r,i.Z(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Ic.get(t);if(n){e.Ic.set(t,n.Z(z.H,n.J)),e.Uc(t);var r=new $(n.target,t,1,n.sequenceNumber);e.Bc(r)}})),this.Qc.na(n)},t.prototype.Wc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:e=t.cause,n=0,r=t.targetIds,i.label=1;case 1:return n<r.length?this.Ic.has(s=r[n])?[4,this.Qc.zc(s,e)]:[3,3]:[3,5];case 2:i.sent(),this.Ic.delete(s),this.Ac.removeTarget(s),i.label=3;case 3:i.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Mc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){switch(r.label){case 0:t=this.Ec.length>0?this.Ec[this.Ec.length-1].batchId:-1,r.label=1;case 1:if(!this.Hc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Tc.ha(t)];case 3:return null===(e=r.sent())?(0===this.Ec.length&&this.Dc.yu(),[3,7]):(t=e.batchId,this.Yc(e),[3,6]);case 4:return n=r.sent(),[4,this.jc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Jc()&&this.Xc(),[2]}}))}))},t.prototype.Hc=function(){return this.Vc()&&this.Ec.length<10},t.prototype.Zc=function(){return this.Ec.length},t.prototype.Yc=function(t){this.Ec.push(t),this.Dc.Vu()&&this.Dc.Uu&&this.Dc.Qu(t.mutations)},t.prototype.Jc=function(){return this.Vc()&&!this.Dc.Pu()&&this.Ec.length>0},t.prototype.Xc=function(){this.Dc.start()},t.prototype.Cc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.Dc.Ku(),[2]}))}))},t.prototype.Nc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e;return i.__generator(this,(function(n){for(t=0,e=this.Ec;t<e.length;t++)this.Dc.Qu(e[t].mutations);return[2]}))}))},t.prototype.Wu=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.Ec.shift(),r=rn.from(n,t,e),[4,this.Gc((function(){return s.Qc.tl(r)}))];case 1:return i.sent(),[4,this.Mc()];case 2:return i.sent(),[2]}}))}))},t.prototype.Fc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t&&this.Dc.Uu?[4,this.el(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Jc()&&this.Xc(),[2]}}))}))},t.prototype.el=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return W(n=t.code)&&n!==O.ABORTED?(e=this.Ec.shift(),this.Dc.pu(),[4,this.Gc((function(){return r.Qc.sl(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Mc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.nl=function(){return new Qi(this.Xu)},t.prototype.gc=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Rc.add(4),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),this.Rc.delete(4),[4,this.$c()];case 2:return t.sent(),[2]}}))}))},t.prototype.il=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Oo.ah(),p("RemoteStore","RemoteStore received new credentials"),this.Rc.add(3),[4,this.Lc()];case 1:return e.sent(),this.pc.set("Unknown"),[4,this.Qc.il(t)];case 2:return e.sent(),this.Rc.delete(3),[4,this.$c()];case 3:return e.sent(),[2]}}))}))},t.prototype.rl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t?(this.Rc.delete(2),[4,this.$c()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Rc.add(2),[4,this.Lc()]);case 3:e.sent(),this.pc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function Zi(t,e){return"firestore_clients_"+t+"_"+e}function Xi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.fo()&&(r+="_"+e.uid),r}function Ji(t,e){return"firestore_targets_"+t+"_"+e}var ts=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ol=function(e,n,r){var i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new D(i.error.code,i.error.message)),s?new t(e,n,i.state,o):(f("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),es=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ol=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new D(r.error.code,r.error.message)),i?new t(e,r.state,s):(f("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ns=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ol=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=lt(),o=0;i&&o<r.activeTargetIds.length;++o)i=B(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(f("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rs=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ol=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(f("SharedClientState","Failed to parse online state: "+e),null)},t}(),is=function(){function t(){this.activeTargetIds=lt()}return t.prototype.al=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ul=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.hl=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ss=function(){function t(t,e,n,r,i){this.window=t,this.Wn=e,this.persistenceKey=n,this.cl=r,this.Qc=null,this.hc=null,this.On=null,this.ll=this._l.bind(this),this.fl=new Y(_),this.pr=!1,this.dl=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.wl=Zi(this.persistenceKey,this.cl),this.Tl=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.fl=this.fl.et(this.cl,new is),this.El=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Il=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Al=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Rl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ll)}return t._r=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,s,o,a,c,l,u,h=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.Qc.Gr()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.cl&&(s=this.getItem(Zi(this.persistenceKey,r)))&&(o=ns.ol(r,s))&&(this.fl=this.fl.et(o.clientId,o));for(this.ml(),(a=this.storage.getItem(this.Rl))&&(c=this.Pl(a))&&this.Vl(c),l=0,u=this.dl;l<u.length;l++)this._l(u[l]);return this.dl=[],this.window.addEventListener("unload",(function(){return h.Ur()})),this.pr=!0,[2]}}))}))},t.prototype.Un=function(t){this.setItem(this.Tl,JSON.stringify(t))},t.prototype.gl=function(){return this.pl(this.fl)},t.prototype.yl=function(t){var e=!1;return this.fl.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.bl=function(t){this.vl(t,"pending")},t.prototype.Sl=function(t,e,n){this.vl(t,e,n),this.Dl(t)},t.prototype.Cl=function(t){var e="not-current";if(this.yl(t)){var n=this.storage.getItem(Ji(this.persistenceKey,t));if(n){var r=es.ol(t,n);r&&(e=r.state)}}return this.Fl.al(t),this.ml(),e},t.prototype.Nl=function(t){this.Fl.ul(t),this.ml()},t.prototype.$l=function(t){return this.Fl.activeTargetIds.has(t)},t.prototype.kl=function(t){this.removeItem(Ji(this.persistenceKey,t))},t.prototype.xl=function(t,e,n){this.Ml(t,e,n)},t.prototype.Hh=function(t,e,n){var r=this;e.forEach((function(t){r.Dl(t)})),this.currentUser=t,n.forEach((function(t){r.bl(t)}))},t.prototype.Ll=function(t){this.Ol(t)},t.prototype.Ur=function(){this.pr&&(this.window.removeEventListener("storage",this.ll),this.removeItem(this.wl),this.pr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype._l=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(p("SharedClientState","EVENT",n.key,n.newValue),n.key===this.wl)return void f("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Wn.Cr((function(){return i.__awaiter(e,void 0,void 0,(function(){var t,e,r,s,o,a;return i.__generator(this,(function(i){if(this.pr){if(null!==n.key)if(this.El.test(n.key)){if(null==n.newValue)return t=this.Bl(n.key),[2,this.ql(t,null)];if(e=this.Ul(n.key,n.newValue))return[2,this.ql(e.clientId,e)]}else if(this.Il.test(n.key)){if(null!==n.newValue&&(r=this.Ql(n.key,n.newValue)))return[2,this.Wl(r)]}else if(this.Al.test(n.key)){if(null!==n.newValue&&(s=this.jl(n.key,n.newValue)))return[2,this.Kl(s)]}else if(n.key===this.Rl){if(null!==n.newValue&&(o=this.Pl(n.newValue)))return[2,this.Vl(o)]}else n.key===this.Tl&&(a=function(t){var e=hn.Qn;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n),e=n}catch(t){f("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==hn.Qn&&this.On(a)}else this.dl.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Fl",{get:function(){return this.fl.get(this.cl)},enumerable:!0,configurable:!0}),t.prototype.ml=function(){this.setItem(this.wl,this.Fl.hl())},t.prototype.vl=function(t,e,n){var r=new ts(this.currentUser,t,e,n),i=Xi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.hl())},t.prototype.Dl=function(t){var e=Xi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ol=function(t){this.storage.setItem(this.Rl,JSON.stringify({clientId:this.cl,onlineState:t}))},t.prototype.Ml=function(t,e,n){var r=Ji(this.persistenceKey,t),i=new es(t,e,n);this.setItem(r,i.hl())},t.prototype.Bl=function(t){var e=this.El.exec(t);return e?e[1]:null},t.prototype.Ul=function(t,e){var n=this.Bl(t);return ns.ol(n,e)},t.prototype.Ql=function(t,e){var n=this.Il.exec(t),r=Number(n[1]);return ts.ol(new Vi(void 0!==n[2]?n[2]:null),r,e)},t.prototype.jl=function(t,e){var n=this.Al.exec(t),r=Number(n[1]);return es.ol(r,e)},t.prototype.Pl=function(t){return rs.ol(t)},t.prototype.Wl=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Qc.Gl(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Kl=function(t){return this.Qc.zl(t.targetId,t.state,t.error)},t.prototype.ql=function(t,e){var n=this,r=e?this.fl.et(t,e):this.fl.remove(t),i=this.pl(this.fl),s=this.pl(r),o=[],a=[];return s.forEach((function(t){i.has(t)||o.push(t)})),i.forEach((function(t){s.has(t)||a.push(t)})),this.Qc.Hl(o,a).then((function(){n.fl=r}))},t.prototype.Vl=function(t){this.fl.get(t.clientId)&&this.hc(t.onlineState)},t.prototype.pl=function(t){var e=lt();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),os=function(){function t(){this.Yl=new is,this.Jl={},this.Qc=null,this.hc=null,this.On=null}return t.prototype.bl=function(t){},t.prototype.Sl=function(t,e,n){},t.prototype.Cl=function(t){return this.Yl.al(t),this.Jl[t]||"not-current"},t.prototype.xl=function(t,e,n){this.Jl[t]=e},t.prototype.Nl=function(t){this.Yl.ul(t)},t.prototype.$l=function(t){return this.Yl.activeTargetIds.has(t)},t.prototype.kl=function(t){delete this.Jl[t]},t.prototype.gl=function(){return this.Yl.activeTargetIds},t.prototype.yl=function(t){return this.Yl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Yl=new is,Promise.resolve()},t.prototype.Hh=function(t,e,n){},t.prototype.Ll=function(t){},t.prototype.Ur=function(){},t.prototype.Un=function(t){},t}(),as=function(t){this.key=t},cs=function(t){this.key=t},ls=function(){function t(t,e){this.query=t,this.Xl=e,this.Zl=null,this.Ht=!1,this.t_=at(),this.Ot=at(),this.e_=new ut(t.Ds.bind(t))}return Object.defineProperty(t.prototype,"s_",{get:function(){return this.Xl},enumerable:!0,configurable:!0}),t.prototype.n_=function(t,e){var n=this,r=e?e.i_:new ht,i=e?e.e_:this.e_,s=e?e.Ot:this.Ot,o=i,a=!1,c=this.query.ks()&&i.size===this.query.limit?i.last():null,l=this.query.xs()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var u=i.get(t),h=e instanceof Le?e:null;h&&(h=n.query.matches(h)?h:null);var d=!!u&&n.Ot.has(u.key),p=!!h&&(h.Xe||n.Ot.has(h.key)&&h.hasCommittedMutations),f=!1;u&&h?u.data().isEqual(h.data())?d!==p&&(r.track({type:3,doc:h}),f=!0):n.r_(u,h)||(r.track({type:2,doc:h}),f=!0,(c&&n.query.Ds(h,c)>0||l&&n.query.Ds(h,l)<0)&&(a=!0)):!u&&h?(r.track({type:0,doc:h}),f=!0):u&&!h&&(r.track({type:1,doc:u}),f=!0,(c||l)&&(a=!0)),f&&(h?(o=o.add(h),s=p?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))})),this.query.ks()||this.query.xs())for(;o.size>this.query.limit;){var u=this.query.ks()?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{e_:o,i_:r,o_:a,Ot:s}},t.prototype.r_=function(t,e){return t.Xe&&e.hasCommittedMutations&&!e.Xe},t.prototype.wn=function(t,e,n){var r=this,i=this.e_;this.e_=t.e_,this.Ot=t.Ot;var s=t.i_.Mt();s.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return n(t)-n(e)}(t.type,e.type)||r.query.Ds(t.doc,e.doc)})),this.h_(n);var o=e?this.a_():[],a=0===this.t_.size&&this.Ht?1:0,c=a!==this.Zl;return this.Zl=a,0!==s.length||c?{snapshot:new dt(this.query,t.e_,i,s,t.Ot,0===a,c,!1),u_:o}:{u_:o}},t.prototype.c_=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.wn({e_:this.e_,i_:new ht,Ot:this.Ot,o_:!1},!1)):{u_:[]}},t.prototype.l_=function(t){return!this.Xl.has(t)&&!!this.e_.has(t)&&!this.e_.get(t).Xe},t.prototype.h_=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Xl=e.Xl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Xl=e.Xl.delete(t)})),this.Ht=t.Ht)},t.prototype.a_=function(){var t=this;if(!this.Ht)return[];var e=this.t_;this.t_=at(),this.e_.forEach((function(e){t.l_(e.key)&&(t.t_=t.t_.add(e.key))}));var n=[];return e.forEach((function(e){t.t_.has(e)||n.push(new cs(e))})),this.t_.forEach((function(t){e.has(t)||n.push(new as(t))})),n},t.prototype.__=function(t){this.Xl=t._a,this.t_=at();var e=this.n_(t.documents);return this.wn(e,!0)},t.prototype.f_=function(){return dt.Ut(this.query,this.e_,this.Ot,0===this.Zl)},t}(),us=function(){function t(t,e,n,r){this.Oo=t,this.Xu=e,this.updateFunction=n,this.Uo=r,this.d_=5,this.Zo=new pn(this.Oo,"transaction_retry")}return t.prototype.w_=function(){this.T_()},t.prototype.T_=function(){var t=this;this.Zo.Zn((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(r){return t=new Qi(this.Xu),(e=this.E_(t))&&e.then((function(e){n.Oo.Sr((function(){return t.commit().then((function(){n.Uo.resolve(e)})).catch((function(t){n.I_(t)}))}))})).catch((function(t){n.I_(t)})),[2]}))}))}))},t.prototype.E_=function(t){try{var e=this.updateFunction(t);return!j(e)&&e.catch&&e.then?e:(this.Uo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Uo.reject(t),null}},t.prototype.I_=function(t){var e=this;this.d_>0&&this.A_(t)?(this.d_-=1,this.Oo.Sr((function(){return e.T_(),Promise.resolve()}))):this.Uo.reject(t)},t.prototype.A_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!W(e)}return!1},t}(),hs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ds=function(t){this.key=t,this.R_=!1},ps=function(){function t(t,e,n,r,i,s){this.Tc=t,this.m_=e,this.Xu=n,this.P_=r,this.currentUser=i,this.V_=s,this.g_=null,this.p_=new A((function(t){return t.canonicalId()}),(function(t,e){return t.isEqual(e)})),this.y_=new Map,this.b_=[],this.v_=new Y(V.P),this.S_=new Map,this.D_=new Br,this.C_={},this.F_=new Map,this.N_=Mn.Ci(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"k_",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){this.g_=t},t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("listen()"),(n=this.p_.get(t))?(this.P_.Cl(n.targetId),e=n.view.f_(),[3,4]):[3,1];case 1:return[4,this.Tc.ua(t.We())];case 2:return r=i.sent(),s=this.P_.Cl(r.targetId),[4,this.M_(t,r.targetId,"current"===s)];case 3:e=i.sent(),this.k_&&this.m_.listen(r),i.label=4;case 4:return[2,e]}}))}))},t.prototype.M_=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,s,o,a,c,l;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.Tc.la(t,!0)];case 1:return r=i.sent(),s=new ls(t,r._a),o=s.n_(r.documents),a=ft.zt(e,n&&"Offline"!==this.onlineState),c=s.wn(o,this.k_,a),this.L_(e,c.u_),l=new hs(t,e,s),[2,(this.p_.set(t,l),this.y_.has(e)?this.y_.get(e).push(t):this.y_.set(e,[t]),c.snapshot)]}}))}))},t.prototype.qc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("unlisten()"),e=this.p_.get(t),(n=this.y_.get(e.targetId)).length>1?[2,(this.y_.set(e.targetId,n.filter((function(e){return!e.isEqual(t)}))),void this.p_.delete(t))]:this.k_?(this.P_.Nl(e.targetId),this.P_.yl(e.targetId)?[3,2]:[4,this.Tc.ca(e.targetId,!1).then((function(){r.P_.kl(e.targetId),r.m_.qc(e.targetId),r.O_(e.targetId)})).catch(Ur)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.O_(e.targetId),[4,this.Tc.ca(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:this.x_("write()"),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,this.Tc.Zh(t)];case 2:return n=i.sent(),this.P_.bl(n.batchId),this.B_(n.batchId,e),[4,this.q_(n.on)];case 3:return i.sent(),[4,this.m_.Mc()];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),s=Dr(r,"Failed to persist write"),e.reject(s),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new us(t,this.Xu,e,n).w_()},t.prototype.na=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.na(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.S_.get(e);r&&(y(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.R_=!0:t.Jt.size>0?y(r.R_):t.Xt.size>0&&(y(r.R_),r.R_=!1))})),[4,this.q_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Ur(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.c_=function(t,e){this.x_("applyOnlineStateChange()");var n=[];this.p_.forEach((function(e,r){var i=r.view.c_(t);i.snapshot&&n.push(i.snapshot)})),this.g_.U_(t),this.g_.Lu(n),this.onlineState=t},t.prototype.zc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,a,c=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("rejectListens()"),this.P_.xl(t,"rejected",e),n=this.S_.get(t),(r=n&&n.key)?(s=(s=new Y(V.P)).et(r,new Me(r,P.min())),o=at().add(r),a=new pt(P.min(),new Map,new X(_),s,o),[4,this.na(a)]):[3,2];case 1:return i.sent(),this.v_=this.v_.remove(r),this.S_.delete(t),this.Q_(),[3,4];case 2:return[4,this.Tc.ca(t,!1).then((function(){return c.O_(t,e)})).catch(Ur)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype.tl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.ta(t)];case 2:return n=r.sent(),this.W_(e,null),this.j_(e),this.P_.Sl(e,"acknowledged"),[4,this.q_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ur(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.sl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.x_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Tc.sa(t)];case 2:return n=r.sent(),this.W_(t,e),this.j_(t),this.P_.Sl(t,"rejected",e),[4,this.q_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ur(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.K_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:this.m_.Vc()||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.Tc.Ao()];case 2:return-1===(e=i.sent())?[2,void t.resolve()]:((n=this.F_.get(e)||[]).push(t),this.F_.set(e,n),[3,4]);case 3:return r=i.sent(),s=Dr(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))},t.prototype.j_=function(t){(this.F_.get(t)||[]).forEach((function(t){t.resolve()})),this.F_.delete(t)},t.prototype.G_=function(t){this.F_.forEach((function(e){e.forEach((function(e){e.reject(new D(O.CANCELLED,t))}))})),this.F_.clear()},t.prototype.B_=function(t,e){var n=this.C_[this.currentUser.su()];n||(n=new Y(_)),n=n.et(t,e),this.C_[this.currentUser.su()]=n},t.prototype.W_=function(t,e){var n=this.C_[this.currentUser.su()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.C_[this.currentUser.su()]=n}},t.prototype.O_=function(t,e){var n=this;void 0===e&&(e=null),this.P_.Nl(t);for(var r=0,i=this.y_.get(t);r<i.length;r++){var s=i[r];this.p_.delete(s),e&&this.g_.z_(s,e)}this.y_.delete(t),this.k_&&this.D_.ga(t).forEach((function(t){n.D_.tr(t)||n.H_(t)}))},t.prototype.H_=function(t){var e=this.v_.get(t);null!==e&&(this.m_.qc(e),this.v_=this.v_.remove(t),this.S_.delete(e),this.Q_())},t.prototype.L_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof as?(this.D_.Hi(i.key,t),this.Y_(i)):i instanceof cs?(p("SyncEngine","Document no longer in limbo: "+i.key),this.D_.Ji(i.key,t),this.D_.tr(i.key)||this.H_(i.key)):m()}},t.prototype.Y_=function(t){var e=t.key;this.v_.get(e)||(p("SyncEngine","New document in limbo: "+e),this.b_.push(e),this.Q_())},t.prototype.Q_=function(){for(;this.b_.length>0&&this.v_.size<this.V_;){var t=this.b_.shift(),e=this.N_.next();this.S_.set(e,new ds(t)),this.v_=this.v_.et(t,e),this.m_.listen(new $(je.As(t.path).We(),e,2,hn.Qn))}},t.prototype.J_=function(){return this.v_},t.prototype.X_=function(){return this.b_},t.prototype.q_=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=[],r=[],s=[],this.p_.forEach((function(i,a){s.push(Promise.resolve().then((function(){var e=a.view.n_(t);return e.o_?o.Tc.la(a.query,!1).then((function(t){return a.view.n_(t.documents,e)})):e})).then((function(t){var i=e&&e.Qt.get(a.targetId),s=a.view.wn(t,o.k_,i);if(o.L_(a.targetId,s.u_),s.snapshot){o.k_&&o.P_.xl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var c=un.Ln(a.targetId,s.snapshot);r.push(c)}})))})),[4,Promise.all(s)];case 1:return i.sent(),this.g_.Lu(n),[4,this.Tc.oa(r)];case 2:return i.sent(),[2]}}))}))},t.prototype.x_=function(t){},t.prototype.il=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(p("SyncEngine","User change. New user:",t.su()),[4,this.Tc.Hh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.G_("'waitForPendingWrites' promise is rejected due to a user change."),this.P_.Hh(t,e.Jh,e.Xh),[4,this.q_(e.Yh)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.m_.enableNetwork()},t.prototype.disableNetwork=function(){return this.m_.disableNetwork()},t.prototype.xe=function(t){var e=this.S_.get(t);if(e&&e.R_)return at().add(e.key);var n=at(),r=this.y_.get(t);if(!r)return n;for(var i=0,s=r;i<s.length;i++){var o=this.p_.get(s[i]);n=n.Ct(o.view.s_)}return n},t}(),fs=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,s,o)||this).Tc=e,a.Z_=void 0,a}return i.__extends(e,t),Object.defineProperty(e.prototype,"k_",{get:function(){return!0===this.Z_},enumerable:!0,configurable:!0}),e.prototype.enableNetwork=function(){return this.Tc.vr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Tc.vr(!1),t.prototype.disableNetwork.call(this)},e.prototype.tf=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this.Tc.la(t.query,!0)];case 1:return e=r.sent(),n=t.view.__(e),[2,(this.Z_&&this.L_(t.targetId,n.u_),n)]}}))}))},e.prototype.c_=function(e,n){this.k_&&0===n&&(t.prototype.c_.call(this,e,n),this.P_.Ll(e)),this.k_||1!==n||t.prototype.c_.call(this,e,n)},e.prototype.Gl=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){switch(i.label){case 0:return this.x_("applyBatchState()"),[4,this.Tc.da(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.m_.Mc()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.W_(t,n||null),this.Tc.wa(t)):m(),i.label=4;case 4:return[4,this.q_(r)];case 5:return i.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.rl=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s,o,a,c=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!0!==t||!0===this.Z_?[3,3]:(e=this.P_.gl(),[4,this.ef(e.F(),!0)]);case 1:return n=i.sent(),this.Z_=!0,[4,this.m_.rl(!0)];case 2:for(i.sent(),r=0,s=n;r<s.length;r++)this.m_.listen(s[r]);return[3,7];case 3:return!1!==t||!1===this.Z_?[3,7]:(o=[],a=Promise.resolve(),this.y_.forEach((function(t,e){c.P_.$l(e)?o.push(e):a=a.then((function(){return c.O_(e),c.Tc.ca(e,!0)})),c.m_.qc(e)})),[4,a]);case 4:return i.sent(),[4,this.ef(o,!1)];case 5:return i.sent(),this.sf(),this.Z_=!1,[4,this.m_.rl(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},e.prototype.sf=function(){var t=this;this.S_.forEach((function(e,n){t.m_.qc(n)})),this.D_.pa(),this.S_=new Map,this.v_=new Y(V.P)},e.prototype.ef=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s,o,a,c,l,u,h,d,p;return i.__generator(this,(function(i){switch(i.label){case 0:e=[],n=[],r=0,s=t,i.label=1;case 1:return r<s.length?(a=void 0,(c=this.y_.get(o=s[r]))&&0!==c.length?[4,this.Tc.ua(c[0].We())]:[3,7]):[3,13];case 2:a=i.sent(),l=0,u=c,i.label=3;case 3:return l<u.length?(h=this.p_.get(u[l]),[4,this.tf(h)]):[3,6];case 4:(d=i.sent()).snapshot&&n.push(d.snapshot),i.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,this.Tc.Ta(o)];case 8:return p=i.sent(),[4,this.Tc.ua(p)];case 9:return a=i.sent(),[4,this.M_(this.nf(p),o,!1)];case 10:i.sent(),i.label=11;case 11:e.push(a),i.label=12;case 12:return r++,[3,1];case 13:return[2,(this.g_.Lu(n),e)]}}))}))},e.prototype.nf=function(t){return new je(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Gr=function(){return this.Tc.Gr()},e.prototype.zl=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,s;return i.__generator(this,(function(i){switch(i.label){case 0:return this.Z_?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.y_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Tc.Ri()];case 3:return r=i.sent(),s=pt.Gt(t,"current"===e),[4,this.q_(r,s)];case 4:return i.sent(),[3,8];case 5:return[4,this.Tc.ca(t,!0)];case 6:return i.sent(),this.O_(t,n),[3,8];case 7:m(),i.label=8;case 8:return[2]}}))}))},e.prototype.Hl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,s,o,a,c,l,u,h,d=this;return i.__generator(this,(function(f){switch(f.label){case 0:if(!this.Z_)return[3,10];n=0,r=t,f.label=1;case 1:return n<r.length?this.y_.has(s=r[n])?(p("SyncEngine","Adding an already active target "+s),[3,5]):[4,this.Tc.Ta(s)]:[3,6];case 2:return o=f.sent(),[4,this.Tc.ua(o)];case 3:return a=f.sent(),[4,this.M_(this.nf(o),a.targetId,!1)];case 4:f.sent(),this.m_.listen(a),f.label=5;case 5:return n++,[3,1];case 6:c=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return l.y_.has(t)?[4,l.Tc.ca(t,!1).then((function(){d.m_.qc(t),d.O_(t)})).catch(Ur)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=this,u=0,h=e,f.label=7;case 7:return u<h.length?[5,c(h[u])]:[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},e}(ps),gs=function(){this.if=void 0,this.rf=[]},ms=function(){function t(t){this.Qc=t,this.hf=new A((function(t){return t.canonicalId()}),(function(t,e){return t.isEqual(e)})),this.onlineState="Unknown",this.af=new Set,this.Qc.subscribe(this)}return t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:if(n=!1,(r=this.hf.get(e=t.query))||(n=!0,r=new gs),!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),s=r,[4,this.Qc.listen(e)];case 2:return s.if=i.sent(),[3,4];case 3:return o=i.sent(),a=Dr(o,"Initialization of query '"+t.query+"' failed"),[2,void t.onError(a)];case 4:return this.hf.set(e,r),r.rf.push(t),t.c_(this.onlineState),r.if&&t.uf(r.if)&&this.cf(),[2]}}))}))},t.prototype.qc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,s;return i.__generator(this,(function(i){return n=!1,(r=this.hf.get(e=t.query))&&(s=r.rf.indexOf(t))>=0&&(r.rf.splice(s,1),n=0===r.rf.length),n?[2,(this.hf.delete(e),this.Qc.qc(e))]:[2]}))}))},t.prototype.Lu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],s=this.hf.get(i.query);if(s){for(var o=0,a=s.rf;o<a.length;o++)a[o].uf(i)&&(e=!0);s.if=i}}e&&this.cf()},t.prototype.z_=function(t,e){var n=this.hf.get(t);if(n)for(var r=0,i=n.rf;r<i.length;r++)i[r].onError(e);this.hf.delete(t)},t.prototype.U_=function(t){this.onlineState=t;var e=!1;this.hf.forEach((function(n,r){for(var i=0,s=r.rf;i<s.length;i++)s[i].c_(t)&&(e=!0)})),e&&this.cf()},t.prototype.lf=function(t){this.af.add(t),t.next()},t.prototype._f=function(t){this.af.delete(t)},t.prototype.cf=function(){this.af.forEach((function(t){t.next()}))},t}(),ys=function(){function t(t,e,n){this.query=t,this.ff=e,this.df=!1,this.wf=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.uf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new dt(t.query,t.docs,t.Lt,e,t.Ot,t.fromCache,t.Bt,!0)}var s=!1;return this.df?this.Tf(t)&&(this.ff.next(t),s=!0):this.Ef(t,this.onlineState)&&(this.If(t),s=!0),this.wf=t,s},t.prototype.onError=function(t){this.ff.error(t)},t.prototype.c_=function(t){this.onlineState=t;var e=!1;return this.wf&&!this.df&&this.Ef(this.wf,t)&&(this.If(this.wf),e=!0),e},t.prototype.Ef=function(t,e){return!t.fromCache||!(this.options.Af&&"Offline"!==e||t.docs._()&&"Offline"!==e)},t.prototype.Tf=function(t){return t.docChanges.length>0||!!(t.Bt||this.wf&&this.wf.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.If=function(t){t=dt.Ut(t.query,t.docs,t.Ot,t.fromCache),this.df=!0,this.ff.next(t)},t}(),vs=function(){function t(){}return t.prototype.zh=function(t){this.Rf=t},t.prototype.Sn=function(t,e,n,r){var i=this;return e.Ss()||n.isEqual(P.min())?this.mf(t,e):this.Rf.yn(t,r).next((function(s){var a=i.Pf(e,s);return(e.ks()||e.xs())&&i.o_(e.ws,a,r,n)?i.mf(t,e):(d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Rf.Sn(t,e,n).next((function(t){return a.forEach((function(e){t=t.et(e.key,e)})),t})))}))},t.prototype.Pf=function(t,e){var n=new X((function(e,n){return t.Ds(e,n)}));return e.forEach((function(e,r){r instanceof Le&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.o_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.mf=function(t,e){return d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Rf.Sn(t,e,P.min())},t}(),bs=function(){function t(t,e){this.mn=t,this.Fi=e,this.Rn=[],this.Vf=1,this.gf=new X(zr.Ia)}return t.prototype.do=function(t){return sn.resolve(0===this.Rn.length)},t.prototype.wo=function(t,e,n,r){var i=this.Vf;this.Vf++;var s=new nn(i,e,n,r);this.Rn.push(s);for(var o=0,a=r;o<a.length;o++){var c=a[o];this.gf=this.gf.add(new zr(c.key,i)),this.mn.ri(t,c.key.path.p())}return sn.resolve(s)},t.prototype.To=function(t,e){return sn.resolve(this.pf(e))},t.prototype.Io=function(t,e){var n=this.yf(e+1),r=n<0?0:n;return sn.resolve(this.Rn.length>r?this.Rn[r]:null)},t.prototype.Ao=function(){return sn.resolve(0===this.Rn.length?-1:this.Vf-1)},t.prototype.Ro=function(t){return sn.resolve(this.Rn.slice())},t.prototype.Vn=function(t,e){var n=this,r=new zr(e,0),i=new zr(e,Number.POSITIVE_INFINITY),s=[];return this.gf.vt([r,i],(function(t){var e=n.pf(t.ba);s.push(e)})),sn.resolve(s)},t.prototype.vn=function(t,e){var n=this,r=new X(_);return e.forEach((function(t){var e=new zr(t,0),i=new zr(t,Number.POSITIVE_INFINITY);n.gf.vt([e,i],(function(t){r=r.add(t.ba)}))})),sn.resolve(this.bf(r))},t.prototype.$n=function(t,e){var n=e.path,r=n.length+1,i=n;V.W(i)||(i=i.child(""));var s=new zr(new V(i),0),o=new X(_);return this.gf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(o=o.add(t.ba)),!0)}),s),sn.resolve(this.bf(o))},t.prototype.bf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.pf(t);null!==r&&n.push(r)})),n},t.prototype.Po=function(t,e){var n=this;y(0===this.vf(e.batchId,"removed")),this.Rn.shift();var r=this.gf;return sn.forEach(e.mutations,(function(i){var s=new zr(i.key,e.batchId);return r=r.delete(s),n.Fi.oo(t,i.key)})).next((function(){n.gf=r}))},t.prototype.Vo=function(t){},t.prototype.tr=function(t,e){var n=new zr(e,0),r=this.gf.Dt(n);return sn.resolve(e.isEqual(r&&r.key))},t.prototype.po=function(t){return sn.resolve()},t.prototype.vf=function(t,e){return this.yf(t)},t.prototype.yf=function(t){return 0===this.Rn.length?0:t-this.Rn[0].batchId},t.prototype.pf=function(t){var e=this.yf(t);return e<0||e>=this.Rn.length?null:this.Rn[e]},t}(),ws=function(){function t(t,e){this.mn=t,this.Sf=e,this.docs=new Y(V.P),this.size=0}return t.prototype.un=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.Sf(e);return this.docs=this.docs.et(r,{fi:e,size:o,readTime:n}),this.size+=o-s,this.mn.ri(t,r.path.p())},t.prototype.ln=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._n=function(t,e){var n=this.docs.get(e);return sn.resolve(n?n.fi:null)},t.prototype.getEntries=function(t,e){var n=this,r=nt();return e.forEach((function(t){var e=n.docs.get(t);r=r.et(t,e?e.fi:null)})),sn.resolve(r)},t.prototype.Sn=function(t,e,n){for(var r=it(),i=new V(e.path.child("")),s=this.docs.ut(i);s.wt();){var o=s.dt(),a=o.value,c=a.fi,l=a.readTime;if(!e.path.D(o.key.path))break;l.o(n)<=0||c instanceof Le&&e.matches(c)&&(r=r.et(c.key,c))}return sn.resolve(r)},t.prototype.Df=function(t,e){return sn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Vi=function(e){return new t.gi(this)},t.prototype.yi=function(t){return sn.resolve(this.size)},t}();ws.gi=function(t){function e(e){var n=this;return(n=t.call(this)||this).bi=e,n}return i.__extends(e,t),e.prototype.wn=function(t){var e=this,n=[];return this.on.forEach((function(r,i){i?n.push(e.bi.un(t,i,e.readTime)):e.bi.ln(r)})),sn.nn(n)},e.prototype.fn=function(t,e){return this.bi._n(t,e)},e.prototype.dn=function(t,e){return this.bi.getEntries(t,e)},e}(on);var _s=function(){function t(t){this.persistence=t,this.Cf=new A((function(t){return Je(t)}),tn),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Ff=0,this.Nf=new Br,this.targetCount=0,this.$f=Mn.Di()}return t.prototype.ye=function(t,e){return this.Cf.forEach((function(t,n){return e(n)})),sn.resolve()},t.prototype.xi=function(t){return sn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Mi=function(t){return sn.resolve(this.Ff)},t.prototype.Ni=function(t){return this.highestTargetId=this.$f.next(),sn.resolve(this.highestTargetId)},t.prototype.Li=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ff&&(this.Ff=e),sn.resolve()},t.prototype.Bi=function(t){this.Cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.$f=new Mn(e),this.highestTargetId=e),t.sequenceNumber>this.Ff&&(this.Ff=t.sequenceNumber)},t.prototype.Oi=function(t,e){return this.Bi(e),this.targetCount+=1,sn.resolve()},t.prototype.Ui=function(t,e){return this.Bi(e),sn.resolve()},t.prototype.Qi=function(t,e){return this.Cf.delete(e.target),this.Nf.ga(e.targetId),this.targetCount-=1,sn.resolve()},t.prototype.ji=function(t,e,n){var r=this,i=0,s=[];return this.Cf.forEach((function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Cf.delete(o),s.push(r.Wi(t,a.targetId)),i++)})),sn.nn(s).next((function(){return i}))},t.prototype.Ki=function(t){return sn.resolve(this.targetCount)},t.prototype.Gi=function(t,e){var n=this.Cf.get(e)||null;return sn.resolve(n)},t.prototype.zi=function(t,e,n){return this.Nf.ma(e,n),sn.resolve()},t.prototype.Yi=function(t,e,n){this.Nf.Va(e,n);var r=this.persistence.Fi,i=[];return r&&e.forEach((function(e){i.push(r.oo(t,e))})),sn.nn(i)},t.prototype.Wi=function(t,e){return this.Nf.ga(e),sn.resolve()},t.prototype.Xi=function(t,e){var n=this.Nf.ya(e);return sn.resolve(n)},t.prototype.tr=function(t,e){return sn.resolve(this.Nf.tr(e))},t}(),Ss=function(){function t(t){var e=this;this.kf={},this.rr=new hn(0),this.or=!1,this.or=!0,this.Fi=t(this),this.Tr=new _s(this),this.mn=new vn,this.An=new ws(this.mn,(function(t){return e.Fi.xf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Ur=function(){return this.or=!1,Promise.resolve()},Object.defineProperty(t.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),t.prototype.yr=function(){},t.prototype.Xr=function(){return this.mn},t.prototype.zr=function(t){var e=this.kf[t.su()];return e||(e=new bs(this.mn,this.Fi),this.kf[t.su()]=e),e},t.prototype.Yr=function(){return this.Tr},t.prototype.Jr=function(){return this.An},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Cs(this.rr.next());return this.Fi.Mf(),n(i).next((function(t){return r.Fi.Lf(i).next((function(){return t}))})).en().then((function(t){return i.In(),t}))},t.prototype.Of=function(t,e){return sn.rn(Object.values(this.kf).map((function(n){return function(){return n.tr(t,e)}})))},t}(),Cs=function(t){function e(e){var n=this;return(n=t.call(this)||this).sr=e,n}return i.__extends(e,t),e}(cn),Es=function(){function t(t){this.persistence=t,this.Bf=new Br,this.qf=null}return t.Uf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Qf",{get:function(){if(this.qf)return this.qf;throw m()},enumerable:!0,configurable:!0}),t.prototype.Hi=function(t,e,n){return this.Bf.Hi(n,e),this.Qf.delete(n),sn.resolve()},t.prototype.Ji=function(t,e,n){return this.Bf.Ji(n,e),this.Qf.add(n),sn.resolve()},t.prototype.oo=function(t,e){return this.Qf.add(e),sn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Bf.ga(e.targetId).forEach((function(t){return n.Qf.add(t)}));var r=this.persistence.Yr();return r.Xi(t,e.targetId).next((function(t){t.forEach((function(t){return n.Qf.add(t)}))})).next((function(){return r.Qi(t,e)}))},t.prototype.Mf=function(){this.qf=new Set},t.prototype.Lf=function(t){var e=this,n=this.persistence.Jr().Vi();return sn.forEach(this.Qf,(function(r){return e.Wf(t,r).next((function(t){t||n.ln(r)}))})).next((function(){return e.qf=null,n.apply(t)}))},t.prototype.co=function(t,e){var n=this;return this.Wf(t,e).next((function(t){t?n.Qf.delete(e):n.Qf.add(e)}))},t.prototype.xf=function(t){return 0},t.prototype.Wf=function(t,e){var n=this;return sn.rn([function(){return sn.resolve(n.Bf.tr(e))},function(){return n.persistence.Yr().tr(t,e)},function(){return n.persistence.Of(t,e)}])},t}(),Is=function(){function t(t){this.jf=t.jf,this.Kf=t.Kf}return t.prototype.xu=function(t){this.Gf=t},t.prototype.Cu=function(t){this.zf=t},t.prototype.onMessage=function(t){this.Hf=t},t.prototype.close=function(){this.Kf()},t.prototype.send=function(t){this.jf(t)},t.prototype.Yf=function(){this.Gf()},t.prototype.Jf=function(t){this.zf(t)},t.prototype.Xf=function(t){this.Hf(t)},t}(),Ts={BatchGetDocuments:"batchGet",Commit:"commit"},xs="gl-js/ fire/"+u,ks=function(){function t(t){this.s=t.s,this.Zf=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.td=function(t,e){if(e)for(var n in e.ru)e.ru.hasOwnProperty(n)&&(t[n]=e.ru[n]);t["X-Goog-Api-Client"]=xs},t.prototype.Yu=function(t,e,n){var r=this,i=this.ed(t);return new Promise((function(s,o){var a=new c.XhrIo;a.listenOnce(c.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var e=a.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),s(e);break;case c.ErrorCode.TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),o(new D(O.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(O).indexOf(e)>=0?e:O.UNKNOWN}(r.status);o(new D(i,r.message))}else o(new D(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else p("Connection",'RPC "'+t+'" failed'),o(new D(O.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var l=Object.assign({},e);delete l.database;var u=JSON.stringify(l);p("Connection","XHR sending: ",i+" "+u);var h={"Content-Type":"text/plain"};r.td(h,n),a.send(i,"POST",u,h,15)}))},t.prototype.Ju=function(t,e,n){return this.Yu(t,e,n)},t.prototype.Mu=function(t,e){var n=[this.Zf,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=c.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.td(s.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");p("Connection","Creating WebChannel: "+l+" "+s);var d=r.createWebChannel(l,s),f=!1,m=!1,v=new Is({jf:function(t){m?p("Connection","Not sending because WebChannel is closed:",t):(f||(p("Connection","Opening WebChannel transport."),d.open(),f=!0),p("Connection","WebChannel sending:",t),d.send(t))},Kf:function(){return d.close()}}),b=function(t,e){d.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return b(c.WebChannel.EventType.OPEN,(function(){m||p("Connection","WebChannel transport opened.")})),b(c.WebChannel.EventType.CLOSE,(function(){m||(m=!0,p("Connection","WebChannel transport closed"),v.Jf())})),b(c.WebChannel.EventType.ERROR,(function(t){m||(m=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.WARN){var r=e.map(g);h.warn.apply(h,i.__spreadArrays(["Firestore ("+u+"): "+t],r))}}("Connection","WebChannel transport errored:",t),v.Jf(new D(O.UNAVAILABLE,"The operation could not be completed")))})),b(c.WebChannel.EventType.MESSAGE,(function(t){var e;if(!m){var n=t.data[0];y(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){p("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=H[t];if(void 0!==e)return Q(e)}(i),o=r.message;void 0===s&&(s=O.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),m=!0,v.Jf(new D(s,o)),d.close()}else p("Connection","WebChannel received:",n),v.Xf(n)}})),setTimeout((function(){v.Yf()}),0),v},t.prototype.ed=function(t){return this.Zf+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+Ts[t]},t}(),As=function(){function t(){var t=this;this.sd=function(){return t.nd()},this.rd=function(){return t.od()},this.hd=[],this.ad()}return t.prototype.Pc=function(t){this.hd.push(t)},t.prototype.Ur=function(){window.removeEventListener("online",this.sd),window.removeEventListener("offline",this.rd)},t.prototype.ad=function(){window.addEventListener("online",this.sd),window.addEventListener("offline",this.rd)},t.prototype.nd=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(0)},t.prototype.od=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(1)},t._r=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Os=function(){function t(){}return t.prototype.Pc=function(t){},t.prototype.Ur=function(){},t}(),Ds="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Rs=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.P_=this.ud(t),this.persistence=this.ld(t),[4,this.persistence.start()];case 1:return n.sent(),this._d=this.fd(t),this.Tc=this.dd(t),this.m_=this.wd(t),this.Qc=this.Td(t),this.Ed=this.Id(t),this.P_.hc=function(t){return e.Qc.c_(t,1)},this.m_.Qc=this.Qc,[4,this.Tc.start()];case 2:return n.sent(),[4,this.P_.start()];case 3:return n.sent(),[4,this.m_.start()];case 4:return n.sent(),[4,this.m_.rl(this.Qc.k_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Id=function(t){return new ms(this.Qc)},t.prototype.fd=function(t){return null},t.prototype.dd=function(t){return new Vr(this.persistence,new vs,t.Ad)},t.prototype.ld=function(t){if(t.md.Rd)throw new D(O.FAILED_PRECONDITION,Ds);return new Ss(Es.Uf)},t.prototype.wd=function(t){var e=this;return new Ki(this.Tc,t.Xu,t.Oo,(function(t){return e.Qc.c_(t,0)}),As._r()?new As:new Os)},t.prototype.ud=function(t){return new os},t.prototype.Td=function(t){return new ps(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_)},t.prototype.clearPersistence=function(t){throw new D(O.FAILED_PRECONDITION,Ds)},t}(),Ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.gr((function(t){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,this.Qc.rl(t)];case 1:return e.sent(),this._d&&(t&&!this._d.pr?this._d.start(this.Tc):t||this._d.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.dd=function(t){return new jr(this.persistence,new vs,t.Ad)},e.prototype.Td=function(t){var e=new fs(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_);return this.P_ instanceof ss&&(this.P_.Qc=e),e},e.prototype.fd=function(t){return new Lr(this.persistence.Fi.eo,t.Oo)},e.prototype.ld=function(t){var e=Gn.to(t.Pd),n=Ci(t.Pd.s);return new Gn(t.md.synchronizeTabs,e,t.clientId,Fr.ph(t.md.cacheSizeBytes),t.Oo,kr(),"undefined"!=typeof document?document:null,n,this.P_,t.md.ir)},e.prototype.ud=function(t){if(t.md.Rd&&t.md.synchronizeTabs){var e=kr();if(!ss._r(e))throw new D(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gn.to(t.Pd);return new ss(e,t.Oo,n,t.clientId,t.Ad)}return new os},e.prototype.clearPersistence=function(t){var e=Gn.to(t);return Gn.clearPersistence(e)},e}(Rs),Ns=function(){function t(t,e,n){this.Pd=t,this.credentials=e,this.Oo=n,this.clientId=w.t()}return t.prototype.start=function(t,e){var n=this;this.Hu();var r=new dn,i=new dn,s=!1;return this.credentials.au((function(o){if(!s)return s=!0,p("FirestoreClient","Initializing. user=",o.uid),n.Vd(t,e,o,i).then(r.resolve,r.reject);n.Oo.Cr((function(){return n.m_.il(o)}))})),this.Oo.Sr((function(){return r.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue((function(){return t.Qc.enableNetwork()}))},t.prototype.Vd=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var s,o,a,c,l,u=this;return i.__generator(this,(function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,(l=this.Pd,Promise.resolve(new ks(l)))];case 1:return s=h.sent(),o=Ci(this.Pd.s),a=function(t,e,n){return new Wi(t,e,n)}(s,this.credentials,o),[4,t.initialize({Oo:this.Oo,Pd:this.Pd,Xu:a,clientId:this.clientId,Ad:n,V_:100,md:e})];case 2:return h.sent(),this.persistence=t.persistence,this.P_=t.P_,this.Tc=t.Tc,this.m_=t.m_,this.Qc=t.Qc,this._d=t._d,this.gd=t.Ed,this.persistence.yr((function(){return i.__awaiter(u,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(c=h.sent(),r.reject(c),!this.pd(c))throw c;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),this.Vd(new Rs,{Rd:!1},n,r))];case 4:return[2]}}))}))},t.prototype.pd=function(t){return"FirebaseError"===t.name?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Hu=function(){if(this.Oo.eh)throw new D(O.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue((function(){return t.Qc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Oo.oh((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this._d&&this._d.stop(),[4,this.m_.Ur()];case 1:return t.sent(),[4,this.P_.Ur()];case 2:return t.sent(),[4,this.persistence.Ur()];case 3:return t.sent(),this.credentials.uu(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Hu();var e=new dn;return this.Oo.Sr((function(){return t.Qc.K_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Hu();var i=new ys(t,e,n);return this.Oo.Sr((function(){return r.gd.listen(i)})),i},t.prototype.qc=function(t){var e=this;this.yd||this.Oo.Sr((function(){return e.gd.qc(t)}))},t.prototype.bd=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Hu(),e=new dn,[4,this.Oo.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,s;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.Tc.aa(t)];case 1:return(n=i.sent())instanceof Le?e.resolve(n):n instanceof Me?e.resolve(null):e.reject(new D(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),s=Dr(r,"Failed to get document '"+t+" from cache"),e.reject(s),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.vd=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.Hu(),e=new dn,[4,this.Oo.enqueue((function(){return i.__awaiter(n,void 0,void 0,(function(){var n,r,s,o,a,c;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.Tc.la(t,!0)];case 1:return n=i.sent(),r=new ls(t,n._a),s=r.n_(n.documents),o=r.wn(s,!1),e.resolve(o.snapshot),[3,3];case 2:return a=i.sent(),c=Dr(a,"Failed to execute query '"+t+" against cache"),e.reject(c),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Hu();var n=new dn;return this.Oo.Sr((function(){return e.Qc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Pd.s},t.prototype.lf=function(t){var e=this;this.Hu(),this.Oo.Sr((function(){return e.gd.lf(t),Promise.resolve()}))},t.prototype._f=function(t){var e=this;this.yd||this.Oo.Sr((function(){return e.gd._f(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"yd",{get:function(){return this.Oo.eh},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Hu();var n=new dn;return this.Oo.Sr((function(){return e.Qc.runTransaction(e.Oo,t,n),Promise.resolve()})),n.promise},t}(),Fs=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Sd(this.observer.next,t)},t.prototype.error=function(t){this.Sd(this.observer.error,t)},t.prototype.Dd=function(){this.muted=!0},t.prototype.Sd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Ls(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}var Ms=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Cd=n,this.Fd=r}return t.prototype.Nd=function(t){switch(It(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.$d(t.timestampValue);case 4:return this.kd(t);case 5:return t.stringValue;case 6:return new ui(Pt(t.bytesValue));case 7:return this.xd(t.referenceValue);case 8:return this.Md(t.geoPointValue);case 9:return this.Ld(t.arrayValue);case 10:return this.Od(t.mapValue);default:throw m()}},t.prototype.Od=function(t){var e=this,n={};return x(t.fields||{},(function(t,r){n[t]=e.Nd(r)})),n},t.prototype.Md=function(t){return new Si(Rt(t.latitude),Rt(t.longitude))},t.prototype.Ld=function(t){var e=this;return(t.values||[]).map((function(t){return e.Nd(t)}))},t.prototype.kd=function(t){switch(this.Cd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return St(n)?t(n):n}(t);return null==e?null:this.Nd(e);case"estimate":return this.$d(Ct(t));default:return null}},t.prototype.$d=function(t){var e=Dt(t),n=new R(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.xd=function(t){var e=F.$(t);y(me(e));var n=new I(e.get(1),e.get(3)),r=new V(e.g(5));return n.isEqual(this.s)||f("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Fd(r)},t}(),Vs=Fr.vh,js=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new D(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Yr("settings","non-empty string","host",t.host),this.host=t.host,Kr("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(ri("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Kr("settings","object","credentials",t.credentials),this.credentials=t.credentials,Kr("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Kr("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?f("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&f("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Kr("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Fr.Dh;else{if(t.cacheSizeBytes!==Vs&&t.cacheSizeBytes<Fr.Sh)throw new D(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Fr.Sh);this.cacheSizeBytes=t.cacheSizeBytes}Kr("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Us=function(){function t(e,n,r){var s=this;if(void 0===r&&(r=new Rs),this.Bd=null,this.qd=new Or,this.INTERNAL={delete:function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Ud(),[4,this.Qd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.Bd=o,this.qa=t.Wd(o),this.jd=o.name,this.Kd=new Bi(n)}else{var a=e;if(!a.projectId)throw new D(O.INVALID_ARGUMENT,"Must provide projectId");this.qa=new I(a.projectId,a.database),this.jd="[DEFAULT]",this.Kd=new Ui}this.Gd=r,this.zd=new js({})}return Object.defineProperty(t.prototype,"Hd",{get:function(){return this.Yd||(this.Yd=new Oi(this.qa,this.zd.ignoreUndefinedProperties)),this.Yd},enumerable:!0,configurable:!0}),t.prototype.settings=function(t){Gr("Firestore.settings",arguments,1),Wr("Firestore.settings","object",1,t);var e=new js(t);if(this.Qd&&!this.zd.isEqual(e))throw new D(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.zd=e,void 0!==e.credentials&&(this.Kd=function(t){if(!t)return new Ui;switch(t.type){case"gapi":var e=t.Jd;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Hi(e,t.wu||"0");case"provider":return t.Jd;default:throw new D(O.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Ud(),this.Qd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Ud(),this.Qd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Qd)throw new D(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&f("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new D(O.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Xd(this.Gd,{Rd:!0,cacheSizeBytes:this.zd.cacheSizeBytes,synchronizeTabs:r,ir:i})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.Qd&&!this.Qd.yd)throw new D(O.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return t=new dn,[2,(this.qd.sh((function(){return i.__awaiter(e,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Zd(),[4,this.Gd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"tw",{get:function(){return this.Ud(),this.Qd.yd},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Ud(),this.Qd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.Ud(),Ls(t)?this.ew(t):(Wr("Firestore.onSnapshotsInSync","function",1,t),this.ew({next:t}))},t.prototype.ew=function(t){var e=this,n=new Fs({next:function(){t.next&&t.next()},error:function(t){throw m()}});return this.Qd.lf(n),function(){n.Dd(),e.Qd._f(n)}},t.prototype.Ud=function(){return this.Qd||this.Xd(new Rs,{Rd:!1}),this.Qd},t.prototype.Zd=function(){return new E(this.qa,this.jd,this.zd.host,this.zd.ssl,this.zd.forceLongPolling)},t.prototype.Xd=function(t,e){var n=this.Zd();return this.Qd=new Ns(n,this.Kd,this.qd),this.Qd.start(t,e)},t.Wd=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new D(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new D(O.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new I(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Bd)throw new D(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bd},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return Gr("Firestore.collection",arguments,1),Wr("Firestore.collection","non-empty string",1,t),this.Ud(),new Ys(F.$(t),this,null)},t.prototype.doc=function(t){return Gr("Firestore.doc",arguments,1),Wr("Firestore.doc","non-empty string",1,t),this.Ud(),Hs.sw(F.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Gr("Firestore.collectionGroup",arguments,1),Wr("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new D(O.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Ud(),new Ws(new je(F.k,t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Gr("Firestore.runTransaction",arguments,1),Wr("Firestore.runTransaction","function",1,t),this.Ud().transaction((function(n){return t(new Bs(e,n))}))},t.prototype.batch=function(){return this.Ud(),new zs(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){Gr("Firestore.setLogLevel",arguments,1),Xr("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),h.setLogLevel(t)},t.prototype.nw=function(){return this.zd.timestampsInSnapshots},t}(),Bs=function(){function t(t,e){this.iw=t,this.rw=e}return t.prototype.get=function(t){var e=this;Gr("Transaction.get",arguments,1);var n=Js("Transaction.get",t,this.iw);return this.rw.nc([n.Ua]).then((function(t){if(!t||1!==t.length)return m();var r=t[0];if(r instanceof Me)return new $s(e.iw,n.Ua,null,!1,!1,n.Qa);if(r instanceof Le)return new $s(e.iw,n.Ua,r,!1,!1,n.Qa);throw m()}))},t.prototype.set=function(t,e,n){qr("Transaction.set",arguments,2,3);var r=Js("Transaction.set",t,this.iw);n=Ks("Transaction.set",n);var i=eo(r.Qa,e,"Transaction.set"),s=i[0],o=i[1],a=this.iw.Hd.Ja(o,s,n);return this.rw.set(r.Ua,a),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return"string"==typeof e||e instanceof di?($r("Transaction.update",arguments,3),r=Js("Transaction.update",t,this.iw),i=this.iw.Hd.tu("Transaction.update",e,n,s)):(Gr("Transaction.update",arguments,2),r=Js("Transaction.update",t,this.iw),i=this.iw.Hd.Za("Transaction.update",e)),this.rw.update(r.Ua,i),this},t.prototype.delete=function(t){Gr("Transaction.delete",arguments,1);var e=Js("Transaction.delete",t,this.iw);return this.rw.delete(e.Ua),this},t}(),zs=function(){function t(t){this.iw=t,this.ow=[],this.hw=!1}return t.prototype.set=function(t,e,n){qr("WriteBatch.set",arguments,2,3),this.aw();var r=Js("WriteBatch.set",t,this.iw);n=Ks("WriteBatch.set",n);var i=eo(r.Qa,e,"WriteBatch.set"),s=i[0],o=i[1],a=this.iw.Hd.Ja(o,s,n);return this.ow=this.ow.concat(a.Wa(r.Ua,Ie.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return this.aw(),"string"==typeof e||e instanceof di?($r("WriteBatch.update",arguments,3),r=Js("WriteBatch.update",t,this.iw),i=this.iw.Hd.tu("WriteBatch.update",e,n,s)):(Gr("WriteBatch.update",arguments,2),r=Js("WriteBatch.update",t,this.iw),i=this.iw.Hd.Za("WriteBatch.update",e)),this.ow=this.ow.concat(i.Wa(r.Ua,Ie.exists(!0))),this},t.prototype.delete=function(t){Gr("WriteBatch.delete",arguments,1),this.aw();var e=Js("WriteBatch.delete",t,this.iw);return this.ow=this.ow.concat(new Oe(e.Ua,Ie.Qe())),this},t.prototype.commit=function(){return this.aw(),this.hw=!0,this.ow.length>0?this.iw.Ud().write(this.ow):Promise.resolve()},t.prototype.aw=function(){if(this.hw)throw new D(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Hs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.qa,e,r)||this).Ua=e,i.firestore=n,i.Qa=r,i.Qd=i.firestore.Ud(),i}return i.__extends(e,t),e.sw=function(t,n,r){if(t.length%2!=0)throw new D(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new V(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ys(this.Ua.path.p(),this.firestore,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ua.path.N()},enumerable:!0,configurable:!0}),e.prototype.collection=function(t){if(Gr("DocumentReference.collection",arguments,1),Wr("DocumentReference.collection","non-empty string",1,t),!t)throw new D(O.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=F.$(t);return new Ys(this.Ua.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Ua.isEqual(t.Ua)&&this.Qa===t.Qa},e.prototype.set=function(t,e){qr("DocumentReference.set",arguments,1,2),e=Ks("DocumentReference.set",e);var n=eo(this.Qa,t,"DocumentReference.set"),r=n[0],i=n[1],s=this.firestore.Hd.Ja(i,r,e);return this.Qd.write(s.Wa(this.Ua,Ie.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof di?($r("DocumentReference.update",arguments,2),n=this.firestore.Hd.tu("DocumentReference.update",t,e,r)):(Gr("DocumentReference.update",arguments,1),n=this.firestore.Hd.Za("DocumentReference.update",t)),this.Qd.write(n.Wa(this.Ua,Ie.exists(!0)))},e.prototype.delete=function(){return Gr("DocumentReference.delete",arguments,0),this.Qd.write([new Oe(this.Ua,Ie.Qe())])},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qr("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Ls(t[i])||(ri("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Kr("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var s={includeMetadataChanges:r.includeMetadataChanges};return Ls(t[i])?n=t[i]:(Wr("DocumentReference.onSnapshot","function",i,t[i]),Qr("DocumentReference.onSnapshot","function",i+1,t[i+1]),Qr("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.uw(s,n)},e.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fs({next:function(t){if(e.next){var r=t.docs.get(n.Ua);e.next(new $s(n.firestore,n.Ua,r,t.fromCache,t.hasPendingWrites,n.Qa))}},error:r}),s=this.Qd.listen(je.As(this.Ua.path),i,t);return function(){i.Dd(),n.Qd.qc(s)}},e.prototype.get=function(t){var e=this;return qr("DocumentReference.get",arguments,0,1),Xs("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Ud().bd(e.Ua).then((function(t){n(new $s(e.firestore,e.Ua,t,!0,t instanceof Le&&t.Xe,e.Qa))}),r):e.cw(n,r,t)}))},e.prototype.cw=function(t,e,n){var r=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new D(O.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new D(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},e.prototype.withConverter=function(t){return new e(this.Ua,this.firestore,t)},e}(Ii),Gs=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),$s=function(){function t(t,e,n,r,i,s){this.iw=t,this.Ua=e,this.lw=n,this._w=r,this.fw=i,this.Qa=s}return t.prototype.data=function(t){var e=this;if(qr("DocumentSnapshot.data",arguments,0,1),t=Zs("DocumentSnapshot.data",t),this.lw){if(this.Qa){var n=new qs(this.iw,this.Ua,this.lw,this._w,this.fw,null);return this.Qa.fromFirestore(n,t)}return new Ms(this.iw.qa,this.iw.nw(),t.serverTimestamps||"none",(function(t){return new Hs(t,e.iw,null)})).Nd(this.lw.fs())}},t.prototype.get=function(t,e){var n=this;if(qr("DocumentSnapshot.get",arguments,1,2),e=Zs("DocumentSnapshot.get",e),this.lw){var r=this.lw.data().field(Fi("DocumentSnapshot.get",t));if(null!==r)return new Ms(this.iw.qa,this.iw.nw(),e.serverTimestamps||"none",(function(t){return new Hs(t,n.iw,n.Qa)})).Nd(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hs(this.Ua,this.iw,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Gs(this.fw,this._w)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw ii("isEqual","DocumentSnapshot",1,e);return this.iw===e.iw&&this._w===e._w&&this.Ua.isEqual(e.Ua)&&(null===this.lw?null===e.lw:this.lw.isEqual(e.lw))&&this.Qa===e.Qa},t}(),qs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}($s),Ws=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.qa,n.Hd,e)||this).dw=e,i.firestore=n,i.Qa=r,i}return i.__extends(e,t),e.prototype.where=function(t,n,r){Gr("Query.where",arguments,3),ni("Query.where",3,r);var i=Xr("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),s=Fi("Query.where",t),o=this.ww(s,i,r);return new e(this.dw.Ps(o),this.firestore,this.Qa)},e.prototype.orderBy=function(t,n){var r;if(qr("Query.orderBy",arguments,1,2),Qr("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new D(O.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Fi("Query.orderBy",t),s=this.Aw(i,r);return new e(this.dw.Vs(s),this.firestore,this.Qa)},e.prototype.limit=function(t){return Gr("Query.limit",arguments,1),Wr("Query.limit","number",1,t),si("Query.limit",1,t),new e(this.dw.gs(t),this.firestore,this.Qa)},e.prototype.limitToLast=function(t){return Gr("Query.limitToLast",arguments,1),Wr("Query.limitToLast","number",1,t),si("Query.limitToLast",1,t),new e(this.dw.ps(t),this.firestore,this.Qa)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];$r("Query.startAt",arguments,1);var i=this.pw("Query.startAt",t,n,!0);return new e(this.dw.ys(i),this.firestore,this.Qa)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];$r("Query.startAfter",arguments,1);var i=this.pw("Query.startAfter",t,n,!1);return new e(this.dw.ys(i),this.firestore,this.Qa)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];$r("Query.endBefore",arguments,1);var i=this.pw("Query.endBefore",t,n,!0);return new e(this.dw.bs(i),this.firestore,this.Qa)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];$r("Query.endAt",arguments,1);var i=this.pw("Query.endAt",t,n,!1);return new e(this.dw.bs(i),this.firestore,this.Qa)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ii("isEqual","Query",1,t);return this.firestore===t.firestore&&this.dw.isEqual(t.dw)&&this.Qa===t.Qa},e.prototype.withConverter=function(t){return new e(this.dw,this.firestore,t)},e.prototype.pw=function(t,e,n,r){if(ni(t,1,e),e instanceof $s)return Gr(t,i.__spreadArrays([e],n),1),this.mw(t,e.lw,r);var s=[e].concat(n);return this.Pw(t,s,r)},e.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qr("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Ls(t[i])||(ri("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Kr("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Ls(t[i])?n=t[i]:(Wr("Query.onSnapshot","function",i,t[i]),Qr("Query.onSnapshot","function",i+1,t[i+1]),Qr("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Vw(this.dw),this.uw(r,n)},e.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Fs({next:function(t){e.next&&e.next(new Qs(n.firestore,n.dw,t,n.Qa))},error:r}),s=this.firestore.Ud(),o=s.listen(this.dw,i,t);return function(){i.Dd(),s.qc(o)}},e.prototype.get=function(t){var e=this;return qr("Query.get",arguments,0,1),Xs("Query.get",t),this.Vw(this.dw),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Ud().vd(e.dw).then((function(t){n(new Qs(e.firestore,e.dw,t,e.Qa))}),r):e.cw(n,r,t)}))},e.prototype.cw=function(t,e,n){var r=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new D(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},e}(function(){function t(t,e,n){this.qa=t,this.Hd=e,this.dw=n}return t.prototype.ww=function(t,e,n){var r;if(t.L()){if("array-contains"===e||"array-contains-any"===e)throw new D(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Tw(n,e);for(var i=[],s=0,o=n;s<o.length;s++)i.push(this.Ew(o[s]));r={arrayValue:{values:i}}}else r=this.Ew(n)}else"in"!==e&&"array-contains-any"!==e||this.Tw(n,e),r=this.Hd.eu("Query.where",n,"in"===e);var a=Ue.create(t,e,r);return this.Iw(a),a},t.prototype.Aw=function(t,e){if(null!==this.dw.startAt)throw new D(O.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.dw.endAt)throw new D(O.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Ke(t,e);return this.Rw(n),n},t.prototype.mw=function(t,e,n){if(!e)throw new D(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,s=this.dw.orderBy;i<s.length;i++){var o=s[i];if(o.field.L())r.push(Nt(this.qa,e.key));else{var a=e.field(o.field);if(St(a))throw new D(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var c=o.field.N();throw new D(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(a)}}return new qe(r,n)},t.prototype.Pw=function(t,e,n){var r=this.dw.ds;if(e.length>r.length)throw new D(O.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],s=0;s<e.length;s++){var o=e[s];if(r[s].field.L()){if("string"!=typeof o)throw new D(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof o);if(!this.dw.Bs()&&-1!==o.indexOf("/"))throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+o+"' contains a slash.");var a=this.dw.path.child(F.$(o));if(!V.W(a))throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var c=new V(a);i.push(Nt(this.qa,c))}else{var l=this.Hd.eu(t,o);i.push(l)}}return new qe(i,n)},t.prototype.Vw=function(t){if(t.xs()&&0===t.ds.length)throw new D(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.Ew=function(t){if("string"==typeof t){if(""===t)throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.dw.Bs()&&-1!==t.indexOf("/"))throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.dw.path.child(F.$(t));if(!V.W(e))throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Nt(this.qa,new V(e))}if(t instanceof Ii)return Nt(this.qa,t.Ua);throw new D(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ei(t)+".")},t.prototype.Tw=function(t,e){if(!Array.isArray(t)||0===t.length)throw new D(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new D(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new D(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new D(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Iw=function(t){if(t instanceof Ue){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Ms()){var s=this.dw.Rs();if(null!==s&&!s.isEqual(t.field))throw new D(O.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+s.toString()+"' and '"+t.field.toString()+"'");var o=this.dw.ms();null!==o&&this.gw(t.field,o)}else if(i||r){var a=null;if(i&&(a=this.dw.Ls(n)),null===a&&r&&(a=this.dw.Ls(e)),null!=a)throw new D(O.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Rw=function(t){if(null===this.dw.ms()){var e=this.dw.Rs();null!==e&&this.gw(e,t.field)}},t.prototype.gw=function(t,e){if(!e.isEqual(t))throw new D(O.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}()),Qs=function(){function t(t,e,n,r){this.iw=t,this.yw=e,this.bw=n,this.Qa=r,this.vw=null,this.Sw=null,this.metadata=new Gs(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.bw.docs._()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bw.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;qr("QuerySnapshot.forEach",arguments,1,2),Wr("QuerySnapshot.forEach","function",1,t),this.bw.docs.forEach((function(r){t.call(e,n.Dw(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ws(this.yw,this.iw,this.Qa)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(ri("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Kr("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.bw.qt)throw new D(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vw&&this.Sw===e||(this.vw=function(t,e,n,r){if(n.Lt._()){var i=0;return n.docChanges.map((function(e){return{type:"added",doc:new qs(t,e.doc.key,e.doc,n.fromCache,n.Ot.has(e.doc.key),r),oldIndex:-1,newIndex:i++}}))}var s=n.Lt;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new qs(t,e.doc.key,e.doc,n.fromCache,n.Ot.has(e.doc.key),r),o=-1,a=-1;return 0!==e.type&&(o=s.indexOf(e.doc.key),s=s.delete(e.doc.key)),1!==e.type&&(a=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:to(e.type),doc:i,oldIndex:o,newIndex:a}}))}(this.iw,e,this.bw,this.Qa),this.Sw=e),this.vw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ii("isEqual","QuerySnapshot",1,e);return this.iw===e.iw&&this.yw.isEqual(e.yw)&&this.bw.isEqual(e.bw)&&this.Qa===e.Qa},t.prototype.Dw=function(t){return new qs(this.iw,t.key,t,this.metadata.fromCache,this.bw.Ot.has(t.key),this.Qa)},t}(),Ys=function(t){function e(e,n,r){var i=this;if((i=t.call(this,je.As(e),n,r)||this).Cw=e,e.length%2!=1)throw new D(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.dw.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.dw.path.p();return t._()?null:new Hs(new V(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.dw.path.N()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){qr("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=w.t()),Wr("CollectionReference.doc","non-empty string",1,t);var e=F.$(t);return Hs.sw(this.dw.path.child(e),this.firestore,this.Qa)},e.prototype.add=function(t){Gr("CollectionReference.add",arguments,1),Wr("CollectionReference.add","object",1,this.Qa?this.Qa.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Cw,this.firestore,t)},e}(Ws);function Ks(t,e){if(void 0===e)return{merge:!1};if(ri(t,e,["merge","mergeFields"]),Kr(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+ei(r));for(var s=0;s<r.length;++s)if(!i(r[s]))throw new D(O.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+s+" was: "+ei(r[s]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof di}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new D(O.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zs(t,e){return void 0===e?{}:(ri(t,e,["serverTimestamps"]),Zr(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Xs(t,e){Qr(t,"object",1,e),e&&(ri(t,e,["source"]),Zr(t,0,"source",e.source,["default","server","cache"]))}function Js(t,e,n){if(e instanceof Ii){if(e.firestore!==n)throw new D(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ii(t,"DocumentReference",1,e)}function to(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function eo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var no=["length","name"];function ro(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new D(O.INVALID_ARGUMENT,t)}for(var r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var s=i[r];-1===no.indexOf(s)&&(n[s]=t[s])}return n}var io=ro(Us,"Use firebase.firestore() instead."),so=ro(Bs,"Use firebase.firestore().runTransaction() instead."),oo=ro(zs,"Use firebase.firestore().batch() instead."),ao=ro(Hs,"Use firebase.firestore().doc() instead."),co=ro($s),lo=ro(qs),uo=ro(Ws),ho=ro(Qs),po=ro(Ys,"Use firebase.firestore().collection() instead."),fo=ro(wi,"Use FieldValue.<field>() instead."),go=ro(ui,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),mo={Firestore:io,GeoPoint:Si,Timestamp:R,Blob:go,Transaction:so,WriteBatch:oo,DocumentReference:ao,DocumentSnapshot:co,Query:uo,QueryDocumentSnapshot:lo,QuerySnapshot:ho,CollectionReference:po,FieldPath:di,FieldValue:fo,setLogLevel:Us.setLogLevel,CACHE_SIZE_UNLIMITED:Vs};function yo(t){!function(t,e){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){return function(t,e){return new Us(t,e,new Ps)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},mo)))}(t),t.registerVersion("@firebase/firestore","1.15.5")}yo(s),e.__PRIVATE_registerFirestore=yo},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),o=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var s=this.getOrInitializeService(i);if(!s){if(n)return null;throw Error("Service "+this.name+" is not available")}return s}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(u){}try{for(var i=r.__values(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var o=r.__read(s.value,2),a=o[1],c=this.normalizeInstanceIdentifier(o[0]);try{var l=this.getOrInitializeService(c);a.resolve(l)}catch(u){}}}catch(h){e={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new o(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=s,e.ComponentContainer=a,e.Provider=o},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.15.5","app"),t.exports=i},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return s})),n.d(e,"__rest",(function(){return o})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return l})),n.d(e,"__awaiter",(function(){return u})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return g})),n.d(e,"__spread",(function(){return m})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return v})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return S})),n.d(e,"__importStar",(function(){return C})),n.d(e,"__importDefault",(function(){return E})),n.d(e,"__classPrivateFieldGet",(function(){return I})),n.d(e,"__classPrivateFieldSet",(function(){return T}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(e){s(e)}}function a(t){try{c(r.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){s.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(s[0][2],n)}catch(r){u(s[0][3],r)}var n}function c(t){a("next",t)}function l(t){a("throw",t)}function u(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:v(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return d})),n.d(e,"setUserLogHandler",(function(){return p}));var s=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},c=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),u=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=u,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,s=n("mrSG"),o=n("zVF4"),a=n("S+S0"),c=n("q/0M"),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),u=new o.ErrorFactory("app","Firebase",l),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new c.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return c}),"PUBLIC"));try{for(var l=s.__values(this.firebase_.INTERNAL.components.values()),u=l.next();!u.done;u=l.next())this._addComponent(u.value)}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw u.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var f=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name="[DEFAULT]");var a=s.name;if("string"!=typeof a||!a)throw u.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw u.create("duplicate-app",{appName:a});var c=new t(n,s,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&o&&c.push("and"),o&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}l(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw u.create("invalid-log-argument",{appName:name});c.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.15.5",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!o.contains(e,t=t||"[DEFAULT]"))throw u.create("no-app",{appName:t});return e[t]}function l(a){var c,l,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw u.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&o.deepExtend(p,a.serviceProps),r[h]=p,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var f=s.__values(Object.keys(e)),g=f.next();!g.done;g=f.next())e[g.value]._addComponent(a)}catch(m){c={error:m}}finally{try{g&&!g.done&&(l=f.return)&&l.call(f)}finally{if(c)throw c.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=s.__assign(s.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(o.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=f.initializeApp;f.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,t)};var v=f;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.7",void 0),t.registerVersion("fire-js","")}(v),e.default=v,e.firebase=v},x7I3:function(t,e,n){"use strict";function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n.r(e),n.d(e,"ErrorCode",(function(){return Qn})),n.d(e,"EventType",(function(){return Yn})),n.d(e,"WebChannel",(function(){return Kn})),n.d(e,"XhrIo",(function(){return Zn})),n.d(e,"createWebChannelTransport",(function(){return Wn}));var i,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=s||self;function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function u(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),p=0;function f(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:g).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var v=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++p)}(this)},w.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function C(t){return Array.prototype.concat.apply([],arguments)}function E(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function I(t){return/^[\s\xa0]*$/.test(t)}var T,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function k(t,e){return-1!=t.indexOf(e)}function A(t,e){return t<e?-1:t>e?1:0}t:{var O=a.navigator;if(O){var D=O.userAgent;if(D){T=D;break t}}T=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function P(t){var e={};for(var n in t)e[n]=t[n];return e}var N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<N.length;s++)n=N[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function L(t){return L[" "](t),t}L[" "]=c;var M,V,j=k(T,"Opera"),U=k(T,"Trident")||k(T,"MSIE"),B=k(T,"Edge"),z=B||U,H=k(T,"Gecko")&&!(k(T.toLowerCase(),"webkit")&&!k(T,"Edge"))&&!(k(T,"Trident")||k(T,"MSIE"))&&!k(T,"Edge"),G=k(T.toLowerCase(),"webkit")&&!k(T,"Edge");function $(){var t=a.document;return t?t.documentMode:void 0}t:{var q="",W=(V=T,H?/rv:([^\);]+)(\)|;)/.exec(V):B?/Edge\/([\d\.]+)/.exec(V):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):G?/WebKit\/(\S+)/.exec(V):j?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(W&&(q=W?W[1]:""),U){var Q=$();if(null!=Q&&Q>parseFloat(q)){M=String(Q);break t}}M=q}var Y={};function K(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(M)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=A(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||A(0==o[2].length,0==a[2].length)||A(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}var Z=a.document&&U&&($()||parseInt(M,10))||void 0,X=!U||9<=Number(Z),J=U&&!K("9"),tt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",c,e),a.removeEventListener("test",c,e)}catch(n){}return t}();function et(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function nt(t,e){if(et.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(H){t:{try{L(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rt[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}et.prototype.b=function(){this.defaultPrevented=!0},b(nt,et);var rt={2:"touch",3:"pen",4:"mouse"};nt.prototype.b=function(){nt.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,J)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var it="closure_listenable_"+(1e6*Math.random()|0),st=0;function ot(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++st,this.V=this.X=!1}function at(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=_(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(at(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ut(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.V&&s.listener==e&&s.capture==!!n&&s.aa==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=ut(t,e,r,i);return-1<o?(e=t[o],n||(e.X=!1)):((e=new ot(e,this.src,s,!!r,i)).X=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),dt={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=_t(r),e&&e[it]?e.sa(n,r,h(i)?!!i.capture:!!i,s):ft(e,n,r,!0,i,s)}(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pt(t,e[s],n,r,i);return null}return n=_t(n),t&&t[it]?t.ra(e,n,h(r)?!!r.capture:!!r,i):ft(t,e,n,!1,r,i)}function ft(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=h(i)?!!i.capture:!!i;if(o&&!X)return null;var a=bt(t);if(a||(t[ht]=a=new ct(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=vt,e=X?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)tt||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[it])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(lt(n,t),0==n.b&&(n.src=null,e[ht]=null)):at(t)}}}function mt(t){return t in dt?dt[t]:dt[t]="on"+t}function yt(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&gt(t),n.call(r,e)}function vt(t,e){if(t.V)return!0;if(!X){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yt(t,e=new nt(e,this))}return yt(t,new nt(e,this))}function bt(t){return(t=t[ht])instanceof ct?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(t){return"function"==l(t)?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function St(){w.call(this),this.c=new ct(this),this.J=this,this.A=null}function Ct(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.V&&o.capture==n){var a=o.listener,c=o.aa||o.src;o.X&&lt(t.c,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}b(St,w),St.prototype[it]=!0,(i=St.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else i=h(i)?!!i.capture:!!i,r=_t(r),e&&e[it]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ut(o=e.a[n],r,i,s))&&(at(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.a[n],e.b--))):e&&(e=bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ut(n,r,i,s)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},i.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new et(t,n);else if(t instanceof et)t.target=t.target||n;else{var i=t;F(t=new et(r,n),i)}if(i=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.a=e[s];i=Ct(o,r,!0,t)&&i}if(i=Ct(o=t.a=n,r,!0,t)&&i,i=Ct(o,r,!1,t)&&i,e)for(s=0;s<e.length;s++)i=Ct(o=t.a=e[s],r,!1,t)&&i;return i},i.C=function(){if(St.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)at(n[r]);delete e.a[t],e.b--}}this.A=null},i.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},i.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Et=a.JSON.stringify;function It(){this.b=this.a=null}var Tt,xt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new At}),(function(t){t.reset()}),100);function kt(){var t=Pt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function At(){this.next=this.b=this.a=null}function Ot(t){a.setTimeout((function(){throw t}),0)}function Dt(t,e){Tt||function(){var t=a.Promise.resolve(void 0);Tt=function(){t.then(Nt)}}(),Rt||(Tt(),Rt=!0),Pt.add(t,e)}It.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},At.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},At.prototype.reset=function(){this.next=this.b=this.a=null};var Rt=!1,Pt=new It;function Nt(){for(var t;t=kt();){try{t.a.call(t.b)}catch(n){Ot(n)}var e=xt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Rt=!1}function Ft(t,e){St.call(this),this.b=t||1,this.a=e||a,this.f=m(this.Ua,this),this.g=v()}function Lt(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Mt(t,e,n){if("function"==l(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Vt(t,e,n){w.call(this),this.f=null!=n?m(t,n):t,this.c=e,this.b=m(this.Pa,this),this.a=[]}function jt(t){t.T=Mt(t.b,t.c),t.f.apply(null,t.a)}function Ut(t){w.call(this),this.b=t,this.a={}}b(Ft,St),(i=Ft.prototype).Z=!1,i.L=null,i.Ua=function(){if(this.Z){var t=v()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Lt(this),this.start()))}},i.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=v())},i.C=function(){Ft.M.C.call(this),Lt(this),delete this.a},b(Vt,w),(i=Vt.prototype).ba=!1,i.T=null,i.Ia=function(t){this.a=arguments,this.T?this.ba=!0:jt(this)},i.C=function(){Vt.M.C.call(this),this.T&&(a.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},i.Pa=function(){this.T=null,this.ba&&(this.ba=!1,jt(this))},b(Ut,w);var Bt=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Bt[0]=n.toString()),n=Bt);for(var i=0;i<n.length;i++){var s=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Ht(t){R(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Gt(){}Ut.prototype.C=function(){Ut.M.C.call(this),Ht(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=null;function qt(){return $t=$t||new St}function Wt(t){et.call(this,"serverreachability",t)}function Qt(t){var e=qt();e.dispatchEvent(new Wt(e,t))}function Yt(t){et.call(this,"statevent",t)}function Kt(t){var e=qt();e.dispatchEvent(new Yt(e,t))}function Zt(t){et.call(this,"timingevent",t)}function Xt(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}b(Wt,et),b(Yt,et),b(Zt,et);var Jt={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},te={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function ee(){}function ne(){}ee.prototype.a=null;var re,ie={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function se(){et.call(this,"d")}function oe(){et.call(this,"c")}function ae(){}function ce(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Ut(this),this.N=le,this.O=new Ft(t=z?125:void 0),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}b(se,et),b(oe,et),b(ae,ee),re=new ae;var le=45e3,ue={},he={};function de(t,e,n){t.B=1,t.f=Ne(ke(e)),t.j=n,t.F=!0,pe(t,null)}function pe(t,e){t.s=v(),me(t),t.A=ke(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),We(n.b,"t",r),t.w=0,t.a=jn(t.g,t.g.w?e:null),0<t.J&&(t.D=new Vt(m(t.ya,t,t.a),t.J)),zt(t.G,t.a,"readystatechange",t.Sa),e=t.m?P(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Qt(1)}function fe(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=ge(t,n);if(i==he){4==e&&(t.c=4,Kt(14),r=!1);break}if(i==ue){t.c=4,Kt(15),r=!1;break}_e(t,i)}4==e&&0==n.length&&(t.c=1,Kt(16),r=!1),t.b=t.b&&r,r||(we(t),be(t))}function ge(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?he:(n=Number(e.substring(n,r)),isNaN(n)?ue:(r+=1)+n>e.length?he:(e=e.substr(r,n),t.w=r+n,e))}function me(t){t.P=v()+t.N,ye(t,t.N)}function ye(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Xt(m(t.Qa,t),e)}function ve(t){t.h&&(a.clearTimeout(t.h),t.h=null)}function be(t){0==t.g.u||t.l||Nn(t.g,t)}function we(t){ve(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Lt(t.O),Ht(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function _e(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||tn(n.b,t)))if(n.A=t.H,!t.o&&tn(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;Pn(n),n.a.cancel(),n.a=null}Rn(n),Kt(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Xt(m(n.Na,n),6e3));if(1>=Je(n.b)&&n.O){try{n.O()}catch(g){}n.O=void 0}}else Ln(n,11)}else if((t.o||n.a==t)&&Pn(n),!I(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(n.G=(i=e[r])[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var s=i[3];null!=s&&(n.oa=s);var o=i[5];null!=o&&"number"==typeof o&&0<o&&(n.D=1.5*o);var a=n,c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var u=a.b;!u.a&&(k(l,"spdy")||k(l,"quic")||k(l,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(en(u,u.b),u.b=null))}if(a.s){var h=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,Pe(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var d=t;if((a=n).ea=Vn(a,a.w?a.R:null,a.P),d.o){nn(a.b,d);var p=d,f=a.D;f&&p.setTimeout(f),p.h&&(ve(p),me(p)),a.a=d}else Dn(a);0<n.f.length&&xn(n)}else"stop"!=i[0]&&"close"!=i[0]||Ln(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ln(n,7):En(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Qt(4)}catch(g){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(u(t)||"string"==typeof t)S(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(u(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(u(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ce(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ce)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ee(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ie(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ie(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=ce.prototype).setTimeout=function(t){this.N=t},i.Sa=function(t){t=t.target;var e=this.D;e&&3==wn(t)?e.Ia():this.ya(t)},i.ya=function(t){try{if(t==this.a)t:{var e=wn(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!z&&!this.a.Y())){this.l||4!=e||7==n||Qt(8==n||0>=r?3:2),ve(this);var i=this.a.S();this.H=i;var s=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(o)){var c=o;break e}}c=null}if(!c){this.b=!1,this.c=3,Kt(12),we(this),be(this);break t}this.o=!0,_e(this,c)}this.F?(fe(this,e,s),z&&this.b&&3==e&&(zt(this.G,this.O,"tick",this.Ra),this.O.start())):_e(this,s),4==e&&we(this),this.b&&!this.l&&(4==e?Nn(this.g,this):(this.b=!1,me(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.c=3,Kt(12)):(this.c=0,Kt(13)),we(this),be(this)}}}catch(l){}},i.Ra=function(){if(this.a){var t=wn(this.a),e=this.a.Y();this.w<e.length&&(ve(this),fe(this,t,e),this.b&&4!=t&&me(this))}},i.cancel=function(){this.l=!0,we(this)},i.Qa=function(){this.h=null;var t=v();0<=t-this.P?(2!=this.B&&(Qt(3),Kt(17)),we(this),this.c=2,be(this)):ye(this,this.P-t)},(i=Ce.prototype).I=function(){Ee(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},i.K=function(){return Ee(this),this.a.concat()},i.get=function(t,e){return Ie(this.b,t)?this.b[t]:e},i.set=function(t,e){Ie(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},i.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Te=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof xe){this.a=void 0!==e?e:t.a,Ae(this,t.f),this.j=t.j,Oe(this,t.c),De(this,t.h),this.g=t.g,e=t.b;var n=new He;n.c=e.c,e.a&&(n.a=new Ce(e.a),n.b=e.b),Re(this,n),this.i=t.i}else t&&(n=String(t).match(Te))?(this.a=!!e,Ae(this,n[1]||"",!0),this.j=Fe(n[2]||""),Oe(this,n[3]||"",!0),De(this,n[4]),this.g=Fe(n[5]||"",!0),Re(this,n[6]||"",!0),this.i=Fe(n[7]||"")):(this.a=!!e,this.b=new He(null,this.a))}function ke(t){return new xe(t)}function Ae(t,e,n){t.f=n?Fe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Oe(t,e,n){t.c=n?Fe(e,!0):e}function De(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Re(t,e,n){e instanceof He?(t.b=e,function(t,e){e&&!t.f&&(Ge(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($e(this,e),We(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Le(e,Be)),t.b=new He(e,t.a))}function Pe(t,e,n){t.b.set(e,n)}function Ne(t){return Pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^v()).toString(36)),t}function Fe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Le(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Me),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Me(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Le(e,Ve,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Le(e,Ve,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Le(n,"/"==n.charAt(0)?Ue:je,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Le(n,ze)),t.join("")};var Ve=/[#\/\?@]/g,je=/[#\?:]/g,Ue=/[#\?]/g,Be=/[#\?@]/g,ze=/#/g;function He(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ge(t){t.a||(t.a=new Ce,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $e(t,e){Ge(t),e=Qe(t,e),Ie(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ie((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ee(t)))}function qe(t,e){return Ge(t),e=Qe(t,e),Ie(t.a.b,e)}function We(t,e,n){$e(t,e),0<n.length&&(t.c=null,t.a.set(Qe(t,e),E(n)),t.b+=n.length)}function Qe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ye(t,e){this.b=t,this.a=e}function Ke(t){this.g=t||Ze,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ca&&a.ca.ua&&a.ca.ua()&&a.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(i=He.prototype).add=function(t,e){Ge(this),this.c=null,t=Qe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},i.forEach=function(t,e){Ge(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},i.K=function(){Ge(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},i.I=function(t){Ge(this);var e=[];if("string"==typeof t)qe(this,t)&&(e=C(e,this.a.get(Qe(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},i.set=function(t,e){return Ge(this),this.c=null,qe(this,t=Qe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},i.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var Ze=10;function Xe(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Je(t){return t.b?1:t.a?t.a.size:0}function tn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function en(t,e){t.a?t.a.add(e):t.b=e}function nn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function rn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var s=r(t.a.values()),o=s.next();!o.done;o=s.next())i=i.concat(o.value.i)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}return E(t.c)}function sn(){}function on(){this.a=new sn}function an(t,e,n){var r=n||"";try{Se(t,(function(t,n){var i=t;h(t)&&(i=Et(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function cn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}Ke.prototype.cancel=function(){var t,e;if(this.c=rn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=r(this.a.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},sn.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},sn.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var ln=a.JSON.parse;function un(t){St.call(this),this.headers=new Ce,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=hn,this.B=this.F=!1}b(un,St);var hn="",dn=/^https?$/i,pn=["POST","PUT"];function fn(t){return"content-type"==t.toLowerCase()}function gn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,mn(t),vn(t)}function mn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function yn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=wn(t)||2!=t.S()))if(t.l&&4==wn(t))Mt(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==wn(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.D).match(Te)[1]||null;if(!s&&a.self&&a.self.location){var c=a.self.location.protocol;s=c.substr(0,c.length-1)}i=!dn.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var l=2<wn(t)?t.a.statusText:""}catch(u){l=""}t.f=l+" ["+t.S()+"]",mn(t)}}finally{vn(t)}}}function vn(t,e){if(t.a){bn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function bn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function wn(t){return t.a?t.a.readyState:0}function _n(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Pe(t,e,n))}function Sn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cn(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Sn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Sn("baseRetryDelayMs",5e3,t),this.Ga=Sn("retryDelaySeedMs",1e4,t),this.Da=Sn("forwardChannelMaxRetries",2,t),this.ga=Sn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ke(t&&t.concurrentRequestLimit),this.ja=new on,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function En(t){if(In(t),3==t.u){var e=t.H++,n=ke(t.v);Pe(n,"SID",t.B),Pe(n,"RID",e),Pe(n,"TYPE","terminate"),An(t,n),(e=new ce(t,e,void 0)).B=2,e.f=Ne(ke(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=jn(e.g,null),e.a.$(e.f)),e.s=v(),me(e)}Mn(t)}function In(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(a.clearTimeout(t.i),t.i=null),Pn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&a.clearTimeout(t.g),t.g=null)}function Tn(t,e){t.f.push(new Ye(t.Fa++,e)),3==t.u&&xn(t)}function xn(t){Xe(t.b)||t.g||(t.g=!0,Dt(t.xa,t),t.o=0)}function kn(t,e){var n;n=e?e.W:t.H++;var r=ke(t.v);Pe(r,"SID",t.B),Pe(r,"RID",n),Pe(r,"AID",t.G),An(t,r),t.h&&t.j&&_n(r,t.h,t.j),n=new ce(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=On(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),en(t.b,n),de(n,r,e)}function An(t,e){t.c&&Se({},(function(t,n){Pe(e,n,t)}))}function On(t,e,n){n=Math.min(t.f.length,n);var r=t.c?m(t.c.Ha,t.c,t):null;t:for(var i=t.f,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].b)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=i[c].b,u=i[c].a;if(0>(l-=s))s=Math.max(0,i[c].b-100),a=!1;else try{an(u,o,"req"+l+"_")}catch(h){r&&r(u)}}if(a){r=o.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Dn(t){t.a||t.i||(t.J=1,Dt(t.wa,t),t.m=0)}function Rn(t){return!(t.a||t.i||3<=t.m||(t.J++,t.i=Xt(m(t.wa,t),Fn(t,t.m)),t.m++,0))}function Pn(t){null!=t.l&&(a.clearTimeout(t.l),t.l=null)}function Nn(t,e){var n=null;if(t.a==e){Pn(t),t.a=null;var r=2}else{if(!tn(t.b,e))return;n=e.i,nn(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=v()-e.s;var i=t.o;(r=qt()).dispatchEvent(new Zt(r,n,e,i)),xn(t)}else Dn(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(Je(t.b)>=t.b.f-(t.g?1:0)||(t.g?(t.f=e.i.concat(t.f),0):1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)||(t.g=Xt(m(t.xa,t,e),Fn(t,t.o)),t.o++,0)))}(t,e)||2==r&&Rn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ln(t,5);break;case 4:Ln(t,10);break;case 3:Ln(t,6);break;default:Ln(t,2)}}function Fn(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Ln(t,e){if(2==e){var n=null;t.c&&(n=null);var r=m(t.Ta,t);n||(n=new xe("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Ae(n,"https"),Ne(n)),function(t,e){var n=new Gt;if(a.Image){var r=new Image;r.onload=y(cn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(cn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(cn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(cn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Kt(2);t.u=0,t.c&&t.c.la(e),Mn(t),In(t)}function Mn(t){t.u=0,t.A=-1,t.c&&(0==rn(t.b).length&&0==t.f.length||(t.b.c.length=0,E(t.f),t.f.length=0),t.c.ka())}function Vn(t,e,n){var r=function(t){return t instanceof xe?ke(t):new xe(t,void 0)}(n);if(""!=r.c)e&&Oe(r,e+"."+r.c),De(r,r.h);else{var i=a.location;r=function(t,e,n,r){var i=new xe(null,void 0);return t&&Ae(i,t),e&&Oe(i,e),n&&De(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&R(t.N,(function(t,e){Pe(r,e,t)})),n=t.ha,(e=t.s)&&n&&Pe(r,e,n),Pe(r,"VER",t.oa),An(t,r),r}function jn(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new un(t.Ea)).F=t.w,e}function Un(){}function Bn(){if(U&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function zn(t,e){St.call(this),this.a=new Cn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!I(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!I(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new $n(this)}function Hn(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Gn(){oe.call(this),this.status=1}function $n(t){this.a=t}(i=un.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.G?this.G:re),this.a.onreadystatechange=m(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(s){return void gn(this,s)}t=n||"";var i=new Ce(this.headers);r&&Se(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=fn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=_(pn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{bn(this),0<this.o&&((this.B=function(t){return U&&K(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=m(this.ta,this)):this.m=Mt(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(s){gn(this,s)}},i.ta=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vn(this))},i.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),vn(this,!0)),un.M.C.call(this)},i.va=function(){this.j||(this.w||this.l||this.g?yn(this):this.Oa())},i.Oa=function(){yn(this)},i.S=function(){try{return 2<wn(this)?this.a.status:-1}catch(V){return-1}},i.Y=function(){try{return this.a?this.a.responseText:""}catch(V){return""}},i.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ln(e)}},i.qa=function(){return this.h},i.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(i=Cn.prototype).oa=8,i.u=1,i.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new ce(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?F(r=P(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var s=this.f[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=On(this,n,e),Pe(i=ke(this.v),"RID",t),Pe(i,"CVER",22),this.s&&Pe(i,"X-HTTP-Session-Id",this.s),An(this,i),this.h&&r&&_n(i,this.h,r),en(this.b,n),this.fa?(Pe(i,"$req",e),Pe(i,"SID","null"),n.R=!0,de(n,i,null)):de(n,i,e),this.u=2}}else 3==this.u&&(t?kn(this,t):0==this.f.length||Xe(this.b)||kn(this))},i.wa=function(){this.i=null,this.a=new ce(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=ke(this.ea);Pe(t,"RID","rpc"),Pe(t,"SID",this.B),Pe(t,"CI",this.U?"0":"1"),Pe(t,"AID",this.G),An(this,t),Pe(t,"TYPE","xmlhttp"),this.h&&this.j&&_n(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Ne(ke(t)),e.j=null,e.F=!0,pe(e,n)},i.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Rn(this),Kt(19))},i.Ta=function(t){Kt(t?2:1)},(i=Un.prototype).na=function(){},i.ma=function(){},i.la=function(){},i.ka=function(){},i.Ha=function(){},Bn.prototype.a=function(t,e){return new zn(t,e)},b(zn,St),(i=zn.prototype).addEventListener=function(t,e,n,r){zn.M.addEventListener.call(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){zn.M.removeEventListener.call(this,t,e,n,r)},i.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Kt(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Vn(t,null,t.P),xn(t)},i.close=function(){En(this.a)},i.La=function(t){if("string"==typeof t){var e={};e.__data__=t,Tn(this.a,e)}else this.g?((e={}).__data__=Et(t),Tn(this.a,e)):Tn(this.a,t)},i.C=function(){this.a.c=null,delete this.f,En(this.a),delete this.a,zn.M.C.call(this)},b(Hn,se),b(Gn,oe),b($n,Un),$n.prototype.na=function(){this.a.dispatchEvent("a")},$n.prototype.ma=function(t){this.a.dispatchEvent(new Hn(t))},$n.prototype.la=function(t){this.a.dispatchEvent(new Gn(t))},$n.prototype.ka=function(){this.a.dispatchEvent("b")},Bn.prototype.createWebChannel=Bn.prototype.a,zn.prototype.send=zn.prototype.La,zn.prototype.open=zn.prototype.Ka,zn.prototype.close=zn.prototype.close,Jt.NO_ERROR=0,Jt.TIMEOUT=8,Jt.HTTP_ERROR=6,te.COMPLETE="complete",ne.EventType=ie,ie.OPEN="a",ie.CLOSE="b",ie.ERROR="c",ie.MESSAGE="d",St.prototype.listen=St.prototype.ra,un.prototype.listenOnce=un.prototype.sa,un.prototype.getLastError=un.prototype.Ma,un.prototype.getLastErrorCode=un.prototype.qa,un.prototype.getStatus=un.prototype.S,un.prototype.getResponseJson=un.prototype.Ja,un.prototype.getResponseText=un.prototype.Y,un.prototype.send=un.prototype.$;var qn={createWebChannelTransport:function(){return new Bn},ErrorCode:Jt,EventType:te,WebChannel:ne,XhrIo:un},Wn=qn.createWebChannelTransport,Qn=qn.ErrorCode,Yn=qn.EventType,Kn=qn.WebChannel,Zn=qn.XhrIo;e.default=qn},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},c=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function l(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(o){e=o instanceof u?d(o.errors):[o]}if(c(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(l(n))try{n.unsubscribe()}catch(o){e=e||[],o instanceof u?e=e.concat(d(o.errors)):e.push(o)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new f(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends f{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}function v(...t){return b(t)}function b(t){return 0===t.length?y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}let w=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof f)return t;if(t[p])return t[p]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:b(t)(this)}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const S=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends f{constructor(t){super(t),this.destination=t}}let I=(()=>{class t extends w{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new E(this)}lift(t){const e=new T(this,this);return e.operator=t,e}next(t){if(this.closed)throw new S;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new S;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new S;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new S;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new S;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new w;return t.source=this,t}}return t.create=(t,e)=>new T(t,e),t})();class T extends I{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function x(t){return t&&"function"==typeof t.schedule}class k extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=O(),R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function P(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const N=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return A(t);if(P(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[D])return e=t,t=>{const n=e[D]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=l(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function F(t,e,n,r,i=new k(t,n,r)){if(!i.closed)return e instanceof w?e.subscribe(i):N(e)(i)}class L extends f{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function M(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(t,e))}}class V{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new j(t,this.project,this.thisArg))}}class j extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function U(t,e){return new w(n=>{const r=new h;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function B(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new w(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(P(t))return function(t,e){return new w(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(R(t))return U(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new w(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[D](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof w?t:new w(N(t))}function z(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(z((n,r)=>B(t(n,r)).pipe(M((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new H(t,n)))}class H{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new k(this,e,n),i=this.destination;i.add(r);const s=F(this,t,void 0,void 0,r);s!==r&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t=Number.POSITIVE_INFINITY){return z(y,t)}function q(t,e){return e?U(t,e):new w(A(t))}function W(){return function(t){return t.lift(new Q(t))}}class Q{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Y(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Y extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class K extends w{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return W()(this)}}const Z=(()=>{const t=K.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new I}function tt(t){return{toString:t}.toString()}function et(t,e,n){return tt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const nt=et("Inject",t=>({token:t})),rt=et("Optional"),it=et("Self"),st=et("SkipSelf");var ot=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function at(t){for(let e in t)if(t[e]===at)return e;throw Error("Could not find renamed property on target object.")}function ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function lt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ht(t){return dt(t,t[ft])||dt(t,t[yt])}function dt(t,e){return e&&e.token===t?e:null}function pt(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(vt))?t[gt]:null}const ft=at({"\u0275prov":at}),gt=at({"\u0275inj":at}),mt=at({"\u0275provFallback":at}),yt=at({ngInjectableDef:at}),vt=at({ngInjectorDef:at});function bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function wt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _t=at({__forward_ref__:at});function St(t){return t.__forward_ref__=St,t.toString=function(){return bt(this())},t}function Ct(t){return Et(t)?t():t}function Et(t){return"function"==typeof t&&t.hasOwnProperty(_t)&&t.__forward_ref__===St}const It="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,xt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt="undefined"!=typeof global&&global,At=It||kt||Tt||xt,Ot=at({"\u0275cmp":at}),Dt=at({"\u0275dir":at}),Rt=at({"\u0275pipe":at}),Pt=at({"\u0275mod":at}),Nt=at({"\u0275loc":at}),Ft=at({"\u0275fac":at}),Lt=at({__NG_ELEMENT_ID__:at});class Mt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=lt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Vt=new Mt("INJECTOR",-1),jt={},Ut=/\n/gm,Bt=at({provide:String,useValue:at});let zt,Ht=void 0;function Gt(t){const e=Ht;return Ht=t,e}function $t(t){const e=zt;return zt=t,e}function qt(t,e=ot.Default){if(void 0===Ht)throw new Error("inject() must be called from an injection context");return null===Ht?Qt(t,void 0,e):Ht.get(t,e&ot.Optional?null:void 0,e)}function Wt(t,e=ot.Default){return(zt||qt)(Ct(t),e)}function Qt(t,e,n){const r=ht(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ot.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${bt(t)}]`)}function Yt(t){const e=[];for(let n=0;n<t.length;n++){const r=Ct(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ot.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof rt||"Optional"===i.ngMetadataName||i===rt?n|=ot.Optional:i instanceof st||"SkipSelf"===i.ngMetadataName||i===st?n|=ot.SkipSelf:i instanceof it||"Self"===i.ngMetadataName||i===it?n|=ot.Self:t=i instanceof nt||i===nt?i.token:i}e.push(Wt(t,n))}else e.push(Wt(r))}return e}class Kt{get(t,e=jt){if(e===jt){const e=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw e.name="NullInjectorError",e}return e}}class Zt{}class Xt{}function Jt(t,e){t.forEach(t=>Array.isArray(t)?Jt(t,e):e(t))}function te(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ee(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ne(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function re(t,e,n){let r=se(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ie(t,e){const n=se(t,e);if(n>=0)return t[1|n]}function se(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const oe=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),ae=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),ce={},le=[];let ue=0;function he(t){return tt(()=>{const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===oe.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||le,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ae.Emulated,id:"c",styles:t.styles||le,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.directives,o=t.features,a=t.pipes;return i.id+=ue++,i.inputs=me(t.inputs,r),i.outputs=me(t.outputs),o&&o.forEach(t=>t(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(de):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(pe):null,i})}function de(t){return be(t)||function(t){return t[Dt]||null}(t)}function pe(t){return function(t){return t[Rt]||null}(t)}const fe={};function ge(t){const e={type:t.type,bootstrap:t.bootstrap||le,declarations:t.declarations||le,imports:t.imports||le,exports:t.exports||le,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&tt(()=>{fe[t.id]=t.type}),e}function me(t,e){if(null==t)return ce;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ye=he;function ve(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function be(t){return t[Ot]||null}function we(t,e){return t.hasOwnProperty(Ft)?t[Ft]:null}function _e(t,e){const n=t[Pt]||null;if(!n&&!0===e)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function Se(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ce(t){return Array.isArray(t)&&!0===t[1]}function Ee(t){return 0!=(8&t.flags)}function Ie(t){return 2==(2&t.flags)}function Te(t){return 1==(1&t.flags)}function xe(t){return null!==t.template}function ke(t){return 0!=(512&t[2])}let Ae=void 0;function Oe(t){return!!t.listen}const De={createRenderer:(t,e)=>void 0!==Ae?Ae:"undefined"!=typeof document?document:void 0};function Re(t){for(;Array.isArray(t);)t=t[0];return t}function Pe(t,e){return Re(e[t+20])}function Ne(t,e){return Re(e[t.index])}function Fe(t,e){return t.data[e+20]}function Le(t,e){return t[e+20]}function Me(t,e){const n=e[t];return Se(n)?n:n[0]}function Ve(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function je(t){return 4==(4&t[2])}function Ue(t){return 128==(128&t[2])}function Be(t,e){return null===t||null==e?null:t[e]}function ze(t){t[18]=0}function He(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ge={lFrame:fn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function $e(){return Ge.bindingsEnabled}function qe(){return Ge.lFrame.lView}function We(){return Ge.lFrame.tView}function Qe(t){Ge.lFrame.contextLView=t}function Ye(){return Ge.lFrame.previousOrParentTNode}function Ke(t,e){Ge.lFrame.previousOrParentTNode=t,Ge.lFrame.isParent=e}function Ze(){return Ge.lFrame.isParent}function Xe(){Ge.lFrame.isParent=!1}function Je(){return Ge.checkNoChangesMode}function tn(t){Ge.checkNoChangesMode=t}function en(){const t=Ge.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function nn(){return Ge.lFrame.bindingIndex}function rn(){return Ge.lFrame.bindingIndex++}function sn(t){const e=Ge.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function on(t,e){const n=Ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,an(e)}function an(t){Ge.lFrame.currentDirectiveIndex=t}function cn(t){const e=Ge.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ln(){return Ge.lFrame.currentQueryIndex}function un(t){Ge.lFrame.currentQueryIndex=t}function hn(t,e){const n=pn();Ge.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function dn(t,e){const n=pn(),r=t[1];Ge.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function pn(){const t=Ge.lFrame,e=null===t?null:t.child;return null===e?fn(t):e}function fn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function gn(){const t=Ge.lFrame;return Ge.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const mn=gn;function yn(){const t=gn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function vn(){return Ge.lFrame.selectedIndex}function bn(t){Ge.lFrame.selectedIndex=t}function wn(){const t=Ge.lFrame;return Fe(t.tView,t.selectedIndex)}function _n(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function Sn(t,e,n){In(t,e,3,n)}function Cn(t,e,n,r){(3&t[2])===n&&In(t,e,n,r)}function En(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function In(t,e,n,r){const i=null!=r?r:-1;let s=0;for(let o=void 0!==r?65535&t[18]:0;o<e.length;o++)if("number"==typeof e[o+1]){if(s=e[o],null!=r&&s>=r)break}else e[o]<0&&(t[18]+=65536),(s<i||-1==i)&&(Tn(t,n,e,o),t[18]=(4294901760&t[18])+o+2),o++}function Tn(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,s.call(o)):s.call(o)}class xn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function kn(t,e,n){const r=Oe(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?t.setAttribute(e,a,c,o):e.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];On(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function An(t){return 3===t||4===t||6===t}function On(t){return 64===t.charCodeAt(0)}function Dn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Rn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Rn(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Pn(t){return-1!==t}function Nn(t){return 32767&t}function Fn(t){return t>>16}function Ln(t,e){let n=Fn(t),r=e;for(;n>0;)r=r[15],n--;return r}function Mn(t){return"string"==typeof t?t:null==t?"":""+t}function Vn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Mn(t)}const jn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function Un(t){return{name:"document",target:t.ownerDocument}}function Bn(t){return{name:"body",target:t.ownerDocument.body}}function zn(t){return t instanceof Function?t():t}let Hn=!0;function Gn(t){const e=Hn;return Hn=t,e}let $n=0;function qn(t,e){const n=Qn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Wn(r.data,t),Wn(e,null),Wn(r.blueprint,null));const i=Yn(t,e),s=t.injectorIndex;if(Pn(i)){const t=Nn(i),n=Ln(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Wn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Qn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function Yn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Kn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[Lt]:n.charCodeAt(0)||0;null==r&&(r=n[Lt]=$n++);const i=255&r,s=1<<i,o=64&i,a=32&i,c=e.data;128&i?o?a?c[t+7]|=s:c[t+6]|=s:a?c[t+5]|=s:c[t+4]|=s:o?a?c[t+3]|=s:c[t+2]|=s:a?c[t+1]|=s:c[t]|=s}(t,e,n)}function Zn(t,e,n,r=ot.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[Lt];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){hn(e,t);try{const t=i();if(null!=t||r&ot.Optional)return t;throw new Error(`No provider for ${Vn(n)}!`)}finally{mn()}}else if("number"==typeof i){if(-1===i)return new ir(t,e);let s=null,o=Qn(t,e),a=-1,c=r&ot.Host?e[16][6]:null;for((-1===o||r&ot.SkipSelf)&&(a=-1===o?Yn(t,e):e[o+8],rr(r,!1)?(s=e[1],o=Nn(a),e=Ln(a,e)):o=-1);-1!==o;){a=e[o+8];const t=e[1];if(nr(i,o,t.data)){const t=Jn(o,e,n,s,r,c);if(t!==Xn)return t}rr(r,e[1].data[o+8]===c)&&nr(i,o,e)?(s=t,o=Nn(a),e=Ln(a,e)):o=-1}}}if(r&ot.Optional&&void 0===i&&(i=null),0==(r&(ot.Self|ot.Host))){const t=e[9],s=$t(void 0);try{return t?t.get(n,i,r&ot.Optional):Qt(n,i,r&ot.Optional)}finally{$t(s)}}if(r&ot.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Vn(n)}]`)}const Xn={};function Jn(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=tr(a,o,n,null==r?Ie(a)&&Hn:r!=o&&3===a.type,i&ot.Host&&s===a);return null!==c?er(e,o,c,a):Xn}function tr(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=65535&s,c=t.directiveStart,l=s>>16,u=i?a+l:t.directiveEnd;for(let h=r?a:a+l;h<u;h++){const t=o[h];if(h<c&&n===t||h>=c&&t.type===n)return h}if(i){const t=o[c];if(t&&xe(t)&&t.type===n)return c}return null}function er(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof xn){const o=i;if(o.resolving)throw new Error("Circular dep for "+Vn(s[n]));const a=Gn(o.canSeeViewProviders);let c;o.resolving=!0,o.injectImpl&&(c=$t(o.injectImpl)),hn(t,r);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:s}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{o.injectImpl&&$t(c),Gn(a),o.resolving=!1,mn()}}return i}function nr(t,e,n){const r=64&t,i=32&t;let s;return s=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(s&1<<t)}function rr(t,e){return!(t&ot.Self||t&ot.Host&&e)}class ir{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Zn(this._tNode,this._lView,t,void 0,e)}}function sr(t){return tt(()=>{const e=Object.getPrototypeOf(t.prototype).constructor,n=e[Ft]||function t(e){const n=e;if(Et(e))return()=>{const e=t(Ct(n));return e?e():null};let r=we(n);if(null===r){const t=pt(n);r=t&&t.factory}return r||null}(e);return null!==n?n:t=>new t})}function or(t){return t.ngDebugContext}function ar(t){return t.ngOriginalError}function cr(t,...e){t.error(...e)}class lr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||cr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?or(t)?or(t):this._findContext(ar(t)):null}_findOriginalError(t){let e=ar(t);for(;e&&ar(e);)e=ar(e);return e}}class ur{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}function hr(t){return t instanceof ur?t.changingThisBreaksApplicationSecurity:t}let dr=!0,pr=!1;function fr(){return pr=!0,dr}const gr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,mr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,yr=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();function vr(t){const e=function(){const t=qe();return t&&t[12]}();return e?e.sanitize(yr.URL,t)||"":function(t,e){const n=function(t){return t instanceof ur&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}(t,"URL")?hr(t):(n=Mn(t),(n=String(n)).match(gr)||n.match(mr)?n:(fr()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function br(t,e){t.__ngContext__=e}function wr(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function _r(){throw new Error("Cannot mix multi providers and regular providers")}function Sr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Cr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Sr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Er(t){return 0===t.type&&"ng-template"!==t.tagName}function Ir(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Tr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(An(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Ir(t,c,n)||""===c&&1===e.length){if(xr(r))return!1;o=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==t.attrs){if(!Cr(t.attrs,l,n)){if(xr(r))return!1;o=!0}continue}const u=kr(8&r?"class":c,i,Er(t),n);if(-1===u){if(xr(r))return!1;o=!0;continue}if(""!==l){let t;t=u>s?"":i[u+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Sr(e,l,0)||2&r&&l!==t){if(xr(r))return!1;o=!0}}}}else{if(!o&&!xr(r)&&!xr(c))return!1;if(o&&xr(c))continue;o=!1,r=c|1&r}}return xr(r)||o}function xr(t){return 0==(1&t)}function kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ar(t,e,n=!1){for(let r=0;r<e.length;r++)if(Tr(t,e[r],n))return!0;return!1}function Or(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Dr(t,e){return t?":not("+e.trim()+")":e}function Rr(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||xr(o)||(e+=Dr(s,i),i=""),r=o,s=s||!xr(r);n++}return""!==i&&(e+=Dr(s,i)),e}const Pr={};function Nr(t){const e=t[3];return Ce(e)?e[3]:e}function Fr(t){return Mr(t[13])}function Lr(t){return Mr(t[4])}function Mr(t){for(;null!==t&&!Ce(t);)t=t[4];return t}function Vr(t){jr(We(),qe(),vn()+t,Je())}function jr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Sn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Cn(e,r,0,n)}bn(n)}function Ur(t,e){return t<<17|e<<2}function Br(t){return t>>17&32767}function zr(t){return 2|t}function Hr(t){return(131068&t)>>2}function Gr(t,e){return-131069&t|e<<2}function $r(t){return 1|t}function qr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];un(i),n.contentQueries(2,e[s],s)}}}function Wr(t,e,n){return Oe(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Qr(t,e,n,r,i,s,o,a,c,l){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,ze(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=a||t&&t[11],u[12]=c||t&&t[12]||null,u[9]=l||t&&t[9]||null,u[6]=s,u[16]=2==e.type?t[16]:u,u}function Yr(t,e,n,r,i,s){const o=n+20,a=t.data[o]||function(t,e,n,r,i,s){const o=Ye(),a=Ze(),c=a?o:o&&o.parent,l=t.data[n]=si(0,c&&c!==e?c:null,r,n,i,s);return null===t.firstChild&&(t.firstChild=l),o&&(!a||null!=o.child||null===l.parent&&2!==o.type?a||(o.next=l):o.child=l),l}(t,e,o,r,i,s);return Ke(a,!0),a}function Kr(t,e,n){dn(e,e[6]);try{const r=t.viewQuery;null!==r&&xi(1,r,n);const i=t.template;null!==i&&Jr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&qr(t,e),t.staticViewQueries&&xi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Si(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,yn()}}function Zr(t,e,n,r){const i=e[2];if(256==(256&i))return;dn(e,e[6]);const s=Je();try{ze(e),Ge.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Jr(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&Sn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Cn(e,n,0,null),En(e,0)}if(function(t){for(let e=Fr(t);null!==e;e=Lr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&He(r,1),n[2]|=1024}}}(e),function(t){for(let e=Fr(t);null!==e;e=Lr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Ue(n)&&Zr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&qr(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&Sn(e,n)}else{const n=t.contentHooks;null!==n&&Cn(e,n,1),En(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,s=-1;for(let t=0;t<n.length;t++){const o=n[t];"number"==typeof o?o<=0?(s=0-o,bn(s),r+=9+n[++t],i=r):r+=o:(null!==o&&(on(r,i),o(2,e[i])),i++)}}}finally{bn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,a);const c=t.viewQuery;if(null!==c&&xi(2,c,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&Sn(e,n)}else{const n=t.viewHooks;null!==n&&Cn(e,n,2),En(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,He(e[3],-1))}finally{yn()}}function Xr(t,e,n,r){const i=e[10],s=!Je(),o=je(e);try{s&&!o&&i.begin&&i.begin(),o&&Kr(t,e,r),Zr(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Jr(t,e,n,r,i){const s=vn();try{bn(-1),2&r&&e.length>20&&jr(t,e,0,Je()),n(r,i)}finally{bn(s)}}function ti(t,e,n){if(Ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function ei(t,e,n){$e()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||qn(n,e),br(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=xe(r);s&&yi(e,n,r);const c=er(e,t,a,n);br(c,e),null!==o&&vi(0,a-i,c,r,0,o),s&&(Me(n.index,e)[8]=c)}}(t,e,n,Ne(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=t.expandoInstructions,o=t.firstCreatePass,a=n.index-20,c=Ge.lFrame.currentDirectiveIndex;try{bn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];an(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?hi(r,i):o&&s.push(null)}}finally{bn(-1),an(c)}}(t,e,n))}function ni(t,e,n=Ne){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function ri(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ii(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ii(t,e,n,r,i,s,o,a,c,l){const u=20+r,h=u+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pr);return n}(u,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:l,incompleteFirstPass:!1}}function si(t,e,n,r,i,s){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function oi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ai(t,e,n,r,i,s,o,a){const c=Ne(e,n);let l,u=e.inputs;!a&&null!=u&&(l=u[r])?(Pi(t,n,l,r,i),Ie(e)&&function(t,e){const n=Me(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.tagName||"",r):i,Oe(s)?s.setProperty(c,r,i):On(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function ci(t,e,n,r){let i=!1;if($e()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Ar(n,o.selectors,!1)&&(i||(i=[]),Kn(qn(n,e),t,o.type),xe(o)?(2&n.flags&&wr(n),pi(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){let r=0;i=!0,gi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}di(t,n,s.length);let a=!1,c=!1;for(let i=0;i<s.length;i++){const l=s[i];n.mergedAttrs=Dn(n.mergedAttrs,l.hostAttrs),mi(t,e,l),fi(t.data.length-1,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128),!a&&(l.onChanges||l.onInit||l.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),c||!l.onChanges&&!l.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),c=!0),li(t,l),r+=l.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let c=e.directiveStart;c<n;c++){const t=r[c],n=t.inputs,l=null===i||Er(e)?null:bi(n,i);s.push(l),o=oi(n,c,o),a=oi(t.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n),ui(t,e,r)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Dn(n.mergedAttrs,n.attrs),i}function li(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ui(t,e,n){for(let r=0;r<n;r++)e.push(Pr),t.blueprint.push(Pr),t.data.push(null)}function hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function di(t,e,n){const r=20-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function pi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function fi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xe(e)&&(n[""]=t)}}function gi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=we(n.type)),i=new xn(r,xe(n),null);t.blueprint.push(i),e.push(i)}function yi(t,e,n){const r=Ne(e,t),i=ri(n),s=t[10],o=Ci(t,Qr(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n)));t[e.index]=o}function vi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function bi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function wi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function _i(t,e){const n=Me(e,t);if(Ue(n)){const t=n[1];80&n[2]?Zr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Fr(e);null!==r;r=Lr(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Zr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Me(n[r],e);Ue(i)&&i[5]>0&&t(i)}}(n)}}function Si(t,e){const n=Me(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Kr(r,n,n[8])}function Ci(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ei(t){for(;t;){t[2]|=64;const e=Nr(t);if(ke(t)&&!e)return t;t=e}return null}function Ii(t,e,n){const r=e[10];r.begin&&r.begin();try{Zr(t,e,t.template,n)}catch(i){throw Ri(e,i),i}finally{r.end&&r.end()}}function Ti(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ve(n),i=r[1];Xr(i,r,i.template,n)}}(t[8])}function xi(t,e,n){un(0),e(t,n)}const ki=(()=>Promise.resolve(null))();function Ai(t){return t[7]||(t[7]=[])}function Oi(t){return t.cleanup||(t.cleanup=[])}function Di(t,e,n){return(null===t||xe(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Ri(t,e){const n=t[9],r=n?n.get(lr,null):null;r&&r.handleError(e)}function Pi(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=e[o],l=t.data[o];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function Ni(t,e,n){const r=Pe(e,t),i=t[11];Oe(i)?i.setValue(r,n):r.textContent=n}function Fi(t,e){const n=e[3];return-1===t.index?Ce(n)?n:null:n}function Li(t,e){const n=Fi(t,e);return n?Qi(e[11],n[7]):null}function Mi(t,e,n,r,i){if(null!=r){let s,o=!1;Ce(r)?s=r:Se(r)&&(o=!0,r=r[0]);const a=Re(r);0===t&&null!==n?null==i?qi(e,n,a):$i(e,n,a,i||null):1===t&&null!==n?$i(e,n,a,i||null):2===t?function(t,e,n){const r=Qi(t,e);r&&function(t,e,n,r){Oe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Re(n)&&Mi(e,t,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];Ji(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Vi(t,e,n,r){const i=Li(t.node,e);i&&Ji(t,e,e[11],n?1:2,i,r)}function ji(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&He(e[3],-1),n.splice(r,1)}function Ui(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&ji(i,r),e>0&&(t[n-1][4]=r[4]);const s=ee(t,10+e);Vi(r[1],r,!1,null);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Bi(t,e){if(!(256&e[2])){const n=e[11];Oe(n)&&n.destroyNode&&Ji(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Hi(t[1],t);for(;e;){let n=null;if(Se(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Se(e)&&Hi(e[1],e),e=zi(e,t);null===e&&(e=t),Se(e)&&Hi(e[1],e),n=e&&e[4]}e=n}}(e)}}function zi(t,e){let n;return Se(t)&&(n=t[6])&&2===n.type?Fi(n,t):t[3]===e?null:t[3]}function Hi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof xn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],s="function"==typeof i?i(e):Re(e[i]),o=t[n[r+2]],a=n[r+3];"boolean"==typeof a?s.removeEventListener(n[r],o,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Oe(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Ce(e[3])){r!==e[3]&&ji(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Gi(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?Li(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ne(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ae.ShadowDom&&n!==ae.Native)return null}return Ne(r,n)}function $i(t,e,n,r){Oe(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function qi(t,e,n){Oe(t)?t.appendChild(e,n):e.appendChild(n)}function Wi(t,e,n,r){null!==r?$i(t,e,n,r):qi(t,e,n)}function Qi(t,e){return Oe(t)?t.parentNode(e):e.parentNode}function Yi(t,e){if(2===t.type){const n=Fi(t,e);return null===n?null:Zi(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Ne(t,e):null}function Ki(t,e,n,r){const i=Gi(t,r,e);if(null!=i){const t=e[11],s=Yi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Wi(t,i,n[e],s);else Wi(t,i,n,s)}}function Zi(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Ne(n,e);if(0===r)return Zi(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Ce(t)?Zi(-1,t):Re(t)}}{const r=e[16],i=r[6],s=Nr(r),o=i.projection[n.projection];return null!=o?t(s,o):t(e,n.next)}}return null}(t,r)}return e[7]}function Xi(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;o&&0===e&&(a&&br(Re(a),r),n.flags|=4),64!=(64&n.flags)&&(4===c||5===c?(Xi(t,e,n.child,r,i,s,!1),Mi(e,t,i,a,s)):1===c?ts(t,e,r,n,i,s):Mi(e,t,i,a,s)),n=o?n.projectionNext:n.next}}function Ji(t,e,n,r,i,s){Xi(n,r,t.node.child,e,i,s,!1)}function ts(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Mi(e,t,i,a[c],s);else Xi(t,e,a,o[3],i,s,!0)}function es(t,e,n){Oe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ns(t,e,n){Oe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class rs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,s=!1){for(;null!==r;){const o=n[r.index];if(null!==o&&i.push(Re(o)),Ce(o))for(let e=10;e<o.length;e++){const n=o[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],s=e[6].projection[r.projection];if(Array.isArray(s))i.push(...s);else{const n=Nr(e);t(n[1],n,s,i,!0)}}r=s?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Bi(this._lView[1],this._lView)}onDestroy(t){var e,n,r;e=this._lView[1],r=t,Ai(n=this._lView).push(r),e.firstCreatePass&&Oi(e).push(n[7].length-1,null)}markForCheck(){Ei(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ii(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){tn(!0);try{Ii(t,e,n)}finally{tn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Ji(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class is extends rs{constructor(t){super(t),this._view=t}detectChanges(){Ti(this._view)}checkNoChanges(){!function(t){tn(!0);try{Ti(t)}finally{tn(!1)}}(this._view)}get context(){return null}}let ss,os,as;function cs(t,e,n){return ss||(ss=class extends t{}),new ss(Ne(e,n))}function ls(t,e,n,r){return os||(os=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Qr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Kr(e,n,t),new rs(n)}}),0===n.type?new os(r,n,cs(e,n,r)):null}function us(t,e,n,r){let i;as||(as=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return cs(e,this._hostTNode,this._hostView)}get injector(){return new ir(this._hostTNode,this._hostView)}get parentInjector(){const t=Yn(this._hostTNode,this._hostView),e=Ln(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=Fn(t),i=e,s=e[6];for(;r>1;)i=i[15],s=i[6],r--;return s}(t,this._hostView,this._hostTNode);return Pn(t)&&null!=n?new ir(n,e):new ir(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Zt,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ce(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new as(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],te(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Vi(r,n,!0,Zi(i,this._lContainer)),t.attachToViewContainerRef(this),te(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=Ui(t,e);n&&Bi(n[1],n)}(this._lContainer,e),ee(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ui(this._lContainer,e);return n&&null!=ee(this._lContainer[8],e)?new rs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=r[n.index];if(Ce(s))i=s;else{let t;if(4===n.type)t=Re(s);else if(t=r[11].createComment(""),ke(r)){const e=r[11],i=Ne(n,r);$i(e,Qi(e,i),t,function(t,e){return Oe(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Ki(r[1],r,t,n);r[n.index]=i=wi(s,r,t,n),Ci(r,i)}return new as(i,n,r)}function hs(t=!1){return function(t,e,n){if(!n&&Ie(t)){const n=Me(t.index,e);return new rs(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new rs(e[16],e):null}(Ye(),qe(),t)}let ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ps(),t})();const ps=hs,fs=Function,gs=new Mt("Set Injector scope."),ms={},ys={},vs=[];let bs=void 0;function ws(){return void 0===bs&&(bs=new Kt),bs}function _s(t,e=null,n=null,r){return new Ss(t,n,e||ws(),r)}class Ss{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Jt(e,n=>this.processProvider(n,t,e)),Jt([t],t=>this.processInjectorType(t,[],i)),this.records.set(Vt,Is(void 0,this));const s=this.records.get(gs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:bt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=jt,n=ot.Default){this.assertNotDestroyed();const r=Gt(this);try{if(!(n&ot.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Mt)&&ht(t);e=n&&this.injectableDefInScope(n)?Is(Cs(t),ms):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ot.Self?ws():this.parent).get(t,e=n&ot.Optional&&e===jt?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(bt(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):bt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ut,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Gt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(bt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Ct(t)))return!1;let r=pt(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=pt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{Jt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Jt(r,t=>this.processProvider(t,n,r||vs))}}this.injectorDefTypes.add(s),this.records.set(s,Is(r.factory,ms));const a=r.providers;if(null!=a&&!o){const e=t;Jt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=xs(t=Ct(t))?t:Ct(t&&t.provide);const i=function(t,e,n){return Ts(t)?Is(void 0,t.useValue):Is(Es(t,e,n),ms)}(t,e,n);if(xs(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&_r()}else{let e=this.records.get(r);e?void 0===e.multi&&_r():(e=Is(void 0,ms,!0),e.factory=()=>Yt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ys?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(bt(t)):e.value===ms&&(e.value=ys,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Cs(t){const e=ht(t),n=null!==e?e.factory:we(t);if(null!==n)return n;const r=pt(t);if(null!==r)return r.factory;if(t instanceof Mt)throw new Error(`Token ${bt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ne(e,"?");throw new Error(`Can't resolve all parameters for ${bt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[ft]||t[yt]||t[mt]&&t[mt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Es(t,e,n){let r=void 0;if(xs(t)){const e=Ct(t);return we(e)||Cs(e)}if(Ts(t))r=()=>Ct(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Yt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Wt(Ct(t.useExisting));else{const i=Ct(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${bt(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return we(i)||Cs(i);r=()=>new i(...Yt(t.deps))}var i;return r}function Is(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ts(t){return null!==t&&"object"==typeof t&&Bt in t}function xs(t){return"function"==typeof t}const ks=function(t,e,n){return function(t,e=null,n=null,r){const i=_s(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let As=(()=>{class t{static create(t,e){return Array.isArray(t)?ks(t,e,""):ks(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=jt,t.NULL=new Kt,t.\u0275prov=lt({token:t,providedIn:"any",factory:()=>Wt(Vt)}),t.__NG_ELEMENT_ID__=-1,t})();const Os=new Mt("AnalyzeForEntryComponents");let Ds=new Map;const Rs=new Set;function Ps(t){return"string"==typeof t?t:t.text()}function Ns(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=wt(i,t):2==s&&(r=wt(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let Fs=null;function Ls(){if(!Fs){const t=At.Symbol;if(t&&t.iterator)Fs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Fs=n)}}}return Fs}function Ms(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}class Vs{constructor(t){this.wrapped=t}static wrap(t){return new Vs(t)}static unwrap(t){return Vs.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Vs}}function js(t){return!!Us(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ls()in t)}function Us(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Bs(t,e,n){return t[e]=n}function zs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Hs(t,e,n,r){const i=zs(t,e,n);return zs(t,e+1,r)||i}function Gs(t,e,n,r){const i=qe();return zs(i,rn(),e)&&(We(),function(t,e,n,r,i,s){const o=Ne(t,e),a=e[11];if(null==r)Oe(a)?a.removeAttribute(o,n,s):o.removeAttribute(n);else{const e=null==i?Mn(r):i(r,t.tagName||"",n);Oe(a)?a.setAttribute(o,n,e,s):s?o.setAttributeNS(s,n,e):o.setAttribute(n,e)}}(wn(),i,t,e,n,r)),Gs}function $s(t,e,n,r){return zs(t,rn(),n)?e+Mn(n)+r:Pr}function qs(t,e,n,r,i,s,o,a){const c=qe(),l=We(),u=t+20,h=l.firstCreatePass?function(t,e,n,r,i,s,o,a,c){const l=e.consts,u=Yr(e,n[6],t,0,o||null,Be(l,a));ci(e,n,u,Be(l,c)),_n(e,u);const h=u.tViews=ii(2,-1,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l),d=si(0,null,2,-1,null,null);return d.injectorIndex=u.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(t,l,c,e,n,r,i,s,o):l.data[u];Ke(h,!1);const d=c[11].createComment("");Ki(l,c,d,h),br(d,c),Ci(c,c[u]=wi(d,c,d,h)),Te(h)&&ei(l,c,h),null!=o&&ni(c,h,a)}function Ws(t){return Le(Ge.lFrame.contextLView,t)}function Qs(t,e=ot.Default){const n=qe();return null==n?Wt(t,e):Zn(Ye(),n,Ct(t),e)}function Ys(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(An(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ye(),t)}function Ks(){throw new Error("invalid")}function Zs(t,e,n){const r=qe();return zs(r,rn(),e)&&ai(We(),wn(),r,t,e,r[11],n,!1),Zs}function Xs(t,e,n,r,i){const s=i?"class":"style";Pi(t,n,e.inputs[s],s,r)}function Js(t,e,n,r){const i=qe(),s=We(),o=20+t,a=i[11],c=i[o]=Wr(e,a,Ge.lFrame.currentNamespace),l=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,c=Be(a,s),l=Yr(e,n[6],t,3,i,c);return ci(e,n,l,Be(a,o)),null!==l.attrs&&Ns(l,l.attrs,!1),null!==l.mergedAttrs&&Ns(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(t,s,i,0,e,n,r):s.data[o];Ke(l,!0);const u=l.mergedAttrs;null!==u&&kn(a,c,u);const h=l.classes;null!==h&&ns(a,c,h);const d=l.styles;null!==d&&es(a,c,d),Ki(s,i,c,l),0===Ge.lFrame.elementDepthCount&&br(c,i),Ge.lFrame.elementDepthCount++,Te(l)&&(ei(s,i,l),ti(s,l,i)),null!==r&&ni(i,l)}function to(){let t=Ye();Ze()?Xe():(t=t.parent,Ke(t,!1));const e=t;Ge.lFrame.elementDepthCount--;const n=We();n.firstCreatePass&&(_n(n,t),Ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Xs(n,e,qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Xs(n,e,qe(),e.stylesWithoutHost,!1)}function eo(t,e,n,r){Js(t,e,n,r),to()}function no(t,e,n){const r=qe(),i=We(),s=t+20,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Be(s,r),a=Yr(e,n[6],t,4,"ng-container",o);return null!==o&&Ns(a,o,!0),ci(e,n,a,Be(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,i,r,e,n):i.data[s];Ke(o,!0);const a=r[s]=r[11].createComment("");Ki(i,r,a,o),br(a,r),Te(o)&&(ei(i,r,o),ti(i,o,r)),null!=n&&ni(r,o)}function ro(){let t=Ye();const e=We();Ze()?Xe():(t=t.parent,Ke(t,!1)),e.firstCreatePass&&(_n(e,t),Ee(t)&&e.queries.elementEnd(t))}function io(t,e,n){no(t,e,n),ro()}function so(){return qe()}function oo(t){return!!t&&"function"==typeof t.then}function ao(t){return!!t&&"function"==typeof t.subscribe}function co(t,e,n=!1,r){const i=qe(),s=We(),o=Ye();return uo(s,i,i[11],o,t,e,n,r),co}function lo(t,e,n=!1,r){const i=Ye(),s=qe(),o=We();return uo(o,s,Di(cn(o.data),i,s),i,t,e,n,r),lo}function uo(t,e,n,r,i,s,o=!1,a){const c=Te(r),l=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),u=Ai(e);let h=!0;if(3===r.type){const d=Ne(r,e),p=a?a(d):ce,f=p.target||d,g=u.length,m=a?t=>a(Re(t[r.index])).target:r.index;if(Oe(n)){let o=null;if(!a&&c&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=po(r,e,s,!1);const t=n.listen(p.name||f,i,s);u.push(s,t),l&&l.push(i,m,g,g+1)}}else s=po(r,e,s,!0),f.addEventListener(i,s,o),u.push(s),l&&l.push(i,m,g,o)}const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,t),l&&l.push(i,r.index,o,-(o+1))}}}function ho(t,e,n){try{return!1!==e(n)}catch(r){return Ri(t,r),!1}}function po(t,e,n,r){return function i(s){if(s===Function)return n;const o=2&t.flags?Me(t.index,e):e;0==(32&e[2])&&Ei(o);let a=ho(e,n,s),c=i.__ngNextListenerFn__;for(;c;)a=ho(e,c,s)&&a,c=c.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function fo(t=1){return function(t){return(Ge.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ge.lFrame.contextLView))[8]}(t)}function go(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Ar(t,s,!0):Or(r,s))return i}else n=i}return n}function mo(t){const e=qe()[16][6];if(!e.projection){const n=e.projection=ne(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?go(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function yo(t,e=0,n){const r=qe(),i=We(),s=Yr(i,r[6],t,1,null,n||null);null===s.projection&&(s.projection=e),Xe(),function(t,e,n){ts(e[11],0,e,n,Gi(t,n,e),Yi(n.parent||e[6],e))}(i,r,s)}function vo(t,e,n){return bo(t,"",e,"",n),vo}function bo(t,e,n,r,i){const s=qe(),o=$s(s,e,n,r);return o!==Pr&&ai(We(),wn(),s,t,o,s[11],i,!1),bo}const wo=[];function _o(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Br(s):Hr(s),c=!1;for(;0!==a&&(!1===c||o);){const n=t[a+1];So(t[a],e)&&(c=!0,t[a+1]=r?$r(n):zr(n)),a=r?Br(n):Hr(n)}c&&(t[n+1]=r?zr(s):$r(s))}function So(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&se(t,e)>=0}const Co={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Eo(t){return t.substring(Co.key,Co.keyEnd)}function Io(t,e){const n=Co.textEnd;return n===e?-1:(e=Co.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Co.key=e,n),To(t,e,n))}function To(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function xo(t,e,n){return Do(t,e,n,!1),xo}function ko(t,e){return Do(t,e,null,!0),ko}function Ao(t){!function(t,e,n,r){const i=We(),s=sn(2);i.firstUpdatePass&&Po(i,null,s,!0);const o=qe();if(n!==Pr&&zs(o,s,n)){const r=i.data[vn()+20];if(jo(r,!0)&&!Ro(i,s)){let t=r.classesWithoutHost;null!==t&&(n=wt(t,n||"")),Xs(i,r,o,n,!0)}else!function(t,e,n,r,i,s,o,a){i===Pr&&(i=wo);let c=0,l=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const o=c<i.length?i[c+1]:void 0,d=l<s.length?s[l+1]:void 0;let p=null,f=void 0;u===h?(c+=2,l+=2,o!==d&&(p=h,f=d)):null===h||null!==u&&u<h?(c+=2,p=u):(l+=2,p=h,f=d),null!==p&&Lo(t,e,n,r,p,f,!0,a),u=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}(i,r,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return wo;const r=[],i=hr(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,s)}}(re,Oo,t)}function Oo(t,e){for(let n=function(t){return function(t){Co.key=0,Co.keyEnd=0,Co.value=0,Co.valueEnd=0,Co.textEnd=t.length}(t),Io(t,To(t,0,Co.textEnd))}(e);n>=0;n=Io(e,n))re(t,Eo(e),!0)}function Do(t,e,n,r){const i=qe(),s=We(),o=sn(2);if(s.firstUpdatePass&&Po(s,t,o,r),e!==Pr&&zs(i,o,e)){let a;null==n&&(a=function(){const t=Ge.lFrame;return null===t?null:t.currentSanitizer}())&&(n=a),Lo(s,s.data[vn()+20],i,i[11],t,i[o+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=bt(hr(t)))),t}(e,n),r,o)}}function Ro(t,e){return e>=t.expandoStartIndex}function Po(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[vn()+20],o=Ro(t,n);jo(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=cn(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Fo(n=No(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=No(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Hr(r))return t[Br(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=No(null,t,e,n[1],r),n=Fo(n,e.attrs,r),function(t,e,n,r){t[Br(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Fo(r,t[s].hostAttrs,n);return Fo(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Br(o),c=Hr(o);t[r]=n;let l,u=!1;if(Array.isArray(n)){const t=n;l=t[1],(null===l||se(t,l)>0)&&(u=!0)}else l=n;if(i)if(0!==c){const e=Br(t[a+1]);t[r+1]=Ur(e,a),0!==e&&(t[e+1]=Gr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ur(a,0),0!==a&&(t[a+1]=Gr(t[a+1],r)),a=r;else t[r+1]=Ur(c,0),0===a?a=r:t[c+1]=Gr(t[c+1],r),c=r;u&&(t[r+1]=zr(t[r+1])),_o(t,l,r,!0),_o(t,l,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&se(s,e)>=0&&(n[r+1]=$r(n[r+1]))}(e,l,t,r,s),o=Ur(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function No(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Fo(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Fo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),re(t,o,!!n||e[++s]))}return void 0===t?null:t}function Lo(t,e,n,r,i,s,o,a){if(3!==e.type)return;const c=t.data,l=c[a+1];Vo(1==(1&l)?Mo(c,e,n,i,Hr(l),o):void 0)||(Vo(s)||function(t){return 2==(2&t)}(l)&&(s=Mo(c,null,n,i,a,o)),function(t,e,n,r,i){const s=Oe(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?s?t.removeStyle(n,r,e):n.style.removeProperty(r):s?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,o,Pe(vn(),n),i,s))}function Mo(t,e,n,r,i,s){const o=null===e;let a=void 0;for(;i>0;){const e=t[i],s=Array.isArray(e),c=s?e[1]:e,l=null===c;let u=n[i+1];u===Pr&&(u=l?wo:void 0);let h=l?ie(u,r):c===r?u:void 0;if(s&&!Vo(h)&&(h=ie(e,r)),Vo(h)&&(a=h,o))return a;const d=t[i+1];i=o?Br(d):Hr(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=ie(t,r))}return a}function Vo(t){return void 0!==t}function jo(t,e){return 0!=(t.flags&(e?16:32))}function Uo(t,e=""){const n=qe(),r=We(),i=t+20,s=r.firstCreatePass?Yr(r,n[6],t,3,null,null):r.data[i],o=n[i]=function(t,e){return Oe(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ki(r,n,o,s),Ke(s,!1)}function Bo(t){return zo("",t,""),Bo}function zo(t,e,n){const r=qe(),i=$s(r,t,e,n);return i!==Pr&&Ni(r,vn(),i),zo}function Ho(t,e,n,r,i){const s=qe(),o=function(t,e,n,r,i,s){const o=Hs(t,nn(),n,i);return sn(2),o?e+Mn(n)+r+Mn(i)+s:Pr}(s,t,e,n,r,i);return o!==Pr&&Ni(s,vn(),o),Ho}function Go(t,e,n){const r=qe();return zs(r,rn(),e)&&ai(We(),wn(),r,t,e,r[11],n,!0),Go}function $o(t,e,n){const r=qe();if(zs(r,rn(),e)){const i=We(),s=wn();ai(i,s,r,t,e,Di(cn(i.data),s,r),n,!0)}return $o}function qo(t,e){const n=Ve(t)[1],r=n.data.length-1;_n(n,{directiveStart:r,directiveEnd:r+1})}function Wo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(xe(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Qo(t.inputs),e.declaredInputs=Qo(t.declaredInputs),e.outputs=Qo(t.outputs);const n=i.hostBindings;n&&Zo(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Yo(t,s),o&&Ko(t,o),ct(t.inputs,i.inputs),ct(t.declaredInputs,i.declaredInputs),ct(t.outputs,i.outputs),xe(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}e.afterContentChecked=e.afterContentChecked||i.afterContentChecked,e.afterContentInit=t.afterContentInit||i.afterContentInit,e.afterViewChecked=t.afterViewChecked||i.afterViewChecked,e.afterViewInit=t.afterViewInit||i.afterViewInit,e.doCheck=t.doCheck||i.doCheck,e.onDestroy=t.onDestroy||i.onDestroy,e.onInit=t.onInit||i.onInit}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Wo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Dn(i.hostAttrs,n=Dn(n,i.hostAttrs))}}(r)}function Qo(t){return t===ce?{}:t===le?[]:t}function Yo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ko(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Zo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}class Xo{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Jo(t){t.type.prototype.ngOnChanges&&(t.setInput=ta,t.onChanges=function(){const t=ea(this),e=t&&t.current;if(e){const n=t.previous;if(n===ce)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function ta(t,e,n,r){const i=ea(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:ce,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new Xo(c&&c.currentValue,e,o===ce),t[r]=e}function ea(t){return t.__ngSimpleChanges__||null}function na(t,e,n,r,i){if(t=Ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)na(t[s],e,n,r,i);else{const s=We(),o=qe();let a=xs(t)?t:Ct(t.provide),c=Es(t);const l=Ye(),u=65535&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>16;if(xs(t)||!t.multi){const r=new xn(c,i,Qs),p=sa(a,e,i?u:u+d,h);-1===p?(Kn(qn(l,o),s,a),ra(s,t,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=sa(a,e,u+d,h),f=sa(a,e,u,u+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){Kn(qn(l,o),s,a);const u=function(t,e,n,r,i){const s=new xn(t,n,Qs);return s.multi=[],s.index=e,s.componentProviders=0,ia(s,i,r&&!n),s}(i?aa:oa,n.length,i,r,c);!i&&m&&(n[f].providerFactory=u),ra(s,t,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(u),o.push(u)}else ra(s,t,p>-1?p:f,ia(n[i?f:p],c,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function ra(t,e,n,r){const i=xs(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function ia(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function sa(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oa(t,e,n,r){return ca(this.multi,[])}function aa(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=er(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),ca(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],ca(i,s);return s}function ca(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function la(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=We();if(r.firstCreatePass){const i=xe(t);na(n,r.data,r.blueprint,i,!0),na(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}Jo.ngInherit=!0;class ua{}class ha{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${bt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let da=(()=>{class t{}return t.NULL=new ha,t})(),pa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>fa(t),t})();const fa=function(t){return cs(t,Ye(),qe())};class ga{}const ma=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>va(),t})();const va=function(){const t=qe(),e=Me(Ye().index,t);return function(t){const e=t[11];if(Oe(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Se(e)?e:t)};let ba=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>null}),t})();class wa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _a=new wa("9.1.11");class Sa{constructor(){}supports(t){return js(t)}create(t){return new Ea(t)}}const Ca=(t,e)=>e;class Ea{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ca}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<ka(n,r,i)?e:n,o=ka(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!js(t))throw new Error(`Error trying to diff '${bt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Ms(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Ms(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ls()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Ms(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Ms(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Ms(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ms(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ia(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new xa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ia{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ta{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ms(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class xa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ta,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ka(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Aa{constructor(){}supports(t){return t instanceof Map||Us(t)}create(){return new Oa}}class Oa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Us(t)))throw new Error(`Error trying to diff '${bt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Da(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ms(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Da{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ra=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new t([new Sa])}),t})(),Pa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new t([new Aa])}),t})();const Na=[new Aa],Fa=new Ra([new Sa]),La=new Pa(Na);let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Va(t,pa),t})();const Va=function(t,e){return ls(t,e,Ye(),qe())};let ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ua(t,pa),t})();const Ua=function(t,e){return us(t,e,Ye(),qe())},Ba={};class za extends da{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=be(t);return new $a(e,this.ngModule)}}function Ha(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ga=new Mt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>jn});class $a extends ua{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Rr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ha(this.componentDef.inputs)}get outputs(){return Ha(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ba,i);return s!==Ba||r===Ba?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(ga,De),o=i.get(ba,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(t,e,n){if(Oe(t))return t.selectRootElement(e,n===ae.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Wr(c,s.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),d={components:[],scheduler:jn,clean:ki,playerHandler:null,flags:0},p=ii(0,-1,null,1,0,null,null,null,null,null),f=Qr(null,p,d,u,null,null,s,a,o,i);let g,m;dn(f,null);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=Yr(o,null,0,3,null,null),c=a.mergedAttrs=e.hostAttrs;null!==c&&(Ns(a,c,!0),null!==t&&(kn(i,t,c),null!==a.classes&&ns(i,t,a.classes),null!==a.styles&&es(i,t,a.styles)));const l=r.createRenderer(t,e),u=Qr(n,ri(e),null,e.onPush?64:16,n[20],a,r,l,void 0);return o.firstCreatePass&&(Kn(qn(a,n),o,e.type),pi(o,a),gi(a,n.length,1)),Ci(n,u),n[20]=u}(l,this.componentDef,f,s,a);if(l)if(n)kn(a,l,["ng-version",_a.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!xr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&kn(a,l,t),e&&e.length>0&&ns(a,l,e.join(" "))}if(m=Fe(p,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}g=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Ye();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),di(t,r,1),mi(t,e,n));const i=er(e,t,e.length-1,r);br(i,e);const s=Ne(r,e);return s&&br(s,e),i}(s,n,e);r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries&&e.contentQueries(1,o,n.length-1);const a=Ye();if(s.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){bn(a.index-20);const t=n[1];li(t,e),ui(t,n,e.hostVars),hi(e,o)}return o}(t,this.componentDef,f,d,[qo]),Kr(p,f,null)}finally{yn()}const y=new qa(this.componentType,g,cs(pa,m,f),f,m);return n&&!h||(p.node.child=m),y}}class qa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new is(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=si(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new ir(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Wa=void 0;var Qa=["en",[["a","p"],["AM","PM"],Wa],[["AM","PM"],Wa,Wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wa,"{1} 'at' {0}",Wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ya={};function Ka(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Za(e);if(n)return n;const r=e.split("-")[0];if(n=Za(r),n)return n;if("en"===r)return Qa;throw new Error(`Missing locale data for the locale "${t}".`)}function Za(t){return t in Ya||(Ya[t]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[t]),Ya[t]}const Xa=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.Directionality]="Directionality",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let Ja="en-US";function tc(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ja=t.toLowerCase().replace(/_/g,"-"))}const ec=new Map;class nc extends Zt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new za(this);const n=_e(t),r=t[Nt]||null;r&&tc(r),this._bootstrapComponents=zn(n.bootstrap),this._r3Injector=_s(t,e,[{provide:Zt,useValue:this},{provide:da,useValue:this.componentFactoryResolver}],bt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=As.THROW_IF_NOT_FOUND,n=ot.Default){return t===As||t===Zt||t===Vt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class rc extends Xt{constructor(t){super(),this.moduleType=t,null!==_e(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${bt(e)} vs ${bt(e.name)}`)})(t,ec.get(t),e),ec.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new nc(this.moduleType,t)}}function ic(t,e,n){const r=en()+t,i=qe();return i[r]===Pr?Bs(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function sc(t,e,n,r){return ac(qe(),en(),t,e,n,r)}function oc(t,e){const n=t[e];return n===Pr?void 0:n}function ac(t,e,n,r,i,s){const o=e+n;return zs(t,o,i)?Bs(t,o+1,s?r.call(s,i):r(i)):oc(t,o+1)}function cc(t,e){const n=We();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=we(r.type)),o=$t(Qs),a=Gn(!1),c=s();return Gn(a),$t(o),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,qe(),t,c),c}function lc(t,e,n){const r=qe(),i=Le(r,t);return dc(r,hc(r,t)?ac(r,en(),e,i.transform,n,i):i.transform(n))}function uc(t,e,n,r){const i=qe(),s=Le(i,t);return dc(i,hc(i,t)?function(t,e,n,r,i,s,o){const a=e+n;return Hs(t,a,i,s)?Bs(t,a+2,o?r.call(o,i,s):r(i,s)):oc(t,a+2)}(i,en(),e,s.transform,n,r,s):s.transform(n,r))}function hc(t,e){return t[1].data[e+20].pure}function dc(t,e){return Vs.isWrapped(e)&&(e=Vs.unwrap(e),t[nn()]=Pr),e}class pc extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(r,i,s);return t instanceof h&&t.add(o),o}}function fc(){return this._results[Ls()]()}class gc{constructor(){this.dirty=!0,this._results=[],this.changes=new pc,this.length=0;const t=Ls(),e=gc.prototype;e[t]||(e[t]=fc)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class mc{constructor(t){this.queryList=t,this.matches=null}clone(){return new mc(this.queryList)}setDirty(){this.queryList.setDirty()}}class yc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new yc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Nc(t,e).matches&&this.queries[e].setDirty()}}class vc{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class bc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new bc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class wc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new wc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,_c(e,n[r]))}else{const n=this.metadata.predicate;n===Ma?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tr(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===pa||r===ja||r===Ma&&0===e.type)this.addMatch(e.index,-2);else{const n=tr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function _c(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Sc(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?cs(pa,t,e):0===t.type?ls(Ma,pa,t,e):null}(e,t):-2===n?function(t,e,n){return n===pa?cs(pa,e,t):n===Ma?ls(Ma,pa,e,t):n===ja?us(ja,pa,e,t):void 0}(t,e,r):er(t,t[1],n,e)}function Cc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Sc(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ec(t){const e=qe(),n=We(),r=ln();un(r+1);const i=Nc(n,r);if(t.dirty&&je(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?function t(e,n,r,i){const s=e.queries.getByIndex(r),o=s.matches;if(null!==o){const a=Cc(e,n,s,r);for(let e=0;e<o.length;e+=2){const r=o[e];if(r>0)i.push(a[e/2]);else{const s=o[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,s,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,s,i)}}}}}return i}(n,e,r,[]):Cc(n,e,i,r);t.reset(s),t.notifyOnChanges()}return!0}return!1}function Ic(t,e,n){xc(We(),qe(),t,e,n,!0)}function Tc(t,e,n){xc(We(),qe(),t,e,n,!1)}function xc(t,e,n,r,i,s){t.firstCreatePass&&(Pc(t,new vc(n,r,s,i),-1),s&&(t.staticViewQueries=!0)),Rc(t,e)}function kc(t,e,n,r){Oc(We(),qe(),e,n,r,!1,Ye(),t)}function Ac(t,e,n,r){Oc(We(),qe(),e,n,r,!0,Ye(),t)}function Oc(t,e,n,r,i,s,o,a){t.firstCreatePass&&(Pc(t,new vc(n,r,s,i),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),s&&(t.staticContentQueries=!0)),Rc(t,e)}function Dc(){return t=qe(),e=ln(),t[19].queries[e].queryList;var t,e}function Rc(t,e){const n=new gc;!function(t,e,n,r){const i=Ai(e);i.push(n),t.firstCreatePass&&Oi(t).push(r,i.length-1)}(t,e,n,n.destroy),null===e[19]&&(e[19]=new yc),e[19].queries.push(new mc(n))}function Pc(t,e,n){null===t.queries&&(t.queries=new bc),t.queries.track(new wc(e,n))}function Nc(t,e){return t.queries.getByIndex(e)}function Fc(t,e){return ls(Ma,pa,t,e)}const Lc=new Mt("Application Initializer");let Mc=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();oo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Wt(Lc,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Vc=new Mt("AppId"),jc={provide:Vc,useFactory:function(){return`${Uc()}${Uc()}${Uc()}`},deps:[]};function Uc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Bc=new Mt("Platform Initializer"),zc=new Mt("Platform ID"),Hc=new Mt("appBootstrapListener");let Gc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const $c=new Mt("LocaleId"),qc=new Mt("DefaultCurrencyCode");class Wc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Qc=function(t){return new rc(t)},Yc=Qc,Kc=function(t){return Promise.resolve(Qc(t))},Zc=function(t){const e=Qc(t),n=zn(_e(t).declarations).reduce((t,e)=>{const n=be(e);return n&&t.push(new $a(n)),t},[]);return new Wc(e,n)},Xc=Zc,Jc=function(t){return Promise.resolve(Zc(t))};let tl=(()=>{class t{constructor(){this.compileModuleSync=Yc,this.compileModuleAsync=Kc,this.compileModuleAndAllComponentsSync=Xc,this.compileModuleAndAllComponentsAsync=Jc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const el=new Mt("compilerOptions"),nl=(()=>Promise.resolve(0))();function rl(t){"undefined"==typeof Zone?nl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class il{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pc(!1),this.onMicrotaskEmpty=new pc(!1),this.onStable=new pc(!1),this.onError=new pc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=At.requestAnimationFrame,e=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(At,()=>{t.lastRequestAnimationFrameId=-1,cl(t),al(t)}),cl(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,s,o,a)=>{try{return ll(t),n.invokeTask(i,s,o,a)}finally{e&&"eventTask"===s.type&&e(),ul(t)}},onInvoke:(e,n,r,i,s,o,a)=>{try{return ll(t),e.invoke(r,i,s,o,a)}finally{ul(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,cl(t),al(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!il.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(il.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,ol,sl,sl);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function sl(){}const ol={};function al(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function cl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function ll(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ul(t){t._nesting--,al(t)}class hl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pc,this.onMicrotaskEmpty=new pc,this.onStable=new pc,this.onError=new pc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let dl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{il.assertNotInAngularZone(),rl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Wt(il))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),pl=(()=>{class t{constructor(){this._applications=new Map,ml.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ml.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class fl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let gl,ml=new fl,yl=function(t,e,n){const r=t.get(el,[]).concat(e),i=new rc(n);if(0===Ds.size)return Promise.resolve(i);const s=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(r.map(t=>t.providers));if(0===s.length)return Promise.resolve(i);const o=function(){const t=At.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),a=As.create({providers:s}).get(o.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(a.get(t)))(t);n.set(t,e=r.then(Ps))}return e}return Ds.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const s=t.styleUrls,o=t.styles||(t.styles=[]),a=t.styles.length;s&&s.forEach((e,n)=>{o.push(""),i.push(r(e).then(r=>{o[a+n]=r,s.splice(s.indexOf(e),1),0==s.length&&(t.styleUrls=void 0)}))});const c=Promise.all(i).then(()=>function(t){Rs.delete(t)}(n));e.push(c)}),Ds=new Map,Promise.all(e).then(()=>{})}().then(()=>i)};const vl=new Mt("AllowMultipleToken");class bl{constructor(t,e){this.name=t,this.token=e}}function wl(t,e,n=[]){const r="Platform: "+e,i=new Mt(r);return(e=[])=>{let s=_l();if(!s||s.injector.get(vl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:gs,useValue:"platform"});!function(t){if(gl&&!gl.destroyed&&!gl.injector.get(vl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");gl=t.get(Sl);const e=t.get(Bc,null);e&&e.forEach(t=>t())}(As.create({providers:t,name:r}))}return function(t){const e=_l();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function _l(){return gl&&!gl.destroyed?gl:null}let Sl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new hl:("zone.js"===t?void 0:t)||new il({enableLongStackTrace:fr(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:il,useValue:n}];return n.run(()=>{const e=As.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(lr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Il(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const r=n();return oo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Mc);return t.runInitializers(),t.donePromise.then(()=>(tc(i.injector.get($c,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Cl({},e);return yl(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(El);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${bt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Wt(As))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Cl(t,e){return Array.isArray(e)?e.reduce(Cl,t):Object.assign(Object.assign({},t),e)}let El=(()=>{class t{constructor(t,e,n,r,i,s){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=fr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new w(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new w(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{il.assertNotInAngularZone(),rl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return x(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof w?t[0]:$(e)(q(t,n))}(o,a.pipe(t=>{return W()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Z);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ua?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zt),i=n.create(As.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(dl,null);return s&&i.injector.get(pl).registerApplication(i.location.nativeElement,s),this._loadComponent(i),fr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Il(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Hc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Il(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Wt(il),Wt(Gc),Wt(As),Wt(lr),Wt(da),Wt(Mc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Il(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Tl{}class xl{}const kl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Al=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||kl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ol(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ol(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Wt(tl),Wt(xl,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Ol(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Dl=wl(null,"core",[{provide:zc,useValue:"unknown"},{provide:Sl,deps:[As]},{provide:pl,deps:[]},{provide:Gc,deps:[]}]),Rl=[{provide:El,useClass:El,deps:[il,Gc,As,lr,da,Mc]},{provide:Ga,deps:[il],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Mc,useClass:Mc,deps:[[new rt,Lc]]},{provide:tl,useClass:tl,deps:[]},jc,{provide:Ra,useFactory:function(){return Fa},deps:[]},{provide:Pa,useFactory:function(){return La},deps:[]},{provide:$c,useFactory:function(t){return tc(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new nt($c),new rt,new st]]},{provide:qc,useValue:"USD"}];let Pl=(()=>{class t{constructor(t){}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(Wt(El))},providers:Rl}),t})();const Nl={apiKey:"AIzaSyBjMPuySzya4rhD6IZTYYIPFKAKS342rsI",authDomain:"ebrpl-reporting.firebaseapp.com",databaseURL:"https://ebrpl-reporting.firebaseio.com",projectId:"ebrpl-reporting",storageBucket:"ebrpl-reporting.appspot.com",messagingSenderId:"776684824485",appId:"1:776684824485:web:fef2d9dfec9715b6ab6a4c"};class Fl extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}next(t){super.next(this._value=t)}}class Ll extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class Ml extends Ll{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Vl=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class jl extends Vl{constructor(t,e=Vl.now){super(t,()=>jl.delegate&&jl.delegate!==this?jl.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return jl.delegate&&jl.delegate!==this?jl.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const Ul=new jl(Ml);function Bl(...t){let e=t[t.length-1];return x(e)?(t.pop(),U(t,e)):q(t)}function zl(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Hl(t,e,n))}}class Hl{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Gl(t,this.accumulator,this.seed,this.hasSeed))}}class Gl extends f{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $l(t,e){return function(n){return n.lift(new ql(t,e))}}class ql{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Wl(t,this.predicate,this.thisArg))}}class Wl extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Ql=new w(t=>t.complete());function Yl(t){return t?function(t){return new w(e=>t.schedule(()=>e.complete()))}(t):Ql}let Kl=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Bl(this.value);case"E":return t=this.error,new w(e=>e.error(t));case"C":return Yl()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function Zl(t,e=0){return function(n){return n.lift(new Xl(t,e))}}class Xl{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Jl(t,this.scheduler,this.delay))}}class Jl extends f{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Jl.dispatch,this.delay,new tu(t,this.destination)))}_next(t){this.scheduleMessage(Kl.createNext(t))}_error(t){this.scheduleMessage(Kl.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Kl.createComplete()),this.unsubscribe()}}class tu{constructor(t,e){this.notification=t,this.destination=e}}class eu extends Ml{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class nu extends jl{}const ru=new nu(eu);function iu(){}function su(t,e,n){return function(r){return r.lift(new ou(t,e,n))}}class ou{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new au(t,this.nextOrObserver,this.error,this.complete))}}class au extends f{constructor(t,e,n,i){super(t),this._tapNext=iu,this._tapError=iu,this._tapComplete=iu,this._tapError=n||iu,this._tapComplete=i||iu,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||iu,this._tapError=e.error||iu,this._tapComplete=e.complete||iu)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}let cu=1;const lu=(()=>Promise.resolve())(),uu={};function hu(t){return t in uu&&(delete uu[t],!0)}const du={setImmediate(t){const e=cu++;return uu[e]=!0,lu.then(()=>hu(e)&&t()),e},clearImmediate(t){hu(t)}};class pu extends Ml{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=du.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(du.clearImmediate(e),t.scheduled=void 0)}}class fu extends jl{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const gu=new fu(pu);class mu extends w{constructor(t,e=0,n=gu){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(c(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=gu)}static create(t,e=0,n=gu){return new mu(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(mu.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class yu{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new mu(e,this.delay,this.scheduler).subscribe(t)}}var vu=n("Wcq6");function bu(){}class wu{constructor(t,e=ru){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class _u{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bu,{},bu,bu)),e.pipe(su({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Su{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new wu(Zone.current)),this.insideAngular=t.run(()=>new wu(Zone.current,Ul))}}function Cu(t){return function(e){return(e=e.lift(new _u(t.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new yu(t,e))}}(t.outsideAngular),Zl(t.insideAngular))}}const Eu=["ngOnDestroy"],Iu=new Mt("angularfire2.app.options"),Tu=new Mt("angularfire2.app.nameOrConfig"),xu=new wa("6.0.2");function ku(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",vu.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>Object(vu.initializeApp)(t,r))}const Au={provide:class{},useFactory:ku,deps:[Iu,il,[new rt,Tu]]};let Ou=(()=>{class t{constructor(t){Object(vu.registerVersion)("angularfire",xu.full,t.toString()),Object(vu.registerVersion)("angular",_a.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:Iu,useValue:e},{provide:Tu,useValue:n}]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(Wt(zc))},providers:[Au]}),t})(),Du=null;function Ru(){return Du}const Pu=new Mt("DocumentToken");let Nu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:Fu,token:t,providedIn:"platform"}),t})();function Fu(){return Wt(Mu)}const Lu=new Mt("Location Initialized");let Mu=(()=>{class t extends Nu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Ru().getLocation(),this._history=Ru().getHistory()}getBaseHrefFromDOM(){return Ru().getBaseHref(this._doc)}onPopState(t){Ru().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Ru().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Vu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Vu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({factory:ju,token:t,providedIn:"platform"}),t})();function Vu(){return!!window.history.pushState}function ju(){return new Mu(Wt(Pu))}function Uu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Bu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function zu(t){return t&&"?"!==t[0]?"?"+t:t}let Hu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:Gu,token:t,providedIn:"root"}),t})();function Gu(t){const e=Wt(Pu).location;return new qu(Wt(Nu),e&&e.origin||"")}const $u=new Mt("appBaseHref");let qu=(()=>{class t extends Hu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Uu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+zu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+zu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+zu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wt(Nu),Wt($u,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Wu=(()=>{class t extends Hu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Uu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+zu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+zu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wt(Nu),Wt($u,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Qu=(()=>{class t{constructor(t,e){this._subject=new pc,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Bu(Ku(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+zu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ku(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Wt(Hu),Wt(Nu))},t.normalizeQueryParams=zu,t.joinWithSlash=Uu,t.stripTrailingSlash=Bu,t.\u0275prov=lt({factory:Yu,token:t,providedIn:"root"}),t})();function Yu(){return new Qu(Wt(Hu),Wt(Nu))}function Ku(t){return t.replace(/\/index.html$/,"")}const Zu=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Xu=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),Ju=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),th=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),eh=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function nh(t,e,n){const r=Ka(t),i=lh([r[Xa.DaysFormat],r[Xa.DaysStandalone]],e);return lh(i,n)}function rh(t,e,n){const r=Ka(t),i=lh([r[Xa.MonthsFormat],r[Xa.MonthsStandalone]],e);return lh(i,n)}function ih(t,e){return lh(Ka(t)[Xa.DateFormat],e)}function sh(t,e){return lh(Ka(t)[Xa.TimeFormat],e)}function oh(t,e){return lh(Ka(t)[Xa.DateTimeFormat],e)}function ah(t,e){const n=Ka(t),r=n[Xa.NumberSymbols][e];if(void 0===r){if(e===eh.CurrencyDecimal)return n[Xa.NumberSymbols][eh.Decimal];if(e===eh.CurrencyGroup)return n[Xa.NumberSymbols][eh.Group]}return r}function ch(t){if(!t[Xa.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Xa.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function lh(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function uh(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const hh=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dh={},ph=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,fh=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),gh=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),mh=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function yh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function vh(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function bh(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function(t,e){switch(t){case gh.FullYear:return e.getFullYear();case gh.Month:return e.getMonth();case gh.Date:return e.getDate();case gh.Hours:return e.getHours();case gh.Minutes:return e.getMinutes();case gh.Seconds:return e.getSeconds();case gh.FractionalSeconds:return e.getMilliseconds();case gh.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===gh.Hours)0===a&&-12===n&&(a=12);else if(t===gh.FractionalSeconds)return c=e,vh(a,3).substr(0,c);var c;const l=ah(o,eh.MinusSign);return vh(a,e,l,r,i)}}function wh(t,e,n=Xu.Format,r=!1){return function(i,s){return function(t,e,n,r,i,s){switch(n){case mh.Months:return rh(e,i,r)[t.getMonth()];case mh.Days:return nh(e,i,r)[t.getDay()];case mh.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const t=function(t){const e=Ka(t);return ch(e),(e[Xa.ExtraData][2]||[]).map(t=>"string"==typeof t?uh(t):[uh(t[0]),uh(t[1])])}(e),n=function(t,e,n){const r=Ka(t);ch(r);const i=lh([r[Xa.ExtraData][0],r[Xa.ExtraData][1]],e)||[];return lh(i,n)||[]}(e,i,r);let s;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:i}=t[0],{hours:c,minutes:l}=t[1];o>=r&&a>=i&&(o<c||o===c&&a<l)&&(s=n[e])}else{const{hours:r,minutes:i}=t;r===o&&i===a&&(s=n[e])}}),s)return s}return function(t,e,n){const r=Ka(t),i=lh([r[Xa.DayPeriodsFormat],r[Xa.DayPeriodsStandalone]],e);return lh(i,n)}(e,i,r)[o<12?0:1];case mh.Eras:return function(t,e){return lh(Ka(t)[Xa.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,s,t,e,n,r)}}function _h(t){return function(e,n,r){const i=-1*r,s=ah(n,eh.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case fh.Short:return(i>=0?"+":"")+vh(o,2,s)+vh(Math.abs(i%60),2,s);case fh.ShortGMT:return"GMT"+(i>=0?"+":"")+vh(o,1,s);case fh.Long:return"GMT"+(i>=0?"+":"")+vh(o,2,s)+":"+vh(Math.abs(i%60),2,s);case fh.Extended:return 0===r?"Z":(i>=0?"+":"")+vh(o,2,s)+":"+vh(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function Sh(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var s;return vh(i,t,ah(r,eh.MinusSign))}}const Ch={};function Eh(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Ih(t){return t instanceof Date&&!isNaN(t.valueOf())}class Th{}let xh=(()=>{class t extends Th{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return Ka(t)[Xa.PluralCase]}(e||this.locale)(t)){case Zu.Zero:return"zero";case Zu.One:return"one";case Zu.Two:return"two";case Zu.Few:return"few";case Zu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Wt($c))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),kh=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(js(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+bt(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Qs(Ra),Qs(Pa),Qs(pa),Qs(ya))},t.\u0275dir=ye({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Ah{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oh=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){fr()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ah(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Dh(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Dh(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(Ma),Qs(Ra))},t.\u0275dir=ye({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Dh{constructor(t,e){this.record=t,this.view=e}}let Rh=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Ph,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Nh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Nh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(Ma))},t.\u0275dir=ye({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Ph{constructor(){this.$implicit=null,this.ngIf=null}}function Nh(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}class Fh{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Lh=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Mh=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Fh(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(Ma),Qs(Lh,1))},t.\u0275dir=ye({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Vh=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(Qs(ja))},t.\u0275dir=ye({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Jo]}),t})();function jh(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${bt(t)}'`)}class Uh{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Bh{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const zh=new Bh,Hh=new Uh;let Gh=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Ms(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,Vs.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(oo(e))return zh;if(ao(e))return Hh;throw jh(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(function(t=ot.Default){const e=hs(!0);if(null!=e||t&ot.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}())},t.\u0275pipe=ve({name:"async",type:t,pure:!1}),t})(),$h=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,r){let i=function(t){if(Ih(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(hh))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,c,l),e}(n)}const e=new Date(t);if(!Ih(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const r=function(t){return Ka(t)[Xa.LocaleId]}(e);if(dh[r]=dh[r]||{},dh[r][n])return dh[r][n];let i="";switch(n){case"shortDate":i=ih(e,th.Short);break;case"mediumDate":i=ih(e,th.Medium);break;case"longDate":i=ih(e,th.Long);break;case"fullDate":i=ih(e,th.Full);break;case"shortTime":i=sh(e,th.Short);break;case"mediumTime":i=sh(e,th.Medium);break;case"longTime":i=sh(e,th.Long);break;case"fullTime":i=sh(e,th.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");i=yh(oh(e,th.Short),[n,r]);break;case"medium":const s=t(e,"mediumTime"),o=t(e,"mediumDate");i=yh(oh(e,th.Medium),[s,o]);break;case"long":const a=t(e,"longTime"),c=t(e,"longDate");i=yh(oh(e,th.Long),[a,c]);break;case"full":const l=t(e,"fullTime"),u=t(e,"fullDate");i=yh(oh(e,th.Full),[l,u])}return i&&(dh[r][n]=i),i}(n,e)||e;let s,o=[];for(;e;){if(s=ph.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=Eh(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Eh(e,r)-r))}(i,r));let c="";return o.forEach(t=>{const e=function(t){if(Ch[t])return Ch[t];let e;switch(t){case"G":case"GG":case"GGG":e=wh(mh.Eras,Ju.Abbreviated);break;case"GGGG":e=wh(mh.Eras,Ju.Wide);break;case"GGGGG":e=wh(mh.Eras,Ju.Narrow);break;case"y":e=bh(gh.FullYear,1,0,!1,!0);break;case"yy":e=bh(gh.FullYear,2,0,!0,!0);break;case"yyy":e=bh(gh.FullYear,3,0,!1,!0);break;case"yyyy":e=bh(gh.FullYear,4,0,!1,!0);break;case"M":case"L":e=bh(gh.Month,1,1);break;case"MM":case"LL":e=bh(gh.Month,2,1);break;case"MMM":e=wh(mh.Months,Ju.Abbreviated);break;case"MMMM":e=wh(mh.Months,Ju.Wide);break;case"MMMMM":e=wh(mh.Months,Ju.Narrow);break;case"LLL":e=wh(mh.Months,Ju.Abbreviated,Xu.Standalone);break;case"LLLL":e=wh(mh.Months,Ju.Wide,Xu.Standalone);break;case"LLLLL":e=wh(mh.Months,Ju.Narrow,Xu.Standalone);break;case"w":e=Sh(1);break;case"ww":e=Sh(2);break;case"W":e=Sh(1,!0);break;case"d":e=bh(gh.Date,1);break;case"dd":e=bh(gh.Date,2);break;case"E":case"EE":case"EEE":e=wh(mh.Days,Ju.Abbreviated);break;case"EEEE":e=wh(mh.Days,Ju.Wide);break;case"EEEEE":e=wh(mh.Days,Ju.Narrow);break;case"EEEEEE":e=wh(mh.Days,Ju.Short);break;case"a":case"aa":case"aaa":e=wh(mh.DayPeriods,Ju.Abbreviated);break;case"aaaa":e=wh(mh.DayPeriods,Ju.Wide);break;case"aaaaa":e=wh(mh.DayPeriods,Ju.Narrow);break;case"b":case"bb":case"bbb":e=wh(mh.DayPeriods,Ju.Abbreviated,Xu.Standalone,!0);break;case"bbbb":e=wh(mh.DayPeriods,Ju.Wide,Xu.Standalone,!0);break;case"bbbbb":e=wh(mh.DayPeriods,Ju.Narrow,Xu.Standalone,!0);break;case"B":case"BB":case"BBB":e=wh(mh.DayPeriods,Ju.Abbreviated,Xu.Format,!0);break;case"BBBB":e=wh(mh.DayPeriods,Ju.Wide,Xu.Format,!0);break;case"BBBBB":e=wh(mh.DayPeriods,Ju.Narrow,Xu.Format,!0);break;case"h":e=bh(gh.Hours,1,-12);break;case"hh":e=bh(gh.Hours,2,-12);break;case"H":e=bh(gh.Hours,1);break;case"HH":e=bh(gh.Hours,2);break;case"m":e=bh(gh.Minutes,1);break;case"mm":e=bh(gh.Minutes,2);break;case"s":e=bh(gh.Seconds,1);break;case"ss":e=bh(gh.Seconds,2);break;case"S":e=bh(gh.FractionalSeconds,1);break;case"SS":e=bh(gh.FractionalSeconds,2);break;case"SSS":e=bh(gh.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=_h(fh.Short);break;case"ZZZZZ":e=_h(fh.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=_h(fh.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=_h(fh.Long);break;default:return null}return Ch[t]=e,e}(t);c+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}(e,n,i||this.locale,r)}catch(s){throw jh(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(Qs($c))},t.\u0275pipe=ve({name:"date",type:t,pure:!0}),t})(),qh=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[{provide:Th,useClass:xh}]}),t})();function Wh(t){return"browser"===t}let Qh=(()=>{class t{}return t.\u0275prov=lt({token:t,providedIn:"root",factory:()=>new Yh(Wt(Pu),window,Wt(lr))}),t})();class Yh{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector("#"+t);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}var Kh=n("wj3C"),Zh=n.n(Kh),Xh=n("6Joi");function Jh(t,e){return function(t,e=Ul){return new w(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),()=>{null!=r&&r()}})}(t,e)}function td(t,e){return Jh(t,e).pipe(M(t=>({payload:t,type:"query"})))}function ed(t,e){return td(t,e).pipe(M(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function nd(t,e,n){return td(t,n).pipe(M(t=>t.payload.docChanges()),zl((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),M(t=>t.map(t=>({type:t.type,payload:t}))))}function rd(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class id{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?ed(this.query,this.afs.schedulers.outsideAngular).pipe(M(e=>e.filter(e=>t.indexOf(e.type)>-1)),$l(t=>t.length>0),this.afs.keepUnstableUntilFirst):ed(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zl((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rd(t);return nd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return td(this.query,this.afs.schedulers.outsideAngular).pipe(M(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return B(this.query.get(t)).pipe(Zl(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new sd(this.ref.doc(t),this.afs)}}class sd{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=ud(n,e);return new id(r,i,this.afs)}snapshotChanges(){return Jh(this.ref,this.afs.schedulers.outsideAngular).pipe(M(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(M(t=>t.payload.data()))}get(t){return B(this.ref.get(t)).pipe(Zl(this.afs.schedulers.insideAngular))}}class od{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ed(this.query,this.afs.schedulers.outsideAngular).pipe(M(e=>e.filter(e=>t.indexOf(e.type)>-1)),$l(t=>t.length>0),this.afs.keepUnstableUntilFirst):ed(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zl((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=rd(t);return nd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return td(this.query,this.afs.schedulers.outsideAngular).pipe(M(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return B(this.query.get(t)).pipe(Zl(this.afs.schedulers.insideAngular))}}const ad=new Mt("angularfire2.enableFirestorePersistence"),cd=new Mt("angularfire2.firestore.persistenceSettings"),ld=new Mt("angularfire2.firestore.settings");function ud(t,e=(t=>t)){return{query:e(t),ref:t}}let hd=(()=>{class t{constructor(t,e,n,r,i,s,o){this.schedulers=new Su(s),this.keepUnstableUntilFirst=Cu(this.schedulers),this.firestore=s.runOutsideAngular(()=>{const n=ku(t,s,e);Xh.registerFirestore&&Object(Xh.registerFirestore)(Zh.a);const i=n.firestore();return r&&i.settings(r),i}),this.persistenceEnabled$=n&&!function(t){return"server"===t}(i)?s.runOutsideAngular(()=>{try{return B(this.firestore.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(t){return Bl(!1)}}):Bl(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=ud(n,e),s=this.schedulers.ngZone.run(()=>r);return new id(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new od(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new sd(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(Wt(Iu),Wt(Tu,8),Wt(ad,8),Wt(ld,8),Wt(zc),Wt(il),Wt(cd,8))},t.\u0275prov=lt({factory:function(){return new t(Wt(Iu),Wt(Tu,8),Wt(ad,8),Wt(ld,8),Wt(zc),Wt(il),Wt(cd,8))},token:t,providedIn:"any"}),t})(),dd=(()=>{class t{constructor(t){this._AngularFirestore=t,this._constants=new Fl(null);let e=this._AngularFirestore.doc("constants/constants");e.valueChanges(),e.valueChanges().subscribe(t=>{console.log(t),this._constants.next(t)})}get constants(){return this._constants.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(Wt(hd))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const pd=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),fd=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function gd(t){return e=>0===t?Yl():e.lift(new md(t))}class md{constructor(t){if(this.total=t,this.total<0)throw new fd}call(t,e){return e.subscribe(new yd(t,this.total))}}class yd extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function vd(t=null){return e=>e.lift(new bd(t))}class bd{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new wd(t,this.defaultValue))}}class wd extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function _d(t=Ed){return e=>e.lift(new Sd(t))}class Sd{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Cd(t,this.errorFactory))}}class Cd extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Ed(){return new pd}function Id(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$l((e,n)=>t(e,n,r)):y,gd(1),n?vd(e):_d(()=>new pd))}const Td={};function xd(...t){let e=null,n=null;return x(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),q(t,n).lift(new kd(e))}class kd{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ad(t,this.resultSelector))}}class Ad extends L{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Td),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(F(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const s=this.values,o=this.toRespond?s[n]===Td?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Od(t){return new w(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?B(n):Yl()).subscribe(e)})}function Dd(){return $(1)}function Rd(t){return function(e){return 0===t?Yl():e.lift(new Pd(t))}}class Pd{constructor(t){if(this.total=t,this.total<0)throw new fd}call(t,e){return e.subscribe(new Nd(t,this.total))}}class Nd extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Fd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$l((e,n)=>t(e,n,r)):y,Rd(1),n?vd(e):_d(()=>new pd))}function Ld(t){return function(e){const n=new Md(t),r=e.lift(n);return n.caught=r}}class Md{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Vd(t,this.selector,this.caught))}}class Vd extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new k(this,void 0,void 0);this.add(r);const i=F(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}class jd{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Ud(t,this.predicate,this.thisArg,this.source))}}class Ud extends f{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Bd(t,e){return"function"==typeof e?n=>n.pipe(Bd((n,r)=>B(t(n,r)).pipe(M((t,i)=>e(n,t,r,i))))):e=>e.lift(new zd(t))}class zd{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hd(t,this.project))}}class Hd extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new k(this,e,n),s=this.destination;s.add(i),this.innerSubscription=F(this,t,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function Gd(...t){return Dd()(Bl(...t))}function $d(...t){const e=t[t.length-1];return x(e)?(t.pop(),n=>Gd(t,n,e)):e=>Gd(t,e)}function qd(t,e){return z(t,e,1)}class Wd{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Qd(t,this.callback))}}class Qd extends f{constructor(t,e){super(t),this.add(new h(e))}}class Yd{constructor(t,e){this.id=t,this.url=e}}class Kd extends Yd{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zd extends Yd{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xd extends Yd{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jd extends Yd{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tp extends Yd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ep extends Yd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class np extends Yd{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rp extends Yd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ip extends Yd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sp{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class op{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ap{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cp{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lp{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class up{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hp{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let dp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&eo(0,"router-outlet")},directives:function(){return[mg]},encapsulation:2}),t})();class pp{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function fp(t){return new pp(t)}function gp(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function mp(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class yp{constructor(t,e){this.routes=t,this.module=e}}function vp(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];bp(r,wp(e,r))}}function bp(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&vp(t.children,e)}function wp(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function _p(t){const e=t.children&&t.children.map(_p),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=dp),n}function Sp(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Cp(t[i],e[i]))return!1;return!0}function Cp(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Ep(t){return Array.prototype.concat.apply([],t)}function Ip(t){return t.length>0?t[t.length-1]:null}function Tp(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function xp(t){return ao(t)?t:oo(t)?B(Promise.resolve(t)):Bl(t)}function kp(t,e,n){return n?function(t,e){return Sp(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Rp(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Cp(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Rp(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Rp(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Rp(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,s)}}(e,n,n.segments)}(t.root,e.root)}class Ap{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fp(this.queryParams)),this._queryParamMap}toString(){return Lp.serialize(this)}}class Op{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Tp(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mp(this)}}class Dp{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=fp(this.parameters)),this._parameterMap}toString(){return Hp(this)}}function Rp(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Pp(t,e){let n=[];return Tp(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Tp(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class Np{}class Fp{parse(t){const e=new Qp(t);return new Ap(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return Mp(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return Tp(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Pp(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Mp(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${jp(e)}=${jp(t)}`).join("&"):`${jp(e)}=${jp(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Lp=new Fp;function Mp(t){return t.segments.map(t=>Hp(t)).join("/")}function Vp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jp(t){return Vp(t).replace(/%3B/gi,";")}function Up(t){return Vp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bp(t){return decodeURIComponent(t)}function zp(t){return Bp(t.replace(/\+/g,"%20"))}function Hp(t){return`${Up(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Up(t)}=${Up(e[t])}`).join("")}`;var e}const Gp=/^[^\/()?;=#]+/;function $p(t){const e=t.match(Gp);return e?e[0]:""}const qp=/^[^=?&#]+/,Wp=/^[^?&#]+/;class Qp{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Op([],{}):new Op([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Op(t,e)),n}parseSegment(){const t=$p(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Dp(Bp(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=$p(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=$p(this.remaining);t&&(n=t,this.capture(n))}t[Bp(e)]=Bp(n)}parseQueryParam(t){const e=function(t){const e=t.match(qp);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Wp);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=zp(e),i=zp(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=$p(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Op([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Yp{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Kp(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Kp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Zp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Zp(t,this._root).map(t=>t.value)}}function Kp(t,e){if(t===e.value)return e;for(const n of e.children){const e=Kp(t,n);if(e)return e}return null}function Zp(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Zp(t,n);if(r.length)return r.unshift(e),r}return[]}class Xp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Jp(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class tf extends Yp{constructor(t,e){super(t),this.snapshot=e,af(this,t)}toString(){return this.snapshot.toString()}}function ef(t,e){const n=function(t,e){const n=new sf([],{},{},"",{},"primary",e,null,t.root,-1,{});return new of("",new Xp(n,[]))}(t,e),r=new Fl([new Dp("",{})]),i=new Fl({}),s=new Fl({}),o=new Fl({}),a=new Fl(""),c=new nf(r,i,o,a,s,"primary",e,n.root);return c.snapshot=n.root,new tf(new Xp(c,[]),n)}class nf{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(M(t=>fp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(M(t=>fp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rf(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class sf{constructor(t,e,n,r,i,s,o,a,c,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class of extends Yp{constructor(t,e){super(e),this.url=t,af(this,e)}toString(){return cf(this._root)}}function af(t,e){e.value._routerState=t,e.children.forEach(e=>af(t,e))}function cf(t){const e=t.children.length>0?` { ${t.children.map(cf).join(", ")} } `:"";return`${t.value}${e}`}function lf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sp(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Sp(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Sp(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Sp(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function uf(t,e){var n,r;return Sp(t.params,e.params)&&Rp(n=t.url,r=e.url)&&n.every((t,e)=>Sp(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||uf(t.parent,e.parent))}function hf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function df(t,e,n,r,i){let s={};return r&&Tp(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Ap(n.root===t?e:function t(e,n,r){const i={};return Tp(e.children,(e,s)=>{i[s]=e===n?r:t(e,n,r)}),new Op(e.segments,i)}(n.root,t,e),s,i)}class pf{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&hf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Ip(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ff{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function gf(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function mf(t,e,n){if(t||(t=new Op([],{})),0===t.segments.length&&t.hasChildren())return yf(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=gf(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!_f(o,a,e))return s;r+=2}else{if(!_f(o,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Op(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Op(t.segments.slice(r.pathIndex),t.children),yf(e,0,i)}return r.match&&0===i.length?new Op(t.segments,{}):r.match&&!t.hasChildren()?vf(t,e,n):r.match?yf(t,0,i):vf(t,e,n)}function yf(t,e,n){if(0===n.length)return new Op(t.segments,{});{const r=function(t){return"object"!=typeof t[0]||void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return Tp(r,(n,r)=>{null!==n&&(i[r]=mf(t.children[r],e,n))}),Tp(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Op(t.segments,i)}}function vf(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=bf(n[i].outlets);return new Op(r,t)}if(0===i&&hf(n[0])){r.push(new Dp(t.segments[e].path,n[0])),i++;continue}const s=gf(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&hf(o)?(r.push(new Dp(s,wf(o))),i+=2):(r.push(new Dp(s,{})),i++)}return new Op(r,{})}function bf(t){const e={};return Tp(t,(t,n)=>{null!==t&&(e[n]=vf(new Op([],{}),0,t))}),e}function wf(t){const e={};return Tp(t,(t,n)=>e[n]=""+t),e}function _f(t,e,n){return t==n.path&&Sp(e,n.parameters)}class Sf{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),lf(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Jp(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Tp(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Jp(t),i=t.value.component?n.children:e;Tp(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Jp(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new up(t.value.snapshot))}),t.children.length&&this.forwardEvent(new cp(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(lf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Cf(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Cf(t){lf(t.value),t.children.forEach(Cf)}function Ef(t){return"function"==typeof t}function If(t){return t instanceof Ap}class Tf{constructor(t){this.segmentGroup=t||null}}class xf{constructor(t){this.urlTree=t}}function kf(t){return new w(e=>e.error(new Tf(t)))}function Af(t){return new w(e=>e.error(new xf(t)))}function Of(t){return new w(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Df{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Zt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(M(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ld(t=>{if(t instanceof xf)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Tf)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(M(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Ld(t=>{if(t instanceof Tf)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Op([],{primary:t}):t;return new Ap(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(M(t=>new Op([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Bl({});const n=[],r=[],i={};return Tp(t,(t,s)=>{const o=e(s,t).pipe(M(t=>i[s]=t));"primary"===s?n.push(o):r.push(o)}),Bl.apply(null,n.concat(r)).pipe(Dd(),Fd(),M(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,s){return Bl(...n).pipe(M(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Ld(t=>{if(t instanceof Tf)return Bl(null);throw t}))),Dd(),Id(t=>!!t),Ld((t,n)=>{if(t instanceof pd||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Bl(new Op([],{}));throw new Tf(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Ff(r)!==s?kf(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):kf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Af(i):this.lineralizeSegments(n,i).pipe(z(n=>{const i=new Op(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=Rf(e,r,i);if(!o)return kf(e);const u=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Af(u):this.lineralizeSegments(r,u).pipe(z(r=>this.expandSegment(t,e,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(M(t=>(n._loadedConfig=t,new Op(r,{})))):Bl(new Op(r,{}));const{matched:i,consumedSegments:s,lastChild:o}=Rf(e,n,r);if(!i)return kf(e);const a=r.slice(o);return this.getChildConfig(t,n,r).pipe(z(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:o}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Nf(t,e,n)&&"primary"!==Ff(n))}(t,n,r)?{segmentGroup:Pf(new Op(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Ff(r)&&(n[Ff(r)]=new Op([],{}));return n}(r,new Op(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Nf(t,e,n))}(t,n,r)?{segmentGroup:Pf(new Op(t.segments,function(t,e,n,r){const i={};for(const s of n)Nf(t,e,s)&&!r[Ff(s)]&&(i[Ff(s)]=new Op([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,a,r);return 0===o.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(M(t=>new Op(s,t))):0===r.length&&0===o.length?Bl(new Op(s,{})):this.expandSegment(n,i,r,o,"primary",!0).pipe(M(t=>new Op(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Bl(new yp(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Bl(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?B(r).pipe(M(r=>{const i=t.get(r);let s;if(function(t){return t&&Ef(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Ef(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return xp(s)})).pipe(Dd(),(i=t=>!0===t,t=>t.lift(new jd(i,void 0,t)))):Bl(!0);var i}(t.injector,e,n).pipe(z(n=>n?this.configLoader.load(t.injector,e).pipe(M(t=>(e._loadedConfig=t,t))):function(t){return new w(e=>e.error(gp(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Bl(new yp([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Bl(n);if(r.numberOfChildren>1||!r.children.primary)return Of(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ap(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Tp(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Tp(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Op(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Rf(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||mp)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Pf(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Op(t.segments.concat(e.segments),e.children)}return t}function Nf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ff(t){return t.outlet||"primary"}class Lf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Mf{constructor(t,e){this.component=t,this.route=e}}function Vf(t,e,n){const r=t._root;return function t(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=Jp(n);return e.children.forEach(e=>{!function(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,a=n?n.value:null,c=r?r.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Rp(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Rp(t.url,e.url)||!Sp(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uf(t,e)||!Sp(t.queryParams,e.queryParams);case"paramsChange":default:return!uf(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Lf(i)):(o.data=a.data,o._resolvedData=a._resolvedData),t(e,n,o.component?c?c.children:null:r,i,s),l&&s.canDeactivateChecks.push(new Mf(c&&c.outlet&&c.outlet.component||null,a))}else a&&Uf(n,c,s),s.canActivateChecks.push(new Lf(i)),t(e,null,o.component?c?c.children:null:r,i,s)}(e,o[e.value.outlet],r,i.concat([e.value]),s),delete o[e.value.outlet]}),Tp(o,(t,e)=>Uf(t,r.getContext(e),s)),s}(r,e?e._root:null,n,[r.value])}function jf(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Uf(t,e,n){const r=Jp(t),i=t.value;Tp(r,(t,r)=>{Uf(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Mf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Bf=Symbol("INITIAL_VALUE");function zf(){return Bd(t=>xd(...t.map(t=>t.pipe(gd(1),$d(Bf)))).pipe(zl((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Bf)return t;if(r===Bf&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||If(r))return r}return t},t)},Bf),$l(t=>t!==Bf),M(t=>If(t)?t:!0===t),gd(1)))}function Hf(t,e){return null!==t&&e&&e(new lp(t)),Bl(!0)}function Gf(t,e){return null!==t&&e&&e(new ap(t)),Bl(!0)}function $f(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Bl(r.map(r=>Od(()=>{const i=jf(r,e,n);let s;if(function(t){return t&&Ef(t.canActivate)}(i))s=xp(i.canActivate(e,t));else{if(!Ef(i))throw new Error("Invalid CanActivate guard");s=xp(i(e,t))}return s.pipe(Id())}))).pipe(zf()):Bl(!0)}function qf(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Od(()=>Bl(e.guards.map(i=>{const s=jf(i,e.node,n);let o;if(function(t){return t&&Ef(t.canActivateChild)}(s))o=xp(s.canActivateChild(r,t));else{if(!Ef(s))throw new Error("Invalid CanActivateChild guard");o=xp(s(r,t))}return o.pipe(Id())})).pipe(zf())));return Bl(i).pipe(zf())}class Wf{}class Qf{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const t=Zf(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new sf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xp(n,e),i=new of(this.url,r);return this.inheritParamsAndData(i._root),Bl(i)}catch(t){return new w(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=rf(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Pp(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(i){if(!(i instanceof Wf))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Wf}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Wf;if((t.outlet||"primary")!==r)throw new Wf;let i,s=[],o=[];if("**"===t.path){const s=n.length>0?Ip(n).parameters:{};i=new sf(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tg(t),r,t.component,t,Yf(e),Kf(e)+n.length,eg(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Wf;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||mp)(n,t,e);if(!r)throw new Wf;const i={};Tp(r.posParams,(t,e)=>{i[e]=t.path});const s=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=a.consumedSegments,o=n.slice(a.lastChild),i=new sf(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tg(t),r,t.component,t,Yf(e),Kf(e)+s.length,eg(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:c,slicedSegments:l}=Zf(e,s,o,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const t=this.processChildren(a,c);return[new Xp(i,t)]}if(0===a.length&&0===l.length)return[new Xp(i,[])];const u=this.processSegment(a,c,l,"primary");return[new Xp(i,u)]}}function Yf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kf(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Zf(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Xf(t,e,n)&&"primary"!==Jf(n))}(t,n,r)){const i=new Op(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&"primary"!==Jf(s)){const n=new Op([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Jf(s)]=n}return i}(t,e,r,new Op(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Xf(t,e,n))}(t,n,r)){const s=new Op(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Xf(t,n,a)&&!i[Jf(a)]){const n=new Op([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Jf(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Op(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Xf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Jf(t){return t.outlet||"primary"}function tg(t){return t.data||{}}function eg(t){return t.resolve||{}}function ng(t,e,n,r){const i=jf(t,e,r);return xp(i.resolve?i.resolve(e,n):i(e,n))}function rg(t){return function(e){return e.pipe(Bd(e=>{const n=t(e);return n?B(n).pipe(M(()=>e)):B([e])}))}}class ig{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const sg=new Mt("ROUTES");class og{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(M(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new yp(Ep(r.injector.get(sg)).map(_p),r)}))}loadModuleFactory(t){return"string"==typeof t?B(this.loader.load(t)):xp(t()).pipe(z(t=>t instanceof Xt?Bl(t):B(this.compiler.compileModuleAsync(t))))}}class ag{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function cg(t){throw t}function lg(t,e,n){return e.parse("/")}function ug(t,e){return Bl(null)}let hg=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=cg,this.malformedUriErrorHandler=lg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ug,afterPreactivation:ug},this.urlHandlingStrategy=new ag,this.routeReuseStrategy=new ig,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Zt),this.console=i.get(Gc);const c=i.get(il);this.isNgZoneEnabled=c instanceof il,this.resetConfig(a),this.currentUrlTree=new Ap(new Op([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new og(s,o,t=>this.triggerEvent(new sp(t)),t=>this.triggerEvent(new op(t))),this.routerState=ef(this.currentUrlTree,this.rootComponentType),this.transitions=new Fl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe($l(t=>0!==t.id),M(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Bd(t=>{let n=!1,r=!1;return Bl(t).pipe(su(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bd(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Bl(t).pipe(Bd(t=>{const n=this.transitions.getValue();return e.next(new Kd(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ql:[t]}),Bd(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(t){return t.pipe(Bd(t=>function(t,e,n,r,i){return new Df(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe(M(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),su(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(s){return s.pipe(z(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){return new Qf(t,e,n,r,i,s).recognize()}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(M(t=>Object.assign(Object.assign({},s),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),su(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),su(t=>{const n=new tp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Kd(n,this.serializeUrl(r),i,s);e.next(a);const c=ef(r,this.rootComponentType).snapshot;return Bl(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ql}),rg(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),su(t=>{const e=new ep(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),M(t=>Object.assign(Object.assign({},t),{guards:Vf(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(z(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Bl(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return B(t).pipe(z(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Bl(s.map(s=>{const o=jf(s,e,i);let a;if(function(t){return t&&Ef(t.canDeactivate)}(o))a=xp(o.canDeactivate(t,e,n,r));else{if(!Ef(o))throw new Error("Invalid CanDeactivate guard");a=xp(o(t,e,n,r))}return a.pipe(Id())})).pipe(zf()):Bl(!0)}(t.component,t.route,n,e,r)),Id(t=>!0!==t,!0))}(o,r,i,t).pipe(z(n=>n&&"boolean"==typeof n?function(t,e,n,r){return B(e).pipe(qd(e=>B([Gf(e.route.parent,r),Hf(e.route,r),qf(t,e.path,n),$f(t,e.route,n)]).pipe(Dd(),Id(t=>!0!==t,!0))),Id(t=>!0!==t,!0))}(r,s,t,e):Bl(n)),M(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),su(t=>{if(If(t.guardsResult)){const e=gp(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),su(t=>{const e=new np(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),$l(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Xd(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),rg(t=>{if(t.guards.canActivateChecks.length)return Bl(t).pipe(su(t=>{const e=new rp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(z(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;return i.length?B(i).pipe(qd(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Bl({});if(1===i.length){const s=i[0];return ng(t[s],e,n,r).pipe(M(t=>({[s]:t})))}const s={};return B(i).pipe(z(i=>ng(t[i],e,n,r).pipe(M(t=>(s[i]=t,t))))).pipe(Fd(),M(()=>s))}(t._resolve,t,e,r).pipe(M(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),rf(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return v(zl(t,e),Rd(1),vd(e))(n)}:function(e){return v(zl((e,n,r)=>t(e,n,r+1)),Rd(1))(e)}}((t,e)=>t),M(e=>t)):Bl(t)}))}),su(t=>{const e=new ip(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),rg(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),M(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Xp(i,s)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new nf(new Fl((i=n.value).url),new Fl(i.params),new Fl(i.queryParams),new Fl(i.fragment),new Fl(i.data),i.outlet,i.component,i),s=n.children.map(n=>t(e,n));return new Xp(r,s)}}var i}(t,e._root,n?n._root:void 0);return new tf(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),su(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),M(t=>(new Sf(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),su({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Xd(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Wd(i))),Ld(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=If(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Xd(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Jd(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var i;return Ql}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){vp(t),this.config=t.map(_p),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=e;fr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}else u=s?this.currentUrlTree.queryParams:r||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return df(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pf(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Tp(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new pf(n,e,r)}(n);if(s.toRoot())return df(e.root,new Op([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new ff(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new ff(n.snapshot._urlSegment,!0,0);const r=hf(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ff(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?yf(o.segmentGroup,o.index,s.commands):mf(o.segmentGroup,o.index,s.commands);return df(o.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,u,l)}navigateByUrl(t,e={skipLocationChange:!1}){fr()&&this.isNgZoneEnabled&&!il.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=If(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(If(t))return kp(this.currentUrlTree,t,e);const n=this.parseUrl(t);return kp(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Zd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const s=this.getTransition();if(s&&"imperative"!==e&&"imperative"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"hashchange"==e&&"popstate"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(s&&"popstate"==e&&"hashchange"===s.source&&s.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o,a,c;i?(o=i.resolve,a=i.reject,c=i.promise):c=new Promise((t,e)=>{o=t,a=e});const l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){Ks()},t.\u0275dir=ye({type:t}),t})(),dg=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof Zd&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){fr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:pg(this.skipLocationChange),replaceUrl:pg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:pg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:pg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Qs(hg),Qs(nf),Qs(Hu))},t.\u0275dir=ye({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&co("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(Go("href",e.href,vr),Gs("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Jo]}),t})();function pg(t){return""===t||!!t}class fg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gg,this.attachRef=null}}class gg{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new fg,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let mg=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new pc,this.deactivateEvents=new pc,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new yg(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Qs(gg),Qs(ja),Qs(da),Ys("name"),Qs(ds))},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class yg{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===nf?this.route:t===gg?this.childContexts:this.parent.get(t,e)}}class vg{}class bg{preload(t,e){return Bl(null)}}let wg=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new og(e,n,e=>t.triggerEvent(new sp(e)),e=>t.triggerEvent(new op(e)))}setUpPreloading(){this.subscription=this.router.events.pipe($l(t=>t instanceof Zd),qd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return B(n).pipe($(),M(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(z(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Wt(hg),Wt(Tl),Wt(tl),Wt(As),Wt(vg))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),_g=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Kd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new hp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){Ks()},t.\u0275dir=ye({type:t}),t})();const Sg=new Mt("ROUTER_CONFIGURATION"),Cg=new Mt("ROUTER_FORROOT_GUARD"),Eg=[Qu,{provide:Np,useClass:Fp},{provide:hg,useFactory:function(t,e,n,r,i,s,o,a={},c,l){const u=new hg(null,t,e,n,r,i,s,Ep(o));if(c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=Ru();u.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[Np,gg,Qu,As,Tl,tl,sg,Sg,[class{},new rt],[class{},new rt]]},gg,{provide:nf,useFactory:function(t){return t.routerState.root},deps:[hg]},{provide:Tl,useClass:Al},wg,bg,class{preload(t,e){return e().pipe(Ld(()=>Bl(null)))}},{provide:Sg,useValue:{enableTracing:!1}}];function Ig(){return new bl("Router",hg)}let Tg=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Eg,Og(e),{provide:Cg,useFactory:Ag,deps:[[hg,new rt,new st]]},{provide:Sg,useValue:n||{}},{provide:Hu,useFactory:kg,deps:[Nu,[new nt($u),new rt],Sg]},{provide:_g,useFactory:xg,deps:[hg,Qh,Sg]},{provide:vg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bg},{provide:bl,multi:!0,useFactory:Ig},[Dg,{provide:Lc,multi:!0,useFactory:Rg,deps:[Dg]},{provide:Ng,useFactory:Pg,deps:[Dg]},{provide:Hc,multi:!0,useExisting:Ng}]]}}static forChild(e){return{ngModule:t,providers:[Og(e)]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(Wt(Cg,8),Wt(hg,8))}}),t})();function xg(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new _g(t,e,n)}function kg(t,e,n={}){return n.useHash?new Wu(t,e):new qu(t,e)}function Ag(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Og(t){return[{provide:Os,multi:!0,useValue:t},{provide:sg,multi:!0,useValue:t}]}let Dg=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new I}appInitializer(){return this.injector.get(Lu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(hg),r=this.injector.get(Sg);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Bl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Sg),n=this.injector.get(wg),r=this.injector.get(_g),i=this.injector.get(hg),s=this.injector.get(El);t===s.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Wt(As))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();function Rg(t){return t.appInitializer.bind(t)}function Pg(t){return t.bootstrapListener.bind(t)}const Ng=new Mt("Router Initializer");class Fg extends I{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new Lg(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new S;if(this.isStopped||this.hasError?s=h.EMPTY:(this.observers.push(t),s=new C(this,t)),r&&t.add(t=new Jl(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||ru).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class Lg{constructor(t,e){this.time=t,this.value=e}}function Mg(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,c=!1;return function(l){o++,i&&!a||(a=!1,i=new Fg(t,e,r),s=l.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){c=!0,s=void 0,i.complete()}}));const u=i.subscribe(this);this.add(()=>{o--,u.unsubscribe(),s&&!c&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}let Vg=(()=>{class t{constructor(t,e,r,i){const s=new Su(i),o=Cu(s),a=Bl(void 0).pipe(Zl(s.outsideAngular),Bd(()=>i.runOutsideAngular(()=>n.e(1).then(n.bind(null,"6nsN")))),M(()=>ku(t,i,e)),M(t=>i.runOutsideAngular(()=>t.auth())),Mg({bufferSize:1,refCount:!1}));return a.pipe(Id()).subscribe(),this.authState=a.pipe(Bd(t=>i.runOutsideAngular(()=>new w(t.onAuthStateChanged.bind(t)))),o),this.user=a.pipe(Bd(t=>i.runOutsideAngular(()=>new w(t.onIdTokenChanged.bind(t)))),o),this.idToken=this.user.pipe(Bd(t=>t?B(t.getIdToken()):Bl(null))),this.idTokenResult=this.user.pipe(Bd(t=>t?B(t.getIdTokenResult()):Bl(null))),((t,e,n)=>new Proxy(t,{get:(r,i)=>n.runOutsideAngular(()=>{if(t[i])return t[i];if(Eu.includes(i))return()=>{};const r=e.toPromise().then(t=>{const e=t&&t[i];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>r[e],apply:(t,e,n)=>r.then(t=>t&&t(...n))})})}))(this,a,i)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Iu),Wt(Tu,8),Wt(zc),Wt(il))},t.\u0275prov=lt({factory:function(){return new t(Wt(Iu),Wt(Tu,8),Wt(zc),Wt(il))},token:t,providedIn:"any"}),t})(),jg=(()=>{class t{constructor(t,e){this._AngularFireAuth=t,this._AngularFirestore=e,this.user$=new Fl(null),t.user.subscribe(t=>{if(t){let n=e.doc("users/"+t.email);n.valueChanges().pipe(Id()).subscribe(e=>{e.emailVerified!==t.emailVerified?n.update({emailVerified:t.emailVerified}).then(()=>{e.emailVerified=t.emailVerified,this._user=e,this.user$.next(this._user)}):(this._user=e,this.user$.next(this._user))})}else this._user=null,this.user$.next(this._user)})}logIn(t,e){return new Promise((n,r)=>{this._AngularFireAuth.signInWithEmailAndPassword(t,e).then(t=>{console.log("[User Serv] Logged in"),n()},t=>{console.error("[User Serv] Login failed: "+t),r()})})}logOut(){return new Promise((t,e)=>{this._AngularFireAuth.signOut().then(e=>{console.log("[User Serv] Signed out"),t()},t=>{console.error("[User Serv] Signout failed: "+t),e()})})}createAccount(t,e){return new Promise((n,r)=>{this._AngularFireAuth.createUserWithEmailAndPassword(t.email,e).then(e=>{this._AngularFirestore.doc("users/"+t.email).set(t).then(n).catch(t=>{console.log("[User Serv] Error creating account: "+t),r(t)})}).catch(t=>{console.log("[User Serv] Error creating account: "+t),r(t)})})}getUserObservable(){return this.user$.asObservable()}getUserSnapshot(){return this._user}setBranch(t){return this._AngularFirestore.doc("users/"+this._user.email).update({branch:t}).then(()=>{this._user.branch=t})}sendVerificationEmail(){return new Promise((t,e)=>{vu.auth().currentUser.sendEmailVerification().then(t,e)})}}return t.\u0275fac=function(e){return new(e||t)(Wt(Vg),Wt(hd))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ug=(()=>{class t{constructor(t,e,n){this._AngularFirestore=t,this._Router=e,this._UserService=n,this.report$=new Fl(this._report),this.page$=new Fl(this._page)}openReport(t,e=0){return new Promise((n,r)=>{let i=this._AngularFirestore.doc("/reports/"+t);i.valueChanges().pipe(Id()).subscribe(s=>{this._report=s,this.report$.next(s),void 0===this._report?(console.error("[Report Serv] Report "+t+" does not exist."),r()):i.collection("pages").doc(e.toString()).valueChanges().pipe(Id()).subscribe(t=>{this._page=t,this.page$.next(t),console.log(this._page),console.log("[Report Serv] Report and page successfully opened."),n()})})})}generateReportID(t=!0,e=4,n){return new Promise((r,i)=>{let s="0123456789abcdefghijklmnopqrstuvwxyz",o="";if(navigator.onLine)if(n)o=n;else for(let t=e;t>0;--t)o+=s[Math.floor(Math.random()*s.length)];else i("offline");t?this._AngularFirestore.collection("/reports",t=>t.where("id","==",o)).valueChanges().pipe(Id()).subscribe(t=>{t.length>0?(console.warn("[Report Serv] Generated ID is not unique. Retrying..."),this.generateReportID().then(t=>r(t))):r(o)}):r(o)})}createNewReport(t){return new Promise((e,n)=>{if(navigator.onLine){let r,i=this._AngularFirestore.doc("/templates/"+t);i.get().pipe(Id()).subscribe(t=>{r=t.data(),this.generateReportID().then(t=>{let n=this._AngularFirestore.doc("/reports/"+t);r.id=t,r.author=this._UserService.getUserSnapshot().email,r.branch=this._UserService.getUserSnapshot().branch,n.set(r).then(()=>{let s=[];r.pageStatuses.forEach((t,e)=>{let r=new Promise((t,r)=>{i.collection("pages").doc(e.toString()).valueChanges().pipe(Id()).subscribe(i=>{let s=n.collection("pages").doc(e.toString());console.log(i),s.set(i).then(t).catch(r)},r)});s.push(r)}),Promise.all(s).then(()=>e(t))})})},t=>{console.error(t),n()})}else n()})}duplicateReport(t){return console.log("[Report Serv] Duplicating "+t),new Promise((e,n)=>{this._AngularFirestore.doc("/reports/"+t).valueChanges().pipe(Id()).subscribe(r=>{let i=r;console.log(i),this.generateReportID().then(s=>{i.templateID=r.templateID,i.id=s,i.completionStatus="incomplete",this._AngularFirestore.doc("/reports/"+s).set(i).then(()=>{let r=[];for(let e=0;e<i.pageCount;e++)this._AngularFirestore.doc("/reports/"+t+"/pages/"+e.toString()).valueChanges().pipe(Id()).subscribe(t=>{r.push(this._AngularFirestore.doc("/reports/"+s+"/pages/"+e.toString()).set(t))});Promise.all(r).then(()=>{console.log("Report duplicated successfully."),e(s)},n)},n)})},n)})}getMagicString(t){return new Promise((e,n)=>{let r=[];t.forEach(t=>{r.push(new Promise((e,n)=>{let r,i,s=[],o=[];this._AngularFirestore.doc("/reports/"+t.id).get().pipe(Id()).subscribe(n=>{i=n.data();for(let e=0;e<i.pageCount;e++)o.push(new Promise((n,r)=>{this._AngularFirestore.doc("/reports/"+t.id+"/pages/"+e.toString()).get().pipe(Id()).subscribe(t=>{s.push(t.data()),n()},r)}));Promise.all(o).then(()=>{r={id:i.id,templateID:i.templateID,title:i.title||null,coverageDate:i.coverageDate||null,submitDate:i.submitDate||null,author:i.author||null,branch:i.branch||null,additionalInfo:i.additionalInfo||null,pageStatuses:i.pageStatuses||null,pageCount:i.pageCount,completionStatus:i.completionStatus,pages:s},e(r)})})}))}),Promise.all(r).then(t=>{let n=JSON.stringify({reports:t});e(n)},n)})}closeReport(t=!0){this._report=null,this.report$.next(null),t&&this._Router.navigate([""]),console.log("[Report Serv] The report has been successfully closed.")}deleteReport(t){return new Promise((e,n)=>{let r=this._AngularFirestore.doc("/reports/"+t.id);for(let i=0;i<t.pageCount;i++)r.collection("pages").doc(i.toString()).delete();r.delete().then(()=>{console.log("Report deleted"),e()},t=>{console.error("Deletion failed: "+t),n()})})}openPage(t){return console.log("[Report Serv] Opening page "+t+"..."),new Promise((e,n)=>{this._report&&navigator.onLine||(console.error("[Report Serv] Cannot open page. No report is open or device offline."),n()),this._AngularFirestore.doc("/reports/"+this._report.id+"/pages/"+t.toString()).valueChanges().pipe(Id()).subscribe(t=>{this._page=t,this.page$.next(t),e()},n)})}submitReport(){return new Promise((t,e)=>{!1===navigator.onLine&&(console.error("[Report Serv] Cannot submit report. Device offline."),e()),this._report||(console.error("[Report Serv] Cannot submit report. None is open."),e()),this._report.completionStatus="complete",this._report.submitDate=(new Date).toISOString(),this._report.author=this._UserService.getUserSnapshot().email,this.report$.next(this._report),this.saveReportOnline().then(()=>{this.closeReport(),t()},e)})}attachToBranch(t=!1){this._report.branch=this._UserService.getUserSnapshot().branch,this.report$.next(this._report),t&&this.saveReportOnline()}getReportObservable(){return this.report$.asObservable()}get report(){return this._report}getPageObservable(){return this.page$.asObservable()}get page(){return this._page}saveReportOnline(){return new Promise((t,e)=>{navigator.onLine||(console.error("[Report Serv] Cannot save report online. Device offline"),e()),this._report?this._AngularFirestore.doc("reports/"+this._report.id).set(this._report).then(()=>{console.log("[Report Serv] Successfully saved report to server."),t()},e):(console.error("[Report Serv] Cannot save report online. None is open."),e())})}savePageOnline(){return new Promise((t,e)=>{navigator.onLine||(console.error("[Report Serv] Cannot save page online. Device offline"),e()),this._page?this._AngularFirestore.doc("reports/"+this._report.id+"/pages/"+this._page.index).set(this._page).then(()=>{console.log("[Report Serv] Successfully saved page "+this._page.index+" to server."),t()},e):(console.error("[Report Serv] Cannot save page online. None is open."),e())})}setSectionValue(t,e,n){console.log(n)}setCoverageDate(t){t&&!isNaN(new Date(t).getTime())?(console.log("[Report Serv] Setting coverage date to "+t),this._report.coverageDate=t,this.report$.next(this._report)):console.warn("[Report Serv] Cannot set coverage date. Invalid date.")}setSubmitDate(t){isNaN(new Date(t).getTime())?console.error("[Report Serv] Cannot set coverage date. Invalid date."):(console.log("[Report Serv] Setting submit date to "+t),this._report.submitDate=t,this.report$.next(this._report))}setAuthor(){this._report.author=this._UserService.getUserSnapshot().email,this.report$.next(this._report)}setAdditionalInfo(t){console.log("[Report Serv] Setting additional info to "+t),this._report.additionalInfo=t,this.report$.next(this._report)}setTitle(t){console.log("[Report Serv] Setting title to "+t),this._report.title=t}setSubject(t){console.log("[Report Serv] Setting subject to "+t),this._report.title=t}setTags(t){console.log("[Report Serv] Setting tags to "+t),this._report.tags=t}setPageStatus(t,e){"complete"!==e&&"incomplete"!==e&&console.warn("Is "+e+" a valid status?"),this._report.pageStatuses[t]=e,this.report$.next(this._report)}setCompletionStatus(t){"complete"!==t&&"incomplete"!==t&&console.warn("Is "+t+" a valid status?"),this._report.completionStatus=t}fetchReports(t){let e=[];return t.forEach(t=>{let n=this._AngularFirestore.doc("reports/"+t),r=new Promise((t,e)=>{n.valueChanges().pipe(Id()).subscribe(e=>{t(e)},e)});e.push(r)}),Promise.all(e)}fetchAllReports(){return confirm("This will read all reports from the database, and may take a while. Are you sure?")?new Promise((t,e)=>{this._AngularFirestore.collection("/reports",t=>t.orderBy("id")).valueChanges().pipe(Id()).subscribe(e=>{t(e)},e)}):this.fetchAllReportsWithLimit(10)}fetchAllReportsWithLimit(t){return new Promise((e,n)=>{this._AngularFirestore.collection("/reports",e=>e.limit(t).orderBy("id")).valueChanges().pipe(Id()).subscribe(t=>{e(t)},n)})}fetchReportsByBranchWithLimit(t,e){return new Promise((n,r)=>{this._AngularFirestore.collection("/reports",n=>n.where("branch","==",t).limit(e).orderBy("id")).valueChanges().pipe(Id()).subscribe(t=>{n(t)},r)})}fetchReportsByBranch(t){return new Promise((e,n)=>{this._AngularFirestore.collection("/reports",e=>e.where("branch","==",t).orderBy("id")).valueChanges().pipe(Id()).subscribe(t=>{e(t)},n)})}pushTemplateObjectToDB(t,e){let n=this._AngularFirestore.doc("/templates/"+t.templateID);n.set(t).then(()=>{let t=n.collection("pages");e.forEach((e,n)=>{t.doc(n.toString()).set(e)})})}getFullReportCount(){return console.log("[Report Serv] Getting full report count"),new Promise((t,e)=>{this._AngularFirestore.collection("/reports").get().pipe(Id()).subscribe(e=>{t(e.size)},e)})}getReportCountByBranch(t){return console.log("[Report Serv] Getting report count for "+t),new Promise((e,n)=>{this._AngularFirestore.collection("/reports",e=>e.where("branch","==",t)).get().pipe(Id()).subscribe(t=>{e(t.size)},n)})}}return t.\u0275fac=function(e){return new(e||t)(Wt(hd),Wt(hg),Wt(jg))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bg=(()=>{class t{constructor(t,e,n){this._AngularFirestore=t,this._Router=e,this._UserServ=n,this._templateNames=[],this._templates=new Map,this.templates$=new Fl(this._templates),t.collection("templates").get().subscribe(t=>{t.forEach(t=>{this._templates.set(t.id,t.data()),this._templateNames.push(t.id)}),this.templates$.next(this._templates)}),this._UserServ.getUserObservable().subscribe(t=>{console.log("[Template Serv] User changed, refreshing template list"),this.refreshTemplateList()})}refreshTemplateList(){this._AngularFirestore.collection("templates").get().pipe(Id()).subscribe(t=>{this._templateNames=[],this._templates.clear(),t.forEach(t=>{this._templates.set(t.id,t.data()),this._templateNames.push(t.id)}),console.log(this._templateNames),this.templates$.next(this._templates)})}get templateNames(){return this._templateNames}get visibleTemplates(){let t=[];return this._templates.forEach((e,n,r)=>{e.hidden||t.push(e)}),t}get templateObservable(){return this.templates$.asObservable()}get templateSnapshot(){return this._templates}markHidden(t){return new Promise((e,n)=>{let r=this._AngularFirestore.doc("/templates/"+t);r.get().subscribe(i=>{i.exists?r.update({hidden:!0}).then(()=>{let n=this._templates.get(t);n.hidden=!0,this._templates.set(t,n),e()},n):(console.error("Cannot mark "+t+" as hidden. Template does not exist."),n())})})}markVisible(t){return new Promise((e,n)=>{let r=this._AngularFirestore.doc("/templates/"+t);r.get().subscribe(i=>{i.exists?r.update({hidden:!1}).then(()=>{let n=this._templates.get(t);n.hidden=!1,this._templates.set(t,n),e()},n):(console.error("Cannot mark "+t+" as visible. Template does not exist."),n())})})}openTemplate(t){console.log("[Template Serv] Opening "+t),this._Router.navigate(["builder"],{queryParams:{open:t}})}duplicateTemplate(t,e){return console.log("[Template Serv] Duplicating "+t),new Promise((n,r)=>{this._AngularFirestore.doc("/templates/"+t).valueChanges().pipe(Id()).subscribe(i=>{let s=i;s.templateID=e,s.id="",this._AngularFirestore.doc("/templates/"+e).set(s).then(()=>{let i=[];for(let n=0;n<s.pageCount;n++)this._AngularFirestore.doc("/templates/"+t+"/pages/"+n.toString()).valueChanges().pipe(Id()).subscribe(t=>{i.push(this._AngularFirestore.doc("/templates/"+e+"/pages/"+n.toString()).set(t))});Promise.all(i).then(()=>{console.log("Template duplicated successfully."),this.refreshTemplateList(),n()},r)},r)},r)})}deleteTemplate(t){return console.log("[Template Serv] Deleting "+t),new Promise((e,n)=>{let r=this._AngularFirestore.doc("/templates/"+t),i=this._templates.get(t),s=prompt('Are you sure? To delete, type "confirm": ',"");if(s&&"confirm"==s)if(i){for(let e=0;e<i.pageCount;e++)this._AngularFirestore.doc("/templates/"+t+"/pages/"+e.toString()).delete();r.delete().then(()=>{this.refreshTemplateList(),console.log("Deleted "+r.ref.path),e()},n)}else n();else n()})}newTemplate(){console.log("[Template Serv] Opening fresh template"),this._Router.navigate(["builder"])}saveTemplate(t){return new Promise((e,n)=>{console.log("[Template Serv] Saving template "+t.templateID+"...");let r={id:t.id,templateID:t.templateID,pageCount:t.pageCount,pageStatuses:t.pageStatuses,completionStatus:t.completionStatus};this._AngularFirestore.doc("/templates/"+t.templateID).set(r).then(()=>{let r=[];t.pages.forEach(e=>{r.push(this._AngularFirestore.doc("/templates/"+t.templateID+"/pages/"+e.index.toString()).set(e))}),Promise.all(r).then(()=>{console.log("[Template Serv] Template saved."),e()},n)},n)})}markTemplateHidden(t){return new Promise((t,e)=>{})}}return t.\u0275fac=function(e){return new(e||t)(Wt(hd),Wt(hg),Wt(jg))},t.\u0275prov=lt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class zg extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new zg,Du||(Du=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Gg||(Gg=document.querySelector("base"),Gg)?Gg.getAttribute("href"):null;return null==e?null:(n=e,Hg||(Hg=document.createElement("a")),Hg.setAttribute("href",n),"/"===Hg.pathname.charAt(0)?Hg.pathname:"/"+Hg.pathname);var n}resetBaseElement(){Gg=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Hg,Gg=null;const $g=new Mt("TRANSITION_ID"),qg=[{provide:Lc,useFactory:function(t,e,n){return()=>{n.get(Mc).donePromise.then(()=>{const n=Ru();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[$g,Pu,As],multi:!0}];class Wg{static init(){var t;t=new Wg,ml=t}addToWindow(t){At.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},At.getAllAngularTestabilities=()=>t.getAllTestabilities(),At.getAllAngularRootElements=()=>t.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(t=>{const e=At.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Ru().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Qg=new Mt("EventManagerPlugins");let Yg=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Qg),Wt(il))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class Kg{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Ru().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Zg=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Xg=(()=>{class t extends Zg{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Ru().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const Jg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tm=/%COMP%/g;function em(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?em(t,i,n):(i=i.replace(tm,t),n.push(i))}return n}function nm(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rm=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new im(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ae.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new sm(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ae.Native:case ae.ShadowDom:return new om(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=em(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Wt(Yg),Wt(Xg),Wt(Vc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class im{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Jg[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Jg[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Jg[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&ma.DashCase?t.style.setProperty(e,n,r&ma.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ma.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,nm(n)):this.eventManager.addEventListener(t,e,nm(n))}}class sm extends im{constructor(t,e,n,r){super(t),this.component=n;const i=em(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(tm,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(tm,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class om extends im{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ae.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=em(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let am=(()=>{class t extends Kg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const cm=["alt","control","meta","shift"],lm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},um={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hm={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dm=(()=>{class t extends Kg{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ru().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(cm.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&um.hasOwnProperty(e)&&(e=um[e]))}return lm[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),cm.forEach(r=>{r!=n&&(0,hm[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const pm=wl(Dl,"browser",[{provide:zc,useValue:"browser"},{provide:Bc,useValue:function(){zg.makeCurrent(),Wg.init()},multi:!0},{provide:Pu,useFactory:function(){return function(t){Ae=t}(document),document},deps:[]}]),fm=[[],{provide:gs,useValue:"root"},{provide:lr,useFactory:function(){return new lr},deps:[]},{provide:Qg,useClass:am,multi:!0,deps:[Pu,il,zc]},{provide:Qg,useClass:dm,multi:!0,deps:[Pu]},[],{provide:rm,useClass:rm,deps:[Yg,Xg,Vc]},{provide:ga,useExisting:rm},{provide:Zg,useExisting:Xg},{provide:Xg,useClass:Xg,deps:[Pu]},{provide:dl,useClass:dl,deps:[il]},{provide:Yg,useClass:Yg,deps:[Qg,il]},[]];let gm=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Vc,useValue:e.appId},{provide:$g,useExisting:Vc},qg]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)(Wt(t,12))},providers:fm,imports:[qh,Pl]}),t})();"undefined"!=typeof window&&window;class mm{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new ym(t,this.dueTime,this.scheduler))}}class ym extends f{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(vm,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function vm(t){t.debouncedNext()}class bm{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new wm(t,this.compare,this.keySelector))}}class wm extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class _m{}function Sm(t,e){return{type:7,name:t,definitions:e,options:{}}}function Cm(t,e=null){return{type:4,styles:e,timings:t}}function Em(t,e=null){return{type:2,steps:t,options:e}}function Im(t){return{type:6,styles:t,offset:null}}function Tm(t,e,n){return{type:0,name:t,styles:e,options:n}}function xm(t){return{type:5,steps:t}}function km(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Am(t){Promise.resolve(null).then(t)}class Om{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Am(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Dm{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Am(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Rm(t,e){return new w(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=B(t[a]);let l=!1;n.add(c.subscribe({next:t=>{l||(l=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&l||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Pm=new Mt("NgValueAccessor"),Nm={provide:Pm,useExisting:St(()=>Fm),multi:!0};let Fm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&co("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[la([Nm])]}),t})();const Lm={provide:Pm,useExisting:St(()=>Vm),multi:!0},Mm=new Mt("CompositionEventMode");let Vm=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Ru()?Ru().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa),Qs(Mm,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&co("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[la([Lm])]}),t})(),jm=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),Um=(()=>{class t extends jm{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Bm(e||t)},t.\u0275dir=ye({type:t,features:[Wo]}),t})();const Bm=sr(Um);function zm(){throw new Error("unimplemented")}class Hm extends jm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return zm()}get asyncValidator(){return zm()}}class Gm{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let $m=(()=>{class t extends Gm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(Hm,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&ko("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Wo]}),t})(),qm=(()=>{class t extends Gm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,2))},t.\u0275dir=ye({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&ko("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Wo]}),t})();function Wm(t){return null==t||0===t.length}const Qm=new Mt("NgValidators"),Ym=new Mt("NgAsyncValidators"),Km=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Zm{static min(t){return e=>{if(Wm(e.value)||Wm(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Wm(e.value)||Wm(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Wm(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Wm(t.value)||Km.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(Wm(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return Zm.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Wm(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Xm);return 0==e.length?null:function(t){return ty(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Xm);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(c(e))return Rm(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Rm(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Rm(t=1===t.length&&c(t[0])?t[0]:t,null).pipe(M(t=>e(...t)))}return Rm(t,null)}(function(t,e){return e.map(e=>e(t))}(t,e).map(Jm)).pipe(M(ty))}}}function Xm(t){return null!=t}function Jm(t){const e=oo(t)?B(t):t;if(!ao(e))throw new Error("Expected validator to return Promise or Observable.");return e}function ty(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ey(t){return t.validate?e=>t.validate(e):t}function ny(t){return t.validate?e=>t.validate(e):t}const ry={provide:Pm,useExisting:St(()=>iy),multi:!0};let iy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&co("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[la([ry])]}),t})();const sy={provide:Pm,useExisting:St(()=>ay),multi:!0};let oy=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),ay=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Hm),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa),Qs(oy),Qs(As))},t.\u0275dir=ye({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&co("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[la([sy])]}),t})();const cy={provide:Pm,useExisting:St(()=>ly),multi:!0};let ly=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&co("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[la([cy])]}),t})();const uy='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',hy='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',dy='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class py{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+uy)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${hy}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${dy}`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+uy)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+hy)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const fy={provide:Pm,useExisting:St(()=>my),multi:!0};function gy(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let my=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ms}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=gy(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&co("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[la([fy])]}),t})(),yy=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(gy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(ya),Qs(my,9))},t.\u0275dir=ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const vy={provide:Pm,useExisting:St(()=>wy),multi:!0};function by(t,e){return null==t?""+e:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let wy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ms}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&co("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[la([vy])]}),t})(),_y=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(by(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(by(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(ya),Qs(wy,9))},t.\u0275dir=ye({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Sy(t,e){return[...e.path,t]}function Cy(t,e){t||xy(e,"Cannot find control with"),e.valueAccessor||xy(e,"No value accessor for form control with"),t.validator=Zm.compose([t.validator,e.validator]),t.asyncValidator=Zm.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ey(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ey(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Ey(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Iy(t,e){null==t&&xy(e,"Cannot find control with"),t.validator=Zm.compose([t.validator,e.validator]),t.asyncValidator=Zm.composeAsync([t.asyncValidator,e.asyncValidator])}function Ty(t){return xy(t,"There is no FormControl instance attached to form control element with")}function xy(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function ky(t){return null!=t?Zm.compose(t.map(ey)):null}function Ay(t){return null!=t?Zm.composeAsync(t.map(ny)):null}function Oy(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Ms(e,n.currentValue)}const Dy=[Fm,ly,iy,my,wy,ay];function Ry(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Py(t,e){if(!e)return null;Array.isArray(e)||xy(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var s;e.constructor===Vm?n=e:(s=e,Dy.some(t=>s.constructor===t)?(r&&xy(t,"More than one built-in value accessor matches form control with"),r=e):(i&&xy(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(xy(t,"No valid value accessor for form control with"),null)}function Ny(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Fy(t,e,n,r){fr()&&"never"!==r&&((null!==r&&"once"!==r||e._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(py.ngModelWarning(t),e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}function Ly(t){const e=Vy(t)?t.validators:t;return Array.isArray(e)?ky(e):e||null}function My(t,e){const n=Vy(e)?e.asyncValidators:t;return Array.isArray(n)?Ay(n):n||null}function Vy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class jy{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Ly(t)}setAsyncValidators(t){this.asyncValidator=My(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=Jm(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof By?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof zy&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new pc,this.statusChanges=new pc}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Vy(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Uy extends jy{constructor(t=null,e,n){super(Ly(e),My(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class By extends jy{constructor(t,e,n){super(Ly(e),My(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Uy?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class zy extends jy{constructor(t,e,n){super(Ly(e),My(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Uy?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Hy={provide:Um,useExisting:St(()=>$y)},Gy=(()=>Promise.resolve(null))();let $y=(()=>{class t extends Um{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new pc,this.form=new By({},ky(t),Ay(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Gy.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Cy(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Gy.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ny(this._directives,t)})}addFormGroup(t){Gy.then(()=>{const e=this._findContainer(t.path),n=new By({});Iy(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Gy.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Gy.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Ry(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Qs(Qm,10),Qs(Ym,10))},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&co("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[la([Hy]),Wo]}),t})(),qy=(()=>{class t extends Um{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Sy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ky(this._validators)}get asyncValidator(){return Ay(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return Wy(e||t)},t.\u0275dir=ye({type:t,features:[Wo]}),t})();const Wy=sr(qy);class Qy{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${uy}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${hy}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${dy}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${hy}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${dy}`)}}const Yy={provide:Um,useExisting:St(()=>Ky)};let Ky=(()=>{class t extends qy{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof $y||Qy.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,5),Qs(Qm,10),Qs(Ym,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[la([Yy]),Wo]}),t})();const Zy={provide:Hm,useExisting:St(()=>Jy)},Xy=(()=>Promise.resolve(null))();let Jy=(()=>{class t extends Hm{constructor(t,e,n,r){super(),this.control=new Uy,this._registered=!1,this.update=new pc,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Py(this,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Oy(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Sy(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ky(this._rawValidators)}get asyncValidator(){return Ay(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Cy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Ky)&&this._parent instanceof qy?Qy.formGroupNameException():this._parent instanceof Ky||this._parent instanceof $y||Qy.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Qy.missingNameException()}_updateValue(t){Xy.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Xy.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,9),Qs(Qm,10),Qs(Ym,10),Qs(Pm,10))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[la([Zy]),Wo,Jo]}),t})(),tv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const ev=new Mt("NgModelWithFormControlWarning"),nv={provide:Hm,useExisting:St(()=>rv)};let rv=(()=>{class t extends Hm{constructor(t,e,n,r){super(),this._ngModelWarningConfig=r,this.update=new pc,this._ngModelWarningSent=!1,this._rawValidators=t||[],this._rawAsyncValidators=e||[],this.valueAccessor=Py(this,n)}set isDisabled(t){py.disabledAttrWarning()}ngOnChanges(e){this._isControlChanged(e)&&(Cy(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Oy(e,this.viewModel)&&(Fy("formControl",t,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return ky(this._rawValidators)}get asyncValidator(){return Ay(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return t.\u0275fac=function(e){return new(e||t)(Qs(Qm,10),Qs(Ym,10),Qs(Pm,10),Qs(ev,8))},t.\u0275dir=ye({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[la([nv]),Wo,Jo]}),t._ngModelWarningSentOnce=!1,t})();const iv={provide:Um,useExisting:St(()=>sv)};let sv=(()=>{class t extends Um{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new pc}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Cy(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Ny(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Iy(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Iy(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Ry(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Ty(e)),e.valueAccessor.registerOnTouched(()=>Ty(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Cy(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=ky(this._validators);this.form.validator=Zm.compose([this.form.validator,t]);const e=Ay(this._asyncValidators);this.form.asyncValidator=Zm.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||py.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(Qs(Qm,10),Qs(Ym,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&co("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[la([iv]),Wo,Jo]}),t})();const ov={provide:Um,useExisting:St(()=>av)};let av=(()=>{class t extends qy{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){uv(this._parent)&&py.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,13),Qs(Qm,10),Qs(Ym,10))},t.\u0275dir=ye({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[la([ov]),Wo]}),t})();const cv={provide:Um,useExisting:St(()=>lv)};let lv=(()=>{class t extends Um{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Sy(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return ky(this._validators)}get asyncValidator(){return Ay(this._asyncValidators)}_checkParentType(){uv(this._parent)&&py.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,13),Qs(Qm,10),Qs(Ym,10))},t.\u0275dir=ye({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[la([cv]),Wo]}),t})();function uv(t){return!(t instanceof av||t instanceof sv||t instanceof lv)}const hv={provide:Hm,useExisting:St(()=>dv)};let dv=(()=>{class t extends Hm{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new pc,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=Py(this,r)}set isDisabled(t){py.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),Oy(e,this.viewModel)&&(Fy("formControlName",t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Sy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return ky(this._rawValidators)}get asyncValidator(){return Ay(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof av)&&this._parent instanceof qy?py.ngModelGroupException():this._parent instanceof av||this._parent instanceof sv||this._parent instanceof lv||py.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Qs(Um,13),Qs(Qm,10),Qs(Ym,10),Qs(Pm,10),Qs(ev,8))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[la([hv]),Wo,Jo]}),t._ngModelWarningSentOnce=!1,t})();const pv={provide:Qm,useExisting:St(()=>fv),multi:!0};let fv=(()=>{class t{get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?Zm.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Gs("required",e.required?"":null)},inputs:{required:"required"},features:[la([pv])]}),t})(),gv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),mv=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,s=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new By(n,{asyncValidators:i,updateOn:s,validators:r})}control(t,e,n){return new Uy(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new zy(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Uy||t instanceof By||t instanceof zy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),yv=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[oy],imports:[gv]}),t})(),vv=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:ev,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[mv,oy],imports:[gv]}),t})();const bv=["buttonProjectedRef"];function wv(t,e){1&t&&eo(0,"span",3)}function _v(t,e){if(1&t){const t=so();Js(0,"button",1),co("click",(function(e){return Qe(t),fo().emitClick(e)})),qs(1,wv,1,0,"span",2),yo(2),to()}if(2&t){const t=fo();Ao(t.classNames),Gs("type",t.type)("name",t.name)("disabled",t.disabled)("id",t.id),Vr(1),Zs("ngIf",t.loading)}}const Sv=["*"];function Cv(t,e){}function Ev(t,e){if(1&t&&(no(0),qs(1,Cv,0,0,"ng-template",3),ro()),2&t){const t=e.$implicit;Vr(1),Zs("ngTemplateOutlet",t.templateRef)}}function Iv(t,e){}function Tv(t,e){if(1&t&&(Js(0,"div",9),qs(1,Iv,0,0,"ng-template",3),to()),2&t){const t=fo(2),e=Ws(3);Zs("id",t.popoverId),Gs("id",t.popoverId)("aria-hidden",!t.open),Vr(1),Zs("ngTemplateOutlet",e)}}function xv(t,e){if(1&t&&(no(0),Js(1,"div",4,5),Js(3,"button",6),eo(4,"clr-icon",7),to(),qs(5,Tv,2,4,"div",8),to(),ro()),2&t){const t=fo();Vr(1),Zs("ngClass",t.menuPosition),Vr(2),Gs("aria-controls",t.popoverId)("aria-expanded",t.open)("aria-label",t.commonStrings.keys.rowActions),Vr(1),Gs("title",t.commonStrings.keys.more),Vr(1),Zs("clrPopoverContent",t.open)("clrPopoverContentAt",t.popoverPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0)}}function kv(t,e){}function Av(t,e){if(1&t&&(no(0),qs(1,kv,0,0,"ng-template",3),ro()),2&t){const t=e.$implicit;Vr(1),Zs("ngTemplateOutlet",t.templateRef)}}function Ov(t,e){1&t&&qs(0,Av,2,1,"ng-container",0),2&t&&Zs("ngForOf",fo().menuButtons)}const Dv=["clrLoading",""];function Rv(t,e){1&t&&(Js(0,"span"),eo(1,"span",2),to()),2&t&&(Vr(1),Zs("@spinner",void 0))}function Pv(t,e){if(1&t){const t=so();Js(0,"span"),Js(1,"span",3),co("@validated.done",(function(){Qe(t);const e=fo();return e.loadingStateChange(e.buttonState.DEFAULT)})),to(),to()}2&t&&(Vr(1),Zs("@validated",void 0))}function Nv(t,e){1&t&&(Js(0,"span"),yo(1),to()),2&t&&Zs("@defaultButton",void 0)}function Fv(t,e){1&t&&eo(0,"label")}const Lv=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],Mv=["[clrCheckbox],[clrToggle]","label"];function Vv(t,e){1&t&&eo(0,"label")}function jv(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function Uv(t,e){1&t&&eo(0,"clr-icon",4)}function Bv(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const zv=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]]],Hv=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error"];function Gv(t,e){if(1&t&&(Js(0,"td",4),Uo(1),to()),2&t){const t=e.$implicit;Gs("aria-label",t.day),Vr(1),zo(" ",t.narrow," ")}}function $v(t,e){if(1&t&&(Js(0,"td",7),eo(1,"clr-day",8),to()),2&t){const t=e.$implicit;Vr(1),Zs("clrDayView",t)}}function qv(t,e){if(1&t&&(Js(0,"tr",5),qs(1,$v,2,1,"td",6),to()),2&t){const t=e.$implicit;Vr(1),Zs("ngForOf",t)}}const Wv=["actionButton"];function Qv(t,e){1&t&&eo(0,"label")}function Yv(t,e){if(1&t&&(Js(0,"button",7,8),eo(2,"clr-icon",9),to()),2&t){const t=fo();Zs("disabled",t.isInputDateDisabled),Gs("title",t.commonStrings.keys.datepickerToggle)("aria-label",t.commonStrings.keys.datepickerToggle)}}function Kv(t,e){1&t&&eo(0,"clr-datepicker-view-manager",10)}function Zv(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function Xv(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const Jv=[[["label"]],[["","clrDate",""]],[["clr-control-helper"]],[["clr-control-error"]]],tb=["label","[clrDate]","clr-control-helper","clr-control-error"];function eb(t,e){1&t&&eo(0,"clr-monthpicker")}function nb(t,e){1&t&&eo(0,"clr-yearpicker")}function rb(t,e){1&t&&eo(0,"clr-daypicker")}function ib(t,e){if(1&t){const t=so();Js(0,"button",1),co("click",(function(){Qe(t);const n=e.index;return fo().changeMonth(n)})),Uo(1),to()}if(2&t){const t=e.$implicit,n=e.index,r=fo();ko("is-selected",n===r.calendarMonthIndex),Gs("tabindex",r.getTabIndex(n)),Vr(1),zo(" ",t," ")}}function sb(t,e){if(1&t){const t=so();Js(0,"button",7),co("click",(function(){Qe(t);const n=e.$implicit;return fo().changeYear(n)})),Uo(1),to()}if(2&t){const t=e.$implicit,n=fo();ko("is-selected",t===n.calendarYear),Gs("tabindex",n.getTabIndex(t)),Vr(1),zo(" ",t," ")}}function ob(t,e){1&t&&eo(0,"label")}function ab(t,e){1&t&&eo(0,"clr-icon",4)}function cb(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function lb(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const ub=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]]],hb=["label","[clrInput]","clr-control-helper","clr-control-error"];function db(t,e){1&t&&eo(0,"label")}function pb(t,e){if(1&t){const t=so();Js(0,"button",6),co("click",(function(){return Qe(t),fo().toggle()})),eo(1,"clr-icon"),to()}if(2&t){const t=fo();Zs("disabled",null==t.control?null:t.control.disabled),Vr(1),Gs("shape",t.show?"eye-hide":"eye")("title",t.show?t.commonStrings.keys.hide:t.commonStrings.keys.show)}}function fb(t,e){1&t&&eo(0,"clr-icon",7)}function gb(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function mb(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const yb=[[["label"]],[["","clrPassword",""]],[["clr-control-helper"]],[["clr-control-error"]]],vb=["label","[clrPassword]","clr-control-helper","clr-control-error"];function bb(t,e){1&t&&eo(0,"label")}const wb=[[["","clrRadio",""]],[["label"]]],_b=["[clrRadio]","label"];function Sb(t,e){1&t&&eo(0,"label")}function Cb(t,e){1&t&&eo(0,"clr-icon",4)}function Eb(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function Ib(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const Tb=[[["label"]],[["","clrSelect",""]],[["clr-control-helper"]],[["clr-control-error"]]],xb=["label","[clrSelect]","clr-control-helper","clr-control-error"];function kb(t,e){1&t&&eo(0,"label")}function Ab(t,e){1&t&&eo(0,"clr-icon",4)}function Ob(t,e){1&t&&yo(0,2,["*ngIf","!invalid"])}function Db(t,e){1&t&&yo(0,3,["*ngIf","invalid"])}const Rb=[[["label"]],[["","clrTextarea",""]],[["clr-control-helper"]],[["clr-control-error"]]],Pb=["label","[clrTextarea]","clr-control-helper","clr-control-error"],Nb=["anchor"];function Fb(t,e){if(1&t&&(Js(0,"div",4),Js(1,"div",5),Js(2,"button",6),eo(3,"clr-icon",7),to(),to(),yo(4),to()),2&t){const t=fo();Zs("id",t.popoverId),Vr(3),Gs("title",t.commonStrings.keys.close)}}const Lb=["input"],Mb=["input_low"],Vb=["columnPortal"];function jb(t,e){1&t&&yo(0)}function Ub(t,e){1&t&&io(0)}function Bb(t,e){1&t&&eo(0,"clr-icon",10),2&t&&Gs("shape",fo(2).sortIcon)}function zb(t,e){if(1&t){const t=so();Js(0,"button",7),co("click",(function(){return Qe(t),fo().sort()})),qs(1,Ub,1,0,"ng-container",8),qs(2,Bb,1,1,"clr-icon",9),to()}if(2&t){const t=fo(),e=Ws(6);Gs("aria-label",t.commonStrings.keys.sortColumn),Vr(1),Zs("ngTemplateOutlet",e),Vr(1),Zs("ngIf",t.sortIcon)}}function Hb(t,e){if(1&t){const t=so();Js(0,"clr-dg-string-filter",11),co("clrFilterValueChange",(function(e){return Qe(t),fo().filterValue=e})),to()}if(2&t){const t=fo();Zs("clrDgStringFilter",t.registered)("clrFilterValue",t.filterValue)}}function Gb(t,e){if(1&t){const t=so();Js(0,"clr-dg-numeric-filter",12),co("clrFilterValueChange",(function(e){return Qe(t),fo().filterValue=e})),to()}if(2&t){const t=fo();Zs("clrDgNumericFilter",t.registered)("clrFilterValue",t.filterValue)}}function $b(t,e){1&t&&yo(0,1)}function qb(t,e){1&t&&io(0)}function Wb(t,e){if(1&t&&(Js(0,"span",13),qs(1,qb,1,0,"ng-container",8),to()),2&t){fo();const t=Ws(6);Vr(1),Zs("ngTemplateOutlet",t)}}function Qb(t,e){1&t&&eo(0,"clr-dg-column-separator")}const Yb=[[["clr-dg-filter"],["clr-dg-string-filter"],["clr-dg-numeric-filter"]],"*"],Kb=["clr-dg-filter, clr-dg-string-filter, clr-dg-numeric-filter","*"];function Zb(t,e){1&t&&eo(0,"div",3)}function Xb(t,e){1&t&&yo(0,0,["*ngIf","emptyDatagrid"])}function Jb(t,e){if(1&t&&(no(0),Js(1,"button",1),eo(2,"clr-icon",2),to(),ro()),2&t){const t=fo();Vr(2),Gs("title",t.commonStrings.keys.info)}}const tw=["cellPortal"];function ew(t,e){1&t&&yo(0)}const nw=["rowPortal"];function rw(t,e){1&t&&yo(0)}const iw=["detailButton"],sw=["stickyCells"],ow=["scrollableCells"],aw=["calculatedCells"];function cw(t,e){}function lw(t,e){if(1&t&&(Js(0,"clr-expandable-animation",7),qs(1,cw,0,0,"ng-template",8),to()),2&t){const t=fo(2),e=Ws(6);Zs("clrExpandTrigger",t.expandAnimationTrigger),Vr(1),Zs("ngTemplateOutlet",e)}}function uw(t,e){}function hw(t,e){1&t&&qs(0,uw,0,0,"ng-template",8),2&t&&(fo(2),Zs("ngTemplateOutlet",Ws(6)))}function dw(t,e){if(1&t&&(Js(0,"label",6),qs(1,lw,2,2,"clr-expandable-animation",1),qs(2,hw,1,1,void 0,2),to()),2&t){const t=fo();Vr(1),Zs("ngIf",t.expand.expandable),Vr(1),Zs("ngIf",!t.expand.expandable)}}function pw(t,e){}function fw(t,e){if(1&t&&(Js(0,"clr-expandable-animation",7),qs(1,pw,0,0,"ng-template",8),to()),2&t){const t=fo(),e=Ws(6);Zs("clrExpandTrigger",t.expandAnimationTrigger),Vr(1),Zs("ngTemplateOutlet",e)}}function gw(t,e){}function mw(t,e){1&t&&qs(0,gw,0,0,"ng-template",8),2&t&&(fo(),Zs("ngTemplateOutlet",Ws(6)))}function yw(t,e){1&t&&yo(0)}const vw=function(t){return{"clr-form-control-disabled":t}};function bw(t,e){if(1&t){const t=so();Js(0,"div",19),Js(1,"input",20),co("ngModelChange",(function(e){return Qe(t),fo(2).toggle(e)})),to(),to()}if(2&t){const t=fo(2);Zs("ngClass",sc(6,vw,!t.clrDgSelectable)),Vr(1),Zs("ngModel",t.selected)("id",t.checkboxId),Gs("disabled",!t.clrDgSelectable||null)("aria-disabled",!t.clrDgSelectable||null)("aria-label",t.commonStrings.keys.select)}}function ww(t,e){if(1&t){const t=so();Js(0,"div",19),Js(1,"input",21),co("ngModelChange",(function(e){return Qe(t),fo(2).selection.currentSingle=e})),to(),to()}if(2&t){const t=fo(2);Zs("ngClass",sc(9,vw,!t.clrDgSelectable)),Vr(1),Zs("id",t.radioId)("name",t.selection.id+"-radio")("value",t.item)("ngModel",t.selection.currentSingle)("checked",t.selection.currentSingle===t.item),Gs("disabled",!t.clrDgSelectable||null)("aria-disabled",!t.clrDgSelectable||null)("aria-label",t.commonStrings.keys.select)}}function _w(t,e){1&t&&(Js(0,"div",22),yo(1,2),to())}function Sw(t,e){if(1&t){const t=so();Js(0,"button",26),co("click",(function(){return Qe(t),fo(4).toggleExpand()})),eo(1,"clr-icon",27),to()}if(2&t){const t=fo(4);Gs("aria-expanded",t.expand.expanded)("aria-label",t.expand.expanded?t.clrDgDetailCloseLabel:t.clrDgDetailOpenLabel)("aria-controls",t.expandableId),Vr(1),Gs("dir",t.expand.expanded?"down":"right")("title",t.expand.expanded?t.commonStrings.keys.collapse:t.commonStrings.keys.expand)}}function Cw(t,e){if(1&t&&(Js(0,"clr-spinner",28),Uo(1),to()),2&t){const t=fo(4);Vr(1),Bo(t.commonStrings.keys.loading)}}function Ew(t,e){if(1&t&&(no(0),qs(1,Sw,2,5,"button",24),qs(2,Cw,2,1,"clr-spinner",25),ro()),2&t){const t=fo(3);Vr(1),Zs("ngIf",!t.expand.loading),Vr(1),Zs("ngIf",t.expand.loading)}}function Iw(t,e){if(1&t&&(Js(0,"div",23),qs(1,Ew,3,2,"ng-container",2),to()),2&t){const t=fo(2);Vr(1),Zs("ngIf",t.expand.expandable)}}function Tw(t,e){if(1&t){const t=so();Js(0,"div",29),Js(1,"button",30,31),co("click",(function(){Qe(t);const e=Ws(2),n=fo(2);return n.detailService.toggle(n.item,e)})),eo(3,"clr-icon",32),to(),to()}if(2&t){const t=fo(2);Vr(1),ko("is-open",t.detailService.isRowOpen(t.item)),Gs("aria-label",t.detailService.isOpen?t.clrDgDetailCloseLabel:t.clrDgDetailOpenLabel)("aria-expanded",t.detailService.isOpen)("aria-controls",t.detailService.id),Vr(2),Gs("dir",t.detailService.isRowOpen(t.item)?"left":"right")("title",t.detailService.isRowOpen(t.item)?t.commonStrings.keys.close:t.commonStrings.keys.open)}}function xw(t,e){}function kw(t,e){1&t&&qs(0,xw,0,0,"ng-template",8),2&t&&(fo(2),Zs("ngTemplateOutlet",Ws(4)))}function Aw(t,e){}function Ow(t,e){1&t&&qs(0,Aw,0,0,"ng-template",8),2&t&&(fo(2),Zs("ngTemplateOutlet",Ws(4)))}const Dw=function(t){return{"is-replaced":t}};function Rw(t,e){if(1&t&&(Js(0,"div",9),Js(1,"div",10),no(2,null,11),qs(4,bw,2,8,"div",12),qs(5,ww,2,11,"div",12),qs(6,_w,2,0,"div",13),qs(7,Iw,2,1,"div",14),qs(8,Tw,4,7,"div",15),ro(),to(),Js(9,"div",16),Js(10,"div",17),yo(11,1),io(12,null,18),to(),qs(14,kw,1,1,void 0,2),qs(15,Ow,1,1,void 0,2),to(),to()),2&t){const t=fo();ko("datagrid-row-detail-open",t.detailService.isRowOpen(t.item)),Zs("id",t.id),Vr(4),Zs("ngIf",t.selection.selectionType===t.SELECTION_TYPE.Multi),Vr(1),Zs("ngIf",t.selection.selectionType===t.SELECTION_TYPE.Single),Vr(1),Zs("ngIf",t.rowActionService.hasActionableRow),Vr(1),Zs("ngIf",t.globalExpandable.hasExpandableRow),Vr(1),Zs("ngIf",t.detailService.enabled),Vr(1),Zs("ngClass",sc(11,Dw,t.replaced&&t.expanded)),Vr(5),Zs("ngIf",t.replaced&&!t.expand.loading),Vr(1),Zs("ngIf",!t.replaced&&!t.expand.loading)}}const Pw=[[["clr-dg-row-detail"]],[["clr-dg-cell"]],[["clr-dg-action-overflow"]]],Nw=["clr-dg-row-detail","clr-dg-cell","clr-dg-action-overflow"],Fw=["scrollableColumns"],Lw=["datagridTable"],Mw=["projectedDisplayColumns"],Vw=["projectedCalculationColumns"],jw=["displayedRows"],Uw=["calculationRows"];function Bw(t,e){if(1&t){const t=so();Js(0,"div",23),Js(1,"span",24),Js(2,"input",25),co("ngModelChange",(function(e){return Qe(t),fo().allSelected=e})),to(),to(),eo(3,"div",26),to()}if(2&t){const t=fo();Vr(2),Zs("ngModel",t.allSelected),Gs("aria-label",t.commonStrings.keys.selectAll)}}function zw(t,e){1&t&&(Js(0,"div",23),eo(1,"div",26),to()),2&t&&Gs("aria-label",fo().clrDgSingleSelectionAriaLabel)}function Hw(t,e){1&t&&(Js(0,"div",27),eo(1,"div",26),to()),2&t&&Gs("aria-label",fo().clrDgSingleActionableAriaLabel)}function Gw(t,e){1&t&&(Js(0,"div",28),eo(1,"div",26),to()),2&t&&Gs("aria-label",fo().clrDetailExpandableAriaLabel)}function $w(t,e){1&t&&eo(0,"clr-dg-placeholder")}function qw(t,e){1&t&&(Js(0,"div",29),Js(1,"clr-spinner",30),Uo(2,"Loading"),to(),to())}const Ww=[[["clr-dg-action-bar"]],[["clr-dg-placeholder"]],[["clr-dg-footer"]],[["","clrIfDetail",""],["clr-dg-detail"]]],Qw=["clr-dg-action-bar","clr-dg-placeholder","clr-dg-footer","[clrIfDetail],clr-dg-detail"];function Yw(t,e){if(1&t){const t=so();Js(0,"div",4),co("click",(function(e){return Qe(t),fo().closeOverflowContent(e)})),yo(1),to()}if(2&t){const t=fo();Zs("id",t.popoverId),Gs("aria-hidden",!t.open)("id",t.popoverId)}}const Kw=["menuDescription"],Zw=["allSelected"];function Xw(t,e){if(1&t&&(no(0),Uo(1),ro()),2&t){const t=fo(2);Vr(1),Bo(t.commonStrings.keys.showColumns)}}function Jw(t,e){}function t_(t,e){if(1&t){const t=so();Js(0,"li"),Js(1,"clr-checkbox-wrapper"),Js(2,"input",15),co("ngModelChange",(function(n){Qe(t);const r=e.$implicit;return fo(2).toggleColumnState(r,!n)})),to(),Js(3,"label"),qs(4,Jw,0,0,"ng-template",16),to(),to(),to()}if(2&t){const t=e.$implicit,n=fo(2);Vr(2),Zs("disabled",n.hasOnlyOneVisibleColumn&&!t.hidden)("ngModel",!t.hidden),Vr(2),Zs("ngTemplateOutlet",t.titleTemplateRef)}}function e_(t,e){if(1&t){const t=so();Js(0,"clr-dg-column-toggle-button",17),co("clrAllSelected",(function(){return Qe(t),fo(2).allColumnsSelected()})),Uo(1),to()}if(2&t){const t=fo(2);Vr(1),zo(" ",t.commonStrings.keys.selectAll," ")}}function n_(t,e){if(1&t&&(Js(0,"div",3),Js(1,"div",4),Js(2,"div",5,6),Uo(4),to(),Js(5,"div",5,7),Uo(7),to(),qs(8,Xw,2,1,"ng-container",8),yo(9),Js(10,"button",9),eo(11,"clr-icon",10),to(),to(),Js(12,"ul",11),qs(13,t_,5,3,"li",12),to(),Js(14,"div",13),yo(15,1),qs(16,e_,2,1,"clr-dg-column-toggle-button",14),to(),to()),2&t){const t=fo();Zs("id",t.popoverId),Vr(4),Bo(t.commonStrings.keys.showColumnsMenuDescription),Vr(3),Bo(t.commonStrings.keys.allColumnsSelected),Vr(1),Zs("ngIf",!t.customToggleTitle),Vr(2),Gs("aria-label",t.commonStrings.keys.close),Vr(1),Gs("title",t.commonStrings.keys.close),Vr(2),Zs("ngForOf",t.hideableColumnStates)("ngForTrackBy",t.trackByFn),Vr(3),Zs("ngIf",!t.customToggleButton)}}const r_=[[["clr-dg-column-toggle-title"]],[["clr-dg-column-toggle-button"]]],i_=["clr-dg-column-toggle-title","clr-dg-column-toggle-button"],s_=function(){return{strict:!1}};function o_(t,e){if(1&t&&(Js(0,"div",1),Js(1,"div",2),Uo(2),to(),yo(3),Js(4,"div",2),Uo(5),to(),to()),2&t){const t=fo();Zs("clrFocusTrap",ic(5,s_))("id",t.detailService.id),Gs("aria-describedby",t.header?t.header.titleId:""),Vr(2),Bo(t.commonStrings.keys.detailPaneStart),Vr(3),Bo(t.commonStrings.keys.detailPaneEnd)}}function a_(t,e){if(1&t&&(no(0),Js(1,"div",1),Js(2,"clr-checkbox-wrapper",2),eo(3,"input",3),Js(4,"label"),Uo(5),to(),to(),to(),ro()),2&t){const t=fo();Vr(5),Bo(t.selection.current.length)}}function c_(t,e){1&t&&eo(0,"clr-dg-column-toggle")}function l_(t,e){if(1&t&&(no(0),yo(1,1),qs(2,c_,1,0,"clr-dg-column-toggle",0),Js(3,"div",4),yo(4,2),to(),ro()),2&t){const t=fo();Vr(2),Zs("ngIf",t.hasHideableColumns&&!t.toggle)}}const u_=[[["clr-dg-pagination"]],[["clr-dg-column-toggle"]],"*"],h_=["clr-dg-pagination","clr-dg-column-toggle","*"];function d_(t,e){if(1&t&&eo(0,"clr-icon",7),2&t){const t=fo();Gs("dir",t.caretDirection)("title",t.caretTitle)}}function p_(t,e){if(1&t&&(Js(0,"span",8),Uo(1),to()),2&t){const t=fo();Vr(1),Bo(t.commonStrings.keys.stackViewChanged)}}const f_=[[["clr-stack-label"]],"*",[["clr-stack-block"]]],g_=["clr-stack-label","*","clr-stack-block"],m_=[[["clr-stack-header"]],"*"],y_=["clr-stack-header","*"],v_=["contentContainer"];function b_(t,e){if(1&t){const t=so();Js(0,"button",9),co("click",(function(){return Qe(t),fo().expandService.toggle()}))("focus",(function(){return Qe(t),fo().focusTreeNode()})),eo(1,"clr-icon",10),to()}if(2&t){const t=fo();Vr(1),Gs("dir",t.expandService.expanded?"down":"right")}}function w_(t,e){1&t&&(Js(0,"div",11),eo(1,"span",12),to())}function __(t,e){if(1&t){const t=so();Js(0,"div",13),Js(1,"input",14),co("change",(function(){Qe(t);const e=fo();return e._model.toggleSelection(e.featuresService.eager)}))("focus",(function(){return Qe(t),fo().focusTreeNode()})),to(),eo(2,"label",15),to()}if(2&t){const t=fo();Vr(1),bo("id","",t.nodeId,"-check"),Zs("checked",t._model.selected.value===t.STATES.SELECTED)("indeterminate",t._model.selected.value===t.STATES.INDETERMINATE),Vr(1),bo("for","",t.nodeId,"-check")}}function S_(t,e){1&t&&(Js(0,"span"),Uo(1," selected "),to())}function C_(t,e){1&t&&(Js(0,"span"),Uo(1," unselected "),to())}function E_(t,e){if(1&t&&(Js(0,"div",16),qs(1,S_,2,0,"span",17),qs(2,C_,2,0,"span",17),to()),2&t){const t=fo();Vr(1),Zs("ngIf",t.ariaSelected),Vr(1),Zs("ngIf",!t.ariaSelected)}}const I_=["*",[["clr-tree-node"]],[["","clrIfExpanded",""]]],T_=["*","clr-tree-node","[clrIfExpanded]"];function x_(t,e){1&t&&eo(0,"clr-recursive-children",1),2&t&&Zs("children",fo().featuresService.recursion.root)}function k_(t,e){1&t&&io(0)}function A_(t,e){if(1&t&&(no(0),qs(1,k_,1,0,"ng-container",2),ro()),2&t){const t=e.$implicit,n=fo(2);Vr(1),Zs("ngTemplateOutlet",n.featuresService.recursion.template)("ngTemplateOutletContext",n.getContext(t))}}function O_(t,e){if(1&t&&(no(0),qs(1,A_,2,2,"ng-container",1),ro()),2&t){const t=fo();Vr(1),Zs("ngForOf",(null==t.parent?null:t.parent.children)||t.children)}}function D_(t,e){if(1&t){const t=so();Js(0,"button",4),co("click",(function(){return Qe(t),fo(2).close()})),eo(1,"clr-icon",5),to()}2&t&&Gs("aria-label",fo(2).clrCloseButtonAriaLabel)}function R_(t,e){if(1&t&&(Js(0,"div",1),Js(1,"div",2),yo(2),to(),qs(3,D_,2,1,"button",3),to()),2&t){const t=fo();ko("alert-hidden",t.hidden)("alert-sm",t.isSmall)("alert-app-level",t.isAppLevel),Zs("ngClass",t.alertClass),Vr(3),Zs("ngIf",t.closable)}}function P_(t,e){1&t&&yo(0)}const N_=["tabContentProjectedRef"];function F_(t,e){if(1&t&&(Js(0,"section",1),yo(1),to()),2&t){const t=fo();ko("active",t.active),Zs("id",t.tabContentId)("hidden",!t.active),Gs("aria-labelledby",t.ariaLabelledBy)("aria-expanded",t.active)("aria-hidden",!t.active)}}const L_=["clrKeyFocus",""],M_=["tabContentViewContainer"];function V_(t,e){if(1&t&&(no(0),Js(1,"li",4),io(2,5),to(),ro()),2&t){const t=fo().$implicit;Vr(2),Zs("ngTemplateOutlet",t.templateRefContainer.template)}}function j_(t,e){if(1&t&&(no(0),qs(1,V_,3,1,"ng-container",2),ro()),2&t){const t=e.$implicit,n=fo();Vr(1),Zs("ngIf",t.tabsId===n.tabsId&&!t.inOverflow)}}function U_(t,e){1&t&&io(0,5),2&t&&Zs("ngTemplateOutlet",fo().$implicit.templateRefContainer.template)}function B_(t,e){if(1&t&&(no(0),qs(1,U_,1,1,"ng-container",13),ro()),2&t){const t=e.$implicit,n=fo(3);Vr(1),Zs("ngIf",t.tabsId===n.tabsId&&t.inOverflow)}}function z_(t,e){if(1&t){const t=so();Js(0,"clr-tab-overflow-content",12),co("keydown.esc",(function(){return Qe(t),fo(2).closeOnEscapeKey()}),!1,Un)("click",(function(e){Qe(t),fo();const n=Ws(4);return fo().closeOnOutsideClick(e,n)}),!1,Un)("focusout",(function(e){return Qe(t),fo(2).closeOnFocusOut(e)})),qs(1,B_,2,1,"ng-container",1),to()}if(2&t){const t=fo(2);Vr(1),Zs("ngForOf",t.tabLinkDirectives)}}function H_(t,e){if(1&t){const t=so();no(0),Js(1,"div",6),Js(2,"li",7),Js(3,"button",8,9),co("mousedown",(function(){return Qe(t),fo()._mousedown=!0}))("focus",(function(){return Qe(t),fo().openOverflowOnFocus()}))("click",(function(){return Qe(t),fo().toggleOverflowOnClick()})),eo(5,"clr-icon",10),to(),to(),qs(6,z_,2,1,"clr-tab-overflow-content",11),to(),ro()}if(2&t){const t=fo();Vr(1),ko("open",t.toggleService.open),Vr(2),ko("active",t.activeTabInOverflow)("open",t.toggleService.open),Gs("tabindex",t.activeTabInOverflow&&!t.toggleService.open?0:-1),Vr(2),ko("is-info",t.toggleService.open),Gs("title",t.commonStrings.keys.more),Vr(1),Zs("ngIf",t.toggleService.open)}}function G_(t,e){if(1&t){const t=so();Js(0,"button",10),co("click",(function(){return Qe(t),fo(2).close()})),eo(1,"clr-icon",11),to()}2&t&&Gs("aria-label",fo(2).commonStrings.keys.close)}function $_(t,e){if(1&t){const t=so();Js(0,"div",1),Js(1,"div",2),co("@fadeDown.done",(function(e){return Qe(t),fo().fadeDone(e)})),Js(2,"div",3),Uo(3),to(),Js(4,"div",4),yo(5),Js(6,"div",5),Js(7,"div",6),qs(8,G_,2,1,"button",7),Js(9,"div",8),yo(10,1),to(),to(),yo(11,2),yo(12,3),to(),to(),Js(13,"div",3),Uo(14),to(),to(),Js(15,"div",9),co("click",(function(){Qe(t);const e=fo();return e.staticBackdrop||e.close()})),to(),to()}if(2&t){const t=fo();Vr(1),ko("modal-sm","sm"==t.size)("modal-lg","lg"==t.size)("modal-xl","xl"==t.size),Zs("@fadeDown",t.skipAnimation),Gs("aria-hidden",!t._open)("aria-labelledby",t.modalId),Vr(2),Bo(t.commonStrings.keys.modalContentStart),Vr(5),Zs("ngIf",t.closable),Vr(1),vo("id",t.modalId),Vr(5),Bo(t.commonStrings.keys.modalContentEnd),Vr(1),Zs("@fade",void 0)}}const q_=[[["",8,"modal-nav"]],[["",8,"modal-title"]],[["",8,"modal-body"]],[["",8,"modal-footer"]]],W_=[".modal-nav",".modal-title",".modal-body",".modal-footer"];function Q_(t,e){if(1&t&&(no(0),Uo(1),ro()),2&t){const t=fo(3);Vr(1),Bo(t.commonStrings.keys.danger)}}function Y_(t,e){if(1&t&&(Js(0,"div",14),qs(1,Q_,2,1,"ng-container",0),to()),2&t){const t=fo().$implicit,e=fo();Vr(1),Zs("ngIf",t.status===e.AccordionStatus.Error)}}function K_(t,e){if(1&t&&(no(0),Uo(1),ro()),2&t){const t=fo(2);Vr(1),Bo(t.commonStrings.keys.danger)}}function Z_(t,e){if(1&t&&(no(0),Uo(1),ro()),2&t){const t=fo(2);Vr(1),Bo(t.commonStrings.keys.success)}}function X_(t,e){if(1&t){const t=so();Js(0,"div",15),co("@toggle.done",(function(){Qe(t);const e=fo().$implicit;return fo().collapsePanelOnAnimationDone(e)})),Js(1,"div",16),yo(2,2),to(),to()}2&t&&Zs("@toggle",void 0)}function J_(t,e){if(1&t){const t=so();no(0),qs(1,Y_,2,1,"div",1),Js(2,"div",2),Js(3,"div",3),Js(4,"button",4,5),co("click",(function(){return Qe(t),fo().togglePanel()})),cc(6,"async"),Js(7,"span",6),qs(8,K_,2,1,"ng-container",0),qs(9,Z_,2,1,"ng-container",0),to(),Js(10,"span",7),eo(11,"clr-icon",8),eo(12,"span",9),eo(13,"clr-icon",10),eo(14,"clr-icon",11),to(),yo(15),yo(16,1),to(),to(),Js(17,"div",12),qs(18,X_,3,1,"div",13),to(),to(),ro()}if(2&t){const t=e.$implicit,r=fo();var n;const i=(null==(n=lc(6,16,r.accordionDescription.changes))?null:n.length)||r.accordionDescription.length;Vr(1),Zs("ngIf",t.status!==r.AccordionStatus.Inactive),Vr(1),Zs("ngClass",r.getPanelStateClasses(t)),Vr(2),ko("clr-accordion-header-has-description",i),Zs("id",r.getAccordionHeaderId(t.templateId))("disabled",r.isAccordion&&t.disabled),Gs("aria-disabled",!r.isAccordion&&t.disabled)("aria-controls",r.getAccordionContentId(t.templateId))("aria-expanded",t.open),Vr(4),Zs("ngIf",t.status===r.AccordionStatus.Error),Vr(1),Zs("ngIf",t.status===r.AccordionStatus.Complete),Vr(8),Zs("@skipInitialRender",void 0)("id",r.getAccordionContentId(t.templateId)),Gs("aria-hidden",!t.open)("aria-labelledby",r.getAccordionHeaderId(t.templateId)),Vr(1),Zs("ngIf",t.open)}}const tS=[[["clr-accordion-title"],["clr-step-title"]],[["clr-accordion-description"],["clr-step-description"]],"*"],eS=["clr-accordion-title, clr-step-title","clr-accordion-description, clr-step-description","*"];let nS=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["clr-icon"]]}),t})(),rS=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),iS=(()=>{let t=class{constructor(){this._open=!1,this._openChange=new I,this._openEventChange=new I}get openChange(){return this._openChange.asObservable()}set openEvent(t){this._openEvent=t,this._openEventChange.next(t)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(t){this._open!==(t=!!t)&&(this._open=t,this._openChange.next(t))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(t){this.openEvent=t,this.open=!this.open}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),sS=(()=>{let t=class{constructor(t,e,n){this.renderer=t,this.smartOpenService=e,this.document=n,this.outsideClickClose=!0,this.scrollToClose=!0,this.subscriptions=[],this.subscriptions.push(e.openChange.subscribe(t=>{t?(this.addEscapeListener(),this.addClickListener(),this.addScrollListener()):this.removeAllEventListeners()}),e.getEventChange().subscribe(t=>{this.ignoredEvent=t}))}addScrollListener(){this.scrollToClose&&(this.documentScroller=function t(e,n,i,s){return r(i)&&(s=i,i=void 0),s?t(e,n,i).pipe(M(t=>c(t)?s(...t):s(t))):new w(t=>{!function t(e,n,r,i,s){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,s),o=()=>t.removeEventListener(n,r,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),o=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),o=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,a=e.length;o<a;o++)t(e[o],n,r,i,s)}i.add(o)}(e,n,(function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),t,i)})}(this.document,"scroll",{capture:!0}),this.scrollSubscription=this.documentScroller.pipe($l(this.testForSmartPopoverContentContainer)).subscribe(()=>{this.smartOpenService.open=!1,this.setAnchorFocus()}))}removeScrollListener(){this.documentScroller&&(this.scrollSubscription.unsubscribe(),delete this.documentScroller)}testForSmartPopoverContentContainer(t){let e=t.target;for(;e.classList&&"body"!==e.parentElement.localName;)e=e.parentElement;return!!e.classList&&!e.classList.contains("clr-popover-content")}addClickListener(){this.outsideClickClose&&(this.documentClickListener=this.renderer.listen(this.document,"click",t=>{t===this.ignoredEvent?delete this.ignoredEvent:(this.smartOpenService.open=!1,t.target.focus())}))}removeClickListener(){this.outsideClickClose&&(delete this.ignoredEvent,this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}addEscapeListener(){this.escapeListener=this.renderer.listen(this.document,"keydown.escape",t=>{this.smartOpenService.open=!1,this.setAnchorFocus()})}removeEscapeListener(){this.escapeListener&&(this.escapeListener(),delete this.escapeListener)}set anchorButtonRef(t){this._anchorButtonRef=t}get anchorButtonRef(){return this._anchorButtonRef}set closeButtonRef(t){this._closeButtonRef=t}get closeButtonRef(){return this._closeButtonRef}setCloseFocus(){this._closeButtonRef.nativeElement.focus()}setAnchorFocus(){this.anchorButtonRef.nativeElement.focus()}set contentRef(t){this._contentRef=t}get contentRef(){return this._contentRef}removeAllEventListeners(){this.removeScrollListener(),this.removeClickListener(),this.removeEscapeListener()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.removeAllEventListeners()}};return t.\u0275fac=function(e){return new(e||t)(Wt(ya),Wt(iS),Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var oS=function(t){return t[t.BOTTOM=0]="BOTTOM",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.TOP=3]="TOP",t}({}),aS=function(t){return t[t.START=0]="START",t[t.CENTER=.5]="CENTER",t[t.END=1]="END",t}({});const cS=t=>Object.assign(Object.assign({},t),{side:-1*t.side}),lS=(t,e)=>{const n=t.content+(e?.5:-.5);return n<0||n>1?t:Object.assign(Object.assign({},t),{content:n})};function uS(t,e,n){return r=>e(t(r),n)}function hS(t,e,n){let r=e.left,i=e.top;switch(t.axis+t.side){case-1:r+=dS(t,e,n),i-=n.height;break;case 1:r+=dS(t,e,n),i+=e.height;break;case 0:r-=n.width,i+=pS(t,e,n);break;case 2:r+=e.width,i+=pS(t,e,n)}return{xOffset:r,yOffset:i}}function dS(t,e,n){let r=0;switch(t.anchor){case aS.START:break;case aS.CENTER:r+=e.width/2;break;case aS.END:r+=e.width}switch(t.content){case aS.START:break;case aS.CENTER:r-=n.width/2;break;case aS.END:r-=n.width}return r}function pS(t,e,n){let r=0;switch(t.anchor){case aS.START:break;case aS.CENTER:r+=e.height/2;break;case aS.END:r+=e.height}switch(t.content){case aS.START:break;case aS.CENTER:r-=n.height/2;break;case aS.END:r-=n.height}return r}var fS=function(t){return t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL",t}({});let gS=(()=>{let t=class{constructor(t,e){this.eventService=t,this.platformId=e,this._shouldRealign=new I,this.shouldRealign=this._shouldRealign.asObservable()}realign(){this._shouldRealign.next()}set position(t){this._position=t}get position(){return this._position}alignContent(t){if(!Wh(this.platformId))return{xOffset:0,yOffset:0};this.currentAnchorCoords=this.eventService.anchorButtonRef.nativeElement.getBoundingClientRect(),this.currentContentCoords=t.getBoundingClientRect(),this.contentOffsets=hS(this.position,this.currentAnchorCoords,this.currentContentCoords);const e=function(t,e){const n=[],r=t.yOffset+e.height,i=t.xOffset,s=t.xOffset+e.width;return t.yOffset>=0||n.push(oS.TOP),i>=0||n.push(oS.LEFT),r<=(window.innerHeight||document.documentElement.clientHeight)||n.push(oS.BOTTOM),s<=(window.innerWidth||document.documentElement.clientWidth)||n.push(oS.RIGHT),n}(this.contentOffsets,this.currentContentCoords),n=e.reduce((t,e)=>t+e,0);return 1===e.length&&this.position.axis===fS.VERTICAL?this.handleVerticalAxisOneViolation(n):1===e.length&&this.position.axis===fS.HORIZONTAL?this.handleHorizontalAxisOneViolation(n):2===e.length&&this.position.axis===fS.VERTICAL?this.handleVerticalAxisTwoViolations(n):2===e.length&&this.position.axis===fS.HORIZONTAL&&this.handleHorizontalAxisTwoViolations(n),this.contentOffsets}handleVerticalAxisOneViolation(t){switch(t){case 0:case 3:this.contentOffsets=hS(cS(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 1:this.contentOffsets=hS(lS(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 2:this.contentOffsets=hS(lS(this.position,!0),this.currentAnchorCoords,this.currentContentCoords)}}handleVerticalAxisTwoViolations(t){switch(t){case 5:{const t=uS(cS,lS,!0);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 4:{const t=uS(cS,lS,!1);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:break;case 2:{const t=uS(cS,lS,!0);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 1:{const t=uS(cS,lS,!1);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}handleHorizontalAxisOneViolation(t){switch(t){case 1:case 2:this.contentOffsets=hS(cS(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 0:this.contentOffsets=hS(lS(this.position,!0),this.currentAnchorCoords,this.currentContentCoords);break;case 3:this.contentOffsets=hS(lS(this.position),this.currentAnchorCoords,this.currentContentCoords)}}handleHorizontalAxisTwoViolations(t){switch(t){case 5:case 4:{const t=uS(cS,lS,!1);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:break;case 2:case 1:{const t=uS(cS,lS,!0);this.contentOffsets=hS(t(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}};return t.\u0275fac=function(e){return new(e||t)(Wt(sS),Wt(zc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),mS=(()=>{let t=class{constructor(t,e,n,r,i,s,o){this.document=t,this.container=e,this.template=n,this.renderer=r,this.smartPositionService=i,this.smartEventsService=s,this.smartOpenService=o,this.subscriptions=[],this.shouldRealign=!1,this.checkCollector=new pc}set open(t){this.smartOpenService.open=!!t}set contentAt(t){this.smartPositionService.position=t}set outsideClickClose(t){this.smartEventsService.outsideClickClose=!!t}set scrollToClose(t){this.smartEventsService.scrollToClose=!!t}ngAfterViewInit(){this.subscriptions.push(this.smartOpenService.openChange.subscribe(t=>{t?this.addContent():this.removeContent()}),this.smartPositionService.shouldRealign.subscribe(()=>{this.shouldRealign=!0,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","0")}),this.checkCollector.pipe(function(t,e=Ul){return n=>n.lift(new mm(t,e))}(0)).subscribe(()=>{this.alignContent(),this.shouldRealign=!1,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","1")}))}ngOnDestroy(){this.removeContent(),this.subscriptions.forEach(t=>t.unsubscribe())}removeContent(){this.view&&(this.view.rootNodes.forEach(t=>this.renderer.removeChild(this.document.body,t)),this.container.clear(),delete this.view)}addContent(){this.view=this.container.createEmbeddedView(this.template),this.smartEventsService.contentRef=this.view.rootNodes[0],this.renderer.addClass(this.view.rootNodes[0],"clr-popover-content"),this.renderer.setStyle(this.view.rootNodes[0],"top","0px"),this.renderer.setStyle(this.view.rootNodes[0],"left","0px"),this.renderer.setStyle(this.view.rootNodes[0],"opacity","0"),this.renderer.listen(this.view.rootNodes[0],"click",t=>{this.smartOpenService.openEvent=t}),this.view.rootNodes.forEach(t=>{this.renderer.appendChild(this.document.body,t)}),this.shouldRealign=!0}ngAfterContentChecked(){this.smartOpenService.open&&this.view&&this.shouldRealign&&this.checkCollector.emit()}alignContent(){if(!this.view)return;const t=this.smartPositionService.alignContent(this.view.rootNodes[0]);this.renderer.setStyle(this.view.rootNodes[0],"top",t.yOffset+"px"),this.renderer.setStyle(this.view.rootNodes[0],"left",t.xOffset+"px")}};return t.\u0275fac=function(e){return new(e||t)(Qs(Pu),Qs(ja),Qs(Ma),Qs(ya),Qs(gS),Qs(sS),Qs(iS))},t.\u0275dir=ye({type:t,selectors:[["","clrPopoverContent",""]],inputs:{open:["clrPopoverContent","open"],contentAt:["clrPopoverContentAt","contentAt"],outsideClickClose:["clrPopoverContentOutsideClickToClose","outsideClickClose"],scrollToClose:["clrPopoverContentScrollToClose","scrollToClose"]}}),t})(),yS=(()=>{let t=class{constructor(t){this.smartOpenService=t,this.subscriptions=[],this.openCloseChange=new pc,this.subscriptions.push(this.smartOpenService.openChange.subscribe(t=>{this.openCloseChange.next(t)}))}handleClick(t){this.smartOpenService.toggleWithEvent(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(iS))},t.\u0275dir=ye({type:t,selectors:[["","clrPopoverOpenCloseButton",""]],hostVars:2,hostBindings:function(t,e){1&t&&co("click",(function(t){return e.handleClick(t)})),2&t&&ko("clr-smart-open-close",!0)},outputs:{openCloseChange:"clrPopoverOpenCloseChange"}}),t})(),vS=(()=>{let t=class{constructor(t,e,n){this.elementRef=t,this.smartEventsService=e,this.smartOpenService=n,this.subscriptions=[],this.closeChange=new pc,this.subscriptions.push(n.openChange.pipe($l(t=>!t)).subscribe(()=>{this.closeChange.next()}))}handleClick(t){this.smartOpenService.toggleWithEvent(t),this.smartEventsService.setAnchorFocus()}ngAfterViewInit(){this.smartEventsService.closeButtonRef=this.elementRef,this.smartEventsService.setCloseFocus()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(sS),Qs(iS))},t.\u0275dir=ye({type:t,selectors:[["","clrPopoverCloseButton",""]],hostVars:2,hostBindings:function(t,e){1&t&&co("click",(function(t){return e.handleClick(t)})),2&t&&ko("clr-smart-close-button",!0)},outputs:{closeChange:"clrPopoverOnCloseChange"}}),t})(),bS=(()=>{let t=class{constructor(t,e){t.anchorButtonRef=e}};return t.\u0275fac=function(e){return new(e||t)(Qs(sS),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["","clrPopoverAnchor",""]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-anchor",!0)}}),t})(),wS=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[]]}),t})();class _S{}var SS=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.ERROR=3]="ERROR",t}({});let CS=(()=>{let t=class{constructor(t){this.listener=t,this._loadingState=SS.DEFAULT}get loadingState(){return this._loadingState}set loadingState(t){!0===t?t=SS.LOADING:t||(t=SS.DEFAULT),t!==this._loadingState&&(this._loadingState=t,this.listener&&this.listener.loadingStateChange(t))}ngOnDestroy(){this.loadingState=SS.DEFAULT}};return t.\u0275fac=function(e){return new(e||t)(Qs(_S,8))},t.\u0275dir=ye({type:t,selectors:[["","clrLoading",""]],inputs:{loadingState:["clrLoading","loadingState"]}}),t})(),ES=(()=>{let t=class{constructor(){this._changes=new I}get changes(){return this._changes.asObservable()}updateButtonGroup(t){this._changes.next(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var IS;let TS=(()=>{let t=IS=class{constructor(t,e){this.buttonInGroupService=t,this.toggleService=e,this._enableService=!1,this._inMenu=!1,this._classNames="btn",this._name=null,this._type=null,this._id=null,this._disabled=null,this._click=new pc(!1)}get inMenu(){return this._inMenu}set inMenu(t){this._inMenu!==(t=!!t)&&(this._inMenu=t,this._enableService&&this.buttonInGroupService&&this.buttonInGroupService.updateButtonGroup(this))}get classNames(){return this._classNames}set classNames(t){if("string"==typeof t){const e=t.split(" ");-1===e.indexOf("btn")&&e.push("btn"),this._classNames=e.join(" ")}}get name(){return this._name}set name(t){"string"==typeof t&&(this._name=t)}get type(){return this._type}set type(t){"string"==typeof t&&(this._type=t)}get id(){return this._id}set id(t){"string"==typeof t&&(this._id=t)}get disabled(){return this._disabled}set disabled(t){this._disabled=null!==t&&!1!==t?"":null}loadingStateChange(t){this.loading=t===SS.LOADING}emitClick(t){this.inMenu&&this.toggleService.toggleWithEvent(t),this._click.emit(!0)}ngAfterViewInit(){this._enableService=!0}};return t.\u0275fac=function(e){return new(e||t)(Qs(ES,12),Qs(iS))},t.\u0275cmp=he({type:t,selectors:[["clr-button"]],viewQuery:function(t,e){var n;1&t&&Ic(bv,!0),2&t&&Ec(n=Dc())&&(e.templateRef=n.first)},inputs:{inMenu:["clrInMenu","inMenu"],classNames:["class","classNames"],name:"name",type:"type",id:"id",disabled:"disabled"},outputs:{_click:"click"},features:[la([{provide:_S,useExisting:IS}])],ngContentSelectors:Sv,decls:2,vars:0,consts:[["buttonProjectedRef",""],[3,"click"],["class","spinner spinner-inline",4,"ngIf"],[1,"spinner","spinner-inline"]],template:function(t,e){1&t&&(mo(),qs(0,_v,3,7,"ng-template",null,0,Fc))},directives:[Rh],encapsulation:2}),t})();const xS={open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Toggle column filter",alertCloseButtonAriaLabel:"Close alert",datepickerToggle:"Toggle datepicker",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",daypickerSRCurrentMonthPhrase:"The current month is {CURRENT_MONTH}",daypickerSRCurrentYearPhrase:"The current year is {CURRENT_YEAR}",daypickerSRCurrentDecadePhrase:"The current decade is {DECADE_RANGE}",stackViewChanged:"Value changed.",formErrorSummary:"The form has {ERROR_NUMBER} errors.",verticalNavToggle:"Toggle vertical navigation",verticalNavGroupToggle:"Toggle vertical navigation group",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",dategridExpandableBeginningOf:"Beginning of",dategridExpandableEndOf:"End of",dategridExpandableRowContent:"Expandable row content",dategridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button"};let kS=(()=>{let t=class{constructor(){this._strings=xS}localize(t){this._strings=Object.assign(Object.assign({},this._strings),t)}get keys(){return this._strings}parse(t,e={}){const n=Object.keys(e);let r=t;return n.length&&n.forEach(t=>{r=r.replace(`{${t}}`,e[t])}),r}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),AS=0;const OS=new Mt("UNIQUE_ID");function DS(){return"clr-id-"+AS++}const RS={provide:OS,useFactory:DS};var PS=function(t){return t[t.BEFORE=-1]="BEFORE",t[t.AFTER=1]="AFTER",t}({});let NS=(()=>{class t{}return t["top-right"]={axis:fS.VERTICAL,side:PS.BEFORE,anchor:aS.END,content:aS.END},t["top-left"]={axis:fS.VERTICAL,side:PS.BEFORE,anchor:aS.START,content:aS.START},t["bottom-right"]={axis:fS.VERTICAL,side:PS.AFTER,anchor:aS.END,content:aS.END},t["bottom-left"]={axis:fS.VERTICAL,side:PS.AFTER,anchor:aS.START,content:aS.START},t["right-top"]={axis:fS.HORIZONTAL,side:PS.AFTER,anchor:aS.CENTER,content:aS.END},t["right-bottom"]={axis:fS.HORIZONTAL,side:PS.AFTER,anchor:aS.START,content:aS.START},t["left-top"]={axis:fS.HORIZONTAL,side:PS.BEFORE,anchor:aS.CENTER,content:aS.END},t["left-bottom"]={axis:fS.HORIZONTAL,side:PS.BEFORE,anchor:aS.START,content:aS.START},t})(),FS=(()=>{let t=class{constructor(t,e,n,r){this.buttonGroupNewService=t,this.toggleService=e,this.popoverId=n,this.commonStrings=r,this.popoverPosition=NS["bottom-left"],this.inlineButtons=[],this.menuButtons=[]}get open(){return this.toggleService.open}ngAfterContentInit(){this.initializeButtons(),this.buttonGroupNewService.changes.subscribe(t=>this.rearrangeButton(t)),this.buttons.changes.subscribe(()=>{this.initializeButtons()})}rearrangeButton(t){let e,n;t.inMenu?(e=this.inlineButtons,n=this.menuButtons):(e=this.menuButtons,n=this.inlineButtons);const r=e.indexOf(t);if(r>-1){e.splice(r,1);const i=this.getMoveIndex(t);i<=n.length&&n.splice(i,0,t)}}getMoveIndex(t){return this.buttons.filter(e=>e.inMenu===t.inMenu).indexOf(t)}initializeButtons(){const t=[],e=[];this.buttons.forEach(n=>{n.inMenu?e.push(n):t.push(n)}),this.inlineButtons=t,this.menuButtons=e}get menuPosition(){return this._menuPosition}set menuPosition(t){this._menuPosition=t&&NS[t]?t:"bottom-left",this.popoverPosition=NS[this._menuPosition]}};return t.\u0275fac=function(e){return new(e||t)(Qs(ES),Qs(iS),Qs(OS),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-button-group"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,TS,!1),2&t&&Ec(r=Dc())&&(e.buttons=r)},hostVars:2,hostBindings:function(t,e){2&t&&ko("btn-group",!0)},inputs:{menuPosition:["clrMenuPosition","menuPosition"]},features:[la([ES,RS,iS,sS,gS])],decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],["ref",""],[3,"ngTemplateOutlet"],[1,"btn-group-overflow","open",3,"ngClass"],["anchor",""],["clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"btn","dropdown-toggle"],["shape","ellipsis-horizontal"],["role","menu","class","dropdown-menu clr-button-group-menu",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","menu",1,"dropdown-menu","clr-button-group-menu",3,"id"]],template:function(t,e){1&t&&(qs(0,Ev,2,1,"ng-container",0),qs(1,xv,6,9,"ng-container",1),qs(2,Ov,1,1,"ng-template",null,2,Fc)),2&t&&(Zs("ngForOf",e.inlineButtons),Vr(1),Zs("ngIf",e.menuButtons.length>0))},directives:[Oh,Rh,Vh,kh,bS,yS,nS,mS],encapsulation:2}),t})(),LS=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,wS]]}),t})();var MS;let VS=(()=>{let t=MS=class{constructor(t,e){this.el=t,this.renderer=e,this.buttonState=SS,this.state=SS.DEFAULT,this.clrLoadingChange=new pc(!1)}loadingStateChange(t){if(t!==this.state){switch(this.state=t,t){case SS.DEFAULT:this.renderer.removeStyle(this.el.nativeElement,"width"),this.renderer.removeStyle(this.el.nativeElement,"transform"),this.disabled||this.renderer.removeAttribute(this.el.nativeElement,"disabled");break;case SS.LOADING:this.setExplicitButtonWidth(),this.renderer.setStyle(this.el.nativeElement,"transform","translatez(0)"),this.renderer.setAttribute(this.el.nativeElement,"disabled","");break;case SS.SUCCESS:this.setExplicitButtonWidth();break;case SS.ERROR:this.loadingStateChange(SS.DEFAULT)}this.clrLoadingChange.emit(t)}}setExplicitButtonWidth(){if(this.el.nativeElement&&this.el.nativeElement.getBoundingClientRect){const t=this.el.nativeElement.getBoundingClientRect();this.renderer.setStyle(this.el.nativeElement,"width",t.width+"px")}}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(ya))},t.\u0275cmp=he({type:t,selectors:[["button","clrLoading",""]],hostVars:1,hostBindings:function(t,e){2&t&&Gs("disabled",e.disabled?"":null)},inputs:{disabled:"disabled"},outputs:{clrLoadingChange:"clrLoadingChange"},features:[la([{provide:_S,useExisting:MS}])],attrs:Dv,ngContentSelectors:Sv,decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"spinner","spinner-inline"],[1,"spinner","spinner-inline","spinner-check"]],template:function(t,e){1&t&&(mo(),no(0,0),qs(1,Rv,2,1,"span",1),qs(2,Pv,2,1,"span",1),qs(3,Nv,2,1,"span",1),ro()),2&t&&(Zs("ngSwitch",e.state),Vr(1),Zs("ngSwitchCase",e.buttonState.LOADING),Vr(1),Zs("ngSwitchCase",e.buttonState.SUCCESS),Vr(1),Zs("ngSwitchCase",e.buttonState.DEFAULT))},directives:[Lh,Mh],encapsulation:2,data:{animation:[Sm("defaultButton",[km(":enter",[Im({opacity:0}),Cm("200ms 100ms ease-in",Im({opacity:1}))]),km(":leave",[Im({opacity:0})])]),Sm("spinner",[km(":enter",[Im({opacity:0}),Cm("200ms 100ms ease-in",Im({opacity:1}))]),km(":leave",[Im({opacity:1}),Cm("100ms ease-out",Im({opacity:0}))])]),Sm("validated",[km(":enter",[Cm("600ms",xm([Im({transform:"scale(0,0)",offset:0}),Im({opacity:1,offset:.2}),Im({transform:"scale(1.2,1.2)",offset:.4}),Im({transform:"scale(.9,.9)",offset:.6}),Im({transform:"scale(1,1)",offset:1})]))]),km(":leave",[Im({opacity:1}),Cm("100ms ease-out",Im({opacity:0}))])])]}}),t})(),jS=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),US=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[jS,LS]}),t})(),BS=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),zS=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)}}),t})(),HS=0,GS=(()=>{let t=class{constructor(){this._id="clr-form-control-"+ ++HS,this._idChange=new Fl(this._id)}get id(){return this._id}set id(t){this._id=t,this._idChange.next(t)}get idChange(){return this._idChange.asObservable()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var $S=function(t){return t.off="off",t.polite="polite",t.assertive="assertive",t}({});let qS=(()=>{let t=class{constructor(t,e,n){this.ngZone=t,this.platformId=n,this._id="clr-aria-live-element-"+DS(),this.document=e}get id(){return this._id}announce(t,e=$S.polite){e!==$S.off&&(!this.ariaLiveElement&&Wh(this.platformId)&&(this.ariaLiveElement=this.createContainer()),(t="string"!=typeof t&&Wh(this.platformId)?t.textContent:t)&&(this.ariaLiveElement.setAttribute("aria-live",e),this.ngZone.runOutsideAngular(()=>{clearTimeout(this.previousTimeout),this.previousTimeout=setTimeout(()=>{this.ariaLiveElement.textContent=t},100)})))}ngOnDestroy(){clearTimeout(this.previousTimeout),Wh(this.platformId)&&this.ariaLiveElement&&(this.document.body.removeChild(this.ariaLiveElement),this.ariaLiveElement=null)}createContainer(){const t=this.document.createElement("div");return t.setAttribute("id",this.id),t.classList.add("clr-sr-only"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live",$S.polite),this.document.body.appendChild(t),t}};return t.\u0275fac=function(e){return new(e||t)(Wt(il),Wt(Pu),Wt(zc))},t.\u0275prov=lt({factory:function(){return new t(Wt(il),Wt(Pu),Wt(zc))},token:t,providedIn:"root"}),t})();var WS=function(t){return t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t.COMPACT="compact",t}({});let QS=(()=>{let t=class{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=WS.HORIZONTAL,this.layoutValues=Object.keys(WS).map(t=>WS[t]),this._labelSize=2}set labelSize(t){this.labelSizeIsValid(t)&&(this._labelSize=t)}get labelSize(){return this._labelSize}isVertical(){return this.layout===WS.VERTICAL}isHorizontal(){return this.layout===WS.HORIZONTAL}isCompact(){return this.layout===WS.COMPACT}get layoutClass(){return"clr-form-"+this.layout}isValid(t){return this.layoutValues.indexOf(t)>-1}labelSizeIsValid(t){return Number.isInteger(t)&&t>=this.minLabelSize&&t<=this.maxLabelSize}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),YS=(()=>{let t=class{constructor(t){this.layoutService=t,this.className=""}controlClass(t=!1,e=!1,n=""){const r=[this.className,n];return t&&r.push("clr-error"),e&&this.layoutService&&-1===this.className.indexOf("clr-col")&&r.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),r.join(" ").trim()}initControlClass(t,e){e&&e.className&&(this.className=e.className,e.className.split(" ").forEach(n=>{n.startsWith("clr-col")&&t.removeClass(e,n)}))}};return t.\u0275fac=function(e){return new(e||t)(Wt(QS,8))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),KS=(()=>{let t=class{constructor(t,e,n,r){this.controlIdService=t,this.controlClassService=e,this.ariaLiveService=n,this.el=r}ngAfterViewInit(){null===this.controlClassService&&this.ariaLiveService.announce(this.el.nativeElement)}};return t.\u0275fac=function(e){return new(e||t)(Qs(GS,8),Qs(YS,8),Qs(qS),Qs(pa))},t.\u0275cmp=he({type:t,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(t,e){2&t&&(Go("id",(null==e.controlIdService?null:e.controlIdService.id)+"-error"),ko("clr-subtext",!0))},features:[la([qS])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),ZS=(()=>{let t=class{constructor(t){this.controlIdService=t}};return t.\u0275fac=function(e){return new(e||t)(Qs(GS,8))},t.\u0275cmp=he({type:t,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(t,e){2&t&&(Go("id",(null==e.controlIdService?null:e.controlIdService.id)+"-helper"),ko("clr-subtext",!0))},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),XS=(()=>{let t=class{constructor(){this._controlChanges=new I}get controlChanges(){return this._controlChanges.asObservable()}setControl(t){this._controlChanges.next(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),JS=(()=>{let t=class{constructor(t){this.ngControlService=t,this._statusChanges=new I,this.subscriptions=[],this.subscriptions.push(this.ngControlService.controlChanges.subscribe(t=>{t&&(this.control=t,this.listenForChanges())}))}get statusChanges(){return this._statusChanges.asObservable()}listenForChanges(){this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.sendValidity()}))}sendValidity(){this._statusChanges.next(!(!this.control.touched||!this.control.invalid))}triggerStatusChange(){this.control&&this.sendValidity()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Wt(XS))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),tC=(()=>{let t=class{constructor(t,e,n,r,i){this.controlIdService=t,this.layoutService=e,this.ngControlService=n,this.renderer=r,this.el=i,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,"clr-col-md-"+this.layoutService.labelSize)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(t=>this.forAttr=t))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(GS,8),Qs(QS,8),Qs(XS,8),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["label"]],hostVars:1,hostBindings:function(t,e){2&t&&Gs("for",e.forAttr)},inputs:{forAttr:["for","forAttr"]}}),t})(),eC=(()=>{let t=class{constructor(){this._touched=new I}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),nC=(()=>{let t=class{constructor(t,e,n,r,i,s){this.layoutService=t,this.markControlService=e,this.platformId=n,this.el=r,this.commonStrings=i,this.ariaLiveService=s,this.invalidControls=[]}set labelSize(t){this.layoutService.labelSize=t}markAsDirty(t){this.markAsTouched(!0)}markAsTouched(t){this.markControlService.markAsTouched(),!1!==t&&Wh(this.platformId)&&(this.invalidControls=Array.from(this.el.nativeElement.querySelectorAll(".ng-invalid")),this.invalidControls.length>0&&(this.invalidControls[0].focus(),this.updateAriaLive()))}onFormSubmit(){this.markAsTouched()}updateAriaLive(){if(0===this.invalidControls.length)return;const t=this.labels.filter(t=>this.invalidControls.find(e=>t.forAttr===e.id));this.ariaLiveService.announce(this.commonStrings.parse(this.commonStrings.keys.formErrorSummary,{ERROR_NUMBER:t.length.toString()}))}};return t.\u0275fac=function(e){return new(e||t)(Qs(QS),Qs(eC),Qs(zc),Qs(pa),Qs(kS),Qs(qS))},t.\u0275dir=ye({type:t,selectors:[["","clrForm",""]],contentQueries:function(t,e,n){var r;1&t&&kc(n,tC,!0),2&t&&Ec(r=Dc())&&(e.labels=r)},hostVars:6,hostBindings:function(t,e){1&t&&co("submit",(function(){return e.onFormSubmit()})),2&t&&ko("clr-form",!0)("clr-form-horizontal",e.layoutService.isHorizontal())("clr-form-compact",e.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[la([QS,eC,qS])]}),t})(),rC=(()=>{let t=class{constructor(t){this.layoutService=t}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}};return t.\u0275fac=function(e){return new(e||t)(Qs(QS))},t.\u0275dir=ye({type:t,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),t})(),iC=(()=>{let t=class{constructor(t,e,n,r){this.ifErrorService=t,this.layoutService=e,this.controlClassService=n,this.ngControlService=r,this.subscriptions=[],this.invalid=!1,this._dynamic=!1,this.subscriptions.push(this.ifErrorService.statusChanges.subscribe(t=>{this.invalid=t})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(t=>{this.control=t}))}controlClass(){return this.controlClassService.controlClass(this.invalid,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}ngOnDestroy(){this.subscriptions.map(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(JS),Qs(QS,8),Qs(YS),Qs(XS))},t.\u0275dir=ye({type:t,contentQueries:function(t,e,n){var r;1&t&&kc(n,tC,!0),2&t&&Ec(r=Dc())&&(e.label=r.first)}}),t})();class sC{constructor(t,e,n=0){if(this.injector=e.injector,!this.injector.get(t,null)){const r=this.injector.get(da),i=this.injector.get(pa);e.createComponent(r.resolveComponentFactory(BS));const s=r.resolveComponentFactory(t),o=[];o[n]=[i.nativeElement];const a=e.createComponent(s,void 0,void 0,o);e.remove(0),a.instance._dynamic=!0,this.injector=a.injector}}get(t,e){return this.injector.get(t,e)}}let oC=(()=>{let t=class{constructor(t,e,n,r,i,s){this.vcr=t,this.wrapperType=e,this.ngControl=r,this.subscriptions=[],this.index=0,this.renderer=i,this.el=s;try{this.ngControlService=n.get(XS),this.ifErrorService=n.get(JS),this.controlClassService=n.get(YS),this.markControlService=n.get(eC)}catch(o){}this.controlClassService&&this.controlClassService.initControlClass(i,s.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}))}get id(){return this._id}set id(t){this._id=t,this.controlIdService&&(this.controlIdService.id=t)}triggerValidation(){this.ifErrorService&&this.ifErrorService.triggerStatusChange()}getProviderFromContainer(t,e){try{return this._containerInjector.get(t,e)}catch(n){return e}}ngOnInit(){this._containerInjector=new sC(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(GS),this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl),this.listenForErrorStateChanges()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}listenForErrorStateChanges(){this.ifErrorService&&this.subscriptions.push(this.ifErrorService.statusChanges.pipe($d(!1),$l(()=>this.renderer&&!!this.el),t=>t.lift(new bm(void 0,void 0))).subscribe(t=>this.setAriaDescribedBy(t)))}setAriaDescribedBy(t){this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",this.getAriaDescribedById(t))}getAriaDescribedById(t){return this.controlIdService.id.concat(t?"-error":"-helper")}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(fs),Qs(As),Qs(Hm),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,hostVars:1,hostBindings:function(t,e){1&t&&co("blur",(function(){return e.triggerValidation()})),2&t&&Go("id",e.id)},inputs:{id:"id"}}),t})(),aC=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS]]}),t})();const cC=new Mt("IS_TOGGLE"),lC={provide:cC,useFactory:function(){return new Fl(!1)}};let uC=(()=>{let t=class{constructor(t){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(t.subscribe(t=>{this.toggle=t}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(cC))},t.\u0275cmp=he({type:t,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(t,e,n){var r;1&t&&Ac(n,tC,!0),2&t&&Ec(r=Dc())&&(e.label=r.first)},hostVars:4,hostBindings:function(t,e){2&t&&ko("clr-checkbox-wrapper",!e.toggle)("clr-toggle-wrapper",e.toggle)},features:[la([GS,lC])],ngContentSelectors:Mv,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(mo(Lv),yo(0),yo(1,1),qs(2,Fv,1,0,"label",0)),2&t&&(Vr(2),Zs("ngIf",!e.label))},directives:[Rh,tC],encapsulation:2}),t})(),hC=(()=>{let t=class extends oC{constructor(t,e,n,r,i,s){super(t,uC,e,n,r,i),this.toggle=s}ngOnInit(){super.ngOnInit();const t=this.getProviderFromContainer(cC,null);t&&null!==this.toggle&&t.next(!0)}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa),Ys("clrToggle"))},t.\u0275dir=ye({type:t,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[Wo]}),t})(),dC=(()=>{let t=class extends iC{constructor(){super(...arguments),this.inline=!1}set clrInline(t){this.inline="string"==typeof t?"false"!==t:!!t}get clrInline(){return this.inline}};return t.\u0275fac=function(e){return Sk(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control",!0)("clr-form-control-disabled",null==e.control?null:e.control.disabled)("clr-row",e.addGrid())},inputs:{clrInline:"clrInline"},features:[la([XS,YS,JS]),Wo],ngContentSelectors:Hv,decls:8,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(t,e){1&t&&(mo(zv),yo(0),qs(1,Vv,1,0,"label",0),Js(2,"div",1),yo(3,1),Js(4,"div",2),qs(5,jv,1,0,void 0,0),qs(6,Uv,1,0,"clr-icon",3),qs(7,Bv,1,0,void 0,0),to(),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),ko("clr-control-inline",e.clrInline),Zs("ngClass",e.controlClass()),Vr(3),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:[Rh,kh,tC,nS],encapsulation:2}),t})(),pC=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,aC,zS],aC]}),t})(),fC=0;const gC=new Mt("IF_ACTIVE_ID"),mC={provide:gC,useFactory:function(){return++fC}};let yC=(()=>{let t=class{constructor(){this._currentChange=new I}get currentChange(){return this._currentChange.asObservable()}set current(t){this._current!==t&&(this._current=t,this._currentChange.next(t))}get current(){return this._current}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),vC=(()=>{let t=class{constructor(t,e,n,r){this.ifActiveService=t,this.id=e,this.template=n,this.container=r,this.wasActive=!1,this.activeChange=new pc(!1),this.checkAndUpdateView(t.current),this.subscription=this.ifActiveService.currentChange.subscribe(t=>{this.checkAndUpdateView(t)})}checkAndUpdateView(t){const e=t===this.id;e!==this.wasActive&&(this.updateView(e),this.activeChange.emit(e),this.wasActive=e)}set active(t){t&&(this.ifActiveService.current=this.id)}get active(){return this.ifActiveService.current===this.id}updateView(t){t?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(Qs(yC),Qs(gC),Qs(Ma),Qs(ja))},t.\u0275dir=ye({type:t,selectors:[["","clrIfActive",""]],inputs:{active:["clrIfActive","active"]},outputs:{activeChange:"clrIfActiveChange"}}),t})(),bC=(()=>{let t=class{constructor(t,e,n){this.toggleService=t,this.template=e,this.container=n,this.openChange=new pc(!1),this.subscription=this.toggleService.openChange.subscribe(t=>{this.updateView(t),this.openChange.emit(t)})}set open(t){this.toggleService.open=t}get open(){return this.toggleService.open}updateView(t){t?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(Qs(iS),Qs(Ma),Qs(ja))},t.\u0275dir=ye({type:t,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),t})(),wC=(()=>{let t=class{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new I}get loading(){return this._loading}set loading(t){(t=!!t)!==this._loading&&(this._loading=t)}get expanded(){return this._expanded}set expanded(t){(t=!!t)!==this._expanded&&(this._expanded=t,this._expandChange.next(t))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(t){switch(t){case SS.LOADING:this.loading=!0;break;default:this.loading=!1}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),_C=(()=>{let t=class{constructor(t,e,n,r,i){this.template=t,this.container=e,this.el=n,this.renderer=r,this.expand=i,this._expanded=!1,this.expandedChange=new pc(!0),this._subscriptions=[],i.expandable++,this._subscriptions.push(i.expandChange.subscribe(()=>{this.updateView(),this.expandedChange.emit(this.expand.expanded)}))}get expanded(){return this._expanded}set expanded(t){"boolean"==typeof t&&(this.expand.expanded=t,this._expanded=t)}updateView(){if(!this.expand.expanded||0===this.container.length)if(this.template)this.expand.expanded?this.container.createEmbeddedView(this.template):this.container.clear();else try{this.renderer.setStyle(this.el.nativeElement,"display",this.expand.expanded?null:"none")}catch(t){}}ngOnInit(){this.updateView()}ngOnDestroy(){this.expand.expandable--,this._subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(Ma,8),Qs(ja),Qs(pa),Qs(ya),Qs(wC))},t.\u0275dir=ye({type:t,selectors:[["","clrIfExpanded",""]],inputs:{expanded:["clrIfExpanded","expanded"]},outputs:{expandedChange:"clrIfExpandedChange"}}),t})(),SC=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),CC=(()=>{let t=class{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(t){this._previousFocusTraps.push(this._current),this._current=t}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),EC=(()=>{let t=class{constructor(t,e,n,r,i){this.el=t,this.injector=e,this.focusTrapsTracker=n,this.renderer=r,this.platformId=i,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Pu),this.focusTrapsTracker.current=this,this.renderer.setAttribute(this.el.nativeElement,"tabindex","0")}set config(t){this._config=Object.assign(this._config,t)}onFocusIn(t){if(this.focusTrapsTracker.current!==this||!Wh(this.platformId)||this.localFocusEscaped)return;const e=this.el.nativeElement;this._config.strict&&t.target&&!e.contains(t.target)||t.target===this.bottomReboundEl&&e.contains(this.previousTrappedActiveElement)?e.focus():t.target===this.topReboundEl||t.target===e||e.contains(t.target)||(this.localFocusEscaped=!0),this.previousTrappedActiveElement=t.target}createFocusableOffScreenEl(){const t=this.document.createElement("span");return this.renderer.setAttribute(t,"tabindex","0"),this.renderer.addClass(t,"offscreen-focus-rebounder"),t}addReboundEls(){if(Wh(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const t=this.el.nativeElement;this.renderer.insertBefore(t.parentElement,this.topReboundEl,t),t.nextSibling?this.renderer.insertBefore(t.parentNode,this.bottomReboundEl,t.nextSibling):this.renderer.appendChild(t.parentNode,this.bottomReboundEl)}}removeReboundEls(){Wh(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngAfterViewInit(){Wh(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(As),Qs(CC),Qs(ya),Qs(zc))},t.\u0275dir=ye({type:t,selectors:[["","clrFocusTrap",""]],hostBindings:function(t,e){1&t&&co("focusin",(function(t){return e.onFocusIn(t)}),!1,Un)},inputs:{config:["clrFocusTrap","config"]}}),t})(),IC=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})();const TC=/d+.+m+.+y+/i,xC=/m+.+d+.+y+/i,kC=/d+|m+|y+/i,AC=/\d+/g,OC=/Mobi/i,DC=/\u200f/g,RC={name:"LITTLE_ENDIAN",format:["DD","MM","YYYY"]},PC={name:"MIDDLE_ENDIAN",format:["MM","DD","YYYY"]},NC={name:"BIG_ENDIAN",format:["YYYY","MM","DD"]};function FC(t,e){return new Date(t,e+1,0).getDate()}class LC{constructor(t,e=!1,n=!1,r=!1,i=!1,s=!1){this.dayModel=t,this.isTodaysDate=e,this.isExcluded=n,this.isDisabled=r,this.isSelected=i,this.isFocusable=s}get tabIndex(){return this.isFocusable?0:-1}}class MC{constructor(t,e,n){this.year=t,this.month=e,this.date=n}isEqual(t){return!!t&&this.year===t.year&&this.month===t.month&&this.date===t.date}toDate(){return new Date(this.year,this.month,this.date)}incrementBy(t){const e=new Date(this.year,this.month,this.date+t);return new MC(e.getFullYear(),e.getMonth(),e.getDate())}clone(){return new MC(this.year,this.month,this.date)}toComparisonString(){return`${this.year}${this.pad(this.month)}${this.pad(this.date)}`}pad(t){return t<10?"0"+t:""+t}toDateString(){return this.toDate().toLocaleDateString()}}class VC{constructor(t,e,n,r,i,s){this.calendar=t,this.selectedDay=e,this.focusableDay=n,this.today=r,this.firstDayOfWeek=i,this.excludedDates=s,this.currMonthDayViews=[],this.initializeCalendarView()}get calendarView(){return this._calendarView}initializeCalendarView(){const t=this.calendar.previousMonth(),e=this.calendar.nextMonth(),n=this.numDaysFromPrevMonthInCalView(this.calendar.year,this.calendar.month),r=42-(this.calendar.days.length+n);let i=[],s=[];n>0&&(i=this.generateDayViewModels(t.days.slice(-1*n),!0,!1)),this.currMonthDayViews=this.generateDayViewModels(this.calendar.days,!1,!0),r>0&&(s=this.generateDayViewModels(e.days.slice(0,r),!0,!1)),this._calendarView=this.generateCalendarView(i,this.currMonthDayViews,s),this.initializeSelectedDay(),this.initializeFocusableDay()}isDateExcluded(t){const{minDate:e,maxDate:n}=this.excludedDates,r=e.toComparisonString(),i=n.toComparisonString(),s=t.toComparisonString();return!(s>=r&&s<=i)}generateDayViewModels(t,e,n){const r=t.map(t=>new LC(t,!1,e,this.isDateExcluded(t),!1,!1));return n&&this.calendar.isDayInCalendar(this.today)&&(r[this.today.date-1].isTodaysDate=!0),r}numDaysFromPrevMonthInCalView(t,e){const n=new Date(t,e,1).getDay();return n>=this.firstDayOfWeek?n-this.firstDayOfWeek:7+n-this.firstDayOfWeek}isDayInCalendarView(t){return!!this.calendar.isDayInCalendar(t)}generateCalendarView(t,e,n){const r=[...t,...e,...n],i=[];for(let s=0;s<6;s++)i[s]=r.slice(7*s,7*(s+1));return i}initializeSelectedDay(){this.selectedDay&&this.isDayInCalendarView(this.selectedDay)&&(this.currMonthDayViews[this.selectedDay.date-1].isSelected=!0)}initializeFocusableDay(){this.focusableDay&&this.isDayInCalendarView(this.focusableDay)?this.setFocusableFlag(this.focusableDay,!0):this.selectedDay&&this.isDayInCalendarView(this.selectedDay)?(this.setFocusableFlag(this.selectedDay,!0),this.focusableDay=this.selectedDay.clone()):this.isDayInCalendarView(this.today)?(this.setFocusableFlag(this.today,!0),this.focusableDay=this.today.clone()):(this.focusableDay=new MC(this.calendar.year,this.calendar.month,15),this.setFocusableFlag(this.focusableDay,!0))}setFocusableFlag(t,e){t&&(this.currMonthDayViews[t.date-1].isFocusable=e)}updateFocusableDay(t){this.setFocusableFlag(this.focusableDay,!1),this.setFocusableFlag(t,!0),this.focusableDay=t}}class jC{constructor(t,e){this.year=t,this.month=e,this.initializeDaysInCalendar()}initializeDaysInCalendar(){const t=FC(this.year,this.month);this.days=Array(t).fill(null).map((t,e)=>new MC(this.year,this.month,e+1))}isEqual(t){return!!t&&this.year===t.year&&this.month===t.month}isDayInCalendar(t){return!!t&&this.year===t.year&&this.month===t.month}previousMonth(){return 0===this.month?new jC(this.year-1,11):new jC(this.year,this.month-1)}nextMonth(){return 11===this.month?new jC(this.year+1,0):new jC(this.year,this.month+1)}}let UC=(()=>{let t=class{constructor(){this._todaysFullDate=new Date,this._selectedDayChange=new I,this._displayedCalendarChange=new I,this._focusOnCalendarChange=new I,this._focusedDayChange=new I}get displayedCalendar(){return this._displayedCalendar}setDisplayedCalendar(t){this._displayedCalendar.isEqual(t)||(this._displayedCalendar=t,this._displayedCalendarChange.next())}initializeTodaysDate(){this._todaysFullDate=new Date,this._today=new MC(this._todaysFullDate.getFullYear(),this._todaysFullDate.getMonth(),this._todaysFullDate.getDate())}get today(){return this._today}get selectedDayChange(){return this._selectedDayChange.asObservable()}notifySelectedDayChanged(t){this.selectedDay=t,this._selectedDayChange.next(t)}initializeCalendar(){this.focusedDay=null,this.initializeTodaysDate(),this._displayedCalendar=this.selectedDay?new jC(this.selectedDay.year,this.selectedDay.month):new jC(this.today.year,this.today.month)}changeMonth(t){this.setDisplayedCalendar(new jC(this._displayedCalendar.year,t))}changeYear(t){this.setDisplayedCalendar(new jC(t,this._displayedCalendar.month))}moveToNextMonth(){this.setDisplayedCalendar(this._displayedCalendar.nextMonth())}moveToPreviousMonth(){this.setDisplayedCalendar(this._displayedCalendar.previousMonth())}moveToCurrentMonth(){this.displayedCalendar.isDayInCalendar(this.today)||this.setDisplayedCalendar(new jC(this.today.year,this.today.month)),this._focusOnCalendarChange.next()}incrementFocusDay(t){this.focusedDay=this.focusedDay.incrementBy(t),this._displayedCalendar.isDayInCalendar(this.focusedDay)?this._focusedDayChange.next(this.focusedDay):this.setDisplayedCalendar(new jC(this.focusedDay.year,this.focusedDay.month)),this._focusOnCalendarChange.next()}get displayedCalendarChange(){return this._displayedCalendarChange.asObservable()}get focusOnCalendarChange(){return this._focusOnCalendarChange.asObservable()}get focusedDayChange(){return this._focusedDayChange.asObservable()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),BC=(()=>{let t=class{constructor(t,e){this._ngZone=t,this.platformId=e}focusCell(t){this._ngZone.runOutsideAngular(()=>{this.ngZoneIsStableInBrowser().subscribe(()=>{const e=t.nativeElement.querySelector('[tabindex="0"]');e&&e.focus()})})}focusInput(t){this._ngZone.runOutsideAngular(()=>this.ngZoneIsStableInBrowser().subscribe(()=>t.focus()))}elementIsFocused(t){return Wh(this.platformId)&&document.activeElement===t}ngZoneIsStableInBrowser(){return this._ngZone.onStable.asObservable().pipe(Id(),$l(()=>Wh(this.platformId)))}};return t.\u0275fac=function(e){return new(e||t)(Wt(il),Wt(zc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),zC=(()=>{let t=class{constructor(t){this.locale=t,this._firstDayOfWeek=0,this.initializeLocaleData()}get firstDayOfWeek(){return this._firstDayOfWeek}get localeDays(){return this._localeDays}get localeDaysNarrow(){return this._localeDays.map(t=>t.narrow)}get localeMonthsAbbreviated(){return this._localeMonthsAbbreviated}get localeMonthsWide(){return this._localeMonthsWide}get localeDateFormat(){return this._localeDateFormat}initializeLocaleData(){this.initializeFirstDayOfWeek(),this.initializeLocaleDateFormat(),this.initializeLocaleMonthsAbbreviated(),this.initializeLocaleMonthsWide(),this.initializeLocaleDays()}initializeLocaleDays(){const t=[],e=nh(this.locale,Xu.Standalone,Ju.Wide).slice(),n=nh(this.locale,Xu.Standalone,Ju.Narrow).slice(),r=this.firstDayOfWeek;for(let i=0;i<7;i++)t.push({day:e[i],narrow:n[i]});if(r>0){const e=t.splice(0,r);t.push(...e)}this._localeDays=t}initializeLocaleMonthsAbbreviated(){this._localeMonthsAbbreviated=rh(this.locale,Xu.Standalone,Ju.Abbreviated).slice()}initializeLocaleMonthsWide(){this._localeMonthsWide=rh(this.locale,Xu.Standalone,Ju.Wide).slice()}initializeFirstDayOfWeek(){this._firstDayOfWeek=Ka(this.locale)[Xa.FirstDayOfWeek]}initializeLocaleDateFormat(){this._localeDateFormat=ih(this.locale,th.Short)}};return t.\u0275fac=function(e){return new(e||t)(Wt($c))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),HC=(()=>{let t=class{constructor(t){this._localeHelperService=t,this.disabledDates={minDate:new MC(0,0,1),maxDate:new MC(9999,11,31)},this.cldrLocaleDateFormat="dd/MM/y",this.localeDisplayFormat=RC,this.delimiters=["/","/"],this.cldrLocaleDateFormat=this._localeHelperService.localeDateFormat,this.initializeLocaleDisplayFormat()}setMinDate(t){if(t){const[e,n,r]=t.split("-").map(t=>parseInt(t,10));this.disabledDates.minDate=new MC(e,n-1,r)}else this.disabledDates.minDate=new MC(0,0,1)}setMaxDate(t){if(t){const[e,n,r]=t.split("-").map(t=>parseInt(t,10));this.disabledDates.maxDate=new MC(e,n-1,r)}else this.disabledDates.maxDate=new MC(9999,11,31)}initializeLocaleDisplayFormat(){const t=this.cldrLocaleDateFormat.toLocaleLowerCase();this.localeDisplayFormat=TC.test(t)?RC:xC.test(t)?PC:NC,this.extractDelimiters()}extractDelimiters(){if(this.cldrLocaleDateFormat){const t=this.cldrLocaleDateFormat.replace(DC,"").split(kC);t&&4===t.length?this.delimiters=[t[1],t[2]]:console.error("Unexpected date format received. Delimiters extracted: ",t)}}toLocaleDisplayFormatString(t){if(t){if(isNaN(t.getTime()))return"";const e=t.getDate(),n=t.getMonth()+1,r=e>9?e.toString():"0"+e,i=n>9?n.toString():"0"+n;return this.localeDisplayFormat===RC?r+this.delimiters[0]+i+this.delimiters[1]+t.getFullYear():this.localeDisplayFormat===PC?i+this.delimiters[0]+r+this.delimiters[1]+t.getFullYear():t.getFullYear()+this.delimiters[0]+i+this.delimiters[1]+r}return""}get placeholderText(){const t=this.localeDisplayFormat.format;return t[0]+this.delimiters[0]+t[1]+this.delimiters[1]+t[2]}isValidMonth(t){return t>-1&&t<12}isValidDate(t,e,n){return n>0&&n<=FC(t,e)}validateAndGetDate(t,e,n){const r=+t,i=+e-1,s=+n;if(!this.isValidMonth(i)||!this.isValidDate(r,i,s))return null;const o=function(t){if(t>9999||t>100&&t<999||t<10)return-1;if(t>999)return t;const e=(new Date).getFullYear();let n=t+100*Math.floor(e/100);return n>e+20&&(n-=100),n}(r);return-1!==o?new Date(o,i,s):null}getDateValueFromDateString(t){if(!t)return null;const e=t.match(AC);if(!e||3!==e.length)return null;const[n,r,i]=e;return this.localeDisplayFormat===RC?this.validateAndGetDate(i,r,n):this.localeDisplayFormat===PC?this.validateAndGetDate(i,n,r):this.validateAndGetDate(n,r,i)}};return t.\u0275fac=function(e){return new(e||t)(Wt(zC))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),GC=(()=>{let t=class{constructor(t,e,n,r,i){this._localeHelperService=t,this._dateNavigationService=e,this._datepickerFocusService=n,this._dateIOService=r,this._elRef=i,this._subs=[],this.generateCalendarView(),this.initializeSubscriptions()}get localeDays(){return this._localeHelperService.localeDays}get calendar(){return this._dateNavigationService.displayedCalendar}get selectedDay(){return this._dateNavigationService.selectedDay}get focusedDay(){return this._dateNavigationService.focusedDay}get today(){return this._dateNavigationService.today}initializeSubscriptions(){this._subs.push(this._dateNavigationService.displayedCalendarChange.subscribe(()=>{this.generateCalendarView()})),this._subs.push(this._dateNavigationService.focusedDayChange.subscribe(t=>{this.calendarViewModel.updateFocusableDay(t)})),this._subs.push(this._dateNavigationService.focusOnCalendarChange.subscribe(()=>{this._datepickerFocusService.focusCell(this._elRef)}))}generateCalendarView(){this.calendarViewModel=new VC(this.calendar,this.selectedDay,this.focusedDay,this.today,this._localeHelperService.firstDayOfWeek,this._dateIOService.disabledDates)}onKeyDown(t){if(t&&this.focusedDay)switch(t.keyCode){case 38:t.preventDefault(),this._dateNavigationService.incrementFocusDay(-7);break;case 40:t.preventDefault(),this._dateNavigationService.incrementFocusDay(7);break;case 37:t.preventDefault(),this._dateNavigationService.incrementFocusDay(-1);break;case 39:t.preventDefault(),this._dateNavigationService.incrementFocusDay(1)}}ngAfterViewInit(){this._datepickerFocusService.focusCell(this._elRef)}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(zC),Qs(UC),Qs(BC),Qs(HC),Qs(pa))},t.\u0275cmp=he({type:t,selectors:[["clr-calendar"]],hostBindings:function(t,e){1&t&&co("keydown",(function(t){return e.onKeyDown(t)}))},decls:4,vars:2,consts:[[1,"calendar-table"],[1,"calendar-row","weekdays"],["class","calendar-cell weekday","role","heading",4,"ngFor","ngForOf"],["class","calendar-row",4,"ngFor","ngForOf"],["role","heading",1,"calendar-cell","weekday"],[1,"calendar-row"],["class","calendar-cell",4,"ngFor","ngForOf"],[1,"calendar-cell"],[3,"clrDayView"]],template:function(t,e){1&t&&(Js(0,"table",0),Js(1,"tr",1),qs(2,Gv,2,2,"td",2),to(),qs(3,qv,2,1,"tr",3),to()),2&t&&(Vr(2),Zs("ngForOf",e.localeDays),Vr(1),Zs("ngForOf",e.calendarViewModel.calendarView))},directives:function(){return[Oh,JC]},encapsulation:2}),t})(),$C=(()=>{let t=class{constructor(){this._focused=new Fl(!1)}get focusChange(){return this._focused.asObservable()}set focused(t){this._focused.next(t)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),qC=(()=>{let t=class{constructor(){this._touchedChange=new I,this._dirtyChange=new I}get touchedChange(){return this._touchedChange.asObservable()}get dirtyChange(){return this._dirtyChange.asObservable()}markAsTouched(){this._touchedChange.next()}markAsDirty(){this._dirtyChange.next()}setDisabled(t){this.disabled=t}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),WC=(()=>{let t=class{constructor(t){this._document=t,this._isUserAgentMobile=!1,this._document&&(this._isUserAgentMobile=OC.test(t.defaultView.navigator.userAgent),this._innerWidth=t.defaultView.innerWidth)}get isEnabled(){return!(this._document&&this._innerWidth<768&&this._isUserAgentMobile)}};return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),QC=(()=>{let t=class{constructor(){this._currentView="DAYVIEW",this.position=NS["bottom-left"]}get isDayView(){return"DAYVIEW"===this._currentView}get isYearView(){return"YEARVIEW"===this._currentView}get isMonthView(){return"MONTHVIEW"===this._currentView}changeToMonthView(){this._currentView="MONTHVIEW"}changeToYearView(){this._currentView="YEARVIEW"}changeToDayView(){this._currentView="DAYVIEW"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),YC=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a,c,l,u){this.toggleService=t,this.dateNavigationService=e,this.datepickerEnabledService=n,this.dateFormControlService=r,this.commonStrings=i,this.ifErrorService=s,this.focusService=o,this.viewManagerService=a,this.controlClassService=c,this.layoutService=l,this.ngControlService=u,this._dynamic=!1,this.invalid=!1,this.focus=!1,this.subscriptions=[],this.subscriptions.push(this.focusService.focusChange.subscribe(t=>{this.focus=t}),this.ngControlService.controlChanges.subscribe(t=>{this.control=t}),this.toggleService.openChange.subscribe(t=>{this.dateFormControlService.markAsTouched()}))}set clrPosition(t){t&&NS[t]&&(this.viewManagerService.position=NS[t])}get popoverPosition(){return this.viewManagerService.position}get open(){return this.toggleService.open}set actionButton(t){this.toggleButton=t}ngOnInit(){this.subscriptions.push(this.ifErrorService.statusChanges.subscribe(t=>{this.invalid=t}))}ngAfterViewInit(){this.subscriptions.push(this.toggleService.openChange.subscribe(t=>{t?this.initializeCalendar():this.toggleButton.nativeElement.focus()}))}controlClass(){return this.controlClassService.controlClass(this.invalid,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}get isEnabled(){return this.datepickerEnabledService.isEnabled}get isInputDateDisabled(){return this.control&&this.control.disabled||this.dateFormControlService&&this.dateFormControlService.disabled}initializeCalendar(){this.dateNavigationService.initializeCalendar()}ngOnDestroy(){this.subscriptions.map(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(iS),Qs(UC),Qs(WC),Qs(qC),Qs(kS),Qs(JS),Qs($C),Qs(QC),Qs(YS),Qs(QS,8),Qs(XS))},t.\u0275cmp=he({type:t,selectors:[["clr-date-container"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,tC,!0),2&t&&Ec(r=Dc())&&(e.label=r.first)},viewQuery:function(t,e){var n;1&t&&Tc(Wv,!0),2&t&&Ec(n=Dc())&&(e.actionButton=n.first)},hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control-disabled",e.isInputDateDisabled)("clr-form-control",!0)("clr-row",e.addGrid())},inputs:{clrPosition:"clrPosition"},features:[la([GS,iS,sS,gS,zC,JS,YS,$C,XS,HC,UC,WC,qC,QC])],ngContentSelectors:tb,decls:11,vars:11,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],["clrPopoverAnchor","",1,"clr-input-wrapper"],[1,"clr-input-group"],["type","button","clrPopoverOpenCloseButton","","class","clr-input-group-icon-action",3,"disabled",4,"ngIf"],["clrFocusTrap","",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["shape","exclamation-circle",1,"clr-validate-icon"],["type","button","clrPopoverOpenCloseButton","",1,"clr-input-group-icon-action",3,"disabled"],["actionButton",""],["shape","calendar"],["clrFocusTrap",""]],template:function(t,e){1&t&&(mo(Jv),yo(0),qs(1,Qv,1,0,"label",0),Js(2,"div",1),Js(3,"div",2),Js(4,"div",3),yo(5,1),qs(6,Yv,3,3,"button",4),qs(7,Kv,1,0,"clr-datepicker-view-manager",5),to(),eo(8,"clr-icon",6),to(),qs(9,Zv,1,0,void 0,0),qs(10,Xv,1,0,void 0,0),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),Zs("ngClass",e.controlClass()),Vr(2),ko("clr-focus",e.focus),Vr(2),Zs("ngIf",e.isEnabled),Vr(1),Zs("clrPopoverContent",e.open)("clrPopoverContentAt",e.popoverPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0),Vr(2),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:function(){return[Rh,kh,bS,mS,nS,tC,yS,XC,EC]},encapsulation:2}),t})();function KC(t){return null!==t&&("string"==typeof t?t.length>=0:"boolean"==typeof t&&t)}let ZC=(()=>{let t=class extends oC{constructor(t,e,n,r,i,s,o,a,c,l,u,h,d){super(t,YC,e,i,r,n),this.el=n,this.renderer=r,this.control=i,this.container=s,this.dateIOService=o,this.dateNavigationService=a,this.datepickerEnabledService=c,this.dateFormControlService=l,this.platformId=u,this.focusService=h,this.datepickerFocusService=d,this.dateChange=new pc(!1),this.index=1}set date(t){this.previousDateChange!==t&&this.updateDate(this.getValidDateValueFromDate(t)),this.initialClrDateInputValue||(this.initialClrDateInputValue=t)}set min(t){this.dateIOService.setMinDate(t)}set max(t){this.dateIOService.setMaxDate(t)}ngOnInit(){super.ngOnInit(),this.populateServicesFromContainerComponent(),this.subscriptions.push(this.listenForUserSelectedDayChanges(),this.listenForControlValueChanges(),this.listenForTouchChanges(),this.listenForDirtyChanges(),this.listenForInputRefocus())}ngAfterViewInit(){this.processInitialInputs()}setFocusStates(){this.setFocus(!0)}triggerValidation(){super.triggerValidation(),this.setFocus(!1)}get placeholderText(){return this.placeholder?this.placeholder:this.dateIOService.placeholderText}get inputType(){return Wh(this.platformId)&&this.usingNativeDatepicker()?"date":"text"}onValueChange(t){const e=this.dateIOService.getDateValueFromDateString(t.value);if(this.usingClarityDatepicker()&&e)this.updateDate(e,!0);else if(this.usingNativeDatepicker()){const[e,n,r]=t.value.split("-");this.updateDate(new Date(+e,+n-1,+r),!0)}else this.emitDateOutput(null)}set disabled(t){this.dateFormControlService&&this.dateFormControlService.setDisabled(KC(t))}get disabled(){return this.dateFormControlService?this.dateFormControlService.disabled:null}usingClarityDatepicker(){return this.datepickerEnabledService.isEnabled}usingNativeDatepicker(){return!this.datepickerEnabledService.isEnabled}setFocus(t){this.focusService&&(this.focusService.focused=t)}populateServicesFromContainerComponent(){this.container||(this.dateIOService=this.getProviderFromContainer(HC),this.dateNavigationService=this.getProviderFromContainer(UC),this.datepickerEnabledService=this.getProviderFromContainer(WC),this.dateFormControlService=this.getProviderFromContainer(qC))}processInitialInputs(){this.datepickerHasFormControl()?this.updateDate(this.dateIOService.getDateValueFromDateString(this.control.value)):this.updateDate(this.initialClrDateInputValue)}updateDate(t,e=!1){const n=this.getValidDateValueFromDate(t);e?this.emitDateOutput(n):this.previousDateChange=n,this.dateNavigationService&&(this.dateNavigationService.selectedDay=n?new MC(n.getFullYear(),n.getMonth(),n.getDate()):null),this.updateInput(n)}updateInput(t){if(t){const e=this.dateIOService.toLocaleDisplayFormatString(t);this.usingNativeDatepicker()?(t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),this.renderer.setProperty(this.el.nativeElement,"valueAsDate",t)):this.datepickerHasFormControl()&&e!==this.control.value?this.control.control.setValue(e):this.renderer.setProperty(this.el.nativeElement,"value",e)}else this.renderer.setProperty(this.el.nativeElement,"value","")}getValidDateValueFromDate(t){if(this.dateIOService){const e=this.dateIOService.toLocaleDisplayFormatString(t);return this.dateIOService.getDateValueFromDateString(e)}return null}emitDateOutput(t){var e,n;n=this.previousDateChange,(e=t)instanceof Date&&n instanceof Date&&e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()?!t&&this.previousDateChange&&(this.dateChange.emit(null),this.previousDateChange=null):(this.dateChange.emit(t),this.previousDateChange=t)}datepickerHasFormControl(){return!!this.control}listenForControlValueChanges(){return Bl(this.datepickerHasFormControl()).pipe($l(t=>t),Bd(()=>this.control.valueChanges),$l(()=>!this.datepickerFocusService.elementIsFocused(this.el.nativeElement))).subscribe(t=>this.updateDate(this.dateIOService.getDateValueFromDateString(t)))}listenForUserSelectedDayChanges(){return this.dateNavigationService.selectedDayChange.subscribe(t=>this.updateDate(t.toDate(),!0))}listenForTouchChanges(){return this.dateFormControlService.touchedChange.pipe($l(()=>this.datepickerHasFormControl())).subscribe(()=>this.control.control.markAsTouched())}listenForDirtyChanges(){return this.dateFormControlService.dirtyChange.pipe($l(()=>this.datepickerHasFormControl())).subscribe(()=>this.control.control.markAsDirty())}listenForInputRefocus(){return this.dateNavigationService.selectedDayChange.pipe($l(t=>!!t)).subscribe(t=>this.datepickerFocusService.focusInput(this.el.nativeElement))}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(pa),Qs(ya),Qs(Hm,10),Qs(YC,8),Qs(HC,8),Qs(UC,8),Qs(WC,8),Qs(qC,8),Qs(zc),Qs($C,8),Qs(BC))},t.\u0275dir=ye({type:t,selectors:[["","clrDate",""]],hostVars:5,hostBindings:function(t,e){1&t&&co("focus",(function(){return e.setFocusStates()}))("blur",(function(){return e.triggerValidation()}))("change",(function(t){return e.onValueChange(t.target)})),2&t&&(Go("disabled",e.disabled),Gs("placeholder",e.placeholderText)("type",e.inputType),ko("clr-input",!0))},inputs:{date:["clrDate","date"],min:"min",max:"max",disabled:"disabled",placeholder:"placeholder"},outputs:{dateChange:"clrDateChange"},features:[la([BC]),Wo]}),t})(),XC=(()=>{let t=class{constructor(t){this.viewManagerService=t}get isMonthView(){return this.viewManagerService.isMonthView}get isYearView(){return this.viewManagerService.isYearView}get isDayView(){return this.viewManagerService.isDayView}};return t.\u0275fac=function(e){return new(e||t)(Qs(QC))},t.\u0275cmp=he({type:t,selectors:[["clr-datepicker-view-manager"]],hostVars:3,hostBindings:function(t,e){2&t&&(Gs("aria-modal",!0),ko("datepicker",!0))},features:[la([BC])],decls:3,vars:3,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(qs(0,eb,1,0,"clr-monthpicker",0),qs(1,nb,1,0,"clr-yearpicker",0),qs(2,rb,1,0,"clr-daypicker",0)),2&t&&(Zs("ngIf",e.isMonthView),Vr(1),Zs("ngIf",e.isYearView),Vr(1),Zs("ngIf",e.isDayView))},directives:function(){return[Rh,eE,rE,tE]},encapsulation:2}),t})(),JC=(()=>{let t=class{constructor(t,e,n){this._dateNavigationService=t,this._toggleService=e,this.dateFormControlService=n}set dayView(t){this._dayView=t,this.dayString=this._dayView.dayModel.toDateString()}get dayView(){return this._dayView}onDayViewFocus(){this._dateNavigationService.focusedDay=this.dayView.dayModel}selectDay(){this._dateNavigationService.notifySelectedDayChanged(this.dayView.dayModel),this.dateFormControlService.markAsDirty(),this._toggleService.open=!1}};return t.\u0275fac=function(e){return new(e||t)(Qs(UC),Qs(iS),Qs(qC))},t.\u0275cmp=he({type:t,selectors:[["clr-day"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("day",!0)},inputs:{dayView:["clrDayView","dayView"]},decls:2,vars:11,consts:[["type","button",1,"day-btn",3,"click","focus"]],template:function(t,e){1&t&&(Js(0,"button",0),co("click",(function(){return e.selectDay()}))("focus",(function(){return e.onDayViewFocus()})),Uo(1),to()),2&t&&(ko("is-today",e.dayView.isTodaysDate)("is-excluded",e.dayView.isExcluded)("is-disabled",e.dayView.isDisabled)("is-selected",e.dayView.isSelected),Gs("tabindex",e.dayView.tabIndex)("aria-label",e.dayString),Vr(1),zo(" ",e.dayView.dayModel.date," "))},encapsulation:2}),t})(),tE=(()=>{let t=class{constructor(t,e,n,r,i){this._viewManagerService=t,this._dateNavigationService=e,this._localeHelperService=n,this.commonStrings=r,this.ariaLiveService=i}ngAfterViewInit(){this.ariaLiveService.announce(`${this.ariaLiveMonth} ${this.updateAriaLiveYear}`)}get monthAttrString(){return this.commonStrings.parse(this.commonStrings.keys.datepickerSelectMonthText,{CALENDAR_MONTH:this.calendarMonth})}get yearAttrString(){return this.commonStrings.parse(this.commonStrings.keys.datepickerSelectYearText,{CALENDAR_YEAR:this.calendarYear.toString()})}get ariaLiveMonth(){return this.commonStrings.parse(this.commonStrings.keys.daypickerSRCurrentMonthPhrase,{CURRENT_MONTH:this.calendarMonth})}get updateAriaLiveYear(){return this.commonStrings.parse(this.commonStrings.keys.daypickerSRCurrentYearPhrase,{CURRENT_YEAR:this.calendarYear.toString()})}changeToMonthView(){this._viewManagerService.changeToMonthView()}changeToYearView(){this._viewManagerService.changeToYearView()}get calendarMonth(){return this._localeHelperService.localeMonthsAbbreviated[this._dateNavigationService.displayedCalendar.month]}get calendarYear(){return this._dateNavigationService.displayedCalendar.year}nextMonth(){this._dateNavigationService.moveToNextMonth()}previousMonth(){this._dateNavigationService.moveToPreviousMonth()}currentMonth(){this._dateNavigationService.moveToCurrentMonth()}};return t.\u0275fac=function(e){return new(e||t)(Qs(QC),Qs(UC),Qs(zC),Qs(kS),Qs(qS))},t.\u0275cmp=he({type:t,selectors:[["clr-daypicker"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("daypicker",!0)},features:[la([qS])],decls:18,vars:14,consts:[[1,"clr-sr-only"],[1,"calendar-header"],[1,"calendar-pickers"],["type","button",1,"calendar-btn","monthpicker-trigger",3,"click"],["type","button",1,"calendar-btn","yearpicker-trigger",3,"click"],[1,"calendar-switchers"],["type","button",1,"calendar-btn","switcher",3,"click"],["shape","angle","dir","left"],["shape","event"],["shape","angle","dir","right"]],template:function(t,e){1&t&&(Js(0,"div",0),Uo(1),to(),Js(2,"div",1),Js(3,"div",2),Js(4,"button",3),co("click",(function(){return e.changeToMonthView()})),Uo(5),to(),Js(6,"button",4),co("click",(function(){return e.changeToYearView()})),Uo(7),to(),to(),Js(8,"div",5),Js(9,"button",6),co("click",(function(){return e.previousMonth()})),eo(10,"clr-icon",7),to(),Js(11,"button",6),co("click",(function(){return e.currentMonth()})),eo(12,"clr-icon",8),to(),Js(13,"button",6),co("click",(function(){return e.nextMonth()})),eo(14,"clr-icon",9),to(),to(),to(),eo(15,"clr-calendar"),Js(16,"div",0),Uo(17),to()),2&t&&(Vr(1),Bo(e.commonStrings.keys.modalContentStart),Vr(3),Gs("aria-label",e.monthAttrString)("title",e.monthAttrString),Vr(1),zo(" ",e.calendarMonth," "),Vr(1),Gs("aria-label",e.yearAttrString)("title",e.yearAttrString),Vr(1),zo(" ",e.calendarYear," "),Vr(2),Gs("aria-label",e.commonStrings.keys.datepickerPreviousMonth),Vr(1),Gs("title",e.commonStrings.keys.datepickerPreviousMonth),Vr(1),Gs("aria-label",e.commonStrings.keys.datepickerCurrentMonth),Vr(1),Gs("title",e.commonStrings.keys.datepickerCurrentMonth),Vr(1),Gs("aria-label",e.commonStrings.keys.datepickerNextMonth),Vr(1),Gs("title",e.commonStrings.keys.datepickerNextMonth),Vr(3),Bo(e.commonStrings.keys.modalContentEnd))},directives:[nS,GC],encapsulation:2}),t})(),eE=(()=>{let t=class{constructor(t,e,n,r,i){this._viewManagerService=t,this._localeHelperService=e,this._dateNavigationService=n,this._datepickerFocusService=r,this._elRef=i,this._focusedMonthIndex=this.calendarMonthIndex}get monthNames(){return this._localeHelperService.localeMonthsWide}get calendarMonthIndex(){return this._dateNavigationService.displayedCalendar.month}changeMonth(t){this._dateNavigationService.changeMonth(t),this._viewManagerService.changeToDayView()}getTabIndex(t){return t===this._focusedMonthIndex?0:-1}onKeyDown(t){if(t){const e=t.keyCode;38===e&&this._focusedMonthIndex>0?(t.preventDefault(),this._focusedMonthIndex--,this._datepickerFocusService.focusCell(this._elRef)):40===e&&this._focusedMonthIndex<11?(t.preventDefault(),this._focusedMonthIndex++,this._datepickerFocusService.focusCell(this._elRef)):39===e&&this._focusedMonthIndex<6?(t.preventDefault(),this._focusedMonthIndex=this._focusedMonthIndex+6,this._datepickerFocusService.focusCell(this._elRef)):37===e&&this._focusedMonthIndex>5&&(t.preventDefault(),this._focusedMonthIndex=this._focusedMonthIndex-6,this._datepickerFocusService.focusCell(this._elRef))}}ngAfterViewInit(){this._datepickerFocusService.focusCell(this._elRef)}};return t.\u0275fac=function(e){return new(e||t)(Qs(QC),Qs(zC),Qs(UC),Qs(BC),Qs(pa))},t.\u0275cmp=he({type:t,selectors:[["clr-monthpicker"]],hostVars:2,hostBindings:function(t,e){1&t&&co("keydown",(function(t){return e.onKeyDown(t)})),2&t&&ko("monthpicker",!0)},decls:1,vars:1,consts:[["type","button","class","calendar-btn month",3,"is-selected","click",4,"ngFor","ngForOf"],["type","button",1,"calendar-btn","month",3,"click"]],template:function(t,e){1&t&&qs(0,ib,2,4,"button",0),2&t&&Zs("ngForOf",e.monthNames)},directives:[Oh],encapsulation:2}),t})();class nE{constructor(t){this.year=t,this.yearRange=[],this.generateYearRange()}get middleYear(){return this.yearRange[Math.floor(this.yearRange.length/2)]}generateYearRange(){const t=this.year-this.year%10;this.yearRange=this.generateRange(t,t+10)}generateRange(t,e){return Array.from({length:e-t},(e,n)=>n+t)}nextDecade(){return new nE(this.year+10)}previousDecade(){return new nE(this.year-10)}currentDecade(){return new nE((new Date).getFullYear())}inRange(t){return this.yearRange.indexOf(t)>-1}}let rE=(()=>{let t=class{constructor(t,e,n,r,i,s){this._dateNavigationService=t,this._viewManagerService=e,this._datepickerFocusService=n,this._elRef=r,this.commonStrings=i,this.ariaLiveService=s,this.yearRangeModel=new nE(this.calendarYear),this._focusedYear=this.calendarYear,this.updateRange(this.yearRangeModel)}get ariaLiveDecadeText(){return this.commonStrings.parse(this.commonStrings.keys.daypickerSRCurrentDecadePhrase,{DECADE_RANGE:this.decadeRange})}get calendarYear(){return this._dateNavigationService.displayedCalendar.year}incrementFocusYearBy(t){this._focusedYear=this._focusedYear+t,this.yearRangeModel.inRange(this._focusedYear)||(this.yearRangeModel=t>0?this.yearRangeModel.nextDecade():this.yearRangeModel.previousDecade()),this._datepickerFocusService.focusCell(this._elRef)}changeYear(t){this._dateNavigationService.changeYear(t),this._viewManagerService.changeToDayView()}previousDecade(){this.yearRangeModel=this.yearRangeModel.previousDecade(),this.updateRange(this.yearRangeModel)}currentDecade(){this.yearRangeModel.inRange(this._dateNavigationService.today.year)||(this.yearRangeModel=this.yearRangeModel.currentDecade()),this._datepickerFocusService.focusCell(this._elRef),this.updateRange(this.yearRangeModel)}nextDecade(){this.yearRangeModel=this.yearRangeModel.nextDecade(),this.updateRange(this.yearRangeModel)}getTabIndex(t){return this.yearRangeModel.inRange(this._focusedYear)||(this._focusedYear=this.yearRangeModel.inRange(this.calendarYear)?this.calendarYear:this.yearRangeModel.middleYear),this._focusedYear===t?0:-1}onKeyDown(t){if(t){const e=t.keyCode;38===e?(t.preventDefault(),this.incrementFocusYearBy(-1)):40===e?(t.preventDefault(),this.incrementFocusYearBy(1)):39===e?(t.preventDefault(),this.incrementFocusYearBy(5)):37===e&&(t.preventDefault(),this.incrementFocusYearBy(-5))}}updateRange(t){this.decadeRange=`${t.yearRange[0]} to ${t.yearRange[t.yearRange.length-1]}`,this.ariaLiveService.announce(this.ariaLiveDecadeText)}ngAfterViewInit(){this._datepickerFocusService.focusCell(this._elRef),this.ariaLiveService.announce(this.ariaLiveDecadeText)}};return t.\u0275fac=function(e){return new(e||t)(Qs(UC),Qs(QC),Qs(BC),Qs(pa),Qs(kS),Qs(qS))},t.\u0275cmp=he({type:t,selectors:[["clr-yearpicker"]],hostVars:2,hostBindings:function(t,e){1&t&&co("keydown",(function(t){return e.onKeyDown(t)})),2&t&&ko("yearpicker",!0)},features:[la([qS])],decls:9,vars:7,consts:[[1,"year-switchers"],["type","button",1,"calendar-btn","switcher",3,"click"],["shape","angle","dir","left"],["shape","event"],["shape","angle","dir","right"],[1,"years"],["type","button","class","calendar-btn year",3,"is-selected","click",4,"ngFor","ngForOf"],["type","button",1,"calendar-btn","year",3,"click"]],template:function(t,e){1&t&&(Js(0,"div",0),Js(1,"button",1),co("click",(function(){return e.previousDecade()})),eo(2,"clr-icon",2),to(),Js(3,"button",1),co("click",(function(){return e.currentDecade()})),eo(4,"clr-icon",3),to(),Js(5,"button",1),co("click",(function(){return e.nextDecade()})),eo(6,"clr-icon",4),to(),to(),Js(7,"div",5),qs(8,sb,2,4,"button",6),to()),2&t&&(Vr(1),Gs("aria-label",e.commonStrings.keys.datepickerPreviousDecade),Vr(1),Gs("title",e.commonStrings.keys.datepickerPreviousDecade),Vr(1),Gs("aria-label",e.commonStrings.keys.datepickerCurrentDecade),Vr(1),Gs("title",e.commonStrings.keys.datepickerCurrentDecade),Vr(1),Gs("aria-label",e.commonStrings.keys.datepickerNextDecade),Vr(1),Gs("title",e.commonStrings.keys.datepickerNextDecade),Vr(2),Zs("ngForOf",e.yearRangeModel.yearRange))},directives:[nS,Oh],encapsulation:2}),t})(),iE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,zS,SC,wS,rS,IC,aC]]}),t})(),sE=(()=>{let t=class extends iC{};return t.\u0275fac=function(e){return Ck(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control",!0)("clr-form-control-disabled",null==e.control?null:e.control.disabled)("clr-row",e.addGrid())},features:[la([JS,XS,GS,YS]),Wo],ngContentSelectors:hb,decls:8,vars:5,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(t,e){1&t&&(mo(ub),yo(0),qs(1,ob,1,0,"label",0),Js(2,"div",1),Js(3,"div",2),yo(4,1),qs(5,ab,1,0,"clr-icon",3),to(),qs(6,cb,1,0,void 0,0),qs(7,lb,1,0,void 0,0),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),Zs("ngClass",e.controlClass()),Vr(3),Zs("ngIf",e.invalid),Vr(1),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:[Rh,kh,tC,nS],encapsulation:2}),t})(),oE=(()=>{let t=class extends oC{constructor(t,e,n,r,i){super(t,sE,e,n,r,i),this.index=1}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-input",!0)},features:[Wo]}),t})(),aE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,yv,rS,aC],aC]}),t})();const cE=new Mt(void 0),lE={provide:cE,useFactory:function(){return new Fl(!1)}};let uE=(()=>{let t=class extends iC{constructor(t,e,n,r,i,s,o){super(t,e,n,r),this.focusService=i,this.toggleService=s,this.commonStrings=o,this.show=!1,this.focus=!1,this._toggle=!0,this.subscriptions.push(this.focusService.focusChange.subscribe(t=>{this.focus=t}))}set clrToggle(t){this._toggle=t,t||(this.show=!1)}get clrToggle(){return this._toggle}toggle(){this.show=!this.show,this.toggleService.next(this.show)}};return t.\u0275fac=function(e){return new(e||t)(Qs(JS),Qs(QS,8),Qs(YS),Qs(XS),Qs($C),Qs(cE),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-password-container"]],hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control",!0)("clr-form-control-disabled",null==e.control?null:e.control.disabled)("clr-row",e.addGrid())},inputs:{clrToggle:"clrToggle"},features:[la([JS,XS,GS,YS,$C,lE]),Wo],ngContentSelectors:vb,decls:10,vars:8,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],[1,"clr-input-group"],["class","clr-input-group-icon-action","type","button",3,"disabled","click",4,"ngIf"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["type","button",1,"clr-input-group-icon-action",3,"disabled","click"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(t,e){1&t&&(mo(yb),yo(0),qs(1,db,1,0,"label",0),Js(2,"div",1),Js(3,"div",2),Js(4,"div",3),yo(5,1),qs(6,pb,2,3,"button",4),to(),qs(7,fb,1,0,"clr-icon",5),to(),qs(8,gb,1,0,void 0,0),qs(9,mb,1,0,void 0,0),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),Zs("ngClass",e.controlClass()),Vr(2),ko("clr-focus",e.focus),Vr(2),Zs("ngIf",e.clrToggle),Vr(1),Zs("ngIf",e.invalid),Vr(1),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:[Rh,kh,tC,nS],encapsulation:2}),t})(),hE=(()=>{let t=class extends oC{constructor(t,e,n,r,i,s,o){if(super(t,uE,e,n,r,i),this.focusService=s,this.toggleService=o,this.index=1,!this.focusService)throw new Error("clrPassword requires being wrapped in <clr-password-container>");this.subscriptions.push(this.toggleService.subscribe(t=>{r.setProperty(i.nativeElement,"type",t?"text":"password")}))}triggerFocus(){this.focusService&&(this.focusService.focused=!0)}triggerValidation(){super.triggerValidation(),this.focusService&&(this.focusService.focused=!1)}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa),Qs($C,8),Qs(cE,8))},t.\u0275dir=ye({type:t,selectors:[["","clrPassword",""]],hostVars:2,hostBindings:function(t,e){1&t&&co("focus",(function(){return e.triggerFocus()}))("blur",(function(){return e.triggerValidation()})),2&t&&ko("clr-input",!0)},features:[Wo]}),t})(),dE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,yv,rS,aC],aC]}),t})(),pE=(()=>{let t=class{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-radio-wrapper"]],contentQueries:function(t,e,n){var r;1&t&&Ac(n,tC,!0),2&t&&Ec(r=Dc())&&(e.label=r.first)},hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-radio-wrapper",!0)},features:[la([GS])],ngContentSelectors:_b,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(mo(wb),yo(0),yo(1,1),qs(2,bb,1,0,"label",0)),2&t&&(Vr(2),Zs("ngIf",!e.label))},directives:[Rh,tC],encapsulation:2}),t})(),fE=(()=>{let t=class extends oC{constructor(t,e,n,r,i){super(t,pE,e,n,r,i)}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["","clrRadio",""]],features:[Wo]}),t})(),gE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,aC,zS,rS],aC]}),t})(),mE=(()=>{let t=class extends iC{constructor(){super(...arguments),this.multi=!1}ngOnInit(){this.subscriptions.push(this.ngControlService.controlChanges.subscribe(t=>{t&&(this.multi=t.valueAccessor instanceof wy,this.control=t)}))}wrapperClass(){return this.multi?"clr-multiselect-wrapper":"clr-select-wrapper"}};return t.\u0275fac=function(e){return Ek(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-select-container"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,wy,!0),2&t&&Ec(r=Dc())&&(e.multiple=r.first)},hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control",!0)("clr-form-control-disabled",null==e.control?null:e.control.disabled)("clr-row",e.addGrid())},features:[la([JS,XS,GS,YS]),Wo],ngContentSelectors:xb,decls:8,vars:6,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[3,"ngClass"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(t,e){1&t&&(mo(Tb),yo(0),qs(1,Sb,1,0,"label",0),Js(2,"div",1),Js(3,"div",2),yo(4,1),qs(5,Cb,1,0,"clr-icon",3),to(),qs(6,Eb,1,0,void 0,0),qs(7,Ib,1,0,void 0,0),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),Zs("ngClass",e.controlClass()),Vr(1),Zs("ngClass",e.wrapperClass()),Vr(2),Zs("ngIf",e.invalid),Vr(1),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:[Rh,kh,tC,nS],encapsulation:2}),t})(),yE=(()=>{let t=class extends oC{constructor(t,e,n,r,i){super(t,mE,e,n,r,i),this.index=1}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["","clrSelect",""]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-select",!0)},features:[Wo]}),t})(),vE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,yv,rS,aC],aC]}),t})(),bE=(()=>{let t=class extends iC{};return t.\u0275fac=function(e){return Ik(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-textarea-container"]],hostVars:6,hostBindings:function(t,e){2&t&&ko("clr-form-control",!0)("clr-form-control-disabled",null==e.control?null:e.control.disabled)("clr-row",e.addGrid())},features:[la([JS,XS,GS,YS]),Wo],ngContentSelectors:Pb,decls:8,vars:5,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-textarea-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(t,e){1&t&&(mo(Rb),yo(0),qs(1,kb,1,0,"label",0),Js(2,"div",1),Js(3,"div",2),yo(4,1),qs(5,Ab,1,0,"clr-icon",3),to(),qs(6,Ob,1,0,void 0,0),qs(7,Db,1,0,void 0,0),to()),2&t&&(Vr(1),Zs("ngIf",!e.label&&e.addGrid()),Vr(1),Zs("ngClass",e.controlClass()),Vr(3),Zs("ngIf",e.invalid),Vr(1),Zs("ngIf",!e.invalid),Vr(1),Zs("ngIf",e.invalid))},directives:[Rh,kh,tC,nS],encapsulation:2}),t})(),wE=(()=>{let t=class extends oC{constructor(t,e,n,r,i){super(t,bE,e,n,r,i),this.index=1}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja),Qs(As),Qs(Hm,10),Qs(ya),Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["","clrTextarea",""]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-textarea",!0)},features:[Wo]}),t})(),_E=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,yv,rS,aC],aC]}),t})(),SE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,aC,zS,rS],aC]}),t})(),CE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,aE,rS]]}),t})(),EE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh],aC,pC,iE,aE,dE,gE,vE,_E,SE,CE]}),t})(),IE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),TE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),xE=(()=>{let t=class{userDefinedWidth(t){t.classList.add("datagrid-cell-width-zero");const e=this.clientRect(t).width;return t.classList.remove("datagrid-cell-width-zero"),e}scrollBarWidth(t){return t.offsetWidth-t.clientWidth}scrollWidth(t){return t.scrollWidth||0}computedHeight(t){return parseInt(getComputedStyle(t).getPropertyValue("height"),10)}clientRect(t){const e=t.getBoundingClientRect();return{top:parseInt(e.top,10),bottom:parseInt(e.bottom,10),left:parseInt(e.left,10),right:parseInt(e.right,10),width:parseInt(e.width,10),height:parseInt(e.height,10)}}minWidth(t){return parseInt(getComputedStyle(t).getPropertyValue("min-width"),10)}focus(t){t.focus()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class kE{constructor(t){this.dragPosition=t.dragPosition,this.group=t.group,this.dragDataTransfer=t.dragDataTransfer,this.dropPointPosition=t.dropPointPosition}}var AE=function(t){return t[t.DRAG_START=0]="DRAG_START",t[t.DRAG_MOVE=1]="DRAG_MOVE",t[t.DRAG_END=2]="DRAG_END",t[t.DRAG_ENTER=3]="DRAG_ENTER",t[t.DRAG_LEAVE=4]="DRAG_LEAVE",t[t.DROP=5]="DROP",t}({});let OE=(()=>{let t=class{constructor(){this.dragStart=new I,this.dragMove=new I,this.dragEnd=new I,this.drop=new I}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dropped(){return this.drop.asObservable()}broadcast(t){switch(t.type){case AE.DRAG_START:this.dragStart.next(t);break;case AE.DRAG_MOVE:this.dragMove.next(t);break;case AE.DRAG_END:this.dragEnd.next(t);break;case AE.DROP:this.drop.next(t)}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),DE=(()=>{let t=class{constructor(t,e,n){this.ngZone=t,this.renderer=e,this.eventBus=n,this.dragStart=new I,this.dragMove=new I,this.dragEnd=new I,this.hasDragStarted=!1}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}attachDragListeners(t){this.draggableEl=t,this.listeners=[this.customDragEvent(this.draggableEl,"mousedown","mousemove","mouseup"),this.customDragEvent(this.draggableEl,"touchstart","touchmove","touchend")]}detachDragListeners(){this.listeners&&this.listeners.map(t=>t()),this.nestedListeners&&this.nestedListeners.map(t=>t())}getNativeEventObject(t){return t.hasOwnProperty("changedTouches")?t.changedTouches[0]:t}customDragEvent(t,e,n,r){return this.renderer.listen(t,e,t=>{this.initialPosition={pageX:this.getNativeEventObject(t).pageX,pageY:this.getNativeEventObject(t).pageY},this.nestedListeners=[],this.nestedListeners.push(this.renderer.listen("document","selectstart",t=>{t.preventDefault(),t.stopImmediatePropagation()})),this.nestedListeners.push(this.ngZone.runOutsideAngular(()=>this.renderer.listen("document",n,t=>{t.stopImmediatePropagation(),this.hasDragStarted?this.broadcast(t,AE.DRAG_MOVE):(this.hasDragStarted=!0,this.broadcast(t,AE.DRAG_START))}))),this.nestedListeners.push(this.renderer.listen("document",r,t=>{this.hasDragStarted&&(this.hasDragStarted=!1,this.broadcast(t,AE.DRAG_END)),this.nestedListeners&&this.nestedListeners.map(t=>t())}))})}broadcast(t,e){const n=this.generateDragEvent(t,e);switch(n.type){case AE.DRAG_START:this.dragStart.next(n);break;case AE.DRAG_MOVE:this.dragMove.next(n);break;case AE.DRAG_END:this.dragEnd.next(n)}n.ghostElement=this.ghostElement,n.dropPointPosition=this.dropPointPosition,this.eventBus.broadcast(n)}generateDragEvent(t,e){const n=this.getNativeEventObject(t);return{type:e,dragPosition:{pageX:n.pageX,pageY:n.pageY,moveX:n.pageX-this.initialPosition.pageX,moveY:n.pageY-this.initialPosition.pageY},group:this.group,dragDataTransfer:this.dragDataTransfer,ghostElement:this.ghostElement}}};return t.\u0275fac=function(e){return new(e||t)(Wt(il),Wt(ya),Wt(OE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),RE=(()=>{let t=class{constructor(t){this.domAdapter=t}capture(t,e){this.draggableElClientRect=this.domAdapter.clientRect(t),this.snapshotDragEvent=e}discard(){delete this.draggableElClientRect,delete this.snapshotDragEvent}get hasDraggableState(){return!!this.snapshotDragEvent&&!!this.draggableElClientRect}get clientRect(){return this.draggableElClientRect}get dragEvent(){return this.snapshotDragEvent}};return t.\u0275fac=function(e){return new(e||t)(Wt(xE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),PE=(()=>{let t=class{constructor(t,e,n,r,i){if(this.el=t,this.dragEventListener=e,this.draggableSnapshot=n,this.renderer=r,this.ngZone=i,this.subscriptions=[],this.leaveAnimConfig={value:0,params:{top:"0px",left:"0px"}},!this.dragEventListener||!this.draggableSnapshot)throw new Error("The clr-draggable-ghost component can only be used inside of a clrDraggable directive.");this.draggableGhostEl=this.el.nativeElement,this.renderer.addClass(this.draggableGhostEl,"draggable-ghost"),this.dragEventListener.ghostElement=this.draggableGhostEl,this.setDefaultGhostSize(this.draggableGhostEl);const s={top:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageY-this.draggableSnapshot.clientRect.top:0,left:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageX-this.draggableSnapshot.clientRect.left:0};let o=!1;this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(t=>{o||(this.draggableSnapshot.hasDraggableState?this.animateToOnLeave(this.draggableSnapshot.clientRect.top+"px",this.draggableSnapshot.clientRect.left+"px"):this.animateToOnLeave(t.dragPosition.pageY+"px",t.dragPosition.pageX+"px"),o=!0);const e=this.findTopLeftPosition(t.dragPosition,s);this.setPositionStyle(this.draggableGhostEl,e.pageX,e.pageY),this.dragEventListener.dropPointPosition=this.findDropPointPosition(e)}))}setDefaultGhostSize(t){this.draggableSnapshot.hasDraggableState&&this.setSizeStyle(t,this.draggableSnapshot.clientRect.width,this.draggableSnapshot.clientRect.height)}animateToOnLeave(t,e){this.ngZone.run(()=>{this.leaveAnimConfig={value:0,params:{top:t,left:e}}})}findTopLeftPosition(t,e){return{pageX:t.pageX-e.left,pageY:t.pageY-e.top}}findDropPointPosition(t){return this.draggableSnapshot.hasDraggableState?{pageX:t.pageX+this.draggableSnapshot.clientRect.width/2,pageY:t.pageY+this.draggableSnapshot.clientRect.height/2}:t}setSizeStyle(t,e,n){this.renderer.setStyle(t,"width",e+"px"),this.renderer.setStyle(t,"height",n+"px")}setPositionStyle(t,e,n){this.renderer.setStyle(t,"left",e+"px"),this.renderer.setStyle(t,"top",n+"px"),this.renderer.setStyle(t,"visibility","visible")}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(DE,8),Qs(RE,8),Qs(ya),Qs(il))},t.\u0275cmp=he({type:t,selectors:[["clr-draggable-ghost"]],hostVars:1,hostBindings:function(t,e){2&t&&$o("@leaveAnimation",e.leaveAnimConfig)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2,data:{animation:[Sm("leaveAnimation",[km(":leave",[Im({left:"*",top:"*"}),Cm("0.2s ease-in-out",Im({top:"{{top}}",left:"{{left}}"}))])])]}}),t})(),NE=(()=>{let t=class{constructor(t,e,n){if(this.template=t,this.container=e,this.dragEventListener=n,this.subscriptions=[],!this.dragEventListener||!this.container)throw new Error("The *clrIfDragged directive can only be used inside of a clrDraggable directive.");this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(t=>{this.container.createEmbeddedView(this.template)})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(t=>{this.container.clear()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(Ma),Qs(ja,12),Qs(DE,8))},t.\u0275dir=ye({type:t,selectors:[["","clrIfDragged",""]]}),t})(),FE=(()=>{let t=class{constructor(t,e){this.dragEventListener=t,this.renderer=e}get defaultHandleEl(){return this._defaultHandleEl}set defaultHandleEl(t){this._defaultHandleEl=t,this._customHandleEl||this.makeElementHandle(this._defaultHandleEl)}makeElementHandle(t){this._defaultHandleEl&&this._defaultHandleEl!==t&&this.renderer.removeClass(this._defaultHandleEl,"drag-handle"),this.dragEventListener.attachDragListeners(t),this.renderer.addClass(t,"drag-handle")}get customHandleEl(){return this._customHandleEl}registerCustomHandle(t){this.dragEventListener.detachDragListeners(),this._customHandleEl=t,this.makeElementHandle(this._customHandleEl)}unregisterCustomHandle(){this.dragEventListener.detachDragListeners(),this.renderer.removeClass(this._customHandleEl,"drag-handle"),delete this._customHandleEl,this._defaultHandleEl&&this.makeElementHandle(this._defaultHandleEl)}};return t.\u0275fac=function(e){return new(e||t)(Wt(DE),Wt(ya))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),LE=(()=>{let t=class{constructor(t){this.renderer=t}enter(){this.renderer.addClass(document.body,"in-drag")}exit(){this.renderer.removeClass(document.body,"in-drag")}};return t.\u0275fac=function(e){return new(e||t)(Wt(ya))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),ME=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a){this.el=t,this.dragEventListener=e,this.dragHandleRegistrar=n,this.viewContainerRef=r,this.cfr=i,this.injector=s,this.draggableSnapshot=o,this.globalDragMode=a,this.subscriptions=[],this.dragOn=!1,this.dragStartEmitter=new pc,this.dragMoveEmitter=new pc,this.dragEndEmitter=new pc,this.draggableEl=this.el.nativeElement,this.componentFactory=this.cfr.resolveComponentFactory(PE)}set dataTransfer(t){this.dragEventListener.dragDataTransfer=t}set group(t){this.dragEventListener.group=t}createDefaultGhost(t){this.draggableSnapshot.capture(this.draggableEl,t),this.viewContainerRef.createComponent(this.componentFactory,0,this.injector,[[this.draggableEl.cloneNode(!0)]])}destroyDefaultGhost(){this.viewContainerRef.clear(),this.draggableSnapshot.discard()}ngAfterContentInit(){this.dragHandleRegistrar.defaultHandleEl=this.draggableEl,this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(t=>{this.globalDragMode.enter(),this.dragOn=!0,this.customGhost||this.createDefaultGhost(t),this.dragStartEmitter.emit(new kE(t))})),this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(t=>{this.dragMoveEmitter.emit(new kE(t))})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(t=>{this.globalDragMode.exit(),this.dragOn=!1,this.customGhost||this.destroyDefaultGhost(),this.dragEndEmitter.emit(new kE(t))}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.dragEventListener.detachDragListeners()}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(DE),Qs(FE),Qs(ja),Qs(da),Qs(As),Qs(RE),Qs(LE))},t.\u0275dir=ye({type:t,selectors:[["","clrDraggable",""]],contentQueries:function(t,e,n){var r;1&t&&kc(n,NE,!0),2&t&&Ec(r=Dc())&&(e.customGhost=r.first)},hostVars:4,hostBindings:function(t,e){2&t&&ko("draggable",!0)("being-dragged",e.dragOn)},inputs:{dataTransfer:["clrDraggable","dataTransfer"],group:["clrGroup","group"]},outputs:{dragStartEmitter:"clrDragStart",dragMoveEmitter:"clrDragMove",dragEndEmitter:"clrDragEnd"},features:[la([DE,FE,RE,LE,xE])]}),t})(),VE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),jE=(()=>{let t=class{constructor(t,e){this.element=t,this.domAdapter=e,this.startHeight=0}get expandAnimation(){return{value:this.clrExpandTrigger,params:{startHeight:this.startHeight}}}animationDone(){this.updateStartHeight()}updateStartHeight(){this.startHeight=this.domAdapter.computedHeight(this.element.nativeElement)||0}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(xE))},t.\u0275cmp=he({type:t,selectors:[["clr-expandable-animation"]],hostVars:1,hostBindings:function(t,e){1&t&&lo("@expandAnimation.done",(function(){return e.animationDone()})),2&t&&$o("@expandAnimation",e.expandAnimation)},inputs:{clrExpandTrigger:"clrExpandTrigger"},features:[la([xE])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},styles:["[_nghost-%COMP%] {\n      display: block;\n    }"],data:{animation:[Sm("expandAnimation",[km("true <=> false",[Im({height:"{{startHeight}}px",overflow:"hidden"}),Cm("0.2s ease-in-out",Im({height:"*"}))])])]}}),t})(),UE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),BE=(()=>{let t=class{constructor(t,e){this.el=t,this.ariaLiveService=e}ngAfterViewInit(){this.ariaLiveService.announce(this.el.nativeElement,this.ariaLive)}get spinnerClass(){return!0}get inlineClass(){return this._inline}set clrInline(t){this._inline=KC(t)}get inverseClass(){return this._inverse}set clrInverse(t){this._inverse=KC(t)}get smallClass(){return this._small}set clrSmall(t){this._small=KC(t)}get mediumClass(){return!this._small&&this._medium}set clrMedium(t){this._medium=KC(t)}get ariaLive(){return KC(this.assertive)?$S.assertive:KC(this.off)?$S.off:$S.polite}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(qS))},t.\u0275cmp=he({type:t,selectors:[["clr-spinner"]],hostVars:11,hostBindings:function(t,e){2&t&&(Gs("aria-busy",!0),ko("spinner",e.spinnerClass)("spinner-inline",e.inlineClass)("spinner-inverse",e.inverseClass)("spinner-sm",e.smallClass)("spinner-md",e.mediumClass))},inputs:{clrInline:"clrInline",clrInverse:"clrInverse",clrSmall:"clrSmall",clrMedium:"clrMedium",assertive:["clrAssertive","assertive"],off:["clrOff","off"]},features:[la([qS])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),zE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})();const HE=new Mt("FOCUS_ON_VIEW_INIT"),GE={provide:HE,useValue:!0};let $E=(()=>{let t=class{constructor(t,e,n,r,i){this.el=t,this.platformId=e,this.focusOnViewInit=n,this.renderer=i,this.directFocus=!0,this._isEnabled=this.focusOnViewInit,this.document=r}onFocusout(){this.directFocus||(this.renderer.removeAttribute(this.el.nativeElement,"tabindex"),this.renderer.setStyle(this.el.nativeElement,"outline",null))}set isEnabled(t){this.focusOnViewInit&&"boolean"==typeof t&&(this._isEnabled=t)}ngAfterViewInit(){this.focus()}focus(){Wh(this.platformId)&&this._isEnabled&&this.document&&this.document.activeElement!==this.el.nativeElement&&(this.el.nativeElement.focus(),this.document.activeElement!==this.el.nativeElement&&(this.directFocus=!1,this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.renderer.setStyle(this.el.nativeElement,"outline","none"),this.el.nativeElement.focus()))}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(zc),Qs(HE),Qs(Pu),Qs(ya))},t.\u0275dir=ye({type:t,selectors:[["","clrFocusOnViewInit",""]],hostBindings:function(t,e){1&t&&co("focusout",(function(){return e.onFocusout()}))},inputs:{isEnabled:["clrFocusOnViewInit","isEnabled"]}}),t})(),qE=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[GE],imports:[[qh]]}),t})();class WE{}let QE=(()=>{let t=class{constructor(){this._change=new I,this.nbChanges=0}get change(){return this._change.asObservable()}changeStart(){this.nbChanges++}changeDone(){0==--this.nbChanges&&this._change.next()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),YE=(()=>{let t=class{constructor(t){this.stateDebouncer=t,this.preventEmit=!1,this.activated=!1,this._size=0,this._change=new I,this._sizeChange=new I,this._current=1}get size(){return this._size}set size(t){const e=this._size;t!==e&&(this.preventEmit||this.stateDebouncer.changeStart(),this._size=t,this._current=0===t?1:Math.floor(e/t*(this._current-1))+1,this.preventEmit||(this._change.next(this._current),this._sizeChange.next(this._size),this.stateDebouncer.changeDone())),this.preventEmit=!1}get totalItems(){return this._totalItems||0}set totalItems(t){this._totalItems=t,this.current>this.last&&(this.current=this.last)}get last(){return this._last?this._last:this.size>0&&this.totalItems?Math.ceil(this.totalItems/this.size):1}set last(t){this._last=t}get change(){return this._change.asObservable()}get sizeChange(){return this._sizeChange.asObservable()}get current(){return this._current}set current(t){t!==this._current&&(this.stateDebouncer.changeStart(),this._current=t,this._change.next(t),this.stateDebouncer.changeDone())}previous(){this.current>1&&this.current--}next(){this.current<this.last&&this.current++}get firstItem(){return 0===this._totalItems?-1:0===this.size?0:(this.current-1)*this.size}get lastItem(){if(0===this._totalItems)return-1;if(0===this.size)return this.totalItems-1;let t=this.current*this.size-1;return this.totalItems&&(t=Math.min(t,this.totalItems-1)),t}resetPageSize(t=!1){this.preventEmit=t,this.size=0}};return t.\u0275fac=function(e){return new(e||t)(Wt(QE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),KE=(()=>{let t=class{constructor(t,e){this._page=t,this.stateDebouncer=e,this._change=new I,this._all=[]}get change(){return this._change.asObservable()}hasActiveFilters(){for(const{filter:t}of this._all)if(t&&t.isActive())return!0;return!1}getActiveFilters(){const t=[];for(const{filter:e}of this._all)e&&e.isActive()&&t.push(e);return t}add(t){const e=t.changes.subscribe(()=>this.resetPageAndEmitFilterChange([t]));let n=!1;const r=new ZE(t,()=>{if(n)return;e.unsubscribe();const r=this._all.findIndex(e=>e.filter===t);r>=0&&this._all.splice(r,1),t.isActive()&&this.resetPageAndEmitFilterChange([]),n=!0});return this._all.push(r),t.isActive()&&this.resetPageAndEmitFilterChange([t]),r}accepts(t){for(const{filter:e}of this._all)if(e&&e.isActive()&&!e.accepts(t))return!1;return!0}resetPageAndEmitFilterChange(t){this.stateDebouncer.changeStart(),this._page.current=1,this._change.next(t),this.stateDebouncer.changeDone()}};return t.\u0275fac=function(e){return new(e||t)(Wt(YE),Wt(QE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class ZE{constructor(t,e){this.filter=t,this.unregister=e}}let XE=(()=>{class t{constructor(t){this.filters=t}get filter(){return this.registered&&this.registered.filter}setFilter(t){this.deleteFilter(),t instanceof ZE?this.registered=t:t&&(this.registered=this.filters.add(t))}deleteFilter(){this.registered&&(this.registered.unregister(),delete this.registered)}ngOnDestroy(){this.deleteFilter()}}return t.\u0275fac=function(t){Ks()},t.\u0275dir=ye({type:t}),t})();var JE;let tI=(()=>{let t=JE=class extends XE{constructor(t,e,n,r,i){super(t),this.commonStrings=e,this.smartToggleService=n,this.platformId=r,this.popoverId=i,this.subs=[],this.ariaExpanded=!1,this.smartPosition={axis:fS.VERTICAL,side:PS.AFTER,anchor:aS.END,content:aS.END},this._open=!1,this.openChange=new pc(!1),this.subs.push(n.openChange.subscribe(t=>{this.open=t,this.ariaExpanded=t}))}get open(){return this._open}set open(t){this.open!==(t=!!t)&&(this.smartToggleService.open=t,this.openChange.emit(t),!t&&Wh(this.platformId)&&this.anchor.nativeElement.focus(),this._open=t)}set customFilter(t){this.setFilter(t)}get active(){return!!this.filter&&this.filter.isActive()}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(KE),Qs(kS),Qs(iS),Qs(zc),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-filter"]],viewQuery:function(t,e){var n;1&t&&Tc(Nb,!0,pa),2&t&&Ec(n=Dc())&&(e.anchor=n.first)},inputs:{open:["clrDgFilterOpen","open"],customFilter:["clrDgFilter","customFilter"]},outputs:{openChange:"clrDgFilterOpenChange"},features:[la([{provide:WE,useExisting:JE},RS]),Wo],ngContentSelectors:Sv,decls:4,vars:12,consts:[["type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"datagrid-filter-toggle"],["anchor",""],[1,"is-solid"],["class","datagrid-filter","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["clrFocusTrap","",1,"datagrid-filter",3,"id"],[1,"datagrid-filter-close-wrapper"],["type","button","clrPopoverCloseButton","",1,"close"],["shape","close"]],template:function(t,e){1&t&&(mo(),Js(0,"button",0,1),eo(2,"clr-icon",2),to(),qs(3,Fb,5,2,"div",3)),2&t&&(ko("datagrid-filter-open",e.open)("datagrid-filtered",e.active),Gs("aria-label",e.commonStrings.keys.datagridFilterAriaLabel)("aria-expanded",e.ariaExpanded)("aria-controls",e.popoverId),Vr(2),Gs("shape",e.active?"filter-grid-circle":"filter-grid"),Vr(1),Zs("clrPopoverContent",e.open)("clrPopoverContentAt",e.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},directives:[bS,yS,nS,mS,EC,vS],encapsulation:2}),t})();class eI{constructor(t){this.prop=t,t.indexOf(".")>=0&&(this.splitProp=t.split("."))}getPropValue(t){if(this.splitProp){let e=t;for(const t of this.splitProp){if(null==e||void 0===e||void 0===e[t])return;e=e[t]}return e}return t[this.prop]}}class nI{constructor(t,e=!1){this.prop=t,this.exact=e,this.nestedProp=new eI(t)}accepts(t,e){const n=this.nestedProp.getPropValue(t);return void 0!==n&&(this.exact?(""+n).toLowerCase()===e:(""+n).toLowerCase().indexOf(e)>=0)}}class rI{constructor(t){this.filterFn=t,this._changes=new I,this._rawValue="",this._lowerCaseValue=""}get changes(){return this._changes.asObservable()}get value(){return this._rawValue}get lowerCaseValue(){return this._lowerCaseValue}set value(t){t||(t=""),t!==this._rawValue&&(this._rawValue=t,this._lowerCaseValue=t.toLowerCase().trim(),this._changes.next(t))}isActive(){return!!this.value}accepts(t){return this.filterFn.accepts(t,this.lowerCaseValue)}get state(){return this.filterFn instanceof nI?{property:this.filterFn.prop,value:this.value}:this}equals(t){return t instanceof rI&&(t.filterFn instanceof nI?this.filterFn instanceof nI&&t.filterFn.prop===this.filterFn.prop&&t.value===this.value:t===this)}}var iI;let sI=(()=>{let t=iI=class extends XE{constructor(t,e,n){super(t),this.domAdapter=e,this.smartToggleService=n,this.subs=[],this.open=!1,this.filterValueChange=new pc}set customStringFilter(t){this.setFilter(t instanceof ZE?t:new rI(t)),this.initFilterValue&&(this.value=this.initFilterValue,delete this.initFilterValue)}ngAfterViewInit(){this.subs.push(this.smartToggleService.openChange.subscribe(t=>{this.open=t,setTimeout(()=>{this.domAdapter.focus(this.input.nativeElement)})}))}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(t=>t.unsubscribe())}get value(){return this.filter.value}set value(t){this.filter?(t||(t=""),t!==this.filter.value&&(this.filter.value=t,this.filterValueChange.emit(t))):this.initFilterValue=t}};return t.\u0275fac=function(e){return new(e||t)(Qs(KE),Qs(xE),Qs(iS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-string-filter"]],viewQuery:function(t,e){var n;1&t&&(Tc(Lb,!0),Tc(tI,!0)),2&t&&(Ec(n=Dc())&&(e.input=n.first),Ec(n=Dc())&&(e.filterContainer=n.first))},inputs:{customStringFilter:["clrDgStringFilter","customStringFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[la([{provide:WE,useExisting:iI}]),Wo],decls:3,vars:3,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","text","name","search",1,"clr-input",3,"ngModel","ngModelChange"],["input",""]],template:function(t,e){1&t&&(Js(0,"clr-dg-filter",0),co("clrDgFilterOpenChange",(function(t){return e.open=t})),Js(1,"input",1,2),co("ngModelChange",(function(t){return e.value=t})),to(),to()),2&t&&(Zs("clrDgFilter",e.registered)("clrDgFilterOpen",e.open),Vr(1),Zs("ngModel",e.value))},directives:[tI,Vm,$m,Jy],encapsulation:2}),t})();class oI{constructor(t,e=!1){this.prop=t,this.exact=e,this.nestedProp=new eI(t)}accepts(t,e,n){const r=this.nestedProp.getPropValue(t);return!(null!==e&&r<e||null!==n&&r>n)}}class aI{constructor(t){this.filterFn=t,this._changes=new I,this._low=null,this._high=null}get changes(){return this._changes.asObservable()}get value(){return[this._low,this._high]}set value(t){const e=t[0],n=t[1];e===this._low&&n===this._high||(this._low=e,this._high=n,this._changes.next([this._low,this._high]))}set low(t){t!==this._low&&(this._low=t,this._changes.next([this._low,this._high]))}set high(t){t!==this._high&&(this._high=t,this._changes.next([this._low,this._high]))}get low(){return this._low}get high(){return this._high}isActive(){return null!==this._low||null!==this.high}accepts(t){return this.filterFn.accepts(t,this._low,this._high)}get state(){return this.filterFn instanceof oI?{property:this.filterFn.prop,low:this._low,high:this._high}:this}equals(t){return t instanceof aI&&(t.filterFn instanceof oI?this.filterFn instanceof oI&&t.filterFn.prop===this.filterFn.prop&&t.low===this._low&&t.high===this._high:t===this)}}var cI;let lI=(()=>{let t=cI=class extends XE{constructor(t,e,n,r){super(t),this.domAdapter=e,this.commonStrings=n,this.popoverToggleService=r,this.subscriptions=[],this.open=!1,this.filterValueChange=new pc}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}set customNumericFilter(t){this.setFilter(t instanceof ZE?t:new aI(t)),this.initFilterValues&&(this.value=this.initFilterValues,delete this.initFilterValues)}ngAfterViewInit(){this.subscriptions.push(this.popoverToggleService.openChange.subscribe(t=>{this.open=t,setTimeout(()=>{this.domAdapter.focus(this.input.nativeElement)})}))}get value(){return[this.filter.low,this.filter.high]}set value(t){this.filter?!t||t[0]===this.filter.low&&t[1]===this.filter.high||(this.filter.low="number"==typeof t[0]?t[0]:null,this.filter.high="number"==typeof t[1]?t[1]:null,this.filterValueChange.emit(t)):this.initFilterValues=t}get low(){return"number"==typeof this.filter.low&&isFinite(this.filter.low)?this.filter.low:null}get high(){return"number"==typeof this.filter.high&&isFinite(this.filter.high)?this.filter.high:null}set low(t){"number"==typeof t&&t!==this.filter.low?(this.filter.low=t,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof t&&(this.filter.low=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}set high(t){"number"==typeof t&&t!==this.filter.high?(this.filter.high=t,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof t&&(this.filter.high=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}};return t.\u0275fac=function(e){return new(e||t)(Qs(KE),Qs(xE),Qs(kS),Qs(iS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-numeric-filter"]],viewQuery:function(t,e){var n;1&t&&(Tc(Mb,!0),Tc(tI,!0)),2&t&&(Ec(n=Dc())&&(e.input=n.first),Ec(n=Dc())&&(e.filterContainer=n.first))},inputs:{customNumericFilter:["clrDgNumericFilter","customNumericFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[la([{provide:WE,useExisting:cI}]),Wo],decls:6,vars:8,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","number","name","low",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_low",""],[1,"datagrid-filter-input-spacer"],["type","number","name","high",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_high",""]],template:function(t,e){1&t&&(Js(0,"clr-dg-filter",0),co("clrDgFilterOpenChange",(function(t){return e.open=t})),Js(1,"input",1,2),co("ngModelChange",(function(t){return e.low=t})),to(),eo(3,"span",3),Js(4,"input",4,5),co("ngModelChange",(function(t){return e.high=t})),to(),to()),2&t&&(Zs("clrDgFilter",e.registered)("clrDgFilterOpen",e.open),Vr(1),Zs("ngModel",e.low)("placeholder",e.commonStrings.keys.minValue),Gs("aria-label",e.commonStrings.keys.minValue),Vr(3),Zs("ngModel",e.high)("placeholder",e.commonStrings.keys.maxValue),Gs("aria-label",e.commonStrings.keys.maxValue))},directives:[tI,iy,Vm,$m,Jy],encapsulation:2}),t})(),uI=(()=>{class t{constructor(t,e){this.subscription=e.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(e.disableChocolateCheck=!0,t.detectChanges(),e.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(t){Ks()},t.\u0275dir=ye({type:t}),t})(),hI=(()=>{let t=class{constructor(){this.actionableCount=0}register(){this.actionableCount++}unregister(){this.actionableCount--}get hasActionableRow(){return this.actionableCount>0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),dI=(()=>{class t{constructor(){this._chocolate=new I,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t}),t})(),pI=(()=>{let t=class extends dI{};return t.\u0275fac=function(e){return Tk(e||t)},t.\u0275dir=ye({type:t,selectors:[["clr-datagrid"]],features:[Wo]}),t})(),fI=(()=>{let t=class extends uI{constructor(t,e,n){if(!e)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(t,e),this.rowActions=n}get flavor(){return this.rowActions.hasActionableRow}};return t.\u0275fac=function(e){return new(e||t)(Qs(ds),Qs(pI,8),Qs(hI))},t.\u0275dir=ye({type:t,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[Wo]}),t})(),gI=(()=>{let t=class{constructor(){this.toggleState=!1,this._state=new Fl(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(t){this._enabled=t}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(t,e){this.cache=t,this.button=e,this.toggleState=!0,this._state.next(this.toggleState)}toggle(t,e){this.isRowOpen(t)||!t?this.close():this.open(t,e)}get state(){return this.cache}isRowOpen(t){return!(!this.toggleState||this.cache!==t)}get isOpen(){return!0===this.toggleState}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),mI=(()=>{let t=class{constructor(t){this.detailService=t,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}};return t.\u0275fac=function(e){return new(e||t)(Wt(gI))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),yI=(()=>{let t=class extends uI{constructor(t,e,n){if(!e)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(t,e),this.expandableCount=n}get flavor(){return this.expandableCount.hasExpandableRow}};return t.\u0275fac=function(e){return new(e||t)(Qs(ds),Qs(pI,8),Qs(mI))},t.\u0275dir=ye({type:t,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[Wo]}),t})();class vI{constructor(t){this.prop=t,this.nestedProp=new eI(t)}compare(t,e){let n=this.nestedProp.getPropValue(t),r=this.nestedProp.getPropValue(e);return"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof r&&(r=r.toLowerCase()),null==n?null==r?0:1:null==r||n<r?-1:n>r?1:0}}var bI=function(t){return t[t.UNSORTED=0]="UNSORTED",t[t.ASC=1]="ASC",t[t.DESC=-1]="DESC",t}({});let wI=(()=>{let t=class{constructor(t){this.stateDebouncer=t,this._reverse=!1,this._change=new I}get comparator(){return this._comparator}set comparator(t){this.stateDebouncer.changeStart(),this._comparator=t,this.emitChange(),this.stateDebouncer.changeDone()}get reverse(){return this._reverse}set reverse(t){this.stateDebouncer.changeStart(),this._reverse=t,this.emitChange(),this.stateDebouncer.changeDone()}emitChange(){this._change.next(this)}get change(){return this._change.asObservable()}toggle(t,e){this.stateDebouncer.changeStart(),this.comparator===t?this._reverse=void 0!==e&&e||!this._reverse:(this._comparator=t,this._reverse=void 0!==e&&e),this.emitChange(),this.stateDebouncer.changeDone()}clear(){this.comparator=null}compare(t,e){return(this.reverse?-1:1)*this.comparator.compare(t,e)}};return t.\u0275fac=function(e){return new(e||t)(Wt(QE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),_I=(()=>{let t=class{constructor(){this._dynamic=!1}ngAfterViewInit(){this.columnView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.columnView.destroy()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["dg-wrapped-column"]],viewQuery:function(t,e){var n;1&t&&Tc(Vb,!0),2&t&&Ec(n=Dc())&&(e.templateRef=n.first)},ngContentSelectors:Sv,decls:2,vars:0,consts:[["columnPortal",""]],template:function(t,e){1&t&&(mo(),qs(0,jb,1,0,"ng-template",null,0,Fc))},encapsulation:2}),t})(),SI=(()=>{let t=class extends XE{constructor(t,e,n,r,i,s){super(e),this._sort=t,this.vcr=n,this.detailService=r,this.changeDetectorRef=i,this.commonStrings=s,this.showSeparator=!0,this.subscriptions=[],this._colType="string",this._sorted=!1,this.sortedChange=new pc,this._sortOrder=bI.UNSORTED,this.sortOrderChange=new pc,this.customFilter=!1,this.filterValueChange=new pc,this.subscriptions.push(this.listenForSortingChanges()),this.subscriptions.push(this.listenForDetailPaneChanges())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}listenForDetailPaneChanges(){return this.detailService.stateChange.subscribe(t=>{this.showSeparator!==!t&&(this.showSeparator=!t,this.changeDetectorRef.markForCheck())})}listenForSortingChanges(){return this._sort.change.subscribe(t=>{this.changeDetectorRef.markForCheck(),this.sortOrder!==bI.UNSORTED&&t.comparator!==this._sortBy&&(this._sortOrder=bI.UNSORTED,this.sortOrderChange.emit(this._sortOrder),this.sortIcon=null),this.sorted&&t.comparator!==this._sortBy&&(this._sorted=!1,this.sortedChange.emit(!1))})}get field(){return this._field}get colType(){return this._colType}set colType(t){this._colType=t,!this.customFilter&&!this.filter&&this._colType&&this._field&&this.setupDefaultFilter(this._field,this._colType)}set field(t){"string"==typeof t&&(this._field=t,!this.customFilter&&this._colType&&this.setupDefaultFilter(this._field,this._colType),this._sortBy||(this._sortBy=new vI(this._field)))}setupDefaultFilter(t,e){"number"===e?this.setFilter(new aI(new oI(t))):"string"===e&&this.setFilter(new rI(new nI(t))),this.filter&&this.initFilterValue&&(this.updateFilterValue=this.initFilterValue,delete this.initFilterValue)}get sortBy(){return this._sortBy}set sortBy(t){"string"==typeof t?this._sortBy=new vI(t):t?this._sortBy=t:this._field?this._sortBy=new vI(this._field):delete this._sortBy}get sortable(){return!!this._sortBy}get sorted(){return this._sorted}set sorted(t){!t&&this.sorted?(this._sorted=!1,this._sort.clear()):t&&!this.sorted&&this.sort()}get sortOrder(){return this._sortOrder}set sortOrder(t){if(void 0!==t&&this._sortOrder!==t)switch(t){default:case bI.UNSORTED:this._sort.clear();break;case bI.ASC:this.sort(!1);break;case bI.DESC:this.sort(!0)}}get ariaSort(){switch(this._sortOrder){default:case bI.UNSORTED:return"none";case bI.ASC:return"ascending";case bI.DESC:return"descending"}}sort(t){this.sortable&&(this._sort.toggle(this._sortBy,t),this._sortOrder=this._sort.reverse?bI.DESC:bI.ASC,this.sortIcon=this._sortOrder===bI.DESC?"arrow down":"arrow",this.sortOrderChange.emit(this._sortOrder),this._sorted=!0,this.sortedChange.emit(!0))}set projectedFilter(t){t&&(this.deleteFilter(),this.customFilter=!0)}get filterValue(){if(this.filter instanceof rI||this.filter instanceof aI)return this.filter.value}set updateFilterValue(t){this.filter?this.filter instanceof rI?(t&&"string"==typeof t||(t=""),t!==this.filter.value&&(this.filter.value=t)):this.filter instanceof aI&&(t&&t instanceof Array||(t=[null,null]),2!==t.length||t[0]===this.filter.value[0]&&t[1]===this.filter.value[1]||(this.filter.value=t)):this.initFilterValue=t}set filterValue(t){(this.filter instanceof rI||this.filter instanceof aI)&&(this.updateFilterValue=t,this.filterValueChange.emit(this.filter.value))}ngOnInit(){this.wrappedInjector=new sC(_I,this.vcr)}get _view(){return this.wrappedInjector.get(_I,this.vcr).columnView}};return t.\u0275fac=function(e){return new(e||t)(Qs(wI),Qs(KE),Qs(ja),Qs(gI),Qs(ds),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-column"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,WE,!0),2&t&&Ec(r=Dc())&&(e.projectedFilter=r.first)},hostAttrs:["role","columnheader"],hostVars:3,hostBindings:function(t,e){2&t&&(Gs("aria-sort",e.ariaSort),ko("datagrid-column",!0))},inputs:{field:["clrDgField","field"],colType:["clrDgColType","colType"],updateFilterValue:["clrFilterValue","updateFilterValue"],sortBy:["clrDgSortBy","sortBy"],sorted:["clrDgSorted","sorted"],sortOrder:["clrDgSortOrder","sortOrder"]},outputs:{sortedChange:"clrDgSortedChange",sortOrderChange:"clrDgSortOrderChange",filterValueChange:"clrFilterValueChange"},features:[la([gS,sS,iS]),Wo],ngContentSelectors:Kb,decls:9,vars:5,consts:[[1,"datagrid-column-flex"],["class","datagrid-column-title","type","button",3,"click",4,"ngIf"],[3,"clrDgStringFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],[3,"clrDgNumericFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],["columnTitle",""],["class","datagrid-column-title",4,"ngIf"],[4,"ngIf"],["type","button",1,"datagrid-column-title",3,"click"],[4,"ngTemplateOutlet"],["class","sort-icon",4,"ngIf"],[1,"sort-icon"],[3,"clrDgStringFilter","clrFilterValue","clrFilterValueChange"],[3,"clrDgNumericFilter","clrFilterValue","clrFilterValueChange"],[1,"datagrid-column-title"]],template:function(t,e){1&t&&(mo(Yb),Js(0,"div",0),qs(1,zb,3,3,"button",1),yo(2),qs(3,Hb,1,2,"clr-dg-string-filter",2),qs(4,Gb,1,2,"clr-dg-numeric-filter",3),qs(5,$b,1,0,"ng-template",null,4,Fc),qs(7,Wb,2,1,"span",5),qs(8,Qb,1,0,"clr-dg-column-separator",6),to()),2&t&&(Vr(1),Zs("ngIf",e.sortable),Vr(2),Zs("ngIf",e.field&&!e.customFilter&&"string"==e.colType),Vr(1),Zs("ngIf",e.field&&!e.customFilter&&"number"==e.colType),Vr(3),Zs("ngIf",!e.sortable),Vr(1),Zs("ngIf",e.showSeparator))},directives:function(){return[Rh,Vh,nS,sI,lI,rT]},encapsulation:2,changeDetection:0}),t})(),CI=(()=>{let t=class{constructor(t,e,n){this._filters=t,this._sort=e,this._page=n,this.loading=!1,this.trackBy=(t,e)=>e,this._smart=!1,this._displayed=[],this._change=new I,this._allChanges=new I}destroy(){this._filtersSub&&this._filtersSub.unsubscribe(),this._sortSub&&this._sortSub.unsubscribe(),this._pageSub&&this._pageSub.unsubscribe()}get smart(){return this._smart}smartenUp(){this._smart=!0,this._filtersSub=this._filters.change.subscribe(()=>this._filterItems()),this._sortSub=this._sort.change.subscribe(()=>{this._sort.comparator?this._sortItems():this._filterItems()}),this._pageSub=this._page.change.subscribe(()=>this._changePage())}get all(){return this._all}set all(t){this._all=t,this.emitAllChanges(t),this.smart?this._filterItems():(this._displayed=t,this.emitChange())}refresh(){this.smart&&this._filterItems()}get displayed(){return this._displayed}emitChange(){this._change.next(this.displayed)}get change(){return this._change.asObservable()}emitAllChanges(t){this._allChanges.next(t)}get allChanges(){return this._allChanges.asObservable()}get uninitialized(){return!this._all}_filterItems(){this.uninitialized||(this._filtered=this._filters.hasActiveFilters()?this._all.filter(t=>this._filters.accepts(t)):this._all.slice(),this._page.totalItems=this._filtered.length,this._sortItems())}_sortItems(){this.uninitialized||(this._sort.comparator&&this._filtered.sort((t,e)=>this._sort.compare(t,e)),this._changePage())}_changePage(){this.uninitialized||this._page.activated&&0===this._page.size||(this._displayed=this._page.size>0?this._filtered.slice(this._page.firstItem,this._page.lastItem+1):this._filtered,this.emitChange())}};return t.\u0275fac=function(e){return new(e||t)(Wt(KE),Wt(wI),Wt(YE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),EI=(()=>{let t=class{constructor(t,e,n,r){this.template=t,this.differs=e,this.items=n,this.vcr=r,this.differ=null,this.subscriptions=[],n.smartenUp(),this.iterableProxy=new Oh(this.vcr,this.template,this.differs),this.subscriptions.push(n.change.subscribe(t=>{this.iterableProxy.ngForOf=t,this.iterableProxy.ngDoCheck()}))}set rawItems(t){this._rawItems=t||[]}set trackBy(t){this.iterableProxy.ngForTrackBy=t}ngDoCheck(){this.differ||(this.differ=this.differs.find(this._rawItems).create(this.iterableProxy.ngForTrackBy)),this.differ&&this.differ.diff(this._rawItems)&&(this.items.all=this._rawItems)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(Ma),Qs(Ra),Qs(CI),Qs(ja))},t.\u0275dir=ye({type:t,selectors:[["","clrDgItems","","clrDgItemsOf",""]],inputs:{rawItems:["clrDgItemsOf","rawItems"],trackBy:["clrDgItemsTrackBy","trackBy"]}}),t})(),II=(()=>{let t=class{constructor(t){this.items=t}get emptyDatagrid(){return!(this.items.loading||this.items.displayed&&0!==this.items.displayed.length)}};return t.\u0275fac=function(e){return new(e||t)(Qs(CI))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-placeholder"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-placeholder-container",!0)},ngContentSelectors:Sv,decls:3,vars:4,consts:[[1,"datagrid-placeholder"],["class","datagrid-placeholder-image",4,"ngIf"],[4,"ngIf"],[1,"datagrid-placeholder-image"]],template:function(t,e){1&t&&(mo(),Js(0,"div",0),qs(1,Zb,1,0,"div",1),qs(2,Xb,1,0,void 0,2),to()),2&t&&(ko("datagrid-empty",e.emptyDatagrid),Vr(1),Zs("ngIf",e.emptyDatagrid),Vr(1),Zs("ngIf",e.emptyDatagrid))},directives:[Rh],encapsulation:2}),t})();const TI=new Mt("POPOVER_HOST_ANCHOR");let xI=(()=>{let t=class{set triggerEl(t){this._triggerEl=t}focusTrigger(){this._triggerEl&&this._triggerEl.focus()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),kI=(()=>{let t=class{constructor(){this._id=new I}setId(t){this._id.next(t)}get id(){return this._id.asObservable()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),AI=(()=>{let t=class{constructor(t,e,n,r,i,s,o){this.toggleService=t,this.el=e,this.commonStrings=n,this.signpostIdService=r,this.signpostFocusManager=i,this.platformId=o,this.subscriptions=[],this.document=s}ngOnInit(){this.signpostFocusManager.triggerEl=this.el.nativeElement,this.subscriptions.push(this.toggleService.openChange.subscribe(t=>{this.ariaExpanded=t;const e=this.isOpen;this.isOpen=t,!this.isOpen&&e&&this.focusOnClose()}),this.signpostIdService.id.subscribe(t=>this.ariaControl=t))}focusOnClose(){Wh(this.platformId)&&(this.isOpen||this.document.activeElement!==this.document.body||this.signpostFocusManager.focusTrigger())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onSignpostTriggerClick(t){this.toggleService.toggleWithEvent(t)}};return t.\u0275fac=function(e){return new(e||t)(Qs(iS),Qs(pa),Qs(kS),Qs(kI),Qs(xI),Qs(Pu),Qs(zc))},t.\u0275dir=ye({type:t,selectors:[["","clrSignpostTrigger",""]],hostAttrs:[1,"signpost-trigger"],hostVars:5,hostBindings:function(t,e){1&t&&co("click",(function(t){return e.onSignpostTriggerClick(t)})),2&t&&(Gs("aria-label",e.commonStrings.keys.signpostToggle)("aria-expanded",e.ariaExpanded)("aria-controls",e.ariaControl),ko("active",e.isOpen))}}),t})(),OI=(()=>{let t=class{constructor(t){this.commonStrings=t,this.useCustomTrigger=!1}set customTrigger(t){this.useCustomTrigger=!!t}};return t.\u0275fac=function(e){return new(e||t)(Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-signpost"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,AI,!0),2&t&&Ec(r=Dc())&&(e.customTrigger=r.first)},hostVars:2,hostBindings:function(t,e){2&t&&ko("signpost",!0)},features:[la([iS,xI,{provide:TI,useExisting:pa},kI])],ngContentSelectors:Sv,decls:2,vars:1,consts:[[4,"ngIf"],["type","button","clrSignpostTrigger","",1,"signpost-action","btn","btn-small","btn-link"],["shape","info"]],template:function(t,e){1&t&&(mo(),qs(0,Jb,3,1,"ng-container",0),yo(1)),2&t&&Zs("ngIf",!e.useCustomTrigger)},directives:[Rh,AI,nS],encapsulation:2}),t})(),DI=(()=>{let t=class{constructor(){this._dynamic=!1}ngAfterViewInit(){this.cellView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.cellView.destroy()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["dg-wrapped-cell"]],viewQuery:function(t,e){var n;1&t&&Tc(tw,!0),2&t&&Ec(n=Dc())&&(e.templateRef=n.first)},ngContentSelectors:Sv,decls:2,vars:0,consts:[["cellPortal",""]],template:function(t,e){1&t&&(mo(),qs(0,ew,1,0,"ng-template",null,0,Fc))},encapsulation:2}),t})(),RI=(()=>{let t=class{constructor(t){this.vcr=t}ngOnInit(){this.wrappedInjector=new sC(DI,this.vcr)}get _view(){return this.wrappedInjector.get(DI,this.vcr).cellView}};return t.\u0275fac=function(e){return new(e||t)(Qs(ja))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-cell"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,OI,!1),2&t&&Ec(r=Dc())&&(e.signpost=r)},hostAttrs:["role","gridcell"],hostVars:4,hostBindings:function(t,e){2&t&&ko("datagrid-cell",!0)("datagrid-signpost-trigger",e.signpost.length>0)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})();var PI=function(t){return t[t.DISPLAY=0]="DISPLAY",t[t.CALCULATE=1]="CALCULATE",t}({}),NI=function(t){return t[t.ALIGN_COLUMNS=0]="ALIGN_COLUMNS",t[t.CALCULATE_MODE_ON=1]="CALCULATE_MODE_ON",t[t.CALCULATE_MODE_OFF=2]="CALCULATE_MODE_OFF",t[t.CLEAR_WIDTHS=3]="CLEAR_WIDTHS",t[t.COMPUTE_COLUMN_WIDTHS=4]="COMPUTE_COLUMN_WIDTHS",t}({});let FI=(()=>{let t=class{constructor(){this._renderStep=new I,this.alreadySized=!1}get renderStep(){return this._renderStep.asObservable()}filterRenderSteps(t){return this.renderStep.pipe($l(e=>t===e))}resize(){this._renderStep.next(NI.CALCULATE_MODE_ON),this.alreadySized&&this._renderStep.next(NI.CLEAR_WIDTHS),this._renderStep.next(NI.COMPUTE_COLUMN_WIDTHS),this._renderStep.next(NI.ALIGN_COLUMNS),this.alreadySized=!0,this._renderStep.next(NI.CALCULATE_MODE_OFF)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),LI=(()=>{let t=class{constructor(t){this.subscriptions=[],this._view=new Fl(PI.DISPLAY),this.subscriptions.push(t.filterRenderSteps(NI.CALCULATE_MODE_ON).subscribe(()=>this._view.next(PI.CALCULATE))),this.subscriptions.push(t.filterRenderSteps(NI.CALCULATE_MODE_OFF).subscribe(()=>this._view.next(PI.DISPLAY)))}get view(){return this._view.asObservable()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Wt(FI))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var MI=function(t){return t[t.None=0]="None",t[t.Single=1]="Single",t[t.Multi=2]="Multi",t}({});let VI=0,jI=(()=>{let t=class{constructor(t,e){this._items=t,this._filters=e,this.preserveSelection=!1,this.prevSelectionRefs=[],this.lockedRefs=[],this._selectionType=MI.None,this.rowSelectionMode=!1,this.debounce=!1,this.subscriptions=[],this._change=new I,this.id="clr-dg-selection"+VI++,this.subscriptions.push(this._filters.change.subscribe(()=>{this._selectable&&!this.preserveSelection&&this.clearSelection()})),this.subscriptions.push(this._items.allChanges.subscribe(t=>{const e=[];switch(this.selectionType){case MI.None:break;case MI.Single:{let n;const r=this._items.trackBy;let i=!1;if(this.currentSingle&&!this.prevSingleSelectionRef&&this._items.all&&this._items.trackBy){const t=this._items.all.findIndex(t=>t===this.currentSingle);this.prevSingleSelectionRef=this._items.trackBy(t,this.currentSingle)}t.forEach((t,s)=>{const o=r(s,t);this.prevSingleSelectionRef===o&&(n=t,i=!0),this.lockedRefs.indexOf(o)>-1&&e.push(o)}),this._items.smart&&!n&&(i=!0),setTimeout(()=>{i&&(this.currentSingle=n)},0);break}case MI.Multi:{let n=this.current.slice();const r=this._items.trackBy;let i=!1;this.current.length>0&&this.prevSelectionRefs.length!==this.current.length&&this._items.all&&this._items.trackBy&&(this.prevSelectionRefs=[],this.current.forEach(t=>{const e=this._items.all.findIndex(e=>e===t);this.prevSelectionRefs.push(this._items.trackBy(e,t))})),t.forEach((t,n)=>{const i=r(n,t);this.lockedRefs.indexOf(i)>-1&&e.push(i)}),n.length>0&&(t.forEach((t,e)=>{const s=r(e,t),o=this.prevSelectionRefs.indexOf(s);o>-1&&(n[o]=t,i=!0)}),this._items.smart&&(n=n.filter(e=>t.indexOf(e)>-1),this.current.length!==n.length&&(i=!0)),setTimeout(()=>{i&&(this.current=n)},0));break}}this.lockedRefs=e}))}clearSelection(){this.current.length=0,this.prevSelectionRefs=[],this._currentSingle=null,this.prevSingleSelectionRef=null,this.emitChange()}get selectionType(){return this._selectionType}set selectionType(t){t!==this.selectionType&&(this._selectionType=t,t===MI.None?delete this.current:this.updateCurrent([],!1))}get _selectable(){return this._selectionType===MI.Multi||this._selectionType===MI.Single}destroy(){this.subscriptions.forEach(t=>t.unsubscribe())}get currentSingle(){return this._currentSingle}set currentSingle(t){if(t!==this._currentSingle){if(this._currentSingle=t,this._items.all&&this._items.trackBy&&t){const e=this._items.all.findIndex(e=>e===t);this.prevSingleSelectionRef=this._items.trackBy(e,t)}this.emitChange(),this.debounce=!0,setTimeout(()=>this.debounce=!1)}}get current(){return this._current}set current(t){this.updateCurrent(t,!0)}updateCurrent(t,e){this._current=t,e&&(this.emitChange(),this.debounce=!0,setTimeout(()=>this.debounce=!1))}emitChange(){this._selectionType===MI.Single?this._change.next(this.currentSingle):this._selectionType===MI.Multi&&this._change.next(this.current)}get change(){return this._change.asObservable()}isSelected(t){return this._selectionType===MI.Single?this.currentSingle===t:this._selectionType===MI.Multi&&this.current.indexOf(t)>=0}selectItem(t){if(this.current.push(t),this._items.trackBy&&this._items.all){const e=this._items.all.findIndex(e=>e===t);this.prevSelectionRefs.push(this._items.trackBy(e,t))}}deselectItem(t){if(this.current.splice(t,1),this._items.trackBy&&t<this.prevSelectionRefs.length){const e=this.prevSelectionRefs.splice(t,1);this.lockedRefs=this.lockedRefs.filter(t=>t!==e[0])}}setSelected(t,e){switch(this._selectionType){case MI.None:case MI.Single:break;case MI.Multi:const n=this.current.indexOf(t);n>=0&&!e?(this.deselectItem(n),this.emitChange()):n<0&&e&&(this.selectItem(t),this.emitChange())}}isAllSelected(){if(this._selectionType!==MI.Multi||!this._items.displayed)return!1;const t=this._items.displayed.filter(t=>!1===this.isLocked(t));return!(t.length<1)&&t.filter(t=>this.current.indexOf(t)>-1).length===t.length}canItBeLocked(){return this._selectionType!==MI.None&&Array.isArray(this._items.all)}lockItem(t,e){if(this.canItBeLocked()){const n=this._items.trackBy(this._items.all.findIndex(e=>e===t),t);!0===e?this.lockedRefs.push(n):this.lockedRefs=this.lockedRefs.filter(t=>n!==t)}}isLocked(t){if(this.canItBeLocked()){const e=this._items.trackBy(this._items.all.findIndex(e=>e===t),t);return this.lockedRefs.indexOf(e)>-1}return!1}toggleAll(){this._selectionType!==MI.None&&this._selectionType!==MI.Single&&(this.isAllSelected()?this._items.displayed.forEach(t=>{const e=this.current.indexOf(t);e>-1&&!1===this.isLocked(t)&&this.deselectItem(e)}):this._items.displayed.forEach(t=>{this.current.indexOf(t)<0&&!1===this.isLocked(t)&&this.selectItem(t)}),this.emitChange())}};return t.\u0275fac=function(e){return new(e||t)(Wt(CI),Wt(KE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),UI=(()=>{let t=class{constructor(){this._dynamic=!1}ngAfterViewInit(){this.rowView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.rowView.destroy()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["dg-wrapped-row"]],viewQuery:function(t,e){var n;1&t&&Tc(nw,!0),2&t&&Ec(n=Dc())&&(e.templateRef=n.first)},ngContentSelectors:Sv,decls:2,vars:0,consts:[["rowPortal",""]],template:function(t,e){1&t&&(mo(),qs(0,rw,1,0,"ng-template",null,0,Fc))},encapsulation:2}),t})(),BI=0,zI=(()=>{let t=class extends wC{constructor(){super(),this.expandableId="",this._replace=new Fl(!1),this._animate=new I,BI++,this.expandableId="clr-dg-expandable-row-"+BI}get expanded(){return this._expanded}set expanded(t){(t=!!t)!==this._expanded&&(this._expanded=t,this._animate.next(),this._expandChange.next(t))}loadingStateChange(t){super.loadingStateChange(t),t!==SS.LOADING&&this._animate.next()}get replace(){return this._replace.asObservable()}setReplace(t){this._replace.next(t)}get animate(){return this._animate.asObservable()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),HI=0,GI=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a,c,l){this.selection=t,this.rowActionService=e,this.globalExpandable=n,this.expand=r,this.detailService=i,this.displayMode=s,this.vcr=o,this.renderer=a,this.el=c,this.commonStrings=l,this.SELECTION_TYPE=MI,this.expandAnimationTrigger=!1,this._selected=!1,this.selectedChanged=new pc(!1),this.expandedChange=new pc(!1),this._detailOpenLabel="",this._detailCloseLabel="",this.subscriptions=[],this.displayCells=!1,HI++,this.id="clr-dg-row"+HI,this.radioId="clr-dg-row-rd"+HI,this.checkboxId="clr-dg-row-cb"+HI,this.expandableId=r.expandableId,this.subscriptions.push(xd(this.expand.replace,this.expand.expandChange).subscribe(([t,e])=>{t&&e?(this.replaced=!0,this.renderer.addClass(this.el.nativeElement,"datagrid-row-replaced")):(this.replaced=!1,this.renderer.removeClass(this.el.nativeElement,"datagrid-row-replaced"))}))}get selected(){return this.selection.selectionType===MI.None?this._selected:this.selection.isSelected(this.item)}set selected(t){this.selection.selectionType===MI.None?this._selected=t:this.selection.setSelected(this.item,t)}set clrDgSelectable(t){this.selection.lockItem(this.item,!1===t)}get clrDgSelectable(){return!this.selection.isLocked(this.item)}toggle(t=!this.selected){t!==this.selected&&(this.selected=t,this.selectedChanged.emit(t))}get expanded(){return this.expand.expanded}set expanded(t){this.expand.expanded=t}toggleExpand(){this.expand.expandable&&(this.expandAnimation.updateStartHeight(),this.expanded=!this.expanded,this.expandedChange.emit(this.expanded))}set clrDgDetailOpenLabel(t){this._detailOpenLabel=t}get clrDgDetailOpenLabel(){return this._detailOpenLabel?this._detailOpenLabel:this.commonStrings.keys.open}set clrDgDetailCloseLabel(t){this._detailCloseLabel=t}get clrDgDetailCloseLabel(){return this._detailCloseLabel?this._detailCloseLabel:this.commonStrings.keys.close}ngAfterContentInit(){this.dgCells.changes.subscribe(()=>{this.dgCells.forEach(t=>{t._view.destroyed||this._scrollableCells.insert(t._view)})})}ngAfterViewInit(){this.subscriptions.push(this.displayMode.view.subscribe(t=>{for(let e=this._scrollableCells.length;e>0;e--)this._scrollableCells.detach();for(let e=this._calculatedCells.length;e>0;e--)this._calculatedCells.detach();t===PI.CALCULATE?(this.displayCells=!1,this.dgCells.forEach(t=>{t._view.destroyed||this._calculatedCells.insert(t._view)})):(this.displayCells=!0,this.dgCells.forEach(t=>{t._view.destroyed||this._scrollableCells.insert(t._view)}))}),this.expand.animate.subscribe(()=>{this.expandAnimationTrigger=!this.expandAnimationTrigger}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngOnInit(){this.wrappedInjector=new sC(UI,this.vcr)}get _view(){return this.wrappedInjector.get(UI,this.vcr).rowView}};return t.\u0275fac=function(e){return new(e||t)(Qs(jI),Qs(hI),Qs(mI),Qs(zI),Qs(gI),Qs(LI),Qs(ja),Qs(ya),Qs(pa),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-row"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,RI,!1),2&t&&Ec(r=Dc())&&(e.dgCells=r)},viewQuery:function(t,e){var n;1&t&&(Tc(jE,!0),Tc(iw,!0),Tc(sw,!0,ja),Tc(ow,!0,ja),Tc(aw,!0,ja)),2&t&&(Ec(n=Dc())&&(e.expandAnimation=n.first),Ec(n=Dc())&&(e.detailButton=n.first),Ec(n=Dc())&&(e._stickyCells=n.first),Ec(n=Dc())&&(e._scrollableCells=n.first),Ec(n=Dc())&&(e._calculatedCells=n.first))},hostAttrs:["role","rowgroup"],hostVars:5,hostBindings:function(t,e){2&t&&(Gs("aria-owns",e.id),ko("datagrid-row",!0)("datagrid-selected",e.selected))},inputs:{selected:["clrDgSelected","selected"],clrDgSelectable:"clrDgSelectable",expanded:["clrDgExpanded","expanded"],clrDgDetailOpenLabel:"clrDgDetailOpenLabel",clrDgDetailCloseLabel:"clrDgDetailCloseLabel",item:["clrDgItem","item"]},outputs:{selectedChanged:"clrDgSelectedChange",expandedChange:"clrDgExpandedChange"},features:[la([zI,{provide:wC,useExisting:zI},{provide:_S,useExisting:zI}])],ngContentSelectors:Nw,decls:9,vars:3,consts:[["class","datagrid-row-clickable",4,"ngIf"],[3,"clrExpandTrigger",4,"ngIf"],[4,"ngIf"],["detail",""],["rowContent",""],["calculatedCells",""],[1,"datagrid-row-clickable"],[3,"clrExpandTrigger"],[3,"ngTemplateOutlet"],["role","row",1,"datagrid-row-master","datagrid-row-flex",3,"id"],[1,"datagrid-row-sticky"],["stickyCells",""],["class","datagrid-select datagrid-fixed-column datagrid-cell","role","gridcell",3,"ngClass",4,"ngIf"],["class","datagrid-row-actions datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-expandable-caret datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-detail-caret datagrid-fixed-column datagrid-cell",4,"ngIf"],[1,"datagrid-row-scrollable",3,"ngClass"],[1,"datagrid-scrolling-cells"],["scrollableCells",""],["role","gridcell",1,"datagrid-select","datagrid-fixed-column","datagrid-cell",3,"ngClass"],["clrCheckbox","","type","checkbox",3,"ngModel","id","ngModelChange"],["type","radio","clrRadio","",3,"id","name","value","ngModel","checked","ngModelChange"],["role","gridcell",1,"datagrid-row-actions","datagrid-fixed-column","datagrid-cell"],["role","gridcell",1,"datagrid-expandable-caret","datagrid-fixed-column","datagrid-cell"],["type","button","class","datagrid-expandable-caret-button",3,"click",4,"ngIf"],["clrSmall","",4,"ngIf"],["type","button",1,"datagrid-expandable-caret-button",3,"click"],["shape","caret",1,"datagrid-expandable-caret-icon"],["clrSmall",""],[1,"datagrid-detail-caret","datagrid-fixed-column","datagrid-cell"],["type","button","aria-haspopup","dialog",1,"datagrid-detail-caret-button",3,"click"],["detailButton",""],["shape","angle-double",1,"datagrid-detail-caret-icon"]],template:function(t,e){1&t&&(mo(Pw),qs(0,dw,3,2,"label",0),qs(1,fw,2,2,"clr-expandable-animation",1),qs(2,mw,1,1,void 0,2),qs(3,yw,1,0,"ng-template",null,3,Fc),qs(5,Rw,16,13,"ng-template",null,4,Fc),io(7,null,5)),2&t&&(Zs("ngIf",e.selection.rowSelectionMode),Vr(1),Zs("ngIf",!e.selection.rowSelectionMode&&e.expand.expandable),Vr(1),Zs("ngIf",!e.selection.rowSelectionMode&&!e.expand.expandable))},directives:[Rh,tC,jE,Vh,kh,Fm,hC,$m,Jy,ay,Vm,fE,nS,BE],encapsulation:2}),t})(),$I=(()=>{let t=class{constructor(t,e,n,r){this.filters=t,this.sort=e,this.page=n,this.debouncer=r,this.change=this.debouncer.change.pipe(M(()=>this.state))}get state(){const t={};this.page.size>0&&(t.page={from:this.page.firstItem,to:this.page.lastItem,size:this.page.size,current:this.page.current}),this.sort.comparator&&(t.sort=this.sort.comparator instanceof vI?{by:this.sort.comparator.prop,reverse:this.sort.reverse}:{by:this.sort.comparator,reverse:this.sort.reverse});const e=this.filters.getActiveFilters();if(e.length>0){t.filters=[];for(const n of e)t.filters.push(n.state?n.state:n)}return t}};return t.\u0275fac=function(e){return new(e||t)(Wt(KE),Wt(wI),Wt(YE),Wt(QE))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),qI=(()=>{let t=class{constructor(t){this.platformId=t}get tableRef(){return this._tableRef}set tableRef(t){this._tableRef=t}set table(t){Wh(this.platformId)&&t.nativeElement&&(this.tableRef=t.nativeElement.querySelector(".datagrid-table"))}getColumnDragHeight(){if(this.tableRef)return this.tableRef.clientHeight+"px"}};return t.\u0275fac=function(e){return new(e||t)(Wt(zc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var WI=function(t){return t[t.WIDTH=0]="WIDTH",t[t.HIDDEN=1]="HIDDEN",t}({});const QI=t=>WI[t],YI=t=>t===parseInt(t,10),KI=Object.keys(WI).map(QI).filter(YI);let ZI=(()=>{let t=class{constructor(){this.columns=[],this._cache=[]}cache(){this._cache=this.columns.map(t=>{const e=Object.assign({},t.value);return delete e.changes,e})}hasCache(){return!!this._cache.length}resetToLastCache(){this._cache.forEach((t,e)=>{this.columns[e].next(Object.assign(Object.assign({},t),{changes:KI}))}),this._cache=[]}get columnStates(){return this.columns.map(t=>t.value)}get hasHideableColumns(){return this.columnStates.filter(t=>t.hideable).length>0}emitStateChangeAt(t,e){this.columns[t]&&this.emitStateChange(this.columns[t],e)}emitStateChange(t,e){t.next(Object.assign(Object.assign({},t.value),e))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),XI=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a,c,l,u,h,d){this.organizer=t,this.items=e,this.expandableRows=n,this.selection=r,this.rowActionService=i,this.stateProvider=s,this.displayMode=o,this.renderer=a,this.detailService=c,this.el=u,this.page=h,this.commonStrings=d,this.SELECTION_TYPE=MI,this.refresh=new pc(!1),this.selectedChanged=new pc(!1),this.singleSelectedChanged=new pc(!1),this.clrDgSingleSelectionAriaLabel=this.commonStrings.keys.singleSelectionAriaLabel,this.clrDgSingleActionableAriaLabel=this.commonStrings.keys.singleActionableAriaLabel,this.clrDetailExpandableAriaLabel=this.commonStrings.keys.detailExpandableAriaLabel,this._subscriptions=[],this.detailService.id=l}get loading(){return this.items.loading}set loading(t){this.items.loading=t}dataChanged(){this.items.refresh()}set selected(t){this.selection.selectionType=t?MI.Multi:MI.None,this.selection.updateCurrent(t,!1)}set singleSelected(t){this.selection.selectionType=MI.Single,t?this.selection.currentSingle=t:this.selection.currentSingle&&(this.selection.currentSingle=null)}set clrDgPreserveSelection(t){this.selection.preserveSelection=t}set rowSelectionMode(t){this.selection.rowSelectionMode=t}get allSelected(){return this.selection.isAllSelected()}set allSelected(t){this.selection.toggleAll()}ngAfterContentInit(){this.items.smart||(this.items.all=this.rows.map(t=>t.item)),this._subscriptions.push(this.rows.changes.subscribe(()=>{this.items.smart||(this.items.all=this.rows.map(t=>t.item)),this.rows.forEach(t=>{this._displayedRows.insert(t._view)})}))}ngAfterViewInit(){this.refresh.emit(this.stateProvider.state),this._subscriptions.push(this.stateProvider.change.subscribe(t=>this.refresh.emit(t)),this.selection.change.subscribe(t=>{this.selection.selectionType===MI.Single?this.singleSelectedChanged.emit(t):this.selection.selectionType===MI.Multi&&this.selectedChanged.emit(t)}),this.page.change.subscribe(()=>{this.datagridTable.nativeElement.focus()}),this.displayMode.view.subscribe(t=>{for(let e=this._projectedDisplayColumns.length;e>0;e--)this._projectedDisplayColumns.detach();for(let e=this._projectedCalculationColumns.length;e>0;e--)this._projectedCalculationColumns.detach();for(let e=this._calculationRows.length;e>0;e--)this._calculationRows.detach();for(let e=this._displayedRows.length;e>0;e--)this._displayedRows.detach();t===PI.DISPLAY?(this.renderer.removeClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(t=>{this._projectedDisplayColumns.insert(t._view)}),this.rows.forEach(t=>{this._displayedRows.insert(t._view)})):(this.renderer.addClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(t=>{this._projectedCalculationColumns.insert(t._view)}),this.rows.forEach(t=>{this._calculationRows.insert(t._view)}))}))}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe())}resize(){this.organizer.resize()}};return t.\u0275fac=function(e){return new(e||t)(Qs(FI),Qs(CI),Qs(mI),Qs(jI),Qs(hI),Qs($I),Qs(LI),Qs(ya),Qs(gI),Qs(OS),Qs(pa),Qs(YE),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-datagrid"]],contentQueries:function(t,e,n){var r;1&t&&(kc(n,EI,!0),kc(n,II,!0),kc(n,SI,!1),kc(n,GI,!1)),2&t&&(Ec(r=Dc())&&(e.iterator=r.first),Ec(r=Dc())&&(e.placeholder=r.first),Ec(r=Dc())&&(e.columns=r),Ec(r=Dc())&&(e.rows=r))},viewQuery:function(t,e){var n;1&t&&(Tc(Fw,!0,ja),Tc(Lw,!0,pa),Tc(Mw,!0,ja),Tc(Vw,!0,ja),Tc(jw,!0,ja),Tc(Uw,!0,ja)),2&t&&(Ec(n=Dc())&&(e.scrollableColumns=n.first),Ec(n=Dc())&&(e.datagridTable=n.first),Ec(n=Dc())&&(e._projectedDisplayColumns=n.first),Ec(n=Dc())&&(e._projectedCalculationColumns=n.first),Ec(n=Dc())&&(e._displayedRows=n.first),Ec(n=Dc())&&(e._calculationRows=n.first))},hostVars:4,hostBindings:function(t,e){2&t&&ko("datagrid-host",!0)("datagrid-detail-open",e.detailService.isOpen)},inputs:{clrDgSingleSelectionAriaLabel:"clrDgSingleSelectionAriaLabel",clrDgSingleActionableAriaLabel:"clrDgSingleActionableAriaLabel",clrDetailExpandableAriaLabel:"clrDetailExpandableAriaLabel",loading:["clrDgLoading","loading"],selected:["clrDgSelected","selected"],singleSelected:["clrDgSingleSelected","singleSelected"],clrDgPreserveSelection:"clrDgPreserveSelection",rowSelectionMode:["clrDgRowSelection","rowSelectionMode"]},outputs:{refresh:"clrDgRefresh",selectedChanged:"clrDgSelectedChange",singleSelectedChanged:"clrDgSingleSelectedChange"},features:[la([jI,wI,KE,YE,CI,FI,hI,mI,QE,gI,RS,$I,qI,ZI,LI])],ngContentSelectors:Qw,decls:32,vars:7,consts:[[1,"datagrid-outer-wrapper"],[1,"datagrid-inner-wrapper"],[1,"datagrid"],["datagrid",""],[1,"datagrid-table-wrapper"],["role","grid","tabindex","-1",1,"datagrid-table"],["datagridTable",""],["role","rowgroup",1,"datagrid-header"],["role","row",1,"datagrid-row"],[1,"datagrid-row-master","datagrid-row-flex"],[1,"datagrid-row-sticky"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-row-actions datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-expandable-caret datagrid-fixed-column",4,"ngIf"],[1,"datagrid-row-scrollable"],["projectedDisplayColumns",""],["displayedRows",""],[4,"ngIf"],["class","datagrid-spinner",4,"ngIf"],[1,"datagrid-calculation-table"],[1,"datagrid-calculation-header"],["projectedCalculationColumns",""],["calculationRows",""],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column"],[1,"datagrid-column-title"],["clrCheckbox","","type","checkbox",3,"ngModel","ngModelChange"],[1,"datagrid-column-separator"],["role","columnheader",1,"datagrid-column","datagrid-row-actions","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-expandable-caret","datagrid-fixed-column"],[1,"datagrid-spinner"],["clrMedium",""]],template:function(t,e){1&t&&(mo(Ww),yo(0),Js(1,"div",0),Js(2,"div",1),Js(3,"div",2,3),Js(5,"div",4),Js(6,"div",5,6),Js(8,"div",7),Js(9,"div",8),Js(10,"div",9),Js(11,"div",10),qs(12,Bw,4,2,"div",11),qs(13,zw,2,1,"div",11),qs(14,Hw,2,1,"div",12),qs(15,Gw,2,1,"div",13),to(),Js(16,"div",14),io(17,null,15),to(),to(),to(),to(),io(19,null,16),yo(21,1),qs(22,$w,1,0,"clr-dg-placeholder",17),to(),to(),to(),yo(23,2),qs(24,qw,3,0,"div",18),to(),yo(25,3),to(),Js(26,"div",19),Js(27,"div",20),io(28,null,21),to(),io(30,null,22),to()),2&t&&(Vr(3),Gs("aria-hidden",!!e.detailService.isOpen||null),Vr(9),Zs("ngIf",e.selection.selectionType===e.SELECTION_TYPE.Multi),Vr(1),Zs("ngIf",e.selection.selectionType===e.SELECTION_TYPE.Single),Vr(1),Zs("ngIf",e.rowActionService.hasActionableRow),Vr(1),Zs("ngIf",e.expandableRows.hasExpandableRow||e.detailService.enabled),Vr(7),Zs("ngIf",!e.placeholder),Vr(2),Zs("ngIf",e.loading))},directives:[Rh,Fm,hC,$m,Jy,II,BE],encapsulation:2}),t})(),JI=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-dg-action-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-action-bar",!0)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),tT=0,eT=(()=>{let t=class{constructor(t,e,n,r,i,s){this.rowActionService=t,this.commonStrings=e,this.platformId=n,this.zone=r,this.smartToggleService=i,this.popoverId=s,this.subscriptions=[],this.smartPosition={axis:fS.HORIZONTAL,side:PS.AFTER,anchor:aS.CENTER,content:aS.CENTER},this._open=!1,this.openChange=new pc(!1),this.rowActionService.register(),this.subscriptions.push(this.smartToggleService.openChange.subscribe(t=>{this.open=t,t&&this.focusFirstButton()})),this.popoverId="clr-action-menu"+tT++}ngOnDestroy(){this.rowActionService.unregister(),this.subscriptions.forEach(t=>t.unsubscribe())}closeOverflowContent(t){this.smartToggleService.toggleWithEvent(t)}get open(){return this._open}focusFirstButton(){Wh(this.platformId)&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{const t=document.querySelector("button.action-item");t&&t.focus()})})}set open(t){const e=!!t;!!e!==this.open&&(this.smartToggleService.open=e,this.openChange.emit(e),this._open=e)}};return t.\u0275fac=function(e){return new(e||t)(Qs(hI),Qs(kS),Qs(zc),Qs(il),Qs(iS),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-action-overflow"]],inputs:{open:["clrDgActionOverflowOpen","open"]},outputs:{openChange:"clrDgActionOverflowOpenChange"},features:[la([RS,iS,sS,gS])],ngContentSelectors:Sv,decls:4,vars:8,consts:[["type","button","role","button","aria-haspopup","true","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"datagrid-action-toggle"],["anchor",""],["shape","ellipsis-vertical"],["class","datagrid-action-overflow","role","menu","clrFocusTrap","",3,"id","click",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","menu","clrFocusTrap","",1,"datagrid-action-overflow",3,"id","click"]],template:function(t,e){1&t&&(mo(),Js(0,"button",0,1),eo(2,"clr-icon",2),to(),qs(3,Yw,2,3,"div",3)),2&t&&(Gs("aria-controls",e.popoverId)("aria-expanded",e.open)("aria-label",e.commonStrings.keys.rowActions),Vr(2),Gs("title",e.commonStrings.keys.rowActions),Vr(1),Zs("clrPopoverContent",e.open)("clrPopoverContentAt",e.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},directives:[bS,yS,nS,mS,EC],encapsulation:2}),t})(),nT=(()=>{let t=class{constructor(t,e,n){this.el=t,this.domAdapter=e,this.organizer=n,this._resizedBy=0}get resizedBy(){return this._resizedBy}get minColumnWidth(){return this.domAdapter.minWidth(this.el.nativeElement)||96}get maxResizeRange(){return this.widthBeforeResize-this.minColumnWidth}startResize(){this._resizedBy=0,this.isWithinMaxResizeRange=!0,this.widthBeforeResize=this.domAdapter.clientRect(this.el.nativeElement).width}endResize(){this.organizer.resize()}get widthAfterResize(){return this.widthBeforeResize+this._resizedBy}calculateResize(t){const e=t.dragPosition.moveX;e<-this.maxResizeRange?(this._resizedBy=-this.maxResizeRange,this.isWithinMaxResizeRange=!1):(this._resizedBy=e,this.isWithinMaxResizeRange=!0)}};return t.\u0275fac=function(e){return new(e||t)(Wt(pa),Wt(xE),Wt(FI))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),rT=(()=>{let t=class{constructor(t,e,n,r,i){this.columnResizerService=t,this.renderer=e,this.tableSizeService=n,this.document=r,this.columnSeparatorId=i}showTracker(t){this.columnResizerService.startResize();const e=this.tableSizeService.getColumnDragHeight();this.renderer.setStyle(t,"height",e),this.renderer.setStyle(t,"display","block")}moveTracker(t,e){this.columnResizerService.calculateResize(t),this.renderer.setStyle(e,"transform",`translateX(${this.columnResizerService.resizedBy}px)`),this.renderer.setStyle(this.document.body,"cursor","col-resize"),this.redFlagTracker(e)}hideTracker(t){this.columnResizerService.endResize(),this.renderer.setStyle(t,"display","none"),this.renderer.setStyle(t,"transform","translateX(0px)"),this.renderer.setStyle(this.document.body,"cursor","auto")}redFlagTracker(t){let e;e!==this.columnResizerService.isWithinMaxResizeRange&&(e=this.columnResizerService.isWithinMaxResizeRange,e?this.renderer.removeClass(t,"exceeded-max"):this.renderer.addClass(t,"exceeded-max"))}};return t.\u0275fac=function(e){return new(e||t)(Qs(nT),Qs(ya),Qs(qI),Qs(Pu),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-column-separator"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-column-separator",!0)},features:[la([RS])],decls:3,vars:1,consts:[["aria-hidden","true","clrDraggable","",1,"datagrid-column-handle",3,"clrGroup","clrDragStart","clrDragMove","clrDragEnd"],[1,"datagrid-column-resize-tracker"],["resizeTrackerEl",""]],template:function(t,e){if(1&t){const t=so();Js(0,"div",0),co("clrDragStart",(function(){Qe(t);const n=Ws(2);return e.showTracker(n)}))("clrDragMove",(function(n){Qe(t);const r=Ws(2);return e.moveTracker(n,r)}))("clrDragEnd",(function(){Qe(t);const n=Ws(2);return e.hideTracker(n)})),to(),eo(1,"div",1,2)}2&t&&Zs("clrGroup",e.columnSeparatorId)},directives:[ME],encapsulation:2}),t})(),iT=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-dg-column-toggle-title"]],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),sT=(()=>{let t=class{constructor(t){this.columnsService=t,this.allSelected=new pc}get clrAllSelected(){return this.allSelected.asObservable()}hideableColumns(){return this.columnsService.columns.filter(t=>t.value.hideable)}get allHideablesVisible(){return 0===this.hideableColumns().filter(t=>t.value.hidden).length}selectAll(){this.hideableColumns().forEach(t=>this.columnsService.emitStateChange(t,{hidden:!1,changes:[WI.HIDDEN]})),this.allSelected.next(!0)}};return t.\u0275fac=function(e){return new(e||t)(Qs(ZI))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-column-toggle-button"]],outputs:{clrAllSelected:"clrAllSelected"},ngContentSelectors:Sv,decls:2,vars:1,consts:[["type","button",1,"btn","btn-sm","btn-link","switch-button",3,"disabled","click"]],template:function(t,e){1&t&&(mo(),Js(0,"button",0),co("click",(function(){return e.selectAll()})),yo(1),to()),2&t&&Zs("disabled",e.allHideablesVisible)},encapsulation:2}),t})(),oT=(()=>{let t=class{constructor(t,e,n,r,i,s){this.commonStrings=t,this.columnsService=e,this.columnSwitchId=n,this.platformId=r,this.zone=i,this.popoverId=s,this.smartPosition={axis:fS.VERTICAL,side:PS.BEFORE,anchor:aS.START,content:aS.START}}get allColumnsVisible(){return this._allColumnsVisible}set allColumnsVisible(t){this._allColumnsVisible=t}get hideableColumnStates(){return this.columnsService.columns.filter(t=>t.value.hideable).map(t=>t.value)}get hasOnlyOneVisibleColumn(){return 0==this.columnsService.columns.length-this.hideableColumnStates.length&&1===this.hideableColumnStates.filter(t=>!t.hidden).length}toggleColumnState(t,e){const n=this.columnsService.columns.filter(e=>e.value===t)[0];this.columnsService.emitStateChange(n,{hidden:e,changes:[WI.HIDDEN]})}toggleSwitchPanel(){this.openState=!this.openState,this.openState&&Wh(this.platformId)&&this.menuDescriptionElement&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.menuDescriptionElement.nativeElement.focus()})})}allColumnsSelected(){this.allSelectedElement.nativeElement.focus()}trackByFn(t){return t}};return t.\u0275fac=function(e){return new(e||t)(Qs(kS),Qs(ZI),Qs(OS),Qs(zc),Qs(il),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-column-toggle"]],contentQueries:function(t,e,n){var r;1&t&&(kc(n,iT,!0),kc(n,sT,!0)),2&t&&(Ec(r=Dc())&&(e.customToggleTitle=r.first),Ec(r=Dc())&&(e.customToggleButton=r.first))},viewQuery:function(t,e){var n;1&t&&(Tc(Kw,!0,pa),Tc(Zw,!0,pa)),2&t&&(Ec(n=Dc())&&(e.menuDescriptionElement=n.first),Ec(n=Dc())&&(e.allSelectedElement=n.first))},hostVars:4,hostBindings:function(t,e){2&t&&ko("column-switch-wrapper",!0)("active",e.openState)},features:[la([RS,sS,gS,iS])],ngContentSelectors:i_,decls:3,vars:7,consts:[["role","button","type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"btn","btn-sm","btn-link","column-toggle--action"],["shape","view-columns"],["class","column-switch","role","dialog","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","dialog","clrFocusTrap","",1,"column-switch",3,"id"],[1,"switch-header"],["tabindex","-1",1,"clr-sr-only"],["menuDescription",""],["allSelected",""],[4,"ngIf"],["clrPopoverCloseButton","","type","button",1,"btn","btn-sm","btn-link","toggle-switch-close-button"],["shape","close"],[1,"switch-content","list-unstyled"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"switch-footer"],[3,"clrAllSelected",4,"ngIf"],["clrCheckbox","","type","checkbox",3,"disabled","ngModel","ngModelChange"],[3,"ngTemplateOutlet"],[3,"clrAllSelected"]],template:function(t,e){1&t&&(mo(r_),Js(0,"button",0),eo(1,"clr-icon",1),to(),qs(2,n_,17,9,"div",2)),2&t&&(Gs("aria-controls",e.popoverId)("aria-owns",e.popoverId),Vr(1),Gs("title",e.commonStrings.keys.pickColumns),Vr(1),Zs("clrPopoverContent",e.openState)("clrPopoverContentAt",e.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},directives:function(){return[bS,yS,nS,mS,EC,Rh,vS,Oh,gT,uC,Fm,hC,$m,Jy,tC,Vh,sT]},encapsulation:2}),t})(),aT=(()=>{let t=class{constructor(t){this.expandableRowsCount=t,this.expandableRowsCount&&this.expandableRowsCount.register()}ngOnDestroy(){this.expandableRowsCount&&this.expandableRowsCount.unregister()}};return t.\u0275fac=function(e){return new(e||t)(Qs(mI,8))},t.\u0275dir=ye({type:t,selectors:[["","clrIfExpanded",""]]}),t})(),cT=(()=>{let t=class{constructor(t,e){this.detailService=t,this.commonStrings=e}get titleId(){return this.detailService.id+"-title"}};return t.\u0275fac=function(e){return new(e||t)(Qs(gI),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-detail-header"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-detail-header",!0)},ngContentSelectors:Sv,decls:5,vars:2,consts:[["clrFocusOnViewInit","",1,"datagrid-detail-header-title",3,"id"],[1,"datagrid-detail-pane-close"],["type","button",1,"btn","btn-link",3,"click"],["size","24","shape","times"]],template:function(t,e){1&t&&(mo(),Js(0,"div",0),yo(1),to(),Js(2,"div",1),Js(3,"button",2),co("click",(function(){return e.detailService.close()})),eo(4,"clr-icon",3),to(),to()),2&t&&(Zs("id",e.titleId),Vr(3),Gs("aria-label",e.commonStrings.keys.close))},directives:[$E,nS],encapsulation:2}),t})(),lT=(()=>{let t=class{constructor(t,e){this.detailService=t,this.commonStrings=e}closeCheck(){this.detailService.close()}};return t.\u0275fac=function(e){return new(e||t)(Qs(gI),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-detail"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,cT,!0),2&t&&Ec(r=Dc())&&(e.header=r.first)},hostVars:2,hostBindings:function(t,e){1&t&&co("keyup.esc",(function(){return e.closeCheck()}),!1,Un),2&t&&ko("datagrid-detail-pane",!0)},ngContentSelectors:Sv,decls:1,vars:1,consts:[["class","datagrid-detail-pane-content","role","dialog","aria-modal","true",3,"clrFocusTrap","id",4,"ngIf"],["role","dialog","aria-modal","true",1,"datagrid-detail-pane-content",3,"clrFocusTrap","id"],[1,"clr-sr-only"]],template:function(t,e){1&t&&(mo(),qs(0,o_,6,6,"div",0)),2&t&&Zs("ngIf",e.detailService.isOpen)},directives:[Rh,EC],encapsulation:2}),t})(),uT=(()=>{let t=class{constructor(t,e,n){this.templateRef=t,this.viewContainer=e,this.detailService=n,this.subscriptions=[],this.skip=!1,this.stateChange=new pc(null),this.detailService.enabled=!0}set state(t){this.skip||this.detailService.toggle(t),this.skip=!1}ngOnInit(){this.subscriptions.push(this.detailService.stateChange.subscribe(t=>{this.togglePanel(!0===t)}))}togglePanel(t){let e=null;this.viewContainer.clear(),!0===t&&(this.viewContainer.createEmbeddedView(this.templateRef,{$implicit:this.detailService.state}),this.skip=!0,e=this.detailService.state),this.stateChange.emit(e)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(Ma),Qs(ja),Qs(gI))},t.\u0275dir=ye({type:t,selectors:[["","clrIfDetail",""]],inputs:{state:["clrIfDetail","state"]},outputs:{stateChange:"clrIfDetailChange"}}),t})(),hT=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-dg-detail-body"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-detail-body",!0)},ngContentSelectors:Sv,decls:2,vars:0,consts:[[1,"clr-dg-detail-body-wrapper"]],template:function(t,e){1&t&&(mo(),Js(0,"div",0),yo(1),to())},encapsulation:2}),t})(),dT=(()=>{let t=class{constructor(t,e,n){this.selection=t,this.detailService=e,this.columnsService=n,this.SELECTION_TYPE=MI}get hasHideableColumns(){return this.columnsService.hasHideableColumns}};return t.\u0275fac=function(e){return new(e||t)(Qs(jI),Qs(gI),Qs(ZI))},t.\u0275cmp=he({type:t,selectors:[["clr-dg-footer"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,oT,!0),2&t&&Ec(r=Dc())&&(e.toggle=r.first)},hostVars:2,hostBindings:function(t,e){2&t&&ko("datagrid-footer",!0)},ngContentSelectors:h_,decls:3,vars:2,consts:[[4,"ngIf"],[1,"clr-form-control-disabled"],[1,"datagrid-footer-select"],["clrCheckbox","","type","checkbox","checked","checked","disabled",""],[1,"datagrid-footer-description"]],template:function(t,e){1&t&&(mo(u_),qs(0,a_,6,1,"ng-container",0),qs(1,l_,5,1,"ng-container",0),yo(2)),2&t&&(Zs("ngIf",e.selection.selectionType===e.SELECTION_TYPE.Multi&&e.selection.current.length>0),Vr(1),Zs("ngIf",!e.detailService.isOpen))},directives:[Rh,uC,hC,tC,oT],encapsulation:2}),t})();const pT=new Mt("COLUMN_STATE"),fT={provide:pT,useFactory:function(){return new Fl({changes:[]})}};let gT=(()=>{let t=class{constructor(t){this._items=t}set trackBy(t){this._items&&(this._items.trackBy=t)}};return t.\u0275fac=function(e){return new(e||t)(Qs(CI,8))},t.\u0275dir=ye({type:t,selectors:[["","ngForTrackBy",""]],inputs:{trackBy:["ngForTrackBy","trackBy"]}}),t})(),mT=(()=>{let t=class{constructor(t,e,n){this.el=t,this.renderer=e,this.subscriptions=[],this.subscriptions.push(n.filterRenderSteps(NI.CLEAR_WIDTHS).subscribe(()=>this.clearWidth()))}set columnState(t){this.stateSubscription&&this.stateSubscription.unsubscribe(),this.runAllChanges=KI,this.stateSubscription=t.subscribe(t=>this.stateChanges(t))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.stateSubscription&&this.stateSubscription.unsubscribe()}stateChanges(t){this.runAllChanges&&(t.changes=this.runAllChanges,delete this.runAllChanges),t.changes&&t.changes.length&&t.changes.forEach(e=>{switch(e){case WI.WIDTH:this.setWidth(t);break;case WI.HIDDEN:this.setHidden(t)}})}clearWidth(){this.renderer.removeClass(this.el.nativeElement,"datagrid-fixed-width"),this.renderer.setStyle(this.el.nativeElement,"width",null)}setWidth(t){t.strictWidth?this.renderer.addClass(this.el.nativeElement,"datagrid-fixed-width"):this.renderer.removeClass(this.el.nativeElement,"datagrid-fixed-width"),this.renderer.setStyle(this.el.nativeElement,"width",t.width+"px")}setHidden(t){t.hidden?this.renderer.addClass(this.el.nativeElement,"datagrid-hidden-column"):this.renderer.removeClass(this.el.nativeElement,"datagrid-hidden-column")}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(ya),Qs(FI))},t.\u0275dir=ye({type:t,selectors:[["clr-dg-cell"]]}),t})(),yT=(()=>{let t=class{constructor(t,e,n,r,i,s,o){this.el=t,this.renderer=e,this.organizer=n,this.domAdapter=r,this.columnResizerService=i,this.columnsService=s,this.columnState=o,this.resizeEmitter=new pc,this.widthSet=!1,this.autoSet=!1,this.subscriptions=[],this.subscriptions.push(this.organizer.filterRenderSteps(NI.CLEAR_WIDTHS).subscribe(()=>this.clearWidth())),this.subscriptions.push(o.subscribe(t=>this.stateChanges(t)))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}stateChanges(t){t.changes&&t.changes.length&&t.changes.forEach(e=>{switch(e){case WI.WIDTH:this.setWidth(t);break;case WI.HIDDEN:this.setHidden(t)}})}clearWidth(){this.widthSet&&!this.columnResizerService.resizedBy&&this.renderer.setStyle(this.el.nativeElement,"width",null),this.autoSet&&this.renderer.removeClass(this.el.nativeElement,"datagrid-fixed-width")}detectStrictWidth(){return this.columnResizerService.resizedBy?this.columnResizerService.widthAfterResize:this.autoSet?0:this.domAdapter.userDefinedWidth(this.el.nativeElement)}computeWidth(t){let e=t;return e||(e=this.domAdapter.scrollWidth(this.el.nativeElement)),e}getColumnWidthState(){const t=this.detectStrictWidth();return{width:this.computeWidth(t),strictWidth:t}}setColumnState(t){this.columnsService.columns[t]=this.columnState}setWidth(t){t.strictWidth?(this.columnResizerService.resizedBy&&(this.resizeEmitter.emit(t.width),this.renderer.setStyle(this.el.nativeElement,"width",t.width+"px"),this.widthSet=!1),this.renderer.addClass(this.el.nativeElement,"datagrid-fixed-width"),this.autoSet=!1):(this.renderer.removeClass(this.el.nativeElement,"datagrid-fixed-width"),this.renderer.setStyle(this.el.nativeElement,"width",t.width+"px"),this.widthSet=!0,this.autoSet=!0)}setHidden(t){t.hidden?this.renderer.addClass(this.el.nativeElement,"datagrid-hidden-column"):this.renderer.removeClass(this.el.nativeElement,"datagrid-hidden-column")}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(ya),Qs(FI),Qs(xE),Qs(nT),Qs(ZI),Qs(pT))},t.\u0275dir=ye({type:t,selectors:[["clr-dg-column"]],outputs:{resizeEmitter:"clrDgColumnResize"},features:[la([nT,fT])]}),t})(),vT=(()=>{let t=class{userDefinedWidth(t){return 0}scrollBarWidth(t){return 0}scrollWidth(t){return 0}computedHeight(t){return 0}clientRect(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}minWidth(t){return 0}focus(t){}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),bT=(()=>{let t=class{constructor(t){this.columnsService=t,this.subscriptions=[]}ngAfterContentInit(){this.setColumnState(),this.subscriptions.push(this.cells.changes.subscribe(()=>{this.setColumnState()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}setColumnState(){this.cells.length===this.columnsService.columns.length&&this.cells.forEach((t,e)=>{this.columnsService.columns[e]&&(t.columnState=this.columnsService.columns[e])})}};return t.\u0275fac=function(e){return new(e||t)(Qs(ZI))},t.\u0275dir=ye({type:t,selectors:[["clr-dg-row"],["clr-dg-row-detail"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,mT,!1),2&t&&Ec(r=Dc())&&(e.cells=r)}}),t})();const wT=t=>Wh(t)?new xE:new vT;let _T=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a,c){this.organizer=t,this.items=e,this.page=n,this.domAdapter=r,this.el=i,this.renderer=s,this.detailService=o,this.tableSizeService=a,this.columnsService=c,this._heightSet=!1,this.subscriptions=[],this.columnsSizesStable=!1,this.shouldStabilizeColumns=!0,this.subscriptions.push(this.organizer.filterRenderSteps(NI.COMPUTE_COLUMN_WIDTHS).subscribe(()=>this.computeHeadersWidth())),this.subscriptions.push(this.page.sizeChange.subscribe(()=>{this._heightSet&&this.resetDatagridHeight()})),this.subscriptions.push(this.detailService.stateChange.subscribe(t=>this.toggleDetailPane(t))),this.subscriptions.push(this.items.change.subscribe(()=>this.shouldStabilizeColumns=!0))}ngAfterContentInit(){this.setupColumns(),this.subscriptions.push(this.headers.changes.subscribe(()=>{this.setupColumns(),this.columnsSizesStable=!1,this.stabilizeColumns()}))}ngAfterViewInit(){this.tableSizeService.table=this.el}ngAfterViewChecked(){this.shouldStabilizeColumns&&this.stabilizeColumns(),this.shouldComputeHeight()&&setTimeout(()=>{this.computeDatagridHeight()})}setupColumns(){this.headers.forEach((t,e)=>t.setColumnState(e)),this.columnsService.columns.splice(this.headers.length),this.rows.forEach(t=>t.setColumnState())}shouldComputeHeight(){return!this._heightSet&&this.page.size>0&&this.items.displayed.length===this.page.size}toggleDetailPane(t){this.headers&&(t&&!this.columnsService.hasCache()?(this.columnsService.cache(),this.headers.forEach((e,n)=>{n>0&&this.columnsService.emitStateChangeAt(n,{changes:[WI.HIDDEN],hidden:t})})):t||this.columnsService.resetToLastCache())}computeDatagridHeight(){const t=this.domAdapter.clientRect(this.el.nativeElement).height;this.renderer.setStyle(this.el.nativeElement,"height",t+"px"),this._heightSet=!0}resetDatagridHeight(){this.renderer.setStyle(this.el.nativeElement,"height",""),this._heightSet=!1}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}computeHeadersWidth(){const t=this.headers.length;let e=!0;this.headers.forEach((n,r)=>{const i=Object.assign({changes:[WI.WIDTH]},n.getColumnWidthState());i.strictWidth||(e=!1),t===r+1&&e&&(i.strictWidth=0),this.columnsService.emitStateChangeAt(r,i)})}stabilizeColumns(){this.shouldStabilizeColumns=!1,this.columnsSizesStable||this.items.displayed.length>0&&(this.organizer.resize(),this.columnsSizesStable=!0)}};return t.\u0275fac=function(e){return new(e||t)(Qs(FI),Qs(CI),Qs(YE),Qs(xE),Qs(pa),Qs(ya),Qs(gI),Qs(qI),Qs(ZI))},t.\u0275dir=ye({type:t,selectors:[["clr-datagrid"]],contentQueries:function(t,e,n){var r;1&t&&(kc(n,yT,!1),kc(n,bT,!0)),2&t&&(Ec(r=Dc())&&(e.headers=r),Ec(r=Dc())&&(e.rows=r))},features:[la([{provide:xE,useFactory:wT,deps:[zc]}])]}),t})(),ST=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,EE,yv,IE,SC,TE,UE,VE,zE,wS,IC,qE]]}),t})(),CT=(()=>{let t=class{constructor(t,e,n){this.parent=t,this.uniqueId=e,this.commonStrings=n,this.expanded=!1,this.expandedChange=new pc(!1),this.expandable=!1,this.focused=!1,this._changedChildren=0,this._fullyInitialized=!1,this._changed=!1,t&&t.addChild()}get getChangedValue(){return this._changed||this._changedChildren>0&&!this.expanded}set setChangedValue(t){this._changed=t,this.parent&&this._fullyInitialized&&(t?this.parent._changedChildren++:this.parent._changedChildren--)}ngOnInit(){this._fullyInitialized=!0}addChild(){this.expandable=!0}toggleExpand(){this.expandable&&(this.expanded=!this.expanded,this.expandedChange.emit(this.expanded))}get caretDirection(){return this.expanded?"down":"right"}get caretTitle(){return this.expanded?this.commonStrings.keys.collapse:this.commonStrings.keys.expand}get role(){return this.expandable?"button":null}get tabIndex(){return this.expandable?"0":null}get onStackLabelFocus(){return this.expandable&&!this.expanded&&this.focused}get ariaExpanded(){return this.expandable?this.expanded?"true":"false":null}getStackChildrenId(){return this.expanded?"clr-stack-children-"+this.uniqueId:null}};return t.\u0275fac=function(e){return new(e||t)(Qs(t,12),Qs(OS),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-stack-block"]],hostVars:10,hostBindings:function(t,e){2&t&&ko("stack-block",!0)("stack-block-expanded",e.expanded)("stack-block-expandable",e.expandable)("stack-block-changed",e.getChangedValue)("on-focus",e.onStackLabelFocus)},inputs:{expanded:["clrSbExpanded","expanded"],expandable:["clrSbExpandable","expandable"],setChangedValue:["clrSbNotifyChange","setChangedValue"],ariaLevel:["clrStackViewLevel","ariaLevel"],ariaSetsize:["clrStackViewSetsize","ariaSetsize"],ariaPosinset:["clrStackViewPosinset","ariaPosinset"]},outputs:{expandedChange:"clrSbExpandedChange"},features:[la([RS])],ngContentSelectors:g_,decls:10,vars:14,consts:[[1,"stack-block-label",3,"id","click","keyup.enter","keyup.space","focus","blur"],["shape","caret","class","stack-block-caret",4,"ngIf"],["class","clr-sr-only",4,"ngIf"],[1,"stack-view-key"],[1,"stack-block-content"],[1,"stack-children",3,"clrExpandTrigger"],["role","region"],["shape","caret",1,"stack-block-caret"],[1,"clr-sr-only"]],template:function(t,e){1&t&&(mo(f_),Js(0,"div",0),co("click",(function(){return e.toggleExpand()}))("keyup.enter",(function(){return e.toggleExpand()}))("keyup.space",(function(){return e.toggleExpand()}))("focus",(function(){return e.focused=!0}))("blur",(function(){return e.focused=!1})),qs(1,d_,1,2,"clr-icon",1),qs(2,p_,2,1,"span",2),Js(3,"div",3),yo(4),to(),Js(5,"div",4),yo(6,1),to(),to(),Js(7,"clr-expandable-animation",5),Js(8,"div",6),yo(9,2),to(),to()),2&t&&(Zs("id",e.uniqueId),Gs("role",e.role)("tabindex",e.tabIndex)("aria-expanded",e.ariaExpanded)("aria-controls",e.getStackChildrenId())("aria-posinset",e.ariaPosinset)("aria-level",e.ariaLevel)("aria-setsize",e.ariaSetsize),Vr(1),Zs("ngIf",e.expandable),Vr(1),Zs("ngIf",e.getChangedValue),Vr(5),Zs("clrExpandTrigger",e.expanded),Gs("id",e.getStackChildrenId()),Vr(1),xo("height",e.expanded?"auto":0))},directives:[Rh,jE,nS],styles:["[_nghost-%COMP%] {\n        display: block;\n      }"]}),t})(),ET=(()=>{let t=class{constructor(){this.editable=!1,this.save=new pc(!1),this._editMode=!1,this.editingChange=new pc(!1)}get editing(){return this.editable&&this._editMode}set editing(t){this.editable&&(this._editMode=t,this.editingChange.emit(t),t||this.save.emit(null))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-stack-view"]],outputs:{save:"clrStackSave"},ngContentSelectors:y_,decls:3,vars:0,consts:[[1,"stack-view"]],template:function(t,e){1&t&&(mo(m_),yo(0),Js(1,"div",0),yo(2,1),to())},styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),IT=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["clr-stack-label"],["clr-stack-content"]]}),t})(),TT=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,yv,rS,UE]]}),t})();var xT=function(t){return t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Backspace="Backspace",t.Tab="TAB",t.Enter="Enter",t.Escape="Escape",t.Space="Space",t.Home="Home",t.End="End",t}({}),kT=function(t){return t.ArrowUp="Up",t.ArrowDown="Down",t.ArrowRight="Right",t.ArrowLeft="Left",t.Space="Spacebar",t.Escape="Esc",t.Home="Home",t.End="End",t.Enter="Enter",t.Tab="Tab",t}({});function AT(t){return t===xT.ArrowUp||t===kT.ArrowUp?xT.ArrowUp:t===xT.ArrowDown||t===kT.ArrowDown?xT.ArrowDown:t===xT.ArrowRight||t===kT.ArrowRight?xT.ArrowRight:t===xT.ArrowLeft||t===kT.ArrowLeft?xT.ArrowLeft:t===xT.Space||t===kT.Space?xT.Space:t===xT.Escape||t===kT.Escape?xT.Escape:t}function OT(t){const e=AT(t.key);e!==xT.ArrowUp&&e!==xT.ArrowDown&&e!==xT.ArrowLeft&&e!==xT.ArrowRight||t.preventDefault()}function DT(t){return void 0===t.code?kT:xT}var RT=function(t){return t[t.UNSELECTED=0]="UNSELECTED",t[t.SELECTED=1]="SELECTED",t[t.INDETERMINATE=2]="INDETERMINATE",t}({});class PT extends class{constructor(){this.selected=new Fl(RT.UNSELECTED),this.loading=!1}destroy(){this.selected.complete()}setSelected(t,e,n){t!==this.selected.value&&(this.selected.next(t),n&&t!==RT.INDETERMINATE&&this.children&&this.children.forEach(e=>e.setSelected(t,!1,!0)),e&&this.parent&&this.parent._updateSelectionFromChildren())}toggleSelection(t){this.setSelected(this.selected.value===RT.SELECTED?RT.UNSELECTED:RT.SELECTED,!0,t)}computeSelectionStateFromChildren(){let t=!1,e=!1;for(const n of this.children)switch(n.selected.value){case RT.INDETERMINATE:return RT.INDETERMINATE;case RT.SELECTED:if(t=!0,e)return RT.INDETERMINATE;break;case RT.UNSELECTED:default:if(e=!0,t)return RT.INDETERMINATE}return t?e?void 0:RT.SELECTED:RT.UNSELECTED}_updateSelectionFromChildren(){const t=this.computeSelectionStateFromChildren();t!==this.selected.value&&(this.selected.next(t),this.parent&&this.parent._updateSelectionFromChildren())}}{constructor(t){super(),this.parent=t,t&&t._addChild(this),this.children=[]}_addChild(t){this.children.push(t)}_removeChild(t){const e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)}destroy(){this.parent&&this.parent._removeChild(this),super.destroy()}}let NT=(()=>{let t=class{constructor(){this.selectable=!1,this.eager=!0,this.childrenFetched=new I}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const FT={provide:NT,useFactory:function(t){return t||new NT},deps:[[new rt,new st,NT]]};let LT=(()=>{let t=class{constructor(){this._focusRequest=new I,this._focusChange=new I}get focusRequest(){return this._focusRequest.asObservable()}get focusChange(){return this._focusChange.asObservable()}findSiblings(t){return t.parent?t.parent.children:this.rootNodeModels}findLastVisibleInNode(t){if(t){if(t.expanded&&t.children.length>0){const e=t.children;return this.findLastVisibleInNode(e[e.length-1])}return t}}findNextFocusable(t){if(!t)return;const e=this.findSiblings(t),n=e.indexOf(t);return n<e.length-1?e[n+1]:n===e.length-1?this.findNextFocusable(t.parent):void 0}findLastVisibleInTree(){return this.findLastVisibleInNode(this.rootNodeModels&&this.rootNodeModels.length&&this.rootNodeModels[this.rootNodeModels.length-1])}findNodeAbove(t){if(!t)return;const e=this.findSiblings(t),n=e.indexOf(t);return 0===n?t.parent:n>0?this.findLastVisibleInNode(e[n-1]):void 0}findNodeBelow(t){if(t)return t.expanded&&t.children.length>0?t.children[0]:this.findNextFocusable(t)}focusNode(t){t&&this._focusRequest.next(t.nodeId)}broadcastFocusedNode(t){this.focusedNodeId!==t&&(this.focusedNodeId=t,this._focusChange.next(t))}focusParent(t){t&&this.focusNode(t.parent)}focusFirstVisibleNode(){this.focusNode(this.rootNodeModels&&this.rootNodeModels[0])}focusLastVisibleNode(){this.focusNode(this.findLastVisibleInTree())}focusNodeAbove(t){this.focusNode(this.findNodeAbove(t))}focusNodeBelow(t){this.focusNode(this.findNodeBelow(t))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),MT=(()=>{let t=class{constructor(t){this.el=t}activate(){this.el.nativeElement&&this.el.nativeElement.click&&this.el.nativeElement.click()}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa))},t.\u0275dir=ye({type:t,selectors:[["",8,"clr-treenode-link"]]}),t})(),VT=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a){this.nodeId=t,this.platformId=e,this.featuresService=r,this.expandService=i,this.commonStrings=s,this.focusManager=o,this.STATES=RT,this.skipEmitChange=!1,this.selectedChange=new pc(!1),this.expandedChange=new pc,this.subscriptions=[],this.contentContainerTabindex=-1,this._model=this.featuresService.recursion?a.view?a.view.context.clrModel:a._lView[8].clrModel:new PT(n?n._model:null),this._model.nodeId=this.nodeId}isExpandable(){return void 0!==this.expandable?this.expandable:!!this.expandService.expandable||this._model.children&&this._model.children.length>0}get selected(){return this._model.selected.value}set selected(t){this.featuresService.selectable=!0,null==t&&(t=RT.UNSELECTED),"boolean"==typeof t&&(t=t?RT.SELECTED:RT.UNSELECTED),this.skipEmitChange=!0,this._model.setSelected(t,this.featuresService.eager,this.featuresService.eager),this.skipEmitChange=!1}get ariaSelected(){return this.featuresService.selectable?this._model.selected.value===RT.SELECTED:null}get expanded(){return this.expandService.expanded}set expanded(t){this.expandService.expanded=t}ngOnInit(){this._model.expanded=this.expanded,this.subscriptions.push(this._model.selected.pipe($l(()=>!this.skipEmitChange)).subscribe(t=>{this.selectedChange.emit(t)})),this.subscriptions.push(this.expandService.expandChange.subscribe(t=>{this.expandedChange.emit(t),this._model.expanded=t})),this.subscriptions.push(this.focusManager.focusRequest.subscribe(t=>{this.nodeId===t&&this.focusTreeNode()}),this.focusManager.focusChange.subscribe(t=>{this.checkTabIndex(t)}))}ngOnDestroy(){this._model.destroy(),this.subscriptions.forEach(t=>t.unsubscribe())}get treeNodeLink(){return this.treeNodeLinkList&&this.treeNodeLinkList.first}setTabIndex(t){this.contentContainerTabindex=t,this.contentContainer.nativeElement.setAttribute("tabindex",t)}checkTabIndex(t){Wh(this.platformId)&&this.nodeId!==t&&-1!==this.contentContainerTabindex&&this.setTabIndex(-1)}focusTreeNode(){Wh(this.platformId)&&document.activeElement!==this.contentContainer.nativeElement&&(this.setTabIndex(0),this.contentContainer.nativeElement.focus())}broadcastFocusOnContainer(){this.focusManager.broadcastFocusedNode(this.nodeId)}onKeyDown(t){switch(OT(t),AT(t.key)){case xT.ArrowUp:this.focusManager.focusNodeAbove(this._model);break;case xT.ArrowDown:this.focusManager.focusNodeBelow(this._model);break;case xT.ArrowRight:this.expandOrFocusFirstChild();break;case xT.ArrowLeft:this.collapseOrFocusParent();break;case xT.Home:this.focusManager.focusFirstVisibleNode();break;case xT.End:this.focusManager.focusLastVisibleNode();break;case xT.Enter:this.triggerDefaultAction();break;case xT.Space:t.preventDefault(),this.triggerDefaultAction()}}expandOrFocusFirstChild(){this.expanded?this._model.children.length>0&&this.focusManager.focusNodeBelow(this._model):this.isExpandable()&&(this.expandService.expanded=!0)}collapseOrFocusParent(){this.expanded?this.expandService.expanded=!1:this.focusManager.focusParent(this._model)}triggerDefaultAction(){this.treeNodeLink?this.treeNodeLink.activate():this.featuresService.selectable&&this._model.toggleSelection(this.featuresService.eager)}};return t.\u0275fac=function(e){return new(e||t)(Qs(OS),Qs(zc),Qs(t,12),Qs(NT),Qs(wC),Qs(kS),Qs(LT),Qs(As))},t.\u0275cmp=he({type:t,selectors:[["clr-tree-node"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,MT,!1),2&t&&Ec(r=Dc())&&(e.treeNodeLinkList=r)},viewQuery:function(t,e){var n;1&t&&Ic(v_,!0,pa),2&t&&Ec(n=Dc())&&(e.contentContainer=n.first)},hostVars:3,hostBindings:function(t,e){2&t&&(Gs("role","treeitem"),ko("clr-tree-node",!0))},inputs:{selected:["clrSelected","selected"],expanded:["clrExpanded","expanded"],expandable:["clrExpandable","expandable"]},outputs:{selectedChange:"clrSelectedChange",expandedChange:"clrExpandedChange"},features:[la([RS,FT,wC,{provide:_S,useExisting:wC}])],ngContentSelectors:T_,decls:12,vars:9,consts:[["role","treeitem","tabindex","-1",1,"clr-tree-node-content-container",3,"keydown","focus"],["contentContainer",""],["aria-hidden","true","type","button","tabindex","-1","class","clr-treenode-caret",3,"click","focus",4,"ngIf"],["class","clr-treenode-spinner-container",4,"ngIf"],["class","clr-checkbox-wrapper clr-treenode-checkbox",4,"ngIf"],[1,"clr-treenode-content",3,"mousedown"],["class","clr-sr-only",4,"ngIf"],[1,"clr-treenode-children"],[3,"parent"],["aria-hidden","true","type","button","tabindex","-1",1,"clr-treenode-caret",3,"click","focus"],["shape","caret",1,"clr-treenode-caret-icon"],[1,"clr-treenode-spinner-container"],[1,"clr-treenode-spinner","spinner"],[1,"clr-checkbox-wrapper","clr-treenode-checkbox"],["aria-hidden","true","type","checkbox","tabindex","-1",1,"clr-checkbox",3,"id","checked","indeterminate","change","focus"],[1,"clr-control-label",3,"for"],[1,"clr-sr-only"],[4,"ngIf"]],template:function(t,e){1&t&&(mo(I_),Js(0,"div",0,1),co("keydown",(function(t){return e.onKeyDown(t)}))("focus",(function(){return e.broadcastFocusOnContainer()})),qs(2,b_,2,1,"button",2),qs(3,w_,2,0,"div",3),qs(4,__,3,4,"div",4),Js(5,"div",5),co("mousedown",(function(){return e.focusTreeNode()})),yo(6),qs(7,E_,3,2,"div",6),to(),to(),Js(8,"div",7),yo(9,1),yo(10,2),eo(11,"clr-recursive-children",8),to()),2&t&&(Gs("aria-expanded",e.isExpandable()?e.expanded:null)("aria-selected",e.ariaSelected),Vr(2),Zs("ngIf",e.isExpandable()&&!e._model.loading&&!e.expandService.loading),Vr(1),Zs("ngIf",e.expandService.loading||e._model.loading),Vr(1),Zs("ngIf",e.featuresService.selectable),Vr(3),Zs("ngIf",e.featuresService.selectable),Vr(1),Zs("@toggleChildrenAnim",e.expandService.expanded?"expanded":"collapsed"),Gs("role",e.isExpandable()&&!e.featuresService.recursion?"group":null),Vr(3),Zs("parent",e._model))},directives:function(){return[Rh,UT,nS]},encapsulation:2,data:{animation:[Sm("toggleChildrenAnim",[km("collapsed => expanded",[Im({height:0}),Cm(200,Im({height:"*"}))]),km("expanded => collapsed",[Im({height:"*"}),Cm(200,Im({height:0}))]),Tm("expanded",Im({height:"*","overflow-y":"visible"})),Tm("collapsed",Im({height:0}))])]}}),t})(),jT=(()=>{let t=class{constructor(t,e,n){this.featuresService=t,this.focusManagerService=e,this.el=n,this.subscriptions=[],this.tabindex=0}set lazy(t){this.featuresService.eager=!t}get isMultiSelectable(){return this.featuresService.selectable&&this.rootNodes.length>0}onFocusIn(t){t.target===this.el.nativeElement&&(this.focusManagerService.focusFirstVisibleNode(),delete this.tabindex)}ngAfterContentInit(){this.setRootNodes(),this.subscriptions.push(this.rootNodes.changes.subscribe(()=>{this.setRootNodes()}))}setRootNodes(){this.focusManagerService.rootNodeModels=this.rootNodes.map(t=>t._model).filter(t=>!t.parent)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(NT),Qs(LT),Qs(pa))},t.\u0275cmp=he({type:t,selectors:[["clr-tree"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,VT,!1),2&t&&Ec(r=Dc())&&(e.rootNodes=r)},hostVars:3,hostBindings:function(t,e){1&t&&co("focusin",(function(t){return e.onFocusIn(t)})),2&t&&Gs("tabindex",e.tabindex)("role","tree")("aria-multiselectable",e.isMultiSelectable)},inputs:{lazy:["clrLazy","lazy"]},features:[la([FT,LT])],ngContentSelectors:Sv,decls:2,vars:1,consts:[[3,"children",4,"ngIf"],[3,"children"]],template:function(t,e){1&t&&(mo(),yo(0),qs(1,x_,1,1,"clr-recursive-children",0)),2&t&&(Vr(1),Zs("ngIf",e.featuresService.recursion))},directives:function(){return[Rh,UT]},encapsulation:2}),t})(),UT=(()=>{let t=class{constructor(t,e){this.featuresService=t,this.expandService=e,e&&(this.subscription=this.expandService.expandChange.subscribe(t=>{!t&&this.parent&&!this.featuresService.eager&&this.featuresService.recursion&&this.parent.clearChildren()}))}shouldRender(){return this.featuresService.recursion&&(this.featuresService.eager||!this.expandService||this.expandService.expanded)}getContext(t){return{$implicit:t.model,clrModel:t}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(Qs(NT),Qs(wC,8))},t.\u0275cmp=he({type:t,selectors:[["clr-recursive-children"]],hostVars:1,hostBindings:function(t,e){2&t&&Gs("role","group")},inputs:{parent:"parent",children:"children"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&qs(0,O_,2,1,"ng-container",0),2&t&&Zs("ngIf",e.shouldRender())},directives:[Rh,Oh,Vh],encapsulation:2}),t})(),BT=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,IE]]}),t})(),zT=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[ST,TT,BT]}),t})();class HT{}function GT(t){return[RS,t,{provide:HT,useExisting:t}]}var $T=function(t){return t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t}({});let qT=(()=>{let t=class{constructor(t){this.renderer=t,this._unlistenFuncs=[]}get current(){return this._current}reset(t){this._current=t}listenToArrowKeys(t){this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowup",t=>!this.move($T.UP))),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowdown",t=>!this.move($T.DOWN))),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowleft",t=>!this.move($T.LEFT))),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowright",t=>!this.move($T.RIGHT)))}registerContainer(t){this.renderer.setAttribute(t,"tabindex","0"),this.listenToArrowKeys(t),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.enter",()=>!this.activateCurrent()))}moveTo(t){void 0!==t&&(this.current&&this.current.blur(),t.focus(),this._current=t)}move(t){let e=!1;if(this.current){const r=this.current[t];r&&(n=r,n&&(n instanceof w||"function"==typeof n.lift&&"function"==typeof n.subscribe)?r:Bl(r)).subscribe(t=>{t&&(this.moveTo(t),e=!0)})}var n;return e}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(t=>t())}};return t.\u0275fac=function(e){return new(e||t)(Wt(ya))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const WT={provide:qT,useFactory:function(t,e){return t||new qT(e)},deps:[[new rt,new st,qT],ya]};class QT{static linkParent(t,e,n){t.forEach(t=>t[n]=e)}static linkVertical(t,e=!0){t.forEach((e,n)=>{n>0&&(e.up=t[n-1]),n<t.length-1&&(e.down=t[n+1])}),e&&t.length>1&&(t[0].up=t[t.length-1],t[t.length-1].down=t[0])}}function YT(t,e,n){return w.create(r=>{e(r);const i=t.subscribe(r);return()=>{i.unsubscribe(),n&&n(r)}})}let KT=(()=>{let t=class{constructor(t,e,n,r,i,s){this.id=t,this.renderer=e,this.parent=n,this.toggleService=r,this.focusService=i,this.platformId=s,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){this.toggleService.openChange.subscribe(t=>{t&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?$T.RIGHT:$T.DOWN)})})}handleRootFocus(){this.toggleService.openChange.subscribe(t=>{t||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=t})}get trigger(){return this._trigger}set trigger(t){this._trigger=t,this.parent?this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowright",t=>this.toggleService.toggleWithEvent(t))):(this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowup",t=>this.toggleService.toggleWithEvent(t))),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.arrowdown",t=>this.toggleService.toggleWithEvent(t))),this.focusService.listenToArrowKeys(t))}get container(){return this._container}set container(t){this._container=t,this._unlistenFuncs.push(this.renderer.listen(t,"keydown.tab",t=>this.toggleService.toggleWithEvent(t))),this.parent?this._unlistenFuncs.push(this.renderer.listen(t,"keydown.esc",t=>{this.focusService.move($T.LEFT),t.stopPropagation()})):(this.focusService.registerContainer(t),this._unlistenFuncs.push(this.renderer.listen(t,"keydown.esc",t=>this.toggleService.toggleWithEvent(t))),this._unlistenFuncs.push(this.renderer.listen(t,"blur",e=>{this.children.pipe(gd(1)).subscribe(t=>t.forEach(t=>t.blur()));const n=e.relatedTarget||document.activeElement;n&&Wh(this.platformId)&&(t.contains(n)||n===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&Wh(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&Wh(this.platformId)&&this.trigger.blur()}activate(){Wh(this.platformId)&&this.trigger.click()}openAndGetChildren(){return YT(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return YT(Bl(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new Fg(1),this.parent?this.right=this.openAndGetChildren().pipe(M(t=>t[0])):(this.down=this.openAndGetChildren().pipe(M(t=>t[0])),this.up=this.openAndGetChildren().pipe(M(t=>t[t.length-1])))}addChildren(t){QT.linkVertical(t),this.parent&&QT.linkParent(t,this.closeAndGetThis(),$T.LEFT),this.children.next(t)}ngOnDestroy(){this._unlistenFuncs.forEach(t=>t()),this.focusService.detachListeners()}};return t.\u0275fac=function(e){return new(e||t)(Wt(OS),Wt(ya),Wt(t,12),Wt(iS),Wt(qT),Wt(zc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const ZT=GT(KT);let XT=(()=>{let t=class{constructor(){this._changes=new I}get changes(){return this._changes.asObservable()}closeMenus(){this._changes.next(!1)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const JT={provide:XT,useFactory:function(t){return t||new XT},deps:[[new rt,new st,XT]]};let tx=(()=>{let t=class{constructor(t,e,n,r){this.parent=t,this.toggleService=e,this.cdr=n,this.subscriptions=[],this.isMenuClosable=!0,this.subscriptions.push(r.changes.subscribe(t=>this.toggleService.open=t)),this.subscriptions.push(e.openChange.subscribe(t=>this.cdr.markForCheck()))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(t,12),Qs(iS),Qs(ds),Qs(XT))},t.\u0275cmp=he({type:t,selectors:[["clr-dropdown"]],hostVars:4,hostBindings:function(t,e){2&t&&ko("dropdown",!0)("open",e.toggleService.open)},inputs:{isMenuClosable:["clrCloseMenuOnItemClick","isMenuClosable"]},features:[la([JT,{provide:TI,useExisting:pa},WT,iS,ZT])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})();const ex=[RS,{provide:HT,useClass:(()=>{let t=class{constructor(t,e,n,r){this.id=t,this.el=e,this.renderer=n,this.platformId=r,this.disabled=!1,n.setAttribute(e.nativeElement,"id",t),n.setAttribute(e.nativeElement,"tabindex","-1")}focus(){Wh(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","0"),this.el.nativeElement.focus())}blur(){Wh(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.blur())}activate(){Wh(this.platformId)&&this.el.nativeElement.click()}};return t.\u0275fac=function(e){return new(e||t)(Wt(OS),Wt(pa),Wt(ya),Wt(zc))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})()}];let nx=(()=>{let t=class{constructor(t,e,n,r,i){this.dropdown=t,this.el=e,this._dropdownService=n,this.renderer=r,this.focusableItem=i,this.setByDeprecatedDisabled=!1}set disabled(t){this.focusableItem.disabled=!!t||""===t}get disabled(){return this.focusableItem.disabled}set disabledDeprecated(t){this.focusableItem.disabled=!!t||""===t,this.setByDeprecatedDisabled=!0}get disabledDeprecated(){return this.focusableItem.disabled}set dropdownItemId(t){this.focusableItem.id=t}get dropdownItemId(){return this.focusableItem.id}ngAfterViewInit(){this.unlisten=this.renderer.listen(this.el.nativeElement,"click",()=>this.onDropdownItemClick())}onDropdownItemClick(){this.dropdown.isMenuClosable&&!this.el.nativeElement.classList.contains("disabled")&&this._dropdownService.closeMenus()}ngOnDestroy(){this.unlisten()}};return t.\u0275fac=function(e){return new(e||t)(Qs(tx),Qs(pa),Qs(XT),Qs(ya),Qs(HT))},t.\u0275dir=ye({type:t,selectors:[["","clrDropdownItem",""]],hostVars:8,hostBindings:function(t,e){2&t&&(Gs("role","menuitem")("aria-disabled",e.disabled)("disabled",e.disabled&&e.setByDeprecatedDisabled?"":null)("id",e.dropdownItemId),ko("disabled",e.disabled)("dropdown-item",!0))},inputs:{disabled:["clrDisabled","disabled"],disabledDeprecated:["disabled","disabledDeprecated"],dropdownItemId:["id","dropdownItemId"]},features:[la([ex])]}),t})();var rx=function(t){return t[t.RIGHT_CENTER=0]="RIGHT_CENTER",t[t.RIGHT_TOP=1]="RIGHT_TOP",t[t.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",t[t.TOP_CENTER=3]="TOP_CENTER",t[t.TOP_RIGHT=4]="TOP_RIGHT",t[t.TOP_LEFT=5]="TOP_LEFT",t[t.BOTTOM_CENTER=6]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=8]="BOTTOM_LEFT",t[t.LEFT_CENTER=9]="LEFT_CENTER",t[t.LEFT_TOP=10]="LEFT_TOP",t[t.LEFT_BOTTOM=11]="LEFT_BOTTOM",t}({});class ix{constructor(t){this.element=t,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),t.style.position="absolute",t.style.top=0,t.style.bottom="auto",t.style.left=0,t.style.right="auto"}anchor(t,e,n,{offsetX:r=0,offsetY:i=0,useAnchorParent:s=!1}={}){this.addScrollEventListeners(t),s&&(t=t.parentNode),t.style.position="static";const o=t.getBoundingClientRect(),a=this.element.getBoundingClientRect();let c=o.left-a.left+r,l=o.top-a.top+i;switch(e){case rx.LEFT_TOP:case rx.TOP_LEFT:break;case rx.TOP_CENTER:c+=o.width/2;break;case rx.TOP_RIGHT:case rx.RIGHT_TOP:c+=o.width;break;case rx.LEFT_BOTTOM:case rx.BOTTOM_LEFT:l+=o.height;break;case rx.BOTTOM_CENTER:l+=o.height,c+=o.width/2;break;case rx.BOTTOM_RIGHT:case rx.RIGHT_BOTTOM:l+=o.height,c+=o.width;break;case rx.LEFT_CENTER:l+=o.height/2;break;case rx.RIGHT_CENTER:l+=o.height/2,c+=o.width}switch(n){case rx.LEFT_TOP:case rx.TOP_LEFT:break;case rx.TOP_CENTER:c-=a.width/2;break;case rx.TOP_RIGHT:case rx.RIGHT_TOP:c-=a.width;break;case rx.LEFT_BOTTOM:case rx.BOTTOM_LEFT:l-=a.height;break;case rx.BOTTOM_CENTER:l-=a.height,c-=a.width/2;break;case rx.BOTTOM_RIGHT:case rx.RIGHT_BOTTOM:l-=a.height,c-=a.width;break;case rx.LEFT_CENTER:l-=a.height/2;break;case rx.RIGHT_CENTER:l-=a.height/2,c-=a.width}const u=getComputedStyle(this.element),h=parseInt(u.marginLeft,10),d=parseInt(u.marginRight,10),p=parseInt(u.marginTop,10),f=parseInt(u.marginBottom,10);switch(e){case rx.LEFT_TOP:case rx.TOP_LEFT:case rx.TOP_RIGHT:case rx.RIGHT_TOP:n!==rx.BOTTOM_RIGHT&&n!==rx.RIGHT_BOTTOM||(l-=f,c-=d),n!==rx.BOTTOM_LEFT&&n!==rx.LEFT_BOTTOM||(l-=p,c+=h),n!==rx.TOP_LEFT&&n!==rx.LEFT_TOP||(l+=p,c+=h),n!==rx.TOP_RIGHT&&n!==rx.RIGHT_TOP||(l+=p,c-=d);break;case rx.LEFT_BOTTOM:case rx.BOTTOM_LEFT:case rx.BOTTOM_RIGHT:case rx.RIGHT_BOTTOM:n!==rx.BOTTOM_LEFT&&n!==rx.LEFT_BOTTOM||(l-=f,c+=h),n!==rx.BOTTOM_RIGHT&&n!==rx.RIGHT_BOTTOM||(l-=f,c-=d),n!==rx.TOP_LEFT&&n!==rx.LEFT_TOP||(l+=p,c+=h),n!==rx.TOP_RIGHT&&n!==rx.RIGHT_TOP||(l+=p,c-=d);break;case rx.TOP_CENTER:l-=f,c+=h,c-=d;break;case rx.BOTTOM_CENTER:l+=p,c+=h,c-=d;break;case rx.LEFT_CENTER:l+=p,l-=f,c-=d;break;case rx.RIGHT_CENTER:l+=p,l-=f,c+=h}return this.element.style.transform=`translateX(${Math.round(c)}px) translateY(${Math.round(l)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(t){const e=getComputedStyle(t).position;return"relative"===e||"absolute"===e||"fixed"===e}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(t){this._scroll=new I;const e=t;let n=t;for(;n&&n!==document&&(this.scrolls(n)&&(n.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(n)),n===e||!this.isPositioned(n));)n=n.parentNode}removeScrollEventListeners(){for(const t of this.scrollableElements)t.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(t){const e=getComputedStyle(t);return"scroll"===e.overflowX||"auto"===e.overflowX||"scroll"===e.overflowY||"auto"===e.overflowY}}let sx=(()=>{let t=class{constructor(t,e){this.parentHost=e,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.el=t.get(pa),this.toggleService=t.get(iS),this.renderer=t.get(ya),this.anchorElem=e.nativeElement,this.popoverInstance=new ix(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(t=>{t?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0,this.ignore=this.toggleService.originalEvent}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||(this.documentESCListener=this.renderer.listen("document","keydown",t=>{t&&t.key&&("Escape"!==t.key&&"Esc"!==t.key||(this.toggleService.open=!1))}))}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),delete this.documentESCListener)}attachOutsideClickListener(){this.closeOnOutsideClick&&(this.hostClickListener=this.renderer.listen(this.el.nativeElement,"click",t=>this.ignore=t),this.ignoredElement&&(this.ignoredElementClickListener=this.renderer.listen(this.ignoredElement,"click",t=>this.ignore=t)),this.documentClickListener=this.renderer.listen("document","click",t=>{t===this.ignore?delete this.ignore:this.toggleService.open=!1}))}detachOutsideClickListener(){this.closeOnOutsideClick&&(this.hostClickListener&&(this.hostClickListener(),delete this.hostClickListener),this.ignoredElementClickListener&&(this.ignoredElementClickListener(),delete this.ignoredElementClickListener),this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}};return t.\u0275fac=function(e){return new(e||t)(Wt(As),Wt(pa,4))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),ox=(()=>{let t=class extends sx{constructor(t,e,n,r){if(!e)throw new Error("clr-dropdown-menu should only be used inside of a clr-dropdown");super(t,e),n?(this.anchorPoint=rx.RIGHT_TOP,this.popoverPoint=rx.LEFT_TOP):(this.anchorPoint=rx.BOTTOM_LEFT,this.popoverPoint=rx.LEFT_TOP),this.popoverOptions.allowMultipleOpen=!0,this.popoverOptions.ignoreGlobalESCListener=!0,this.closeOnOutsideClick=!0,this.focusHandler=r}set position(t){switch(t){case"top-right":this.anchorPoint=rx.TOP_RIGHT,this.popoverPoint=rx.RIGHT_BOTTOM;break;case"top-left":this.anchorPoint=rx.TOP_LEFT,this.popoverPoint=rx.LEFT_BOTTOM;break;case"bottom-right":this.anchorPoint=rx.BOTTOM_RIGHT,this.popoverPoint=rx.RIGHT_TOP;break;case"bottom-left":this.anchorPoint=rx.BOTTOM_LEFT,this.popoverPoint=rx.LEFT_TOP;break;case"right-top":this.anchorPoint=rx.RIGHT_TOP,this.popoverPoint=rx.LEFT_TOP;break;case"right-bottom":this.anchorPoint=rx.RIGHT_BOTTOM,this.popoverPoint=rx.LEFT_BOTTOM;break;case"left-top":this.anchorPoint=rx.LEFT_TOP,this.popoverPoint=rx.RIGHT_TOP;break;case"left-bottom":this.anchorPoint=rx.LEFT_BOTTOM,this.popoverPoint=rx.RIGHT_BOTTOM;break;default:this.anchorPoint=rx.BOTTOM_LEFT,this.popoverPoint=rx.LEFT_TOP}}ngAfterContentInit(){this.focusHandler.container=this.el.nativeElement,this.items.changes.subscribe(()=>this.focusHandler.addChildren(this.items.toArray())),this.items.notifyOnChanges()}ngOnDestroy(){super.ngOnDestroy(),this.focusHandler.resetChildren()}};return t.\u0275fac=function(e){return new(e||t)(Qs(As),Qs(TI,8),Qs(t,12),Qs(KT))},t.\u0275cmp=he({type:t,selectors:[["clr-dropdown-menu"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,HT,!1),2&t&&Ec(r=Dc())&&(e.items=r)},hostVars:3,hostBindings:function(t,e){2&t&&(Gs("role","menu"),ko("dropdown-menu",!0))},inputs:{position:["clrPosition","position"]},features:[Wo],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),ax=(()=>{let t=class{constructor(t,e,n,r){this.toggleService=e,this.isRootLevelToggle=!0,t.parent&&(this.isRootLevelToggle=!1),r.trigger=n.nativeElement}get active(){return this.toggleService.open}onDropdownTriggerClick(t){this.toggleService.toggleWithEvent(t)}};return t.\u0275fac=function(e){return new(e||t)(Qs(tx),Qs(iS),Qs(pa),Qs(KT))},t.\u0275dir=ye({type:t,selectors:[["","clrDropdownTrigger",""],["","clrDropdownToggle",""]],hostVars:10,hostBindings:function(t,e){1&t&&co("click",(function(t){return e.onDropdownTriggerClick(t)})),2&t&&(Gs("aria-haspopup","menu")("aria-expanded",e.active),ko("dropdown-toggle",e.isRootLevelToggle)("dropdown-item",!e.isRootLevelToggle)("expandable",!e.isRootLevelToggle)("active",e.active))}}),t})(),cx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh],SC,rS]}),t})();const lx=["info","warning","danger","success"];let ux=(()=>{let t=class{constructor(t){this.commonStrings=t,this.defaultIconShape="info-circle",this._alertIconShape="",this._alertType="info"}get alertType(){return this._alertType}set alertType(t){lx.indexOf(t)>-1&&(this._alertType=t)}get alertIconShape(){return""===this._alertIconShape?this.iconInfoFromType(this._alertType).shape:this._alertIconShape}set alertIconShape(t){t?t!==this._alertIconShape&&(this._alertIconShape=t):this._alertIconShape=""}get alertIconTitle(){return this.iconInfoFromType(this._alertType).title}iconInfoFromType(t){const e={shape:"",cssClass:"",title:""};switch(t){case"warning":e.shape="exclamation-triangle",e.cssClass="alert-warning",e.title=this.commonStrings.keys.warning;break;case"danger":e.shape="exclamation-circle",e.cssClass="alert-danger",e.title=this.commonStrings.keys.danger;break;case"success":e.shape="check-circle",e.cssClass="alert-success",e.title=this.commonStrings.keys.success;break;default:e.shape=this.defaultIconShape,e.cssClass="alert-info",e.title=this.commonStrings.keys.info}return e}};return t.\u0275fac=function(e){return new(e||t)(Wt(kS))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),hx=(()=>{let t=class{constructor(){this._change=new I}get changes(){return this._change.asObservable()}get current(){return this._current}set current(t){t!==this._current&&(this._current=t,this._change.next(t))}get activeAlerts(){return this.allAlerts&&this.allAlerts.filter(t=>!t._closed)}get currentAlert(){return this.activeAlerts&&this.activeAlerts[this.current]}set currentAlert(t){this.current=this.activeAlerts.indexOf(t)}get count(){return this.activeAlerts&&this.activeAlerts.length||0}manage(t){this.subscription&&this.subscription.unsubscribe(),this.allAlerts=t,this.current="number"==typeof this._current?this._current:0,this._change.next(this.current),this.subscription=this.allAlerts.changes.subscribe(()=>{this.current>=this.allAlerts.length&&(this.current=Math.max(0,this.allAlerts.length-1))})}next(){this.current=this.current===this.activeAlerts.length-1?0:this.current+1}previous(){0!==this.activeAlerts.length&&(this.current=0===this.current?this.activeAlerts.length-1:this.current-1)}close(){this.previous()}destroy(){this.subscription&&this.subscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),dx=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["",8,"alert-text"]]}),t})(),px=(()=>{let t=class{constructor(t,e,n,r,i){this.iconService=t,this.cdr=e,this.multiAlertService=n,this.commonStrings=r,this.ariaLiveService=i,this.subscriptions=[],this.isSmall=!1,this.closable=!0,this.isAppLevel=!1,this.clrCloseButtonAriaLabel=this.commonStrings.keys.alertCloseButtonAriaLabel,this._closed=!1,this._closedChanged=new pc(!1),this.polite=!0}ngOnInit(){this.multiAlertService&&this.subscriptions.push(this.multiAlertService.changes.subscribe(()=>{this.hidden=this.multiAlertService.currentAlert!==this}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.announceAriaLiveMessage()}set alertType(t){this.iconService.alertType=t}get alertType(){return this.iconService.alertType}get ariaLive(){return KC(this.assertive)?$S.assertive:KC(this.off)?$S.off:$S.polite}set alertIconShape(t){this.iconService.alertIconShape=t}get alertClass(){return this.iconService.iconInfoFromType(this.iconService.alertType).cssClass}announceAriaLiveMessage(){if(!this.hidden&&this.alertTexts.length){const t=this.alertTexts.map(t=>t.nativeElement.textContent).join(" ");t&&this.ariaLiveService.announce(t,this.ariaLive)}}set hidden(t){t!==this._hidden&&(this._hidden=t,this.cdr.detectChanges())}get hidden(){return this._hidden}close(){this.closable&&(this._closed=!0,this.multiAlertService&&this.multiAlertService.close(),this._closedChanged.emit(!0))}open(){this._closed=!1,this._closedChanged.emit(!1)}};return t.\u0275fac=function(e){return new(e||t)(Qs(ux),Qs(ds),Qs(hx,8),Qs(kS),Qs(qS))},t.\u0275cmp=he({type:t,selectors:[["clr-alert"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,dx,!0,pa),2&t&&Ec(r=Dc())&&(e.alertTexts=r)},inputs:{isSmall:["clrAlertSizeSmall","isSmall"],closable:["clrAlertClosable","closable"],isAppLevel:["clrAlertAppLevel","isAppLevel"],clrCloseButtonAriaLabel:"clrCloseButtonAriaLabel",_closed:["clrAlertClosed","_closed"],polite:["clrPolite","polite"],alertType:["clrAlertType","alertType"],alertIconShape:["clrAlertIcon","alertIconShape"],assertive:["clrAssertive","assertive"],off:["clrOff","off"]},outputs:{_closedChanged:"clrAlertClosedChange"},features:[la([ux,qS])],ngContentSelectors:Sv,decls:1,vars:1,consts:[["class","alert",3,"ngClass","alert-hidden","alert-sm","alert-app-level",4,"ngIf"],[1,"alert",3,"ngClass"],[1,"alert-items"],["type","button","class","close",3,"click",4,"ngIf"],["type","button",1,"close",3,"click"],["shape","close"]],template:function(t,e){1&t&&(mo(),qs(0,R_,4,8,"div",0)),2&t&&Zs("ngIf",!e._closed)},directives:[Rh,kh,nS],styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),fx=(()=>{let t=class{constructor(t){this.iconService=t}};return t.\u0275fac=function(e){return new(e||t)(Qs(ux))},t.\u0275cmp=he({type:t,selectors:[["clr-alert-item"]],hostAttrs:[1,"alert-item"],ngContentSelectors:Sv,decls:3,vars:2,consts:[[1,"alert-icon-wrapper"],[1,"alert-icon"]],template:function(t,e){1&t&&(mo(),Js(0,"div",0),eo(1,"clr-icon",1),to(),yo(2)),2&t&&(Vr(1),Gs("shape",e.iconService.alertIconShape)("title",e.iconService.alertIconTitle))},directives:[nS],encapsulation:2}),t})(),gx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,cx]]}),t})(),mx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[gx]}),t})(),yx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS]]}),t})(),vx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,cx]]}),t})(),bx=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&Tc(Ma,!0),2&t&&Ec(n=Dc())&&(e.template=n.first)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),qs(0,P_,1,0,"ng-template"))},encapsulation:2}),t})(),wx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),_x=(()=>{let t=class extends dI{};return t.\u0275fac=function(e){return xk(e||t)},t.\u0275dir=ye({type:t,selectors:[["clr-tabs"]],features:[Wo]}),t})(),Sx=(()=>{let t=class extends uI{constructor(t,e,n,r){if(!e)throw new Error("clrTabLink and clr-tab-content should only be used inside of a clr-tabs");super(t,e),this.ifActive=r,this.id=n}get flavor(){return this.ifActive.current===this.id}};return t.\u0275fac=function(e){return new(e||t)(Qs(ds),Qs(_x,8),Qs(gC),Qs(yC))},t.\u0275dir=ye({type:t,selectors:[["","clrTabLink",""],["clr-tab-content"]],features:[Wo]}),t})(),Cx=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();var Ex=function(t){return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t}({});let Ix=(()=>{let t=class{constructor(){this._children=[],this.layout=Ex.HORIZONTAL}register(t){this._children.push(t)}get children(){return this._children}get activeTab(){return this.children.find(t=>t.active)}get overflowTabs(){return this.layout===Ex.VERTICAL?[]:this.children.filter(t=>!0===t.tabLink.inOverflow)}unregister(t){const e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Tx=0,xx=(()=>{let t=class{constructor(t,e,n,r){this.ifActiveService=t,this.id=e,this.ariaService=n,this.tabsService=r,this.tabContentId||(this.tabContentId="clr-tab-content-"+Tx++)}set templateRef(t){this.viewRef=this.tabsService.tabContentViewContainer.createEmbeddedView(t)}get ariaLabelledBy(){return this.ariaService.ariaLabelledBy}get tabContentId(){return this.ariaService.ariaControls}set tabContentId(t){this.ariaService.ariaControls=t}get active(){return this.ifActiveService.current===this.id}ngOnDestroy(){const t=this.tabsService.tabContentViewContainer.indexOf(this.viewRef);t>-1&&this.tabsService.tabContentViewContainer.remove(t)}};return t.\u0275fac=function(e){return new(e||t)(Qs(yC),Qs(gC),Qs(Cx),Qs(Ix))},t.\u0275cmp=he({type:t,selectors:[["clr-tab-content"]],viewQuery:function(t,e){var n;1&t&&Ic(N_,!0),2&t&&Ec(n=Dc())&&(e.templateRef=n.first)},inputs:{tabContentId:["id","tabContentId"]},ngContentSelectors:Sv,decls:2,vars:0,consts:[["tabContentProjectedRef",""],["role","tabpanel",1,"tab-content",3,"id","hidden"]],template:function(t,e){1&t&&(mo(),qs(0,F_,2,7,"ng-template",null,0,Fc))},encapsulation:2}),t})(),kx=0;const Ax=new Mt("TABS_ID"),Ox={provide:Ax,useFactory:function(){return"clr-tabs-"+kx++}};let Dx=0,Rx=(()=>{let t=class{constructor(t,e,n,r,i,s,o,a){this.ifActiveService=t,this.id=e,this.ariaService=n,this.el=r,this.cfr=i,this.viewContainerRef=s,this.tabsService=o,this.tabsId=a,this.tabLinkId||(this.tabLinkId="clr-tab-link-"+Dx++);const c=this.cfr.resolveComponentFactory(bx);this.templateRefContainer=this.viewContainerRef.createComponent(c,void 0,void 0,[[this.el.nativeElement]]).instance}set inOverflow(t){this._inOverflow=t}get inOverflow(){return this._inOverflow&&this.tabsService.layout!==Ex.VERTICAL}get addLinkClasses(){return!this.inOverflow}get ariaControls(){return this.ariaService.ariaControls}get tabLinkId(){return this.ariaService.ariaLabelledBy}set tabLinkId(t){this.ariaService.ariaLabelledBy=t}activate(){this.ifActiveService.current=this.id}get active(){return this.ifActiveService.current===this.id}get tabindex(){return this.active?0:-1}};return t.\u0275fac=function(e){return new(e||t)(Qs(yC),Qs(gC),Qs(Cx),Qs(pa),Qs(da),Qs(ja),Qs(Ix),Qs(Ax))},t.\u0275dir=ye({type:t,selectors:[["","clrTabLink",""]],hostAttrs:["role","tab","type","button"],hostVars:13,hostBindings:function(t,e){1&t&&co("click",(function(){return e.activate()})),2&t&&(Go("id",e.tabLinkId),Gs("aria-hidden",!1)("aria-controls",e.ariaControls)("aria-selected",e.active)("tabindex",e.tabindex),ko("btn",!0)("btn-link",e.addLinkClasses)("nav-link",e.addLinkClasses)("active",e.active))},inputs:{tabLinkId:["id","tabLinkId"],inOverflow:["clrTabLinkInOverflow","inOverflow"]}}),t})(),Px=(()=>{let t=class{constructor(t,e,n){this.ifActiveService=t,this.id=e,this.tabsService=n,n.register(this)}ngOnDestroy(){this.tabsService.unregister(this)}get active(){return this.ifActiveService.current===this.id}};return t.\u0275fac=function(e){return new(e||t)(Qs(yC),Qs(gC),Qs(Ix))},t.\u0275cmp=he({type:t,selectors:[["clr-tab"]],contentQueries:function(t,e,n){var r;1&t&&(Ac(n,Rx,!0),Ac(n,xx,!0)),2&t&&(Ec(r=Dc())&&(e.tabLink=r.first),Ec(r=Dc())&&(e.tabContent=r.first))},features:[la([mC,Cx])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),Nx=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-tab-overflow-content"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("dropdown-menu",!0)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})();var Fx=function(t){return t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t.BOTH="both",t}({});let Lx=(()=>{let t=class{constructor(t,e){this.elementRef=t,this.platformId=e}get nativeElement(){return this.elementRef.nativeElement}focus(){Wh(this.platformId)&&this.elementRef.nativeElement.focus()}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa),Qs(zc))},t.\u0275dir=ye({type:t,selectors:[["","clrKeyFocusItem",""]],hostVars:1,hostBindings:function(t,e){2&t&&Gs("tabindex",e.tabIndex)}}),t})(),Mx=(()=>{let t=class{constructor(t){this.elementRef=t,this.direction=Fx.VERTICAL,this.focusOnLoad=!1,this.focusChange=new pc,this._current=0,this.subscriptions=[]}set focusableItems(t){t&&t.length&&(this._focusableItems=t,this.initializeFocus())}get nativeElement(){return this.elementRef.nativeElement}get focusableItems(){return this._focusableItems?this._focusableItems:this.clrKeyFocusItems.toArray()}get current(){return this._current}set current(t){this._current!==t&&(this._current=t)}get currentItem(){return this.focusableItems[this._current]}get currentItemElement(){return this.currentItem.nativeElement?this.currentItem.nativeElement:this.currentItem}focusCurrent(){this.currentItem.focus(),this.focusChange.next(this._current)}moveTo(t){this.positionInRange(t)&&(this.current=t,this.focusCurrent())}ngAfterContentInit(){this.subscriptions.push(this.listenForItemUpdates()),this.initializeFocus()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}handleKeyboardEvent(t){if(this.currentItemElement!==t.target){const e=this.getItemPosition(t.target);this.positionInRange(e)&&(this.current=e)}this.prevKeyPressed(t)&&this.currentFocusIsNotFirstItem()?this.moveTo(this.current-1):this.nextKeyPressed(t)&&this.currentFocusIsNotLastItem()?this.moveTo(this.current+1):t.code===xT.Home?this.moveTo(0):t.code===xT.End&&this.moveTo(this.focusableItems.length-1),OT(t)}setClickedItemCurrent(t){const e=this.getItemPosition(t.target);e>-1&&this.moveTo(e)}getItemPosition(t){return this._focusableItems?this.focusableItems.indexOf(t):this.focusableItems.map(t=>t.nativeElement).indexOf(t)}positionInRange(t){return t>=0&&t<this.focusableItems.length}currentFocusIsNotFirstItem(){return this._current-1>=0}currentFocusIsNotLastItem(){return this._current+1<this.focusableItems.length}initializeFocus(){this.focusableItems&&this.focusableItems.length&&(this._current>=this.focusableItems.length&&(this._current=this.focusableItems.length-1),this.focusOnLoad&&(this.currentItem.focus(),this.focusChange.next()))}listenForItemUpdates(){return this.clrKeyFocusItems.changes.subscribe(()=>{this.initializeFocus()})}nextKeyPressed(t){const e=DT(t);switch(this.direction){case Fx.VERTICAL:return t.key===e.ArrowDown;case Fx.HORIZONTAL:return t.key===e.ArrowRight;case Fx.BOTH:return t.key===e.ArrowDown||t.key===e.ArrowRight;default:return!1}}prevKeyPressed(t){const e=DT(t);switch(this.direction){case Fx.VERTICAL:return t.key===e.ArrowUp;case Fx.HORIZONTAL:return t.key===e.ArrowLeft;case Fx.BOTH:return t.key===e.ArrowUp||t.key===e.ArrowLeft;default:return!1}}};return t.\u0275fac=function(e){return new(e||t)(Qs(pa))},t.\u0275cmp=he({type:t,selectors:[["","clrKeyFocus",""]],contentQueries:function(t,e,n){var r;1&t&&kc(n,Lx,!0),2&t&&Ec(r=Dc())&&(e.clrKeyFocusItems=r)},hostBindings:function(t,e){1&t&&co("keydown",(function(t){return e.handleKeyboardEvent(t)}))("click",(function(t){return e.setClickedItemCurrent(t)}))},inputs:{direction:["clrDirection","direction"],focusOnLoad:["clrFocusOnLoad","focusOnLoad"],focusableItems:["clrKeyFocus","focusableItems"]},outputs:{focusChange:"clrFocusChange"},attrs:L_,ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),Vx=(()=>{let t=class{constructor(t,e,n,r,i){this.ifActiveService=t,this.toggleService=e,this.tabsService=n,this.tabsId=r,this.commonStrings=i,this.subscriptions=[],this._tabLinkDirectives=[],this.tabLinkElements=[],this._mousedown=!1}get overflowPosition(){return this._tabLinkDirectives.filter(t=>!t.inOverflow).length}set tabContentViewContainer(t){this.tabsService.tabContentViewContainer=t}set layout(t){Object.keys(Ex).map(t=>Ex[t]).indexOf(t)>=0&&(this.tabsService.layout=t)}get layout(){return this.tabsService.layout}get tabLinkDirectives(){return this._tabLinkDirectives}get activeTabInOverflow(){return this.tabsService.overflowTabs.indexOf(this.tabsService.activeTab)>-1}get activeTabPosition(){return this._tabLinkDirectives.findIndex(t=>t.active)}get tabIds(){return this.tabsService.children.map(t=>t.tabLink.tabLinkId).join(" ")}get isCurrentInOverflow(){return this.keyFocus.current>=this.overflowPosition}get isVertical(){return this.layout===Ex.VERTICAL}toggleOverflowOnPosition(t){this.toggleService.open=t>=this.overflowPosition}set tabOverflowEl(t){this._tabOverflowEl=t&&t.nativeElement,this.toggleService.open&&t&&this.keyFocus.focusCurrent()}resetKeyFocusCurrentToActive(t){this.keyFocus.nativeElement.contains(t.relatedTarget)||this.keyFocus.current===this.activeTabPosition||(this.keyFocus.current=this.activeTabPosition)}toggleOverflowOnClick(){this.keyFocus.moveTo(this.isCurrentInOverflow&&this.toggleService.open?this.overflowPosition-1:this.overflowPosition),this._mousedown=!1}openOverflowOnFocus(){this._mousedown||this.toggleService.open||this.keyFocus.moveTo(this.activeTabPosition)}closeOnFocusOut(t){this._tabOverflowEl.contains(t.relatedTarget)||!this.toggleService.open||this._mousedown||(this.toggleService.open=!1,this.tabLinkElements[this.activeTabPosition]===t.relatedTarget&&(this.keyFocus.current=this.activeTabPosition))}closeOnEscapeKey(){this.keyFocus.moveTo(this.overflowPosition-1)}closeOnOutsideClick(t,e){t.target===e||e.contains(t.target)||!this._tabOverflowEl.contains(t.target)&&this.isCurrentInOverflow&&this.keyFocus.moveTo(this.overflowPosition-1)}listenForTabLinkChanges(){return this.tabs.changes.pipe($d(this.tabs.map(t=>t.tabLink))).subscribe(()=>{this._tabLinkDirectives=this.tabs.map(t=>t.tabLink),this.tabLinkElements=this._tabLinkDirectives.map(t=>t.el.nativeElement)})}ngAfterContentInit(){this.subscriptions.push(this.listenForTabLinkChanges()),void 0===this.ifActiveService.current&&this.tabLinkDirectives[0]&&this.tabLinkDirectives[0].activate(),this.keyFocus.current=this.activeTabPosition}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}};return t.\u0275fac=function(e){return new(e||t)(Qs(yC),Qs(iS),Qs(Ix),Qs(Ax),Qs(kS))},t.\u0275cmp=he({type:t,selectors:[["clr-tabs"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,Px,!1),2&t&&Ec(r=Dc())&&(e.tabs=r)},viewQuery:function(t,e){var n;1&t&&(Ic(M_,!0,ja),Tc(Nx,!0,pa),Ic(Mx,!0)),2&t&&(Ec(n=Dc())&&(e.tabContentViewContainer=n.first),Ec(n=Dc())&&(e.tabOverflowEl=n.first),Ec(n=Dc())&&(e.keyFocus=n.first))},hostVars:2,hostBindings:function(t,e){2&t&&ko("tabs-vertical",e.isVertical)},inputs:{layout:["clrLayout","layout"]},features:[la([yC,iS,Ix,Ox])],decls:5,vars:4,consts:[["role","tablist","clrDirection","both",1,"nav",3,"clrKeyFocus","clrFocusChange","focusout"],[4,"ngFor","ngForOf"],[4,"ngIf"],["tabContentViewContainer",""],["role","presentation",1,"nav-item"],[3,"ngTemplateOutlet"],["role","presentation",1,"tabs-overflow","bottom-right"],["role","application",1,"nav-item"],["type","button","aria-hidden","true",1,"btn","btn-link","nav-link","dropdown-toggle",3,"mousedown","focus","click"],["tabOverflowTrigger",""],["shape","ellipsis-horizontal"],[3,"keydown.esc","click","focusout",4,"ngIf"],[3,"keydown.esc","click","focusout"],[3,"ngTemplateOutlet",4,"ngIf"]],template:function(t,e){1&t&&(Js(0,"ul",0),co("clrFocusChange",(function(t){return e.toggleOverflowOnPosition(t)}))("focusout",(function(t){return e.resetKeyFocusCurrentToActive(t)})),qs(1,j_,2,1,"ng-container",1),qs(2,H_,7,11,"ng-container",2),to(),io(3,null,3)),2&t&&(Zs("clrKeyFocus",e.tabLinkElements),Gs("aria-owns",e.tabIds),Vr(1),Zs("ngForOf",e.tabLinkDirectives),Vr(1),Zs("ngIf",e.tabsService.overflowTabs.length>0))},directives:[Mx,Oh,Rh,Vh,nS,Nx],encapsulation:2}),t})(),jx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),Ux=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,SC,rS,wx,jx],SC]}),t})(),Bx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,SC,qE],SC,rS,qE]}),t})(),zx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[yx,vx,Ux,Bx]}),t})(),Hx=(()=>{let t=class{constructor(t){this._document=t}stopScrolling(){this._document.body.classList.add("no-scrolling")}resumeScrolling(){this._document.body.classList.contains("no-scrolling")&&this._document.body.classList.remove("no-scrolling")}};return t.\u0275fac=function(e){return new(e||t)(Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Gx=(()=>{let t=class{constructor(t,e,n){this._scrollingService=t,this.commonStrings=e,this.modalId=n,this._open=!1,this._openChanged=new pc(!1),this.closable=!0,this.staticBackdrop=!0,this.skipAnimation="false",this.bypassScrollService=!1,this.stopClose=!1,this.altClose=new pc(!1)}ngOnChanges(t){!this.bypassScrollService&&t&&t.hasOwnProperty("_open")&&(t._open.currentValue?this._scrollingService.stopScrolling():this._scrollingService.resumeScrolling())}ngOnDestroy(){this._scrollingService.resumeScrolling()}open(){this._open||(this._open=!0,this._openChanged.emit(!0))}close(){this.stopClose?this.altClose.emit(!1):this.closable&&this._open&&(this._open=!1,this.focusTrap.setPreviousFocus())}fadeDone(t){"void"===t.toState&&this._openChanged.emit(!1)}};return t.\u0275fac=function(e){return new(e||t)(Qs(Hx),Qs(kS),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-modal"]],viewQuery:function(t,e){var n;1&t&&Tc(EC,!0),2&t&&Ec(n=Dc())&&(e.focusTrap=n.first)},hostVars:2,hostBindings:function(t,e){1&t&&co("keyup.escape",(function(){return e.close()}),!1,Bn),2&t&&ko("open",e._open)},inputs:{_open:["clrModalOpen","_open"],closable:["clrModalClosable","closable"],staticBackdrop:["clrModalStaticBackdrop","staticBackdrop"],skipAnimation:["clrModalSkipAnimation","skipAnimation"],bypassScrollService:["clrModalOverrideScrollService","bypassScrollService"],stopClose:["clrModalPreventClose","stopClose"],size:["clrModalSize","size"]},outputs:{_openChanged:"clrModalOpenChange",altClose:"clrModalAlternateClose"},features:[la([RS],[Hx]),Jo],ngContentSelectors:W_,decls:1,vars:1,consts:[["clrFocusTrap","","class","modal",4,"ngIf"],["clrFocusTrap","",1,"modal"],["role","dialog","aria-modal","true",1,"modal-dialog"],[1,"clr-sr-only"],[1,"modal-content-wrapper"],[1,"modal-content"],[1,"modal-header"],["type","button","class","close",3,"click",4,"ngIf"],["clrFocusOnViewInit","",1,"modal-title-wrapper",3,"id"],["aria-hidden","true",1,"modal-backdrop",3,"click"],["type","button",1,"close",3,"click"],["shape","close"]],template:function(t,e){1&t&&(mo(q_),qs(0,$_,16,14,"div",0)),2&t&&Zs("ngIf",e._open)},directives:[Rh,EC,$E,nS],styles:["[_nghost-%COMP%] { display: none; }\n        .open[_nghost-%COMP%] { display: inline; }"],data:{animation:[Sm("fadeDown",[km("* => false",[Im({opacity:0,transform:"translate(0, -25%)"}),Cm("0.2s ease-in-out")]),km("false => *",[Cm("0.2s ease-in-out",Im({opacity:0,transform:"translate(0, -25%)"}))])]),Sm("fade",[km("void => *",[Im({opacity:0}),Cm("0.2s ease-in-out",Im({opacity:.85}))]),km("* => void",[Cm("0.2s ease-in-out",Im({opacity:0}))])])]}}),t})(),$x=(()=>{let t=class{constructor(){this.tabindex=0}mouseDown(){delete this.tabindex}mouseUp(){this.tabindex=0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=ye({type:t,selectors:[["",8,"modal-body"]],hostVars:1,hostBindings:function(t,e){1&t&&co("mousedown",(function(){return e.mouseDown()}))("mouseup",(function(){return e.mouseUp()})),2&t&&Gs("tabindex",e.tabindex)}}),t})(),qx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,IC,qE],rS,qE]}),t})(),Wx=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,qE],SC]}),t})(),Qx=(()=>{let t=class{constructor(){this._id=new I}updateId(t){this._id.next(t)}get id(){return this._id.asObservable()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),Yx=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-tooltip"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("tooltip",!0)},features:[la([iS,{provide:TI,useExisting:pa},RS,Qx])],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})();const Kx=["bottom-left","bottom-right","top-left","top-right","right","left"],Zx=["xs","sm","md","lg"];let Xx=(()=>{let t=class extends sx{constructor(t,e,n,r){if(super(t,e),this.uniqueId=n,this.tooltipIdService=r,!e)throw new Error("clr-tooltip-content should only be used inside of a clr-tooltip");this.position="right",this.size="sm",this.updateId(n)}get position(){return this._position}get id(){return this._id}set id(t){this.updateId(t||"")}updateId(t){this._id=t,this.tooltipIdService.updateId(t)}set position(t){switch(this.renderer.removeClass(this.el.nativeElement,"tooltip-"+this.position),this._position=t&&Kx.indexOf(t)>-1?t:"right",this.renderer.addClass(this.el.nativeElement,"tooltip-"+this.position),t){case"top-right":this.anchorPoint=rx.TOP_CENTER,this.popoverPoint=rx.LEFT_BOTTOM;break;case"top-left":this.anchorPoint=rx.TOP_CENTER,this.popoverPoint=rx.RIGHT_BOTTOM;break;case"bottom-right":this.anchorPoint=rx.BOTTOM_CENTER,this.popoverPoint=rx.LEFT_TOP;break;case"bottom-left":this.anchorPoint=rx.BOTTOM_CENTER,this.popoverPoint=rx.RIGHT_TOP;break;case"right":this.anchorPoint=rx.RIGHT_CENTER,this.popoverPoint=rx.LEFT_TOP;break;case"left":this.anchorPoint=rx.LEFT_CENTER,this.popoverPoint=rx.RIGHT_TOP;break;default:this.anchorPoint=rx.RIGHT_CENTER,this.popoverPoint=rx.LEFT_TOP}}get size(){return this._size}set size(t){this.renderer.removeClass(this.el.nativeElement,"tooltip-"+this.size),this._size=t&&Zx.indexOf(t)>-1?t:"sm",this.renderer.addClass(this.el.nativeElement,"tooltip-"+this.size)}};return t.\u0275fac=function(e){return new(e||t)(Qs(As),Qs(TI,8),Qs(OS),Qs(Qx))},t.\u0275cmp=he({type:t,selectors:[["clr-tooltip-content"]],hostVars:6,hostBindings:function(t,e){2&t&&(Go("id",e.id),Gs("role","tooltip"),xo("opacity",1),ko("tooltip-content",!0))},inputs:{position:["clrPosition","position"],size:["clrSize","size"],id:"id"},features:[Wo],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2}),t})(),Jx=(()=>{let t=class{constructor(t,e){this.toggleService=t,this.tooltipIdService=e,this.subs=[],this.subs.push(this.tooltipIdService.id.subscribe(t=>this.ariaDescribedBy=t))}showTooltip(){this.toggleService.open=!0}hideTooltip(){this.toggleService.open=!1}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}};return t.\u0275fac=function(e){return new(e||t)(Qs(iS),Qs(Qx))},t.\u0275dir=ye({type:t,selectors:[["","clrTooltipTrigger",""]],hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&co("mouseenter",(function(){return e.showTooltip()}))("focus",(function(){return e.showTooltip()}))("mouseleave",(function(){return e.hideTooltip()}))("blur",(function(){return e.hideTooltip()})),2&t&&(Gs("aria-describedby",e.ariaDescribedBy)("role","button"),ko("tooltip-trigger",!0))}}),t})(),tk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh],SC,rS]}),t})(),ek=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[cx,Wx,tk]}),t})(),nk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,qx,gx]]}),t})();var rk=function(t){return t.Default="default",t.Multi="multi",t}({}),ik=function(t){return t.Inactive="inactive",t.Error="error",t.Complete="complete",t}({});let sk=0;class ok{constructor(t,e){this.id=t,this.accordionId=e,this.status=ik.Inactive,this.index=null,this.disabled=!1,this.open=!1,this.templateId=`${this.id}-${this.accordionId}`}}class ak{constructor(){this.strategy=rk.Default,this.accordionCount=sk++,this._panels={}}get panels(){return Object.keys(this._panels).map(t=>this._panels[t])}setStrategy(t){this.strategy=t}updatePanelOrder(t){t.forEach((t,e)=>this._panels[t].index=e),this.removeOldPanels(t)}addPanel(t,e=!1){this._panels[t]=new ok(t,this.accordionCount),this._panels[t].open=e}togglePanel(t,e){const n=this._panels[t].open;this.strategy===rk.Default&&this.closeAllPanels(),this._panels[t].open=void 0!==e?e:!n}disablePanel(t,e){this._panels[t].disabled=e}closeAllPanels(){this.panels.forEach(t=>this._panels[t.id].open=!1)}removeOldPanels(t){this.panels.filter(e=>void 0===t.find(t=>t===e.id)).forEach(t=>delete this._panels[t.id])}}let ck=(()=>{let t=class{constructor(){this.accordion=new ak,this._panelsChanges=new Fl(this.accordion.panels)}getPanelChanges(t){return this._panelsChanges.pipe(M(e=>e.find(e=>e.id===t)))}setStrategy(t){this.accordion.setStrategy(t)}addPanel(t,e=!1){this.accordion.addPanel(t,e),this.emitUpdatedPanels()}togglePanel(t,e){this.accordion.togglePanel(t,e),this.emitUpdatedPanels()}disablePanel(t,e){this.accordion.disablePanel(t,e),this.emitUpdatedPanels()}updatePanelOrder(t){this.accordion.updatePanelOrder(t),this.emitUpdatedPanels()}emitUpdatedPanels(){this._panelsChanges.next(this.accordion.panels)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const lk=[Sm("skipInitialRender",[km(":enter",[])]),Sm("toggle",[km("void => *",[Im({display:"block",height:0}),Cm("0.2s ease-in-out",Im({height:"*"}))])])];let uk=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-accordion-description"],["clr-step-description"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-accordion-description",!0)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2,changeDetection:0}),t})(),hk=(()=>{let t=class{constructor(t,e,n,r){this.commonStrings=t,this.accordionService=e,this.ifExpandService=n,this.id=r,this.disabled=!1,this.panelOpen=!1,this.panelOpenChange=new pc,this.AccordionStatus=ik,this.isAccordion=!0}ngOnInit(){this.panel=this.accordionService.getPanelChanges(this.id).pipe(su(t=>this.emitPanelChange(t))),this.accordionService.addPanel(this.id,this.panelOpen),this.accordionService.togglePanel(this.id,this.panelOpen),this.accordionService.disablePanel(this.id,this.disabled)}ngOnChanges(t){this.panel&&t.panelOpen&&t.panelOpen.currentValue!==t.panelOpen.previousValue&&this.accordionService.togglePanel(this.id,t.panelOpen.currentValue),this.panel&&t.disabled&&t.disabled.currentValue!==t.disabled.previousValue&&this.accordionService.disablePanel(this.id,t.disabled.currentValue)}togglePanel(){this.accordionService.togglePanel(this.id)}collapsePanelOnAnimationDone(t){t.open||(this.ifExpandService.expanded=!1)}getPanelStateClasses(t){return`clr-accordion-panel-${t.status} ${t.open?"clr-accordion-panel-open":""}`}getAccordionContentId(t){return`clr-accordion-content-${t}'`}getAccordionHeaderId(t){return"clr-accordion-header-"+t}emitPanelChange(t){this.panelOpenChange.emit(t.open),t.open&&(this.ifExpandService.expanded=!0)}};return t.\u0275fac=function(e){return new(e||t)(Qs(kS),Qs(ck),Qs(wC),Qs(OS))},t.\u0275cmp=he({type:t,selectors:[["clr-accordion-panel"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,uk,!1),2&t&&Ec(r=Dc())&&(e.accordionDescription=r)},hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-accordion-panel",!0)},inputs:{disabled:["clrAccordionPanelDisabled","disabled"],panelOpen:["clrAccordionPanelOpen","panelOpen"]},outputs:{panelOpenChange:"clrAccordionPanelOpenChange"},features:[la([wC,RS]),Jo],ngContentSelectors:eS,decls:2,vars:3,consts:[[4,"ngIf"],["aria-live","assertive","class","clr-sr-only",4,"ngIf"],["role","group",3,"ngClass"],[1,"clr-accordion-header"],["type","button",1,"clr-accordion-header-button",3,"id","disabled","click"],["headerButton",""],[1,"clr-sr-only"],[1,"clr-accordion-status"],["shape","angle","dir","right",1,"clr-accordion-angle"],[1,"clr-accordion-number"],["shape","exclamation-circle",1,"clr-accordion-error-icon"],["shape","check-circle",1,"clr-accordion-complete-icon"],["role","region",3,"id"],["class","clr-accordion-content",4,"ngIf"],["aria-live","assertive",1,"clr-sr-only"],[1,"clr-accordion-content"],[1,"clr-accordion-inner-content"]],template:function(t,e){1&t&&(mo(tS),qs(0,J_,19,18,"ng-container",0),cc(1,"async")),2&t&&Zs("ngIf",lc(1,1,e.panel))},directives:[Rh,kh,nS],pipes:[Gh],encapsulation:2,data:{animation:lk},changeDetection:0}),t})(),dk=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-accordion-title"],["clr-step-title"]],hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-accordion-title",!0)},ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2,changeDetection:0}),t})(),pk=(()=>{let t=class{constructor(t){this.accordionService=t,this.multiPanel=!1,this.subscriptions=[]}ngOnInit(){this.setAccordionStrategy()}ngOnChanges(t){t.multiPanel.currentValue!==t.multiPanel.previousValue&&this.setAccordionStrategy()}ngAfterViewInit(){this.subscriptions.push(this.listenForDOMChanges())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}setAccordionStrategy(){this.accordionService.setStrategy(this.multiPanel?rk.Multi:rk.Default)}listenForDOMChanges(){return this.panels.changes.pipe($d(this.panels)).subscribe(t=>this.accordionService.updatePanelOrder(t.toArray().map(t=>t.id)))}};return t.\u0275fac=function(e){return new(e||t)(Qs(ck))},t.\u0275cmp=he({type:t,selectors:[["clr-accordion"]],contentQueries:function(t,e,n){var r;1&t&&kc(n,hk,!0),2&t&&Ec(r=Dc())&&(e.panels=r)},hostVars:2,hostBindings:function(t,e){2&t&&ko("clr-accordion",!0)},inputs:{multiPanel:["clrAccordionMultiPanel","multiPanel"]},features:[la([ck]),Jo],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2,changeDetection:0}),t})(),fk=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["clr-accordion-content"],["clr-step-content"]],ngContentSelectors:Sv,decls:1,vars:0,template:function(t,e){1&t&&(mo(),yo(0))},encapsulation:2,changeDetection:0}),t})(),gk=(()=>{let t=class extends dI{};return t.\u0275fac=function(e){return kk(e||t)},t.\u0275dir=ye({type:t,selectors:[["clr-accordion"]],features:[Wo]}),t})(),mk=(()=>{let t=class extends uI{constructor(t,e,n){if(!e)throw new Error("clr-accordion-panel should only be used inside of clr-accordion");super(t,e),this.expand=n}get flavor(){return this.expand.expanded}};return t.\u0275fac=function(e){return new(e||t)(Qs(ds),Qs(gk,8),Qs(wC))},t.\u0275dir=ye({type:t,selectors:[["clr-accordion-panel"]],features:[Wo]}),t})(),yk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS]]}),t})(),vk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,yk],yk]}),t})(),bk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})(),wk=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh,rS,zE],rS,zE]}),t})(),_k=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[mx,zT,rS,qx,IE,SC,IC,qE,US,EE,zx,ek,nk,VE,vk,zE,bk,wS,wk]}),t})();const Sk=sr(dC),Ck=sr(sE),Ek=sr(mE),Ik=sr(bE),Tk=sr(pI),xk=sr(_x),kk=sr(gk);function Ak(t){if("string"!=typeof t||!t)throw new Error("expected a non-empty string, got: "+t)}function Ok(t){if("number"!=typeof t)throw new Error("expected a number, got: "+t)}const Dk="eTag",Rk="url";function Pk(t){return function(t,e){const n=new Set,r=[];for(const i of t){const t=i.unicode;n.has(t)||(n.add(t),r.push(i))}return r}(t)}const Nk=[{version:1,migration:function(t,e,n){function r(e,n,r){const i=n?t.createObjectStore(e,{keyPath:n}):t.createObjectStore(e);if(r)for(const[t,[s,o]]of Object.entries(r))i.createIndex(t,s,{multiEntry:o});return i}r("keyvalue"),r("emoji","unicode",{tokens:["tokens",!0],"group-order":[["group","order"]],skinUnicodes:["skinUnicodes",!0]}),r("favorites",void 0,{count:[""]}),n()}}],Fk={},Lk={},Mk={};function Vk(t,e,n){n.onerror=()=>e(n.error),n.onblocked=()=>e(new Error("IDB blocked")),n.onsuccess=()=>t(n.result)}function jk(t,e,n,r){return new Promise((i,s)=>{const o=t.transaction(e,n),a="string"==typeof e?o.objectStore(e):e.map(t=>o.objectStore(t));let c;r(a,t=>{c=t}),o.oncomplete=()=>i(c),o.onerror=()=>s(o.error)})}function Uk(t){const e=Fk[t],n=e&&e.result;if(n){n.close();const e=Mk[t];if(e)for(const t of e)t()}delete Fk[t],delete Lk[t],delete Mk[t]}const Bk=new Set([":D","xD",":'D","o:)",":x",":p",";p","xp",":l",":z",":j","8D","xo","8)",":B",":o",":s",":'o","Dx","x(","D:",":c",">0)",":3","</3","<3","\\m/",":E","8#"]);function zk(t){return t.split(/[\s_]+/).map(t=>!t.match(/\w/)||Bk.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase()).filter(Boolean)}function Hk(t,e,n,r){t[e](n).onsuccess=t=>r&&r(t.target.result)}function Gk(t,e,n){Hk(t,"get",e,n)}function $k(t,e,n){Hk(t,"getAll",e,n)}function qk(t,e){const n=function(t,e){let n=t[0];for(let r=1;r<t.length;r++){const i=t[r];e(n)>e(i)&&(n=i)}return n}(t,t=>t.length),r=[];for(const i of n)t.some(t=>-1===t.findIndex(t=>e(t)===e(i)))||r.push(i);return r}async function Wk(t,e,n,r){try{const i=function(t){return t.map(({annotation:t,emoticon:e,group:n,order:r,shortcodes:i,skins:s,tags:o,emoji:a,version:c})=>{const l=[...new Set([...i.map(zk).flat(),...o.map(zk).flat(),...zk(t),e].filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=2))].sort(),u={annotation:t,group:n,order:r,shortcodes:i,tags:o,tokens:l,unicode:a,version:c};if(e&&(u.emoticon=e),s){u.skinTones=[],u.skinUnicodes=[],u.skinVersions=[];for(const{tone:t,emoji:e,version:n}of s)u.skinTones.push(t),u.skinUnicodes.push(e),u.skinVersions.push(n)}return u})}(e);await jk(t,["emoji","keyvalue"],"readwrite",([t,e])=>{let s,o,a,c=0;function l(){3==++c&&function(){if(s!==r||o!==n){for(const e of a)t.delete(e);for(const e of i)t.put(e);e.put(r,Dk),e.put(n,Rk)}}()}Gk(e,Dk,t=>{s=t,l()}),Gk(e,Rk,t=>{o=t,l()}),Hk(t,"getAllKeys",void 0,t=>{a=t,l()})})}finally{}}async function Qk(t,e){const n=zk(e);return jk(t,"emoji","readonly",(t,e)=>{const r=[],i=()=>{const t=qk(r,t=>t.unicode);e(t.sort((t,e)=>t.order<e.order?-1:1))};for(let s=0;s<n.length;s++){const e=n[s],o=s===n.length-1?IDBKeyRange.bound(e,e+"\uffff",!1,!0):IDBKeyRange.only(e);$k(t.index("tokens"),o,t=>{r.push(t),r.length===n.length&&i()})}})}function Yk(t,e,n){return jk(t,e,"readonly",(t,e)=>Gk(t,n,e))}const Kk=["name","shortcodes","url"];function Zk(t){!function(t){const e=t&&Array.isArray(t),n=e&&t.length&&(!t[0]||Kk.some(e=>!(e in t[0])));if(!e||n)throw new Error("Expected custom emojis to be in correct format")}(t);const e=(t,e)=>t.name.toLowerCase()<e.name.toLowerCase()?-1:1,n=t.sort(e),r=function(t,e){const n=new Map;for(const r of t){const t=[...new Set(r.shortcodes.map(t=>zk(t)).flat())];for(const e of t){let t=n;for(let n=0;n<e.length;n++){const r=e.charAt(n);let i=t.get(r);i||(i=new Map,t.set(r,i)),t=i}let i=t.get("");i||(i=[],t.set("",i)),i.push(r)}}return(t,e)=>{let r=n;for(let n=0;n<t.length;n++){const e=t.charAt(n),i=r.get(e);if(!i)return[];r=i}if(e)return r.get("")||[];const i=[],s=r?[r]:[];for(;s.length;){const t=[...s.shift().entries()].sort((t,e)=>t[0]<e[0]?-1:1);for(const[e,n]of t)""===e?i.push(...n):s.push(n)}return i}}(t),i=t=>r(t,!0),s=t=>r(t,!1),o=new Map,a=new Map;for(const c of t){a.set(c.name.toLowerCase(),c);for(const t of c.shortcodes)o.set(t.toLowerCase(),c)}return{all:n,search:t=>{const n=zk(t);return qk(n.map((t,e)=>(e<n.length-1?i:s)(t)),t=>t.name).sort(e)},byShortcode:t=>o.get(t.toLowerCase()),byName:t=>a.get(t.toLowerCase())}}function Xk(t){if(!t)return t;if(delete t.tokens,t.skinTones){const e=t.skinTones.length;t.skins=Array(e);for(let n=0;n<e;n++)t.skins[n]={tone:t.skinTones[n],unicode:t.skinUnicodes[n],version:t.skinVersions[n]};delete t.skinTones,delete t.skinUnicodes,delete t.skinVersions}return t}function Jk(t){t||function(){console.warn(...arguments)}("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const tA=["annotation","emoji","emoticon","group","order","shortcodes","tags","version"];function eA(t,e){if(2!==Math.floor(t.status/100))throw new Error("Failed to fetch: "+e+":  "+t.status)}async function nA(t){const e=await fetch(t);eA(e,t);const n=e.headers.get("etag");Jk(n);const r=await e.json();return function(t){if(!t||!Array.isArray(t)||!t[0]||"object"!=typeof t[0]||tA.some(e=>!(e in t[0])))throw new Error("Expected emojibase full (not compact) data, but data is in wrong format")}(r),[n,r]}async function rA(t){const e=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=-1;++i<e;)r[i]=t.charCodeAt(i);return n}(JSON.stringify(t)),n=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=-1;++i<r;)e+=String.fromCharCode(n[i]);return e}(await crypto.subtle.digest("SHA-1",e));return btoa(n)}function iA(){}function sA(t){return t()}function oA(){return Object.create(null)}function aA(t){t.forEach(sA)}function cA(t){return"function"==typeof t}function lA(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function uA(t){return t&&cA(t.destroy)?t.destroy:iA}function hA(t,e){t.appendChild(e)}function dA(t,e,n){t.insertBefore(e,n||null)}function pA(t){t.parentNode.removeChild(t)}function fA(t){return document.createElement(t)}function gA(t){return document.createTextNode(t)}function mA(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function yA(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vA(t,e){t.data!==(e=""+e)&&(t.data=e)}function bA(t,e){(null!=e||t.value)&&(t.value=e)}function wA(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let _A;function SA(t){_A=t}function CA(){if(!_A)throw new Error("Function called outside component initialization");return _A}const EA=[],IA=[],TA=[],xA=[],kA=Promise.resolve();let AA=!1;function OA(){AA||(AA=!0,kA.then(FA))}function DA(){return OA(),kA}function RA(t){TA.push(t)}let PA=!1;const NA=new Set;function FA(){if(!PA){PA=!0;do{for(let t=0;t<EA.length;t+=1){const e=EA[t];SA(e),LA(e.$$)}for(EA.length=0;IA.length;)IA.pop()();for(let t=0;t<TA.length;t+=1){const e=TA[t];NA.has(e)||(NA.add(e),e())}TA.length=0}while(EA.length);for(;xA.length;)xA.pop()();AA=!1,PA=!1,NA.clear()}}function LA(t){if(null!==t.fragment){t.update(),aA(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(RA)}}const MA=new Set;function VA(t,e){t&&t.i&&(MA.delete(t),t.i(e))}const jA="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function UA(t,e){t.d(1),e.delete(t.key)}function BA(t,e,n,r,i,s,o,a,c,l,u,h){let d=t.length,p=s.length,f=d;const g={};for(;f--;)g[t[f].key]=f;const m=[],y=new Map,v=new Map;for(f=p;f--;){const t=h(i,s,f),a=n(t);let c=o.get(a);c?r&&c.p(t,e):(c=l(a,t),c.c()),y.set(a,m[f]=c),a in g&&v.set(a,Math.abs(f-g[a]))}const b=new Set,w=new Set;function _(t){VA(t,1),t.m(a,u,o.has(t.key)),o.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=m[p-1],n=t[d-1],r=e.key,i=n.key;e===n?(u=e.first,d--,p--):y.has(i)?!o.has(r)||b.has(r)?_(e):w.has(i)?d--:v.get(r)>v.get(i)?(w.add(r),_(e)):(b.add(i),d--):(c(n,o),d--)}for(;d--;){const e=t[d];y.has(e.key)||c(e,o)}for(;p;)_(m[p-1]);return m}let zA;"function"==typeof HTMLElement&&(zA=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(aA(n.on_destroy),n.fragment&&n.fragment.d(1),n.on_destroy=n.fragment=null,n.ctx=[])}(this),this.$destroy=iA}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});var HA={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji. Try refreshing.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const GA=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map(([t,e,n])=>({id:t,emoji:e,name:n})),$A=GA.slice(1),qA=GA[0],WA="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function QA(t){return t.unicode.includes("\u200d")}const YA={"\u{1f603}":.6,"\u{1f610}\ufe0f":.7,"\u{1f600}":1,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,"\u{1f923}":3,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f929}":5,"\u{1f970}":11,"\u{1f97b}":12,"\u{1f9d1}\u200d\u{1f9b0}":12.1,"\u{1f972}":13},KA="\u{1f590}\ufe0f",ZA=["\u{1f60a}","\u{1f612}","\u2665\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],XA='"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Twemoji Mozilla","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',JA=(t,e)=>{try{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d");return r.textBaseline="top",r.font="100px "+XA,r.fillStyle=e,r.scale(.01,.01),r.fillText(t,0,0),r.getImageData(0,0,1,1).data}catch(n){}};function tO(t){const e=JA(t,"#000"),n=JA(t,"#fff");return e&&n&&((t,e)=>{const n=[...t].join(",");return n===[...e].join(",")&&"0,0,0,0"!==n})(e,n)}const eO=new Promise(t=>WA(()=>t(function(){let t;for(const[e,n]of Object.entries(YA)){if(!tO(e))break;t=n}return t}()))),nO=new Map;function rO(t){t.preventDefault(),t.stopPropagation()}function iO(t,e,n){return(e+=t?-1:1)<0?e=n.length-1:e>=n.length&&(e=0),e}function sO(t,e){const n=new Set,r=[];for(const i of t){const t=e(i);n.has(t)||(n.add(t),r.push(i))}return r}const oO=requestAnimationFrame,aO="function"==typeof ResizeObserver;function cO(t,e){let n;return aO?(n=new ResizeObserver(t=>e(t[0].contentRect.width)),n.observe(t)):oO(()=>e(t.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function lO(t){{const e=document.createRange();return e.selectNode(t.firstChild),e.getBoundingClientRect().width}}let uO;const{Map:hO}=jA;function dO(t,e,n){const r=t.slice();return r[64]=e[n],r[66]=n,r}function pO(t,e,n){const r=t.slice();return r[64]=e[n],r[66]=n,r}function fO(t,e,n){const r=t.slice();return r[67]=e[n],r[66]=n,r}function gO(t,e,n){const r=t.slice();return r[70]=e[n],r}function mO(t,e,n){const r=t.slice();return r[73]=e[n],r[66]=n,r}function yO(t,e){let n,r,i,s,o,a,c,l=e[73]+"";return{key:t,first:null,c(){n=fA("div"),r=gA(l),yA(n,"id",i="skintone-"+e[66]),yA(n,"class",s="emoji skintone-option cursor-pointer hide-focus "+(e[66]===e[15]?"active":"")),yA(n,"aria-selected",o=e[66]===e[15]),yA(n,"role","option"),yA(n,"title",a=e[0].skinTones[e[66]]),yA(n,"tabindex","-1"),yA(n,"aria-label",c=e[0].skinTones[e[66]]),this.first=n},m(t,e){dA(t,n,e),hA(n,r)},p(t,e){524288&e[0]&&l!==(l=t[73]+"")&&vA(r,l),524288&e[0]&&i!==(i="skintone-"+t[66])&&yA(n,"id",i),557056&e[0]&&s!==(s="emoji skintone-option cursor-pointer hide-focus "+(t[66]===t[15]?"active":""))&&yA(n,"class",s),557056&e[0]&&o!==(o=t[66]===t[15])&&yA(n,"aria-selected",o),524289&e[0]&&a!==(a=t[0].skinTones[t[66]])&&yA(n,"title",a),524289&e[0]&&c!==(c=t[0].skinTones[t[66]])&&yA(n,"aria-label",c)},d(t){t&&pA(n)}}}function vO(t,e){let n,r,i,s,o,a,c,l,u=e[70].emoji+"";function h(...t){return e[60](e[70],...t)}return{key:t,first:null,c(){n=fA("button"),r=fA("div"),i=gA(u),yA(r,"class","emoji"),yA(n,"role","tab"),yA(n,"class","nav-button"),yA(n,"aria-controls",s="tab-"+e[70].id),yA(n,"aria-label",o=e[0].categories[e[70].name]),yA(n,"aria-selected",a=!e[7]&&e[23].id===e[70].id),yA(n,"title",c=e[0].categories[e[70].name]),this.first=n},m(t,e,s){dA(t,n,e),hA(n,r),hA(r,i),s&&l(),l=mA(n,"click",h)},p(t,r){e=t,4194304&r[0]&&u!==(u=e[70].emoji+"")&&vA(i,u),4194304&r[0]&&s!==(s="tab-"+e[70].id)&&yA(n,"aria-controls",s),4194305&r[0]&&o!==(o=e[0].categories[e[70].name])&&yA(n,"aria-label",o),12583040&r[0]&&a!==(a=!e[7]&&e[23].id===e[70].id)&&yA(n,"aria-selected",a),4194305&r[0]&&c!==(c=e[0].categories[e[70].name])&&yA(n,"title",c)},d(t){t&&pA(n),l()}}}function bO(t){let e;return{c(){e=fA("div"),yA(e,"class","custom-emoji"),wA(e,"background-image","url("+t[64].url+")")},m(t,n){dA(t,e,n)},p(t,n){4&n[0]&&wA(e,"background-image","url("+t[64].url+")")},d(t){t&&pA(e)}}}function wO(t){let e,n=xO(t[64],t[14])+"";return{c(){e=gA(n)},m(t,n){dA(t,e,n)},p(t,r){16388&r[0]&&n!==(n=xO(t[64],t[14])+"")&&vA(e,n)},d(t){t&&pA(e)}}}function _O(t,e){let n,r,i,s,o,a,c;function l(t,e){return t[64].unicode?wO:bO}let u=l(e),h=u(e);return{key:t,first:null,c(){n=fA("button"),h.c(),yA(n,"role",r=e[7]?"option":"menuitem"),yA(n,"aria-selected",i=e[7]?e[66]==e[8]:""),yA(n,"aria-label",s=e[26](e[64],e[14])),yA(n,"title",o=e[64].title),yA(n,"class",a="emoji "+(e[7]&&e[66]===e[8]?"active":"")),yA(n,"id",c="emo-"+e[64].id),this.first=n},m(t,e){dA(t,n,e),h.m(n,null)},p(t,e){u===(u=l(t))&&h?h.p(t,e):(h.d(1),h=u(t),h&&(h.c(),h.m(n,null))),128&e[0]&&r!==(r=t[7]?"option":"menuitem")&&yA(n,"role",r),388&e[0]&&i!==(i=t[7]?t[66]==t[8]:"")&&yA(n,"aria-selected",i),16388&e[0]&&s!==(s=t[26](t[64],t[14]))&&yA(n,"aria-label",s),4&e[0]&&o!==(o=t[64].title)&&yA(n,"title",o),388&e[0]&&a!==(a="emoji "+(t[7]&&t[66]===t[8]?"active":""))&&yA(n,"class",a),4&e[0]&&c!==(c="emo-"+t[64].id)&&yA(n,"id",c)},d(t){t&&pA(n),h.d()}}}function SO(t,e){let n,r,i,s,o,a,c,l,u,h,d=(e[7]?e[0].searchResultsLabel:e[67].category?e[67].category:e[2].length>1?e[0].categories.custom:e[0].categories[e[23].name])+"",p=[],f=new hO,g=e[67].emojis;const m=t=>t[64].id;for(let y=0;y<g.length;y+=1){let t=pO(e,g,y),n=m(t);f.set(n,p[y]=_O(n,t))}return{key:t,first:null,c(){n=fA("div"),r=gA(d),o=fA("div");for(let t=0;t<p.length;t+=1)p[t].c();yA(n,"id",i="menu-label-"+e[66]),yA(n,"class",s="category "+(e[2].length>1?"":"gone")),yA(n,"aria-hidden","true"),yA(o,"class","emoji-menu"),yA(o,"role",a=e[7]?"listbox":"menu"),yA(o,"aria-labelledby",c="menu-label-"+e[66]),yA(o,"id",l=e[7]?"search-results":""),this.first=n},m(t,i,s){dA(t,n,i),hA(n,r),dA(t,o,i);for(let e=0;e<p.length;e+=1)p[e].m(o,null);s&&h(),h=uA(u=e[27].call(null,o))},p(t,e){8388741&e[0]&&d!==(d=(t[7]?t[0].searchResultsLabel:t[67].category?t[67].category:t[2].length>1?t[0].categories.custom:t[0].categories[t[23].name])+"")&&vA(r,d),4&e[0]&&i!==(i="menu-label-"+t[66])&&yA(n,"id",i),4&e[0]&&s!==(s="category "+(t[2].length>1?"":"gone"))&&yA(n,"class",s),67125636&e[0]&&(p=BA(p,e,m,1,t,t[67].emojis,f,o,UA,_O,null,pO)),128&e[0]&&a!==(a=t[7]?"listbox":"menu")&&yA(o,"role",a),4&e[0]&&c!==(c="menu-label-"+t[66])&&yA(o,"aria-labelledby",c),128&e[0]&&l!==(l=t[7]?"search-results":"")&&yA(o,"id",l)},d(t){t&&pA(n),t&&pA(o);for(let e=0;e<p.length;e+=1)p[e].d();h()}}}function CO(t){let e,n;return{c(){e=fA("img"),yA(e,"class","custom-emoji"),e.src!==(n=t[64].url)&&yA(e,"src",n),yA(e,"loading","lazy"),yA(e,"alt","")},m(t,n){dA(t,e,n)},p(t,r){1048576&r[0]&&e.src!==(n=t[64].url)&&yA(e,"src",n)},d(t){t&&pA(e)}}}function EO(t){let e,n=xO(t[64],t[14])+"";return{c(){e=gA(n)},m(t,n){dA(t,e,n)},p(t,r){1064960&r[0]&&n!==(n=xO(t[64],t[14])+"")&&vA(e,n)},d(t){t&&pA(e)}}}function IO(t,e){let n,r,i,s;function o(t,e){return t[64].unicode?EO:CO}let a=o(e),c=a(e);return{key:t,first:null,c(){n=fA("button"),c.c(),yA(n,"role","menuitem"),yA(n,"aria-label",r=e[26](e[64],e[14])),yA(n,"title",i=e[64].title),yA(n,"class","emoji"),yA(n,"id",s="fav-"+e[64].id),this.first=n},m(t,e){dA(t,n,e),c.m(n,null)},p(t,e){a===(a=o(t))&&c?c.p(t,e):(c.d(1),c=a(t),c&&(c.c(),c.m(n,null))),1064960&e[0]&&r!==(r=t[26](t[64],t[14]))&&yA(n,"aria-label",r),1048576&e[0]&&i!==(i=t[64].title)&&yA(n,"title",i),1048576&e[0]&&s!==(s="fav-"+t[64].id)&&yA(n,"id",s)},d(t){t&&pA(n),c.d()}}}function TO(t){let e,n,r,i,s,o,a,c,l,u,h,d,p,f,g,m,y,v,b,w,_,S,C,E,I,T,x,k,A,O,D,R,P,N,F,L,M,V,j,U,B,z,H,G,$,q=t[0].searchLabel+"",W=t[0].searchDescription+"",Q=t[0].skinToneDescription+"",Y=[],K=new hO,Z=[],X=new hO,J=[],tt=new hO,et=[],nt=new hO,rt=t[19];const it=t=>t[73];for(let ht=0;ht<rt.length;ht+=1){let e=mO(t,rt,ht),n=it(e);K.set(n,Y[ht]=yO(n,e))}let st=t[22];const ot=t=>t[70].id;for(let ht=0;ht<st.length;ht+=1){let e=gO(t,st,ht),n=ot(e);X.set(n,Z[ht]=vO(n,e))}let at=t[2];const ct=t=>t[67].category;for(let ht=0;ht<at.length;ht+=1){let e=fO(t,at,ht),n=ct(e);tt.set(n,J[ht]=SO(n,e))}let lt=t[20];const ut=t=>t[64].id;for(let ht=0;ht<lt.length;ht+=1){let e=dO(t,lt,ht),n=ut(e);nt.set(n,et[ht]=IO(n,e))}return{c(){e=fA("section"),n=fA("div"),r=fA("div"),i=fA("div"),s=fA("input"),l=fA("label"),u=gA(q),h=fA("span"),d=gA(W),p=fA("div"),f=fA("button"),g=gA(t[16]),v=fA("span"),b=gA(Q),w=fA("div");for(let t=0;t<Y.length;t+=1)Y[t].c();T=fA("div");for(let t=0;t<Z.length;t+=1)Z[t].c();k=fA("div"),A=fA("div"),D=fA("div"),R=gA(t[9]),N=fA("div");for(let t=0;t<J.length;t+=1)J[t].c();j=fA("div");for(let t=0;t<et.length;t+=1)et[t].c();z=fA("div"),H=fA("button"),H.textContent="\u{1f600}",this.c=iA,yA(n,"class","pad-top"),yA(s,"id","search"),yA(s,"class","search"),yA(s,"type","search"),yA(s,"role","combobox"),yA(s,"enterkeyhint","search"),yA(s,"placeholder",o=t[0].searchLabel),yA(s,"autocapitalize","none"),yA(s,"autocomplete","off"),yA(s,"spellcheck","true"),yA(s,"aria-expanded",a=!(!t[7]||!t[1].length)),yA(s,"aria-controls","search-results"),yA(s,"aria-owns","search-results"),yA(s,"aria-describedby","search-description"),yA(s,"aria-autocomplete","list"),yA(s,"aria-activedescendant",c=t[25]?"emo-"+t[25]:""),yA(l,"class","sr-only"),yA(l,"for","search"),yA(h,"id","search-description"),yA(h,"class","sr-only"),yA(i,"class","search-wrapper"),yA(f,"id","skintone-button"),yA(f,"class",m="emoji "+(t[11]?"hide-focus":"")),yA(f,"aria-label",t[18]),yA(f,"title",t[18]),yA(f,"aria-describedby","skintone-description"),yA(f,"aria-haspopup","listbox"),yA(f,"aria-expanded",t[11]),yA(f,"aria-controls","skintone-list"),yA(p,"class",y="skintone-button-wrapper "+(t[12]?"expanded":"")),yA(v,"id","skintone-description"),yA(v,"class","sr-only"),yA(w,"id","skintone-list"),yA(w,"class",_="skintone-list "+(t[11]?"":"hidden no-animate")),yA(w,"style",S=t[11]?"transform: translateY(0);":"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))"),yA(w,"role","listbox"),yA(w,"aria-label",C=t[0].skinTonesLabel),yA(w,"aria-activedescendant",E="skintone-"+t[15]),yA(w,"aria-hidden",I=!t[11]),yA(r,"class","search-row"),yA(T,"class","nav"),yA(T,"role","tablist"),wA(T,"grid-template-columns","repeat("+t[22].length+", 1fr)"),yA(T,"aria-label",x=t[0].categoriesLabel),yA(A,"class","indicator"),yA(A,"style",t[10]),yA(k,"class","indicator-wrapper"),yA(k,"aria-hidden","true"),yA(D,"class",P="message "+(t[9]?"":"gone")),yA(D,"role","alert"),yA(D,"aria-live","polite"),yA(N,"class",F="tabpanel "+(!t[24]||t[9]?"gone":"")),yA(N,"role",L=t[7]?"region":"tabpanel"),yA(N,"aria-label",M=t[7]?t[0].searchResultsLabel:t[0].categories[t[23].name]),yA(N,"id",V=t[7]?"":"tab-"+t[23].id),yA(N,"tabindex","0"),yA(j,"class",U="favorites emoji-menu "+(t[9]?"gone":"")),yA(j,"role","menu"),yA(j,"aria-label",B=t[0].favoritesLabel),wA(j,"padding-right",t[21]+"px"),yA(H,"tabindex","-1"),yA(H,"class","emoji baseline-emoji"),yA(z,"aria-hidden","true"),yA(z,"class","hidden abs-pos"),yA(e,"class","picker"),yA(e,"aria-label",G=t[0].regionLabel),yA(e,"style",t[17])},m(o,a,c){dA(o,e,a),hA(e,n),hA(e,r),hA(r,i),hA(i,s),bA(s,t[3]),hA(i,l),hA(l,u),hA(i,h),hA(h,d),hA(r,p),hA(p,f),hA(f,g),hA(r,v),hA(v,b),hA(r,w);for(let t=0;t<Y.length;t+=1)Y[t].m(w,null);t[59](w),hA(e,T);for(let t=0;t<Z.length;t+=1)Z[t].m(T,null);hA(e,k),hA(k,A),hA(e,D),hA(D,R),hA(e,N);for(let t=0;t<J.length;t+=1)J[t].m(N,null);t[61](N),hA(e,j);for(let t=0;t<et.length;t+=1)et[t].m(j,null);hA(e,z),hA(z,H),t[62](H),t[63](e),c&&aA($),$=[mA(s,"input",t[58]),mA(s,"keydown",t[29]),mA(f,"click",t[34]),mA(w,"focusout",t[37]),mA(w,"click",t[33]),mA(w,"keydown",t[35]),mA(w,"keyup",t[36]),mA(T,"keydown",t[31]),uA(O=t[28].call(null,A)),mA(N,"click",t[32]),mA(j,"click",t[32])]},p(t,n){1&n[0]&&o!==(o=t[0].searchLabel)&&yA(s,"placeholder",o),130&n[0]&&a!==(a=!(!t[7]||!t[1].length))&&yA(s,"aria-expanded",a),33554432&n[0]&&c!==(c=t[25]?"emo-"+t[25]:"")&&yA(s,"aria-activedescendant",c),8&n[0]&&bA(s,t[3]),1&n[0]&&q!==(q=t[0].searchLabel+"")&&vA(u,q),1&n[0]&&W!==(W=t[0].searchDescription+"")&&vA(d,W),65536&n[0]&&vA(g,t[16]),2048&n[0]&&m!==(m="emoji "+(t[11]?"hide-focus":""))&&yA(f,"class",m),262144&n[0]&&yA(f,"aria-label",t[18]),262144&n[0]&&yA(f,"title",t[18]),2048&n[0]&&yA(f,"aria-expanded",t[11]),4096&n[0]&&y!==(y="skintone-button-wrapper "+(t[12]?"expanded":""))&&yA(p,"class",y),1&n[0]&&Q!==(Q=t[0].skinToneDescription+"")&&vA(b,Q),557057&n[0]&&(Y=BA(Y,n,it,1,t,t[19],K,w,UA,yO,null,mO)),2048&n[0]&&_!==(_="skintone-list "+(t[11]?"":"hidden no-animate"))&&yA(w,"class",_),2048&n[0]&&S!==(S=t[11]?"transform: translateY(0);":"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))")&&yA(w,"style",S),1&n[0]&&C!==(C=t[0].skinTonesLabel)&&yA(w,"aria-label",C),32768&n[0]&&E!==(E="skintone-"+t[15])&&yA(w,"aria-activedescendant",E),2048&n[0]&&I!==(I=!t[11])&&yA(w,"aria-hidden",I),1086324865&n[0]&&(Z=BA(Z,n,ot,1,t,t[22],X,T,UA,vO,null,gO)),4194304&n[0]&&wA(T,"grid-template-columns","repeat("+t[22].length+", 1fr)"),1&n[0]&&x!==(x=t[0].categoriesLabel)&&yA(T,"aria-label",x),1024&n[0]&&yA(A,"style",t[10]),512&n[0]&&vA(R,t[9]),512&n[0]&&P!==(P="message "+(t[9]?"":"gone"))&&yA(D,"class",P),75514245&n[0]&&(J=BA(J,n,ct,1,t,t[2],tt,N,UA,SO,null,fO)),16777728&n[0]&&F!==(F="tabpanel "+(!t[24]||t[9]?"gone":""))&&yA(N,"class",F),128&n[0]&&L!==(L=t[7]?"region":"tabpanel")&&yA(N,"role",L),8388737&n[0]&&M!==(M=t[7]?t[0].searchResultsLabel:t[0].categories[t[23].name])&&yA(N,"aria-label",M),8388736&n[0]&&V!==(V=t[7]?"":"tab-"+t[23].id)&&yA(N,"id",V),68173824&n[0]&&(et=BA(et,n,ut,1,t,t[20],nt,j,UA,IO,null,dO)),512&n[0]&&U!==(U="favorites emoji-menu "+(t[9]?"gone":""))&&yA(j,"class",U),1&n[0]&&B!==(B=t[0].favoritesLabel)&&yA(j,"aria-label",B),2097152&n[0]&&wA(j,"padding-right",t[21]+"px"),1&n[0]&&G!==(G=t[0].regionLabel)&&yA(e,"aria-label",G),131072&n[0]&&yA(e,"style",t[17])},i:iA,o:iA,d(n){n&&pA(e);for(let t=0;t<Y.length;t+=1)Y[t].d();t[59](null);for(let t=0;t<Z.length;t+=1)Z[t].d();for(let t=0;t<J.length;t+=1)J[t].d();t[61](null);for(let t=0;t<et.length;t+=1)et[t].d();t[62](null),t[63](null),aA($)}}}function xO(t,e){return e&&t.skins&&t.skins[e]||t.unicode}function kO(t,e,n){let r,i,s,o,a,c,l,u,h,d,{locale:p=null}=e,{dataSource:f=null}=e,{skinToneEmoji:g=KA}=e,{i18n:m=HA}=e,{database:y=null}=e,{customEmoji:v=null}=e,b=[],w=[],_="",S="",C=!1,E=-1,I=0,T="",x=!1,k=!1,A=0,O=0,D="",R=[],P=[],N=8,F=0,L=0,M=$A,V=!1;function j(t){r.getRootNode().getElementById(t).focus()}function U(t,e){r.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,composed:!0}))}var B;function z(t){const e=r.getRootNode();!function(t,e,n){for(const r of t){const t=lO(n(r));void 0===uO&&(uO=lO(e));const i=t.toFixed(1)===uO.toFixed(1);nO.set(r.unicode,i)}}(t,i,t=>e.getElementById("emo-"+t.id)),n(1,b=b)}function H(t){return!t.unicode||!QA(t)||nO.get(t.unicode)}async function G(t){const e=await eO;return t.filter(({version:t})=>!t||t<=e)}async function $(t){return function(t,e){const n=t=>{const n={};for(const r of t)"number"==typeof r.tone&&r.version<=e&&(n[r.tone]=r.unicode);return n};return t.map(({unicode:t,skins:e,shortcodes:r,url:i,name:s,category:o})=>({unicode:t,name:s,shortcodes:r,url:i,category:o,id:t||s,skins:e&&n(e),title:r.join(", ")}))}(t,await eO)}async function q(t){if(void 0===t)return[];const e=-1===t?v:await y.getEmojiByGroup(t);return $(await G(e))}async function W(t){return $(await G(await y.getEmojiBySearchQuery(t)))}function Q(t){n(3,_=""),n(44,S=""),n(8,E=-1),n(48,L=M.findIndex(e=>e.id===t.id))}async function Y(t){const e=await y.getEmojiByUnicodeOrName(t),r=[...b,...P].find(e=>e.id===t),i=r.unicode&&xO(r,A);await y.incrementFavoriteEmojiCount(t),n(46,u=u),U("emoji-click",{emoji:e,skinTone:A,...i&&{unicode:i},...r.name&&{name:r.name}})}async function K(t){const{target:e}=t;if(!e.classList.contains("skintone-option"))return;rO(t);const r=parseInt(e.id.slice(9),10);n(14,A=r),n(11,x=!1),j("skintone-button"),U("skin-tone-change",{skinTone:r}),y.setPreferredSkinTone(r)}return eO.then(t=>{t||n(9,o=m.emojiUnsupportedMessage)}),B=async()=>{await DA(),n(38,p=p||"en"),n(39,f=f||"https://cdn.jsdelivr.net/npm/emojibase-data@5/en/data.json")},CA().$$.on_mount.push(B),CA().$$.on_destroy.push(async()=>{y&&await y.close()}),t.$set=t=>{"locale"in t&&n(38,p=t.locale),"dataSource"in t&&n(39,f=t.dataSource),"skinToneEmoji"in t&&n(41,g=t.skinToneEmoji),"i18n"in t&&n(0,m=t.i18n),"database"in t&&n(40,y=t.database),"customEmoji"in t&&n(42,v=t.customEmoji)},t.$$.update=()=>{if(896&t.$$.dirty[1]&&p&&f&&(!y||y.locale!==p&&y.dataSource!==f)&&n(40,y=new class{constructor({dataSource:t="https://cdn.jsdelivr.net/npm/emojibase-data@5/en/data.json",locale:e="en",customEmoji:n=[]}={}){this.dataSource=t,this.locale=e,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=Zk(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await(e=this._dbName,Lk[e]||(Lk[e]=async function(t){const e=await new Promise((e,n)=>{const r=indexedDB.open(t,1);Fk[t]=r,r.onupgradeneeded=t=>{const e=r.result,n=t.currentTarget.transaction,i=Nk.filter(({version:e})=>t.oldVersion<e);!function t(){if(!i.length)return;const{migration:r}=i.shift();r(e,n,t)}()},Vk(e,n,r)});return e.onclose=()=>Uk(t),e}(e)),Lk[e]);var e;!function(t,e){let n=Mk[t];n||(n=Mk[t]=[]),n.push(e)}(this._dbName,this._clear);const n=this.dataSource;await async function(t){return!(await Yk(t,"keyvalue",Rk))}(t)?await async function(t,e){let[n,r]=await nA(e);n||(n=await rA(r)),await Wk(t,r,e,n)}(t,n):this._lazyUpdate=async function(t,e){let n,r=await async function(t){const e=await fetch(t,{method:"HEAD"});eA(e,t);const n=e.headers.get("etag");return Jk(n),n}(e);if(!r){const t=await nA(e);r=t[0],n=t[1],r||(r=await rA(n))}await async function(t,e,n){const[r,i]=await Promise.all([Dk,Rk].map(e=>Yk(t,"keyvalue",e)));return r===n&&i===e}(t,e,r)||(n||(n=(await nA(e))[1]),await Wk(t,n,e,r))}(t,n)}async ready(){return this._ready||(this._ready=this._init()),this._ready}async getEmojiByGroup(t){return Ok(t),await this.ready(),Pk(await async function(t,e){return jk(t,"emoji","readonly",(t,n)=>{const r=IDBKeyRange.bound([e,0],[e+1,0],!1,!0);$k(t.index("group-order"),r,n)})}(this._db,t)).map(Xk)}async getEmojiBySearchQuery(t){return Ak(t),await this.ready(),[...this._custom.search(t),...Pk(await Qk(this._db,t)).map(Xk)]}async getEmojiByShortcode(t){return Ak(t),await this.ready(),this._custom.byShortcode(t)||Xk(await async function(t,e){return(await Qk(t,e)).filter(t=>t.shortcodes.map(t=>t.toLowerCase()).includes(e.toLowerCase()))[0]||null}(this._db,t))}async getEmojiByUnicodeOrName(t){return Ak(t),await this.ready(),this._custom.byName(t)||Xk(await async function(t,e){return jk(t,"emoji","readonly",(t,n)=>Gk(t,e,r=>{if(r)return n(r);Gk(t.index("skinUnicodes"),e,t=>n(t||null))}))}(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await Yk(this._db,"keyvalue","skinTone")||0}async setPreferredSkinTone(t){return Ok(t),await this.ready(),e=t,jk(this._db,"keyvalue","readwrite",t=>t.put(e,"skinTone"));var e}async incrementFavoriteEmojiCount(t){return Ak(t),await this.ready(),e=t,jk(this._db,"favorites","readwrite",t=>{Gk(t,e,n=>t.put((n||0)+1,e))});var e}async getTopFavoriteEmoji(t){return Ok(t),await this.ready(),(await function(t,e,n){return 0===n?[]:jk(t,["favorites","emoji"],"readonly",([t,r],i)=>{const s=[];t.index("count").openCursor(void 0,"prev").onsuccess=t=>{const o=t.target.result;if(!o)return i(s);function a(t){if(s.push(t),s.length===n)return i(s);o.continue()}const c=o.primaryKey,l=e.byName(c);if(l)return a(l);Gk(r,c,t=>{if(t)return a(t);o.continue()})}})}(this._db,this._custom,t)).map(Xk)}set customEmoji(t){this._custom=Zk(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(t){}if(this._db)return!0}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown()&&await Uk(this._dbName)}async delete(){var t;await this._shutdown()&&await(t=this._dbName,new Promise((e,n)=>{Uk(t),Vk(e,n,indexedDB.deleteDatabase(t))}))}}({dataSource:f,locale:p})),2560&t.$$.dirty[1]&&v&&y&&n(40,y.customEmoji=v,y),513&t.$$.dirty[0]|512&t.$$.dirty[1]&&y&&async function(){const t=setTimeout(()=>{n(9,o=m.loadingMessage)},1e3);try{await y.ready(),n(24,V=!0)}catch(e){console.error(e),n(9,o=m.networkErrorMessage)}finally{clearTimeout(t),o===m.loadingMessage&&n(9,o="")}}(),4194304&t.$$.dirty[0]|2048&t.$$.dirty[1]&&(v&&v.length?n(22,M=[qA,...$A]):M!==$A&&n(22,M=$A)),8&t.$$.dirty[0]&&WA(()=>{n(44,S=(_||"").trim()),n(8,E=-1)}),4194304&t.$$.dirty[0]|131072&t.$$.dirty[1]&&n(23,h=M[L]),8388608&t.$$.dirty[0]|8704&t.$$.dirty[1]&&async function(){y?S.length>=2?(n(1,b=await W(S)),n(7,C=!0)):h&&(n(1,b=await q(h.id)),n(7,C=!1)):(n(1,b=[]),n(7,C=!1))}(),4194432&t.$$.dirty[0]&&n(17,l=`\n  --font-family: ${XA};\n  --num-groups: ${M.length}; \n  --indicator-opacity: ${C?0:1}; \n  --num-skintones: 6;`),512&t.$$.dirty[1]&&async function(){y&&n(14,A=await y.getPreferredSkinTone())}(),1024&t.$$.dirty[1]&&n(19,R=Array(6).fill().map((t,e)=>function(t,e){if(0===e)return t;const n=t.indexOf("\u200d");return-1!==n?t.substring(0,n)+String.fromCodePoint(127995+e-1)+t.substring(n):(t.endsWith("\ufe0f")&&(t=t.substring(0,t.length-1)),t+"\ud83c"+String.fromCodePoint(57339+e-1))}(g,e))),540672&t.$$.dirty[0]&&n(16,c=R[A]),16385&t.$$.dirty[0]&&n(18,D=m.skinToneLabel.replace("{skinTone}",m.skinTones[A])),512&t.$$.dirty[1]&&y&&async function(){n(46,u=(await Promise.all(ZA.map(t=>y.getEmojiByUnicodeOrName(t)))).filter(Boolean))}(),98816&t.$$.dirty[1]&&y&&u&&async function(){const t=await y.getTopFavoriteEmoji(N),e=await $(sO([...t,...u],t=>t.unicode||t.name).slice(0,N));n(20,P=e)}(),147456&t.$$.dirty[1]&&n(10,T=aO?`transform: translateX(${L*I}px);`:`transform: translateX(${100*L}%);`),2&t.$$.dirty[0]){const t=b.filter(t=>t.unicode).filter(t=>QA(t)&&!nO.has(t.unicode));t.length?oO(()=>z(t)):(n(1,b=b.filter(H)),oO(()=>{n(6,s.scrollTop=0,s)}))}130&t.$$.dirty[0]&&n(2,w=function(){if(C)return[{category:"",emojis:b}];const t=new Map;for(const e of b){const n=e.category||"";let r=t.get(n);r||(r=[],t.set(n,r)),r.push(e)}return[...t.entries()].map(([t,e])=>({category:t,emojis:e})).sort((t,e)=>t.category<e.category?-1:1)}()),258&t.$$.dirty[0]&&n(25,d=-1!==E&&b[E].id),10240&t.$$.dirty[0]&&(x?a.addEventListener("transitionend",()=>{n(12,k=!0)},{once:!0}):n(12,k=!1))},[m,b,w,_,r,i,s,C,E,o,T,x,k,a,A,O,c,l,D,R,P,F,M,h,V,d,function(t,e){return(n=[t.name||xO(t,e),...t.shortcodes],sO(n,t=>t)).join(", ");var n},function(t){return cO(t,e=>{const i=parseInt(getComputedStyle(r).getPropertyValue("--num-columns"),10),s=t.parentElement.getBoundingClientRect().width-e;n(47,N=i),n(21,F=s)})},function(t){return cO(t,t=>{n(45,I=t)})},function(t){if(!C||!b.length)return;const e=e=>{rO(t),n(8,E=iO(e,E,b))};switch(t.key){case"ArrowDown":return e(!1);case"ArrowUp":return e(!0);case"Enter":if(-1!==E)return rO(t),Y(b[E].id);b.length&&n(8,E=0)}},Q,function(t){const{target:e,key:n}=t,r=e=>{e&&(rO(t),e.focus())};switch(n){case"ArrowLeft":return r(e.previousSibling);case"ArrowRight":return r(e.nextSibling)}},async function(t){const{target:e}=t;e.classList.contains("emoji")&&(rO(t),Y(e.id.substring(4)))},K,async function(t){n(11,x=!x),n(15,O=A),x&&(rO(t),oO(()=>j("skintone-"+O)))},function(t){if(!x)return;const e=async e=>{rO(t),n(15,O=iO(e,O,R)),await DA(),j("skintone-"+O)};switch(t.key){case"ArrowUp":return e(!0);case"ArrowDown":return e(!1);case"Enter":return K(t)}},function(t){if(x)switch(t.key){case" ":return K(t)}},async function(t){const{relatedTarget:e}=t;e&&e.classList.contains("skintone-option")||n(11,x=!1)},p,f,y,g,v,!0,S,I,u,N,L,j,U,z,H,G,$,q,W,Y,function(){_=this.value,n(3,_)},function(t){IA[t?"unshift":"push"](()=>{n(13,a=t)})},t=>Q(t),function(t){IA[t?"unshift":"push"](()=>{n(6,s=t)})},function(t){IA[t?"unshift":"push"](()=>{n(5,i=t)})},function(t){IA[t?"unshift":"push"](()=>{n(4,r=t)})}]}class AO extends zA{constructor(t){super(),this.shadowRoot.innerHTML="<style>:host{--emoji-padding:0.5rem;--emoji-size:1.375rem;--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}@media(prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}}button{margin:0;padding:0;border:none;background:none;box-shadow:none;cursor:pointer;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:none}:focus:not(:focus-visible){outline:none}.hide-focus{outline:none}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + 2*var(--emoji-padding))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.cursor-pointer{cursor:pointer}.skintone-button-wrapper{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;right:0;top:0;z-index:2;overflow:visible;background:var(--background);border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media(prefers-reduced-motion:reduce){.skintone-list{transition-duration:1ms}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--font-family)}@media(hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{height:var(--total-emoji-size);width:var(--total-emoji-size);padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:50%;background-size:var(--emoji-size) var(--emoji-size)}.nav{display:grid;justify-content:space-between;contain:content}.nav,.nav-button{align-items:center}.nav-button{display:flex;justify-content:center}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media(prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top{width:100%;height:var(--emoji-padding);z-index:3;background:var(--background)}.search-row{display:flex;align-items:center;position:relative;padding-left:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);background:var(--background);color:var(--input-font-color);width:100%;font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}</style>",function(t,e,n,r,i,s,o=[-1]){const a=_A;SA(t);const c=e.props||{},l=t.$$={fragment:null,ctx:null,props:s,update:iA,not_equal:i,bound:oA(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:oA(),dirty:o};let u=!1;if(l.ctx=n?n(t,c,(e,n,...r)=>{const s=r.length?r[0]:n;return l.ctx&&i(l.ctx[e],l.ctx[e]=s)&&(l.bound[e]&&l.bound[e](s),u&&function(t,e){-1===t.$$.dirty[0]&&(EA.push(t),OA(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],l.update(),u=!0,aA(l.before_update),l.fragment=!!r&&r(l.ctx),e.target){if(e.hydrate){const t=Array.from(e.target.childNodes);l.fragment&&l.fragment.l(t),t.forEach(pA)}else l.fragment&&l.fragment.c();e.intro&&VA(t.$$.fragment),function(t,e,n){const{fragment:r,on_mount:i,on_destroy:s,after_update:o}=t.$$;r&&r.m(e,n),RA(()=>{const e=i.map(sA).filter(cA);s?s.push(...e):aA(e),t.$$.on_mount=[]}),o.forEach(RA)}(t,e.target,e.anchor),FA()}SA(a)}(this,{target:this.shadowRoot},kO,TO,lA,{locale:38,dataSource:39,skinToneEmoji:41,i18n:0,database:40,customEmoji:42},[-1,-1,-1]),t&&(t.target&&dA(t.target,this,t.anchor),t.props&&(this.$set(t.props),FA()))}static get observedAttributes(){return["locale","dataSource","skinToneEmoji","i18n","database","customEmoji"]}get locale(){return this.$$.ctx[38]}set locale(t){this.$set({locale:t}),FA()}get dataSource(){return this.$$.ctx[39]}set dataSource(t){this.$set({dataSource:t}),FA()}get skinToneEmoji(){return this.$$.ctx[41]}set skinToneEmoji(t){this.$set({skinToneEmoji:t}),FA()}get i18n(){return this.$$.ctx[0]}set i18n(t){this.$set({i18n:t}),FA()}get database(){return this.$$.ctx[40]}set database(t){this.$set({database:t}),FA()}get customEmoji(){return this.$$.ctx[42]}set customEmoji(t){this.$set({customEmoji:t}),FA()}}customElements.define("emoji-picker",class extends AO{constructor(t){super({props:t})}disconnectedCallback(){this.$destroy()}});let OO=(()=>{class t{constructor(){this.title="error",this.subtitle=null,this.data=null,this.constants={}}ngOnInit(){}checkTitle(){return"Regular programs"==this.title}getTitle(){return this.title}isType(t,e){if(t.type==e)return!0}getCheckboxControl(t,e,n){return n&&n.controls?n.controls[t].controls[e]:(console.error("[Abstract Section] Form array is empty. Has it been built?"),[])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["abstract-section"]],inputs:{title:"title",subtitle:"subtitle",data:"data",interface:"interface",constants:"constants",order:"order"},decls:4,vars:2,consts:[[1,"subtitle"]],template:function(t,e){1&t&&(Js(0,"h2"),Uo(1),to(),Js(2,"h6",0),Uo(3),to()),2&t&&(Vr(1),zo(" ",e.title,"\n"),Vr(2),Bo(e.subtitle))},styles:[".subtitle[_ngcontent-%COMP%]{margin-top:0}"]}),t})();function DO(t,e){if(1&t&&(Js(0,"h5",6),Uo(1),to()),2&t){const t=fo();Vr(1),Bo(t.interface.subtitle)}}function RO(t,e){if(1&t&&(Js(0,"clr-dg-column"),Uo(1),to()),2&t){const t=e.$implicit;Vr(1),Bo(t.label)}}function PO(t,e){if(1&t&&(Js(0,"span"),Uo(1),cc(2,"date"),to()),2&t){const t=fo(2).$implicit;Vr(1),Bo(uc(2,1,t,"MM/dd/yyyy"))}}function NO(t,e){1&t&&Uo(0),2&t&&zo(" ",fo(2).$implicit," ")}function FO(t,e){if(1&t&&(Js(0,"span"),qs(1,PO,3,4,"span",8),qs(2,NO,1,1,"ng-template",null,10,Fc),to()),2&t){const t=Ws(3),e=fo().index,n=fo(2);Vr(1),Zs("ngIf",n.isDate(e))("ngIfElse",t)}}function LO(t,e){if(1&t&&(Js(0,"span"),Js(1,"span",11),Uo(2),to(),to()),2&t){const t=e.$implicit;Vr(1),vo("title",t.label),Vr(1),Bo(t.icon)}}function MO(t,e){1&t&&qs(0,LO,3,2,"span",2),2&t&&Zs("ngForOf",fo().$implicit.tags)}function VO(t,e){if(1&t&&(Js(0,"clr-dg-cell"),qs(1,FO,4,2,"span",8),qs(2,MO,1,1,"ng-template",null,9,Fc),to()),2&t){const t=e.$implicit,n=Ws(3),r=fo(2);Vr(1),Zs("ngIf",!r.isTagObj(t))("ngIfElse",n)}}function jO(t,e){if(1&t){const t=so();Js(0,"clr-dg-row"),Js(1,"clr-dg-action-overflow"),Js(2,"button",7),co("click",(function(){Qe(t);const n=e.index;return fo().openEditModal(n)})),Uo(3,"Edit"),to(),Js(4,"button",7),co("click",(function(){Qe(t);const n=e.index;return fo().deleteRow(n)})),Uo(5,"Delete"),to(),to(),qs(6,VO,4,2,"clr-dg-cell",2),to()}if(2&t){const t=e.$implicit;Vr(6),Zs("ngForOf",t.row)}}function UO(t,e){if(1&t&&(Js(0,"clr-date-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",26),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function BO(t,e){if(1&t&&(Js(0,"option",30),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t.label),Vr(1),zo(" ",t.label,"")}}function zO(t,e){if(1&t&&(Js(0,"select",28),qs(1,BO,2,2,"option",29),to()),2&t){const t=fo(2).index,e=fo(2);Zs("formControl",e.formArray.controls[t]),Vr(1),Zs("ngForOf",e.constants.divisions)}}function HO(t,e){if(1&t&&(Js(0,"clr-select-container"),Js(1,"label",25),Uo(2),to(),qs(3,zO,2,2,"select",27),to()),2&t){const t=fo().$implicit,e=fo(2);Vr(2),Bo(t.label),Vr(1),Zs("ngIf",e.constants)}}function GO(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",31),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function $O(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",32),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function qO(t,e){if(1&t&&(Js(0,"clr-checkbox-wrapper"),eo(1,"input",33),Js(2,"label"),Uo(3),to(),to()),2&t){const t=e.$implicit,n=e.index,r=fo(2).index,i=fo(2);Vr(1),Zs("formControl",i.getCheckboxControl(r,n,i.formArray)),Vr(2),Ho("",t.icon," ",t.label,"")}}function WO(t,e){if(1&t&&(Js(0,"clr-checkbox-container"),Js(1,"label",25),Uo(2),to(),qs(3,qO,4,3,"clr-checkbox-wrapper",2),to()),2&t){const t=fo().$implicit;Vr(2),Bo(t.label),Vr(1),Zs("ngForOf",t.tags)}}function QO(t,e){if(1&t&&(Js(0,"form",23),qs(1,UO,4,2,"clr-date-container",24),qs(2,HO,4,2,"clr-select-container",24),qs(3,GO,4,2,"clr-input-container",24),qs(4,$O,4,2,"clr-input-container",24),qs(5,WO,4,2,"clr-checkbox-container",24),to()),2&t){const t=e.$implicit,n=fo(2);Zs("formGroup",n.formGroup),Vr(1),Zs("ngIf",n.isType(t,"date-select")),Vr(1),Zs("ngIf",n.isType(t,"division-select")),Vr(1),Zs("ngIf",n.isType(t,"text")),Vr(1),Zs("ngIf",n.isType(t,"number")),Vr(1),Zs("ngIf",n.isType(t,"tag-select"))}}function YO(t,e){if(1&t){const t=so();Js(0,"clr-modal",12,13),co("clrModalOpenChange",(function(e){return Qe(t),fo().addModalOpened=e})),Js(2,"h3",14),Uo(3,"Add row"),to(),Js(4,"div",15),Js(5,"clr-alert",16),co("clrAlertClosedChange",(function(e){return Qe(t),!(fo().showItemAddConfirmation=e)})),Js(6,"clr-alert-item"),Js(7,"span",17),Uo(8,"Item successfully added."),to(),to(),to(),qs(9,QO,6,6,"form",18),to(),Js(10,"div",19),Js(11,"button",20),co("click",(function(){return Qe(t),fo().addModalCancel()})),Uo(12," Cancel "),to(),Js(13,"button",21),co("click",(function(){return Qe(t),fo().addAnother()})),Uo(14," Add another "),to(),Js(15,"button",22),co("click",(function(){return Qe(t),fo().finishAddModal()})),Uo(16," Add and finish "),to(),to(),to()}if(2&t){const t=fo();Zs("clrModalOpen",t.addModalOpened),Vr(5),Zs("clrAlertType","success")("clrAlertClosed",!t.showItemAddConfirmation),Vr(4),Zs("ngForOf",t.interface.columns),Vr(4),Zs("disabled",t.formArray.invalid),Vr(2),Zs("disabled",t.formArray.invalid)}}function KO(t,e){if(1&t&&(Js(0,"clr-date-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",26),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function ZO(t,e){if(1&t&&(Js(0,"option",30),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t.label),Vr(1),zo(" ",t.label,"")}}function XO(t,e){if(1&t&&(Js(0,"select",28),qs(1,ZO,2,2,"option",29),to()),2&t){const t=fo(2).index,e=fo(2);Zs("formControl",e.formArray.controls[t]),Vr(1),Zs("ngForOf",e.constants.divisions)}}function JO(t,e){if(1&t&&(Js(0,"clr-select-container"),Js(1,"label",25),Uo(2),to(),qs(3,XO,2,2,"select",27),to()),2&t){const t=fo().$implicit,e=fo(2);Vr(2),Bo(t.label),Vr(1),Zs("ngIf",e.constants)}}function tD(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",31),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function eD(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",25),Uo(2),to(),eo(3,"input",32),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo(2);Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function nD(t,e){if(1&t&&eo(0,"input",33),2&t){const t=fo().index,e=fo(2).index,n=fo(2);Zs("formControl",n.getCheckboxControl(e,t,n.formArray))}}function rD(t,e){if(1&t&&(Js(0,"clr-checkbox-wrapper"),qs(1,nD,1,1,"input",35),Js(2,"label"),Uo(3),to(),to()),2&t){const t=e.$implicit,n=fo(4);Vr(1),Zs("ngIf",n.editModalOpened),Vr(2),Ho("",t.icon," ",t.label,"")}}function iD(t,e){if(1&t&&(Js(0,"clr-checkbox-container"),Js(1,"label",25),Uo(2),to(),qs(3,rD,4,3,"clr-checkbox-wrapper",2),to()),2&t){const t=fo().$implicit;Vr(2),Bo(t.label),Vr(1),Zs("ngForOf",t.tags)}}function sD(t,e){if(1&t&&(Js(0,"form",23),qs(1,KO,4,2,"clr-date-container",24),qs(2,JO,4,2,"clr-select-container",24),qs(3,tD,4,2,"clr-input-container",24),qs(4,eD,4,2,"clr-input-container",24),qs(5,iD,4,2,"clr-checkbox-container",24),to()),2&t){const t=e.$implicit,n=fo(2);Zs("formGroup",n.formGroup),Vr(1),Zs("ngIf",n.isType(t,"date-select")),Vr(1),Zs("ngIf",n.isType(t,"division-select")),Vr(1),Zs("ngIf",n.isType(t,"text")),Vr(1),Zs("ngIf",n.isType(t,"number")),Vr(1),Zs("ngIf",n.isType(t,"tag-select"))}}function oD(t,e){if(1&t){const t=so();Js(0,"clr-modal",12,34),co("clrModalOpenChange",(function(e){return Qe(t),fo().editModalOpened=e})),Js(2,"h3",14),Uo(3,"Edit row"),to(),Js(4,"div",15),qs(5,sD,6,6,"form",18),to(),Js(6,"div",19),Js(7,"button",20),co("click",(function(){return Qe(t),fo().editModalCancel()})),Uo(8," Cancel "),to(),Js(9,"button",22),co("click",(function(){return Qe(t),fo().finishEdits()})),Uo(10," Apply "),to(),to(),to()}if(2&t){const t=fo();Zs("clrModalOpen",t.editModalOpened),Vr(5),Zs("ngForOf",t.interface.columns),Vr(4),Zs("disabled",t.formArray.invalid)}}let aD=(()=>{class t extends OO{constructor(t){super(),this.constantService=t,this.formArray=new zy([]),this.formLabels=[],this.sectionChanged=new pc,this.addModalOpened=!1,this.editModalOpened=!1,this.showItemAddConfirmation=!1}ngOnInit(){this.constantService.constants.subscribe(t=>{this.constants=t}),this.interface.value||(this.interface.value=[],console.warn("No value supplied for datagrid "+this.interface.title)),this.formGroup=new By({array:this.formArray})}hasTag(t,e){let n=[];return t.forEach(t=>{n.push(t.label)}),n.includes(e.label)}convertISOtoTraditional(t){if(!t)return null;let e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString(),i=e.getDate().toString();e.getDate()<10&&(i="0"+i.toString()),e.getMonth()<10&&(r="0"+r);let s=r+"/"+i+"/"+n;return console.log("Converting: "+t+" to "+s),s}convertTraditionalToISO(t){if(!t)return null;let e=t.split("/");if(3!==e.length)return console.warn("Invalid date: "+t),null;let n=+e[0]-1,r=+e[1],i=+e[2],s=new Date;s.setMonth(n),s.setDate(r),s.setFullYear(i);let o=s.toISOString();return console.log("Converting: "+t+" to "+o),o}buildFormFromInterface(t){console.log(t);let e=this.interface.columns;this.formArray=new zy([]),this.formLabels=[],e?(e.forEach((e,n)=>{if(this.formLabels.push(e.label),"tag-select"===e.type){let r=new zy([]);e.tags&&(e.tags.forEach((i,s)=>{let o=new Uy(!1);t&&t[n]&&t[n].tags&&(o.setValue(this.hasTag(t[n].tags,i)),console.log(i,this.hasTag(e.tags,i))),r.push(o)}),console.log(r.value),this.formArray.push(r))}else t&&t[n]?(console.log("Pushing "+t[n]),this.formArray.push(new Uy("date-select"===e.type?this.convertISOtoTraditional(t[n]):t[n]))):this.formArray.push(new Uy)}),console.log(this.formArray.value)):console.warn("[Datagrid] Cannot build form. No columns could be found.")}addRowFromFormArray(){let t=[];this.interface.columns.forEach((e,n)=>{if("tag-select"===e.type){let r=[];e.tags.forEach((t,e)=>{!0===this.formArray.at(n).at(e).value&&r.push(t)}),t.push({tags:r})}else t.push("date-select"===e.type?this.convertTraditionalToISO(this.formArray.at(n).value):this.formArray.at(n).value)}),console.log(this.interface),this.interface.value.push({row:t}),this.sectionChanged.emit(this.interface)}deleteRow(t){this.interface.value.splice(t,1),this.sectionChanged.emit(this.interface)}finishAddModal(){this.addModalOpened=!1,this.addRowFromFormArray(),this.formArray.reset()}openEditModal(t){this.selectedRow=t,this.buildFormFromInterface(this.interface.value[t].row),this.editModalOpened=!0}finishEdits(){this.editModalOpened=!1,this.editRow(this.selectedRow),this.formArray.reset()}editRow(t){let e=[];this.interface.columns.forEach((t,n)=>{if("tag-select"===t.type){let r=[];t.tags.forEach((t,e)=>{!0===this.formArray.at(n).at(e).value&&r.push(t)}),e.push({tags:r})}else e.push("date-select"===t.type?this.convertTraditionalToISO(this.formArray.at(n).value):this.formArray.at(n).value)}),console.log("Finished edits: "+e),this.interface.value[t]={row:e},this.sectionChanged.emit(this.interface)}isDate(t){let e=this.interface.columns[t].type;return"date-select"===e||"month-select"===e}openAddModal(){this.buildFormFromInterface(),this.addModalOpened=!0}addAnother(){this.addRowFromFormArray(),this.buildFormFromInterface(),console.log(this.interface.value),this.showItemAddConfirmation=!0,setTimeout(()=>{this.showItemAddConfirmation=!1},3e3)}addModalCancel(){this.addModalOpened=!1,this.formArray.reset()}editModalCancel(){this.editModalOpened=!1,this.formArray.reset()}isTagObj(t){return!(null==t||!t.tags)}checkArrayValidity(){this.formArray.controls.forEach(t=>{console.log(t.value+" | "+t.status)}),console.log(this.formArray.status),console.log(this.formArray.valid)}}return t.\u0275fac=function(e){return new(e||t)(Qs(dd))},t.\u0275cmp=he({type:t,selectors:[["datagrid-section"]],inputs:{interface:"interface"},outputs:{sectionChanged:"sectionChanged"},features:[Wo],decls:14,vars:6,consts:[["class","subtitle",4,"ngIf"],[4,"clrDgItems","clrDgItemsOf"],[4,"ngFor","ngForOf"],[1,"btn-group","btn-link","btn-sm"],[1,"btn",3,"click"],[3,"clrModalOpen","clrModalOpenChange",4,"ngIf"],[1,"subtitle"],[1,"action-item",3,"click"],[4,"ngIf","ngIfElse"],["tagRenderer",""],["plainCell",""],[3,"title"],[3,"clrModalOpen","clrModalOpenChange"],["addModal",""],[1,"modal-title"],[1,"modal-body"],[3,"clrAlertType","clrAlertClosed","clrAlertClosedChange"],[1,"alert-text"],["clrForm","","clrLayout","vertical",3,"formGroup",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"disabled","click"],["clrForm","","clrLayout","vertical",3,"formGroup"],[4,"ngIf"],["for",""],["type","date","clrDate","",3,"formControl"],["clrSelect","",3,"formControl",4,"ngIf"],["clrSelect","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["clrInput","","type","text",3,"formControl"],["clrInput","","type","number",3,"formControl"],["type","checkbox","clrCheckbox","",3,"formControl"],["editModal",""],["type","checkbox","clrCheckbox","",3,"formControl",4,"ngIf"]],template:function(t,e){1&t&&(Js(0,"h1"),Uo(1),to(),qs(2,DO,2,1,"h5",0),Js(3,"clr-datagrid"),Js(4,"clr-dg-placeholder"),Uo(5,"Nothing to see here. Try adding more content."),to(),qs(6,RO,2,1,"clr-dg-column",1),qs(7,jO,7,1,"clr-dg-row",2),Js(8,"clr-dg-footer"),Js(9,"div",3),Js(10,"button",4),co("click",(function(){return e.openAddModal()})),Uo(11,"Add new"),to(),to(),to(),to(),qs(12,YO,17,6,"clr-modal",5),qs(13,oD,11,3,"clr-modal",5)),2&t&&(Vr(1),Bo(e.interface.title),Vr(1),Zs("ngIf",e.interface.subtitle),Vr(4),Zs("clrDgItemsOf",e.interface.columns),Vr(1),Zs("ngForOf",e.interface.value),Vr(5),Zs("ngIf",e.addModalOpened),Vr(1),Zs("ngIf",e.editModalOpened))},directives:[Rh,XI,_T,pI,fI,yI,II,EI,Oh,dT,SI,yT,GI,bT,eT,RI,mT,Gx,$x,px,fx,dx,tv,qm,nC,rC,sv,YC,tC,Vm,ZC,$m,rv,mE,my,yE,yy,_y,sE,oE,iy,dC,uC,Fm,hC],pipes:[$h],styles:[".subtitle[_ngcontent-%COMP%]{margin-top:0}"]}),t})();function cD(t,e){if(1&t&&(Js(0,"option",7),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t),Vr(1),zo(" ",t,"")}}let lD=(()=>{class t{constructor(){this.year=(new Date).getFullYear(),this.onChange=t=>{},this.onTouched=()=>{},this._monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]}set value(t){this.dateString=t,this.onChange(t),this.onTouched(t)}writeValue(t){t||(t=(new Date).toISOString()),this.dateString=t,console.log(t),this.year=new Date(t).getFullYear(),this.monthIndex=new Date(t).getMonth(),console.log(this._monthNames[this.monthIndex]),this.formGroup.get("yearInput").setValue(this.year),this.formGroup.get("monthInput").setValue(this._monthNames[this.monthIndex])}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}ngOnInit(){this.formGroup=new By({monthInput:new Uy,yearInput:new Uy(this.year)}),console.log("Initial is ",this.monthIndex),this.formGroup.valueChanges.subscribe(t=>{this.monthIndex!==this._monthNames.indexOf(t.monthInput)&&(console.log(this._monthNames.indexOf(t.monthInput)),this._monthNames.indexOf(t.monthInput)>-1&&(this.monthIndex=this._monthNames.indexOf(t.monthInput))),this.year=t.yearInput;let e=new Date;e.setMonth(this.monthIndex),e.setFullYear(this.year),this.dateString=e.toISOString(),this.value=this.dateString})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=he({type:t,selectors:[["month-select"]],inputs:{label:"label"},features:[la([{provide:Pm,useExisting:St(()=>t),multi:!0}])],decls:10,vars:3,consts:[[3,"formGroup"],["for","",1,"p4"],[1,"clr-row","clr-align-items-start",2,"margin","0"],["clrSelect","","formControlName","monthInput",1,"clr-col"],[3,"value",4,"ngFor","ngForOf"],[1,"clr-col"],["clrInput","","type","number","placeholder","Year","formControlName","yearInput",2,"margin-left","0.5rem"],[3,"value"]],template:function(t,e){1&t&&(Js(0,"form",0),Js(1,"label",1),Uo(2),to(),Js(3,"div",2),Js(4,"select",3),qs(5,cD,2,2,"option",4),to(),Js(6,"clr-input-container",5),eo(7,"input",6),Js(8,"clr-control-error"),Uo(9,"Does this year make sense?"),to(),to(),to(),to()),2&t&&(Zs("formGroup",e.formGroup),Vr(2),Bo(e.label),Vr(3),Zs("ngForOf",e._monthNames))},directives:[tv,qm,sv,tC,my,yE,$m,dv,Oh,sE,iy,Vm,oE,KS,yy,_y],styles:[""]}),t})();function uD(t,e){if(1&t&&(Js(0,"h5",2),Uo(1),to()),2&t){const t=fo();Vr(1),Bo(t.interface.subtitle)}}function hD(t,e){if(1&t&&(Js(0,"clr-date-container"),Js(1,"label",6),Uo(2),to(),eo(3,"input",7),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function dD(t,e){if(1&t&&(Js(0,"option",10),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t.label),Vr(1),zo(" ",t.label,"")}}function pD(t,e){if(1&t&&(Js(0,"clr-select-container"),Js(1,"label",6),Uo(2),to(),Js(3,"select",8),qs(4,dD,2,2,"option",9),to(),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n]),Vr(1),Zs("ngForOf",r.getConstant("divisions"))}}function fD(t,e){if(1&t&&eo(0,"month-select",11),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Zs("label",e.label)("formControl",r.formArray.controls[n])}}function gD(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",6),Uo(2),to(),eo(3,"input",12),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function mD(t,e){if(1&t&&(Js(0,"clr-input-container"),Js(1,"label",6),Uo(2),to(),eo(3,"input",13),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function yD(t,e){if(1&t&&(Js(0,"clr-checkbox-wrapper"),eo(1,"input",15),Js(2,"label"),Uo(3),to(),to()),2&t){const t=e.$implicit,n=e.index,r=fo(2).index,i=fo();Vr(1),Zs("formControl",i.getCheckboxControl(r,n,i.formArray)),Vr(2),Ho("",t.icon," ",t.label,"")}}function vD(t,e){if(1&t&&(Js(0,"clr-checkbox-container"),Js(1,"label",6),Uo(2),to(),qs(3,yD,4,3,"clr-checkbox-wrapper",14),to()),2&t){const t=fo().$implicit;Vr(2),Bo(t.label),Vr(1),Zs("ngForOf",t.tags)}}function bD(t,e){if(1&t&&(Js(0,"clr-textarea-container"),Js(1,"label"),Uo(2),to(),eo(3,"textarea",16),to()),2&t){const t=fo(),e=t.$implicit,n=t.index,r=fo();Vr(2),Bo(e.label),Vr(1),Zs("formControl",r.formArray.controls[n])}}function wD(t,e){if(1&t&&(Js(0,"form",3),qs(1,hD,4,2,"clr-date-container",4),qs(2,pD,5,3,"clr-select-container",4),qs(3,fD,1,2,"month-select",5),qs(4,gD,4,2,"clr-input-container",4),qs(5,mD,4,2,"clr-input-container",4),qs(6,vD,4,2,"clr-checkbox-container",4),qs(7,bD,4,2,"clr-textarea-container",4),to()),2&t){const t=e.$implicit,n=fo();Zs("formGroup",n.formGroup),Vr(1),Zs("ngIf",n.isType(t,"date-select")),Vr(1),Zs("ngIf",n.isType(t,"division-select")),Vr(1),Zs("ngIf",n.isType(t,"month-select")),Vr(1),Zs("ngIf",n.isType(t,"text")),Vr(1),Zs("ngIf",n.isType(t,"number")),Vr(1),Zs("ngIf",n.isType(t,"tag-select")),Vr(1),Zs("ngIf",n.isType(t,"textarea"))}}let _D=(()=>{class t extends OO{constructor(t){super(),this._ReportService=t,this.formArray=new zy([],{updateOn:"blur"}),this.formLabels=[],this.sectionChanged=new pc}hasTag(t,e){let n=[];return t&&t.forEach(t=>{n.push(t.label)}),n.includes(e.label)}convertISOtoTraditional(t){let e=new Date(t),n=e.getFullYear(),r=(e.getMonth()+1).toString(),i=e.getDate().toString();e.getDate()<10&&(i="0"+i.toString()),e.getMonth()<10&&(r="0"+r);let s=r+"/"+i+"/"+n;return console.log("Converting: "+t+" to "+s),s}convertTraditionalToISO(t){let e=t.split("/"),n=+e[0]-1,r=+e[1],i=+e[2],s=new Date;s.setMonth(n),s.setDate(r),s.setFullYear(i);let o=s.toISOString();return console.log("Converting: "+t+" to "+o),o}buildForm(){this.inputs?(this.inputs.forEach((t,e)=>{if(this.formLabels.push(t.label),this.interface.value){let n=this.interface.value;if("tag-select"===t.type){let r=new zy([]);console.log(n),t.tags.forEach(t=>{r.push(n[e]?new Uy(this.hasTag(n[e].tags,t)):new Uy)}),this.formArray.push(r)}else this.formArray.push(new Uy("month-select"===t.type?n[e]:"date-select"===t.typle?this.convertISOtoTraditional(n[e]):n[e]))}else if("tag-select"===t.type){let e=new zy([]);t.tags.forEach(t=>{e.push(new Uy(null))}),this.formArray.push(e)}else if("month-select"===t.type){let t=new Date;this.formArray.push(new Uy(t.toISOString()))}else this.formArray.push(new Uy(null))}),console.log(this.formArray)):console.error("No inputs were found for "+this.title)}ngOnInit(){this.inputs=this.interface.inputs,this.buildForm(),this.formGroup=new By({array:this.formArray},{updateOn:"blur"}),this.formArray.valueChanges.subscribe(t=>{"meta"===this.interface.type&&this._ReportService.report&&this.interface.inputs.forEach((t,e)=>{let n=t.link;console.log(n),"coverageDate"===n?this._ReportService.setCoverageDate(this.formArray.value[e]):"additionalInfo"===n?this._ReportService.setAdditionalInfo(this.formArray.value[e]):"title"===n?this._ReportService.setTitle(this.formArray.value[e]):"subject"===n?this._ReportService.setSubject(this.formArray.value[e]):"tags"===n&&this._ReportService.setTags(this.formArray.value[e])}),console.log(t);let e=[];t.forEach((n,r)=>{let i=this.interface.inputs[r].type;if("tag-select"===i){let t=[],i=this.interface.inputs[r].tags;n.forEach((e,n)=>{e&&t.push(i[n])}),e.push({tags:t})}else e.push("date-select"===i?this.convertTraditionalToISO(t[r]):t[r])}),console.log(e),this.interface.value=e,this.sectionChanged.emit(this.interface)})}getConstant(t){return["a","b","c"]}}return t.\u0275fac=function(e){return new(e||t)(Qs(Ug))},t.\u0275cmp=he({type:t,selectors:[["simple-input"]],inputs:{interface:"interface",meta:"meta",constants:"constants"},outputs:{sectionChanged:"sectionChanged"},features:[Wo],decls:4,vars:3,consts:[["class","subtitle",4,"ngIf"],["clrForm","","clrLayout","vertical",3,"formGroup",4,"ngFor","ngForOf"],[1,"subtitle"],["clrForm","","clrLayout","vertical",3,"formGroup"],[4,"ngIf"],[3,"label","formControl",4,"ngIf"],["for",""],["type","date","clrDate","",3,"formControl"],["clrSelect","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"label","formControl"],["clrInput","","type","text",3,"formControl"],["clrInput","","type","number",3,"formControl"],[4,"ngFor","ngForOf"],["type","checkbox","clrCheckbox","",3,"formControl"],["clrTextarea","","name","description",3,"formControl"]],template:function(t,e){1&t&&(Js(0,"h1"),Uo(1),to(),qs(2,uD,2,1,"h5",0),qs(3,wD,8,8,"form",1)),2&t&&(Vr(1),Bo(e.interface.title),Vr(1),Zs("ngIf",e.interface.subtitle),Vr(1),Zs("ngForOf",e.inputs))},directives:[Rh,Oh,tv,qm,nC,rC,sv,YC,tC,Vm,ZC,$m,rv,mE,my,yE,yy,_y,lD,sE,oE,iy,dC,uC,Fm,hC,bE,wE],styles:[".clr-textarea-wrapper[_ngcontent-%COMP%]{width:100%}"]}),t})();function SD(t,e){if(1&t){const t=so();Js(0,"input",10),co("ngModelChange",(function(e){return Qe(t),fo()._template.templateID=e})),to()}2&t&&Zs("ngModel",fo()._template.templateID)}function CD(t,e){1&t&&(Js(0,"span",11),eo(1,"clr-icon",12),Js(2,"em"),Uo(3,"No pages yet."),to(),to())}function ED(t,e){1&t&&(Js(0,"clr-tooltip-content",20),Js(1,"span"),Uo(2,'Double click on a page or section below to open the properties pane. Use the "+" buttons to add content.'),to(),to())}function ID(t,e){if(1&t){const t=so();Js(0,"clr-tree-node"),Js(1,"h4",15),Uo(2,"Overview"),to(),Js(3,"clr-tooltip"),eo(4,"clr-icon",16),qs(5,ED,3,0,"clr-tooltip-content",17),to(),Js(6,"button",18),co("click",(function(){return Qe(t),fo(2).addPage()})),eo(7,"clr-icon",19),to(),to()}}function TD(t,e){if(1&t){const t=so();Js(0,"button",28),co("click",(function(){Qe(t);const e=fo().index;return fo(2).addMetaSection(e)})),Uo(1," Add Meta Section "),eo(2,"clr-icon",19),to()}}function xD(t,e){if(1&t){const t=so();Js(0,"clr-tree-node",29),co("dblclick",(function(){Qe(t);const n=e.$implicit;return fo(3).openEditSection(n)})),Js(1,"div",30),Uo(2),eo(3,"clr-icon",31),to(),to()}if(2&t){const t=e.$implicit;Vr(2),zo(" ",t.title,"")}}function kD(t,e){if(1&t){const t=so();Js(0,"clr-tree-node",29),co("dblclick",(function(){Qe(t);const n=e.$implicit;return fo(3).openEditSection(n)})),eo(1,"clr-icon",32),Js(2,"div",30),Uo(3),to(),to()}if(2&t){const t=e.$implicit;Vr(3),Bo(t.title)}}function AD(t,e){if(1&t){const t=so();Js(0,"clr-tree-node",29),co("dblclick",(function(){Qe(t);const n=e.$implicit;return fo(3).openEditSection(n)})),eo(1,"clr-icon",33),Js(2,"div",30),Uo(3),to(),to()}if(2&t){const t=e.$implicit;Vr(3),zo(" ",t.title," ")}}function OD(t,e){if(1&t){const t=so();Js(0,"clr-tree-node",21),co("clrExpandedChange",(function(n){Qe(t);const r=e.index;return fo(2).pageExpansions[r]=n}))("click",(function(){Qe(t);const n=e.index;return fo(2).setCurrentPage(n)})),Js(1,"div",22),co("dblclick",(function(){Qe(t);const n=e.index;return fo(2).openEditPage(n)})),Js(2,"div"),eo(3,"clr-icon",23),Uo(4),to(),to(),Js(5,"clr-tree-node"),eo(6,"p",24),qs(7,TD,3,0,"button",25),to(),qs(8,xD,4,1,"clr-tree-node",26),Js(9,"clr-tree-node"),Js(10,"p",24),Uo(11,"Datagrids"),to(),Js(12,"button",27),co("click",(function(){Qe(t);const n=e.index;return fo(2).addDatagrid(n)})),eo(13,"clr-icon",19),to(),to(),qs(14,kD,4,1,"clr-tree-node",26),Js(15,"clr-tree-node"),Js(16,"p",24),Uo(17,"SimpleInputs"),to(),Js(18,"button",27),co("click",(function(){Qe(t);const n=e.index;return fo(2).addSimpleInput(n)})),eo(19,"clr-icon",19),to(),to(),qs(20,AD,4,1,"clr-tree-node",26),to()}if(2&t){const t=e.$implicit,n=e.index,r=fo(2);Zs("clrExpanded",r.pageExpansions[n]),Vr(4),zo(" ",t.title,""),Vr(3),Zs("ngIf",!r.hasMetaSection),Vr(1),Zs("ngForOf",r.getSectionsByType(n,"meta")),Vr(6),Zs("ngForOf",r.getDatagrids(n)),Vr(6),Zs("ngForOf",r.getSimpleInputs(n))}}function DD(t,e){if(1&t&&(Js(0,"div",11),Js(1,"clr-tree"),qs(2,ID,8,0,"clr-tree-node",13),qs(3,OD,21,6,"clr-tree-node",14),to(),to()),2&t){const t=fo();Vr(2),Zs("ngIf",t._template.pages),Vr(1),Zs("ngForOf",t._template.pages)}}function RD(t,e){if(1&t){const t=so();Js(0,"datagrid-section",65),co("sectionChanged",(function(e){Qe(t);const n=fo().$implicit;return fo(2).setSection(n,e)})),to()}2&t&&Zs("interface",fo().$implicit)}function PD(t,e){if(1&t){const t=so();Js(0,"simple-input",65),co("sectionChanged",(function(e){Qe(t);const n=fo().$implicit;return fo(2).setSection(n,e)})),to()}2&t&&Zs("interface",fo().$implicit)}function ND(t,e){if(1&t){const t=so();Js(0,"div",11),Js(1,"div",35),Js(2,"div",62),Js(3,"button",37),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).openEditSection(n)})),eo(4,"clr-icon",38),to(),to(),to(),Js(5,"div",39),qs(6,RD,1,1,"datagrid-section",63),qs(7,PD,1,1,"ng-template",null,64,Fc),eo(9,"div"),to(),to()}if(2&t){const t=e.$implicit,n=Ws(8),r=fo(2);Vr(6),Zs("ngIf",r.isDatagrid(t))("ngIfElse",n)}}function FD(t,e){1&t&&(Js(0,"clr-tooltip-content",74),Js(1,"span"),Js(2,"em"),Uo(3,"Datagrids"),to(),Uo(4," are tables, good for lots of data."),eo(5,"br"),Js(6,"em"),Uo(7,"SimpleInputs"),to(),Uo(8," are basic forms, good for a few questions."),eo(9,"br"),Js(10,"em"),Uo(11,"Meta sections"),to(),Uo(12," are SimpleInputs that link to properties in the report-- i.e. coverage date."),to(),to())}function LD(t,e){1&t&&(Js(0,"clr-tooltip-content",79),Js(1,"span"),Uo(2,"Modifying this section might "),Js(3,"b"),Uo(4,"clear existing prefill"),to(),Uo(5,"."),to(),to())}function MD(t,e){1&t&&(Js(0,"clr-tooltip"),eo(1,"clr-icon",77),qs(2,LD,6,0,"clr-tooltip-content",78),to())}function VD(t,e){if(1&t&&(Js(0,"span"),Uo(1),to()),2&t){const t=fo(4);Vr(1),zo("",t.sectionInEdit.columns.length," columns")}}function jD(t,e){if(1&t){const t=so();Js(0,"clr-accordion-content",94),Js(1,"label",56),Uo(2,"Tag label"),to(),Js(3,"input",54),co("ngModelChange",(function(e){return Qe(t),fo().$implicit.label=e})),to(),Js(4,"label",56),Uo(5,"Tag icon"),to(),Js(6,"emoji-picker",95),co("emoji-click",(function(e){Qe(t);const n=fo().index,r=fo(2).$implicit;return fo(4).editTagEmoji(r,n,e)})),to(),to()}if(2&t){const t=fo().$implicit;Vr(3),Zs("ngModel",t.label)}}function UD(t,e){if(1&t){const t=so();Js(0,"clr-accordion-panel"),Js(1,"clr-accordion-title"),Uo(2),Js(3,"button",91),co("click",(function(){Qe(t);const n=e.index,r=fo(2).$implicit;return fo(4).deleteTag(r,n)})),eo(4,"clr-icon",92),to(),to(),qs(5,jD,7,1,"clr-accordion-content",93),to()}if(2&t){const t=e.$implicit;Vr(2),Ho("",t.icon," ",t.label," ")}}function BD(t,e){if(1&t){const t=so();Js(0,"div",89),Js(1,"div",11),Js(2,"label",56),Uo(3,"Tags"),to(),to(),Js(4,"clr-accordion"),qs(5,UD,6,2,"clr-accordion-panel",76),to(),Js(6,"div",11),Js(7,"button",90),co("click",(function(e){Qe(t);const n=fo().$implicit;return fo(4).addTag(n,e)})),Uo(8," Add tag "),to(),to(),to()}if(2&t){const t=fo().$implicit;Vr(5),Zs("ngForOf",t.tags)}}function zD(t,e){if(1&t){const t=so();Js(0,"clr-stack-block"),Js(1,"clr-stack-label"),Uo(2),Js(3,"button",80),co("click",(function(){Qe(t);const n=e.index;return fo(4).deleteColumn(n)})),eo(4,"clr-icon",81),to(),to(),Js(5,"clr-stack-content"),Js(6,"input",82),co("ngModelChange",(function(n){Qe(t);const r=e.index;return fo(4).sectionInEdit.columns[r].label=n})),to(),Js(7,"select",70),co("ngModelChange",(function(n){Qe(t);const r=e.index;return fo(4).sectionInEdit.columns[r].type=n}))("ngModelChange",(function(n){Qe(t);const r=e.$implicit;return fo(4).typeChanged(r,n)})),Js(8,"option",83),Uo(9,"Division Select"),to(),Js(10,"option",84),Uo(11,"Text"),to(),Js(12,"option",85),Uo(13,"Number"),to(),Js(14,"option",86),Uo(15,"Date"),to(),Js(16,"option",87),Uo(17,"Tag Select"),to(),to(),qs(18,BD,9,1,"div",88),to(),to()}if(2&t){const t=e.$implicit,n=e.index,r=fo(4);Vr(2),zo("Column ",n+1," "),Vr(4),Zs("ngModel",r.sectionInEdit.columns[n].label),Vr(1),Zs("ngModel",r.sectionInEdit.columns[n].type),Vr(11),Zs("ngIf",r.isEqual(t.type,"tag-select"))}}function HD(t,e){if(1&t){const t=so();Js(0,"clr-stack-block"),Js(1,"clr-stack-label"),Uo(2," Columns "),qs(3,MD,3,0,"clr-tooltip",13),to(),Js(4,"clr-stack-content"),qs(5,VD,2,1,"span",13),Js(6,"button",75),co("click",(function(e){return Qe(t),fo(3).addColumn(e)})),eo(7,"clr-icon",19),to(),to(),qs(8,zD,19,4,"clr-stack-block",76),to()}if(2&t){const t=fo(3);Vr(3),Zs("ngIf",t.hasPrefill(t.sectionInEdit)),Vr(2),Zs("ngIf",t.sectionInEdit.columns),Vr(3),Zs("ngForOf",t.sectionInEdit.columns)}}function GD(t,e){1&t&&(Js(0,"clr-tooltip-content",79),Js(1,"span"),Uo(2,"Modifying this section might "),Js(3,"b"),Uo(4,"clear existing prefill"),to(),Uo(5,"."),to(),to())}function $D(t,e){1&t&&(Js(0,"clr-tooltip"),eo(1,"clr-icon",77),qs(2,GD,6,0,"clr-tooltip-content",78),to())}function qD(t,e){if(1&t){const t=so();Js(0,"clr-stack-content"),Uo(1),Js(2,"button",96),co("click",(function(e){return Qe(t),fo(4).addInput(e)})),eo(3,"clr-icon",19),to(),to()}if(2&t){const t=fo(4);Vr(1),zo(" ",t.sectionInEdit.inputs.length," inputs ")}}function WD(t,e){if(1&t){const t=so();Js(0,"div",100),co("click",(function(){Qe(t);const e=fo(2).index,n=fo(4);return n.moveInArray(e,e-1,n.sectionInEdit.inputs)})),Uo(1," Move up "),to()}}function QD(t,e){if(1&t){const t=so();Js(0,"div",100),co("click",(function(){Qe(t);const e=fo(2).index,n=fo(4);return n.moveInArray(e,e+1,n.sectionInEdit.inputs)})),Uo(1," Move down "),to()}}function YD(t,e){if(1&t){const t=so();Js(0,"clr-dropdown-menu"),Js(1,"div",100),co("click",(function(){Qe(t);const e=fo().index,n=fo(4);return n.deleteInArray(e,n.sectionInEdit.inputs)})),Uo(2," Delete input "),to(),qs(3,WD,2,0,"div",101),qs(4,QD,2,0,"div",101),to()}if(2&t){const t=fo().index,e=fo(4);Vr(3),Zs("ngIf",t>0),Vr(1),Zs("ngIf",t<e.sectionInEdit.inputs.length-1)}}function KD(t,e){if(1&t){const t=so();Js(0,"clr-accordion-content",94),Js(1,"label",56),Uo(2,"Tag label"),to(),Js(3,"input",54),co("ngModelChange",(function(e){return Qe(t),fo().$implicit.label=e})),to(),Js(4,"label",56),Uo(5,"Tag icon"),to(),Js(6,"emoji-picker",95),co("emoji-click",(function(e){Qe(t);const n=fo().index,r=fo(3).$implicit;return fo(4).editTagEmoji(r,n,e)})),to(),to()}if(2&t){const t=fo().$implicit;Vr(3),Zs("ngModel",t.label)}}function ZD(t,e){if(1&t){const t=so();Js(0,"clr-accordion-panel"),Js(1,"clr-accordion-title"),Uo(2),Js(3,"button",91),co("click",(function(){Qe(t);const n=e.index,r=fo(3).$implicit;return fo(4).deleteTag(r,n)})),eo(4,"clr-icon",92),to(),to(),qs(5,KD,7,1,"clr-accordion-content",93),to()}if(2&t){const t=e.$implicit;Vr(2),Ho("",t.icon," ",t.label," ")}}function XD(t,e){if(1&t){const t=so();Js(0,"div",89),Js(1,"div",11),Js(2,"label",56),Uo(3,"Tags"),to(),to(),Js(4,"clr-accordion"),qs(5,ZD,6,2,"clr-accordion-panel",76),to(),Js(6,"div",11),Js(7,"button",90),co("click",(function(e){Qe(t);const n=fo(2).$implicit;return fo(4).addTag(n,e)})),Uo(8," Add tag "),to(),to(),to()}if(2&t){const t=fo(2).$implicit;Vr(5),Zs("ngForOf",t.tags)}}function JD(t,e){if(1&t){const t=so();Js(0,"clr-select-container"),Js(1,"label"),Uo(2,"Type"),to(),Js(3,"select",102),co("ngModelChange",(function(e){return Qe(t),fo().$implicit.type=e}))("ngModelChange",(function(e){Qe(t);const n=fo().$implicit;return fo(4).typeChanged(n,e)})),Js(4,"option",83),Uo(5,"Division Select"),to(),Js(6,"option",84),Uo(7,"Text"),to(),Js(8,"option",85),Uo(9,"Number"),to(),Js(10,"option",86),Uo(11,"Date"),to(),Js(12,"option",87),Uo(13,"Tag Select"),to(),Js(14,"option",103),Uo(15,"Month"),to(),Js(16,"option",104),Uo(17,"Multiline text"),to(),to(),qs(18,XD,9,1,"div",88),to()}if(2&t){const t=fo().$implicit,e=fo(4);Vr(3),Zs("ngModel",t.type),Vr(15),Zs("ngIf",e.isEqual(t.type,"tag-select"))}}function tR(t,e){if(1&t){const t=so();Js(0,"clr-select-container"),Js(1,"label"),Uo(2,"Link"),to(),Js(3,"select",102),co("ngModelChange",(function(e){return Qe(t),fo().$implicit.link=e}))("ngModelChange",(function(e){Qe(t);const n=fo().$implicit;return fo(4).linkChanged(n,e)})),Js(4,"option",105),Uo(5,"Report coverage date"),to(),Js(6,"option",106),Uo(7,"Additional info"),to(),Js(8,"option",107),Uo(9,"Report title"),to(),Js(10,"option",108),Uo(11,"Report subject"),to(),Js(12,"option",109),Uo(13,"Report tags"),to(),to(),to()}if(2&t){const t=fo().$implicit;Vr(3),Zs("ngModel",t.link)}}function eR(t,e){if(1&t){const t=so();Js(0,"clr-accordion-content",94),Js(1,"label",56),Uo(2,"Tag label"),to(),Js(3,"input",54),co("ngModelChange",(function(e){return Qe(t),fo().$implicit.label=e})),to(),Js(4,"label",56),Uo(5,"Tag icon"),to(),Js(6,"emoji-picker",95),co("emoji-click",(function(e){Qe(t);const n=fo().index,r=fo(2).$implicit;return fo(4).editTagEmoji(r,n,e)})),to(),to()}if(2&t){const t=fo().$implicit;Vr(3),Zs("ngModel",t.label)}}function nR(t,e){if(1&t){const t=so();Js(0,"clr-accordion-panel"),Js(1,"clr-accordion-title"),Uo(2),Js(3,"button",91),co("click",(function(){Qe(t);const n=e.index,r=fo(2).$implicit;return fo(4).deleteTag(r,n)})),eo(4,"clr-icon",92),to(),to(),qs(5,eR,7,1,"clr-accordion-content",93),to()}if(2&t){const t=e.$implicit;Vr(2),Ho("",t.icon," ",t.label," ")}}function rR(t,e){if(1&t){const t=so();Js(0,"div",89),Js(1,"div",11),Js(2,"label",56),Uo(3,"Tags"),to(),to(),Js(4,"clr-accordion"),qs(5,nR,6,2,"clr-accordion-panel",76),to(),Js(6,"div",11),Js(7,"button",90),co("click",(function(e){Qe(t);const n=fo().$implicit;return fo(4).addTag(n,e)})),Uo(8," Add tag "),to(),to(),to()}if(2&t){const t=fo().$implicit;Vr(5),Zs("ngForOf",t.tags)}}function iR(t,e){if(1&t){const t=so();Js(0,"clr-stack-block"),Js(1,"clr-stack-label"),Uo(2),Js(3,"clr-dropdown"),Js(4,"button",97),eo(5,"clr-icon",98),to(),qs(6,YD,5,2,"clr-dropdown-menu",99),to(),to(),Js(7,"clr-stack-content"),Js(8,"clr-input-container"),Js(9,"label"),Uo(10,"Label"),to(),Js(11,"input",54),co("ngModelChange",(function(n){return Qe(t),e.$implicit.label=n})),to(),to(),qs(12,JD,19,2,"clr-select-container",13),qs(13,tR,14,1,"clr-select-container",13),qs(14,rR,9,1,"div",88),to(),to()}if(2&t){const t=e.$implicit,n=e.index,r=fo(4);Vr(2),zo(" Input ",n+1," "),Vr(9),Zs("ngModel",t.label),Vr(1),Zs("ngIf",r.isSectionType(r.sectionInEdit,"simple-input")),Vr(1),Zs("ngIf",r.isSectionType(r.sectionInEdit,"meta")),Vr(1),Zs("ngIf",r.isEqual(t.type,"tag-select"))}}function sR(t,e){if(1&t&&(Js(0,"clr-stack-block"),Js(1,"clr-stack-label"),Uo(2," Inputs "),qs(3,$D,3,0,"clr-tooltip",13),to(),qs(4,qD,4,1,"clr-stack-content",13),qs(5,iR,15,5,"clr-stack-block",76),to()),2&t){const t=fo(3);Vr(3),Zs("ngIf",t.hasPrefill(t.sectionInEdit)),Vr(1),Zs("ngIf",t.sectionInEdit),Vr(1),Zs("ngForOf",t.sectionInEdit.inputs)}}function oR(t,e){if(1&t){const t=so();Js(0,"clr-tab-content",66),Js(1,"clr-stack-view"),Js(2,"clr-stack-block"),Js(3,"clr-stack-label"),Uo(4,"Title"),to(),Js(5,"clr-stack-content"),Js(6,"input",67),co("ngModelChange",(function(e){return Qe(t),fo(2).sectionInEdit.title=e})),to(),to(),to(),Js(7,"clr-stack-block"),Js(8,"clr-stack-label"),Uo(9,"Subtitle (optional)"),to(),Js(10,"clr-stack-content"),Js(11,"input",67),co("ngModelChange",(function(e){return Qe(t),fo(2).sectionInEdit.subtitle=e})),to(),to(),to(),Js(12,"clr-stack-block"),Js(13,"clr-stack-label"),Uo(14,"Type"),Js(15,"clr-tooltip"),eo(16,"clr-icon",68),qs(17,FD,13,0,"clr-tooltip-content",69),to(),to(),Js(18,"clr-stack-content"),Js(19,"select",70),co("ngModelChange",(function(e){return Qe(t),fo(2).sectionInEdit.type=e}))("ngModelChange",(function(){Qe(t);const e=fo(2);return e.sectionTypeChanged(e.sectionInEdit)})),Js(20,"option",71),Uo(21,"Datagrid"),to(),Js(22,"option",72),Uo(23,"SimpleInput"),to(),Js(24,"option",73),Uo(25,"Meta"),to(),to(),to(),to(),Js(26,"clr-stack-block"),Js(27,"clr-stack-label"),Uo(28,"Order"),to(),Js(29,"clr-stack-content"),Js(30,"button",57),co("click",(function(){Qe(t);const e=fo(2);return e.sectionInEdit.index=e.sectionInEdit.index-1})),eo(31,"clr-icon",58),to(),Uo(32),Js(33,"button",59),co("click",(function(){Qe(t);const e=fo(2);return e.sectionInEdit.index=e.sectionInEdit.index+1})),eo(34,"clr-icon",60),to(),to(),to(),qs(35,HD,9,3,"clr-stack-block",13),qs(36,sR,6,3,"clr-stack-block",13),to(),to()}if(2&t){const t=fo(2);Vr(6),Zs("ngModel",t.sectionInEdit.title),Vr(5),Zs("ngModel",t.sectionInEdit.subtitle),Vr(8),Zs("ngModel",t.sectionInEdit.type),Vr(11),Zs("disabled",t.sectionInEdit.index<1),Vr(2),Ho(" ",t.sectionInEdit.index+1,"/",t.currentPage.sections.length," "),Vr(1),Zs("disabled",t.sectionInEdit.index>t.currentPage.sections.length-2),Vr(2),Zs("ngIf",t.isDatagrid(t.sectionInEdit)),Vr(1),Zs("ngIf",t.isSimpleInput(t.sectionInEdit)||t.isSectionType(t.sectionInEdit,"meta"))}}function aR(t,e){1&t&&eo(0,"simple-input",111),2&t&&Zs("interface",fo(3).sectionInEdit)}function cR(t,e){1&t&&eo(0,"datagrid-section",111),2&t&&Zs("interface",fo(3).sectionInEdit)}function lR(t,e){if(1&t&&(Js(0,"clr-tab-content"),Js(1,"p"),eo(2,"clr-icon",12),Uo(3," Prefill is the default information present in each section. You can use it to offer hints on how a form should be filled. "),to(),qs(4,aR,1,1,"simple-input",110),qs(5,cR,1,1,"datagrid-section",110),to()),2&t){const t=fo(2);Vr(4),Zs("ngIf",t.isSimpleInput(t.sectionInEdit)||t.isSectionType(t.sectionInEdit,"meta")),Vr(1),Zs("ngIf",t.isDatagrid(t.sectionInEdit))}}function uR(t,e){if(1&t){const t=so();Js(0,"div",34),Js(1,"div",11),Js(2,"div",35),Js(3,"div",36),Js(4,"button",37),co("click",(function(){Qe(t);const e=fo();return e.openEditPage(e.currentPage)})),eo(5,"clr-icon",38),to(),to(),to(),Js(6,"div",39),Js(7,"h1"),Uo(8),to(),to(),to(),eo(9,"hr"),qs(10,ND,10,2,"div",40),Js(11,"clr-modal",41),co("clrModalOpenChange",(function(e){return Qe(t),fo().editSectionOpened=e})),Js(12,"h3",42),Uo(13,"Section properties"),to(),Js(14,"div",43),Js(15,"clr-tabs"),Js(16,"clr-tab"),Js(17,"button",44),Uo(18,"Properties"),to(),qs(19,oR,37,9,"clr-tab-content",45),to(),Js(20,"clr-tab"),Js(21,"button",46),Uo(22,"Preview & prefill"),to(),qs(23,lR,6,2,"clr-tab-content",47),to(),to(),to(),Js(24,"div",48),Js(25,"button",49),co("click",(function(){return Qe(t),fo().cancelEditSection()})),Uo(26," Cancel "),to(),Js(27,"button",50),co("click",(function(){Qe(t);const e=fo();return e.deleteSection(e.sectionInEdit)})),Uo(28," Delete section "),to(),Js(29,"button",51),co("click",(function(){return Qe(t),fo().finishEditSection()})),Uo(30," Apply changes "),to(),to(),to(),Js(31,"clr-modal",52),co("clrModalOpenChange",(function(e){return Qe(t),fo().editPageOpened=e})),Js(32,"h3",42),Uo(33,"Page properties"),to(),Js(34,"div",43),Js(35,"div",53),Js(36,"div",11),Js(37,"clr-input-container"),Js(38,"label"),Uo(39,"Page title"),to(),Js(40,"input",54),co("ngModelChange",(function(e){return Qe(t),fo().currentPage.title=e})),to(),to(),to(),Js(41,"div",55),Js(42,"label",56),Uo(43,"Page order "),to(),Js(44,"button",57),co("click",(function(){return Qe(t),fo().movePageUp()})),eo(45,"clr-icon",58),to(),Uo(46),Js(47,"button",59),co("click",(function(){return Qe(t),fo().movePageDown()})),eo(48,"clr-icon",60),to(),to(),to(),to(),Js(49,"div",48),Js(50,"button",61),co("click",(function(){Qe(t);const e=fo();return e.deletePage(e.currentPage.index)})),Uo(51," Delete page "),to(),Js(52,"button",51),co("click",(function(){return Qe(t),fo().finishEditPage()})),Uo(53," Finish "),to(),to(),to(),to()}if(2&t){const t=fo();Vr(8),Bo(t.currentPage.title),Vr(2),Zs("ngForOf",t.currentPage.sections),Vr(1),Zs("clrModalOpen",t.editSectionOpened)("clrModalSize","xl"),Vr(12),Zs("clrIfActive",!0),Vr(8),Zs("clrModalOpen",t.editPageOpened),Vr(9),Zs("ngModel",t.currentPage.title),Vr(4),Zs("disabled",t.currentPage.index<1),Vr(2),Ho(" ",t.currentPage.index+1,"/",t._template.pages.length," "),Vr(1),Zs("disabled",t.currentPage.index>t._template.pages.length-2)}}function hR(t,e){if(1&t&&(Js(0,"span"),Js(1,"b"),Uo(2,"Original title: "),to(),Uo(3),eo(4,"br"),to()),2&t){const t=fo(2);Vr(3),zo("",t.originalTemplateName," ")}}function dR(t,e){if(1&t){const t=so();Js(0,"clr-modal",41),co("clrModalOpenChange",(function(e){return Qe(t),fo().saveTemplateOpen=e})),Js(1,"h3",42),Uo(2,"Save template?"),to(),Js(3,"div",112),Js(4,"b"),Uo(5,"Title: "),to(),Uo(6),eo(7,"br"),qs(8,hR,5,1,"span",13),Js(9,"b"),Uo(10,"Page count: "),to(),Uo(11),eo(12,"br"),eo(13,"hr"),Js(14,"div",113),Js(15,"b"),Uo(16,"Magic text (for nerds):"),to(),Js(17,"pre",114),Uo(18),to(),to(),to(),Js(19,"div",48),Js(20,"button",49),co("click",(function(){return Qe(t),fo().cancelSaveTemplate()})),Uo(21," Cancel "),to(),Js(22,"button",115),co("click",(function(){return Qe(t),fo().saveTemplate()})),Uo(23," Save template "),to(),to(),to()}if(2&t){const t=fo();Zs("clrModalOpen",t.saveTemplateOpen)("clrModalSize","lg"),Vr(6),zo("",t._template.templateID," "),Vr(2),Zs("ngIf",t.originalTemplateName),Vr(3),zo("",t._template.pages.length," "),Vr(7),Bo(t.getMagicText()),Vr(4),Zs("clrLoading",t.saveLoadingStatus)}}let pR=(()=>{class t{constructor(t,e,n,r,i,s){this._ActivatedRoute=t,this._AngularFirestore=e,this._ConstantService=n,this._TS=r,this._UserService=i,this._Router=s,this.editSectionOpened=!1,this.editPageOpened=!1,this.saveTemplateOpen=!1,this.emojiPickerOpened=!1,this.saveLoadingStatus=SS.DEFAULT,this.inputsForm=new By({array:new zy([])}),this.columnsForm=new By({array:new zy([])})}ngOnInit(){this.constants$=this._ConstantService.constants,this._UserService.getUserObservable().subscribe(t=>{console.log(t),t&&"admin"!==t.role&&(console.error("The Builder is for admins only. Redirecting home."),this._Router.navigate([""]))}),this._ActivatedRoute.queryParamMap.subscribe(t=>{let e=t.get("open");e?this.openTemplate(e).then(()=>{this.originalTemplateName=this._template.templateID,console.log(this._template)}).catch(()=>{}):(this._template={id:null,templateID:"",pageStatuses:[],pageCount:0,completionStatus:"incomplete",pages:[]},this.templateChanged())}),this.tempPropsGroup=new By({templateTitle:new Uy("")}),this.tempPropsGroup.valueChanges.subscribe(()=>{this.setTemplateTitle(this.tempPropsGroup.get("templateTitle").value)})}openTemplate(t){return new Promise((e,n)=>{console.log("[Builder] Opening "+t+"...");let r=this._AngularFirestore.doc("/templates/"+t);r.get().pipe(Id()).subscribe(i=>{if(i.exists){let t=i.data(),s=[],o=[];for(let e=0;e<t.pageCount;e++)s.push(new Promise((t,n)=>{r.collection("pages").doc(e.toString()).valueChanges().pipe(Id()).subscribe(e=>{o.push(e),t()},n)}));Promise.all(s).then(()=>{this._template={id:null,templateID:t.templateID,pageStatuses:t.pageStatuses,pageCount:t.pageCount,completionStatus:t.completionStatus,pages:o},this.templateChanged(),e()},()=>{n()})}else console.warn("Template "+t+" does not exist. Setting to empty template instead."),this._TS.newTemplate(),n()},n)})}pushTemplateObjectToDB(t,e){let n=this._AngularFirestore.doc("/templates/"+t.templateID);n.set(t).then(()=>{let t=n.collection("pages");e.forEach((e,n)=>{console.log(e),t.doc(n.toString()).set(e)})}).catch(t=>{console.log(t)}).finally(()=>console.log("Template "+t.templateID+" pushed"))}setTemplateTitle(t){this._template&&(this._template.title=t,console.log("[Builder] Template title is now "+t))}get hasMetaSection(){let t=!1;return this._template.pages.forEach(e=>{e.sections.forEach(e=>{"meta"===e.type&&(this.metaSection=e,t=!0)})}),t}templateChanged(){this.updateSidebar()}updateSidebar(){this._template&&(this.pageExpansions=[],this.pageHovers=[],this.sectionHovers=[[]],this._template.pages.forEach((t,e)=>{this.pageExpansions.push(!1),this.pageHovers.push(!1);let n=[];t.sections.forEach(()=>{n.push(!1)}),this.sectionHovers.push(n)}),console.log(this.sectionHovers))}addPage(){this._template.pages.push({title:"Untitled page",index:this._template.pages.length,sections:[]}),this._template.pageStatuses||(this._template.pageStatuses=[]),this._template.pageStatuses.push("incomplete"),this._template.pageCount++,console.log(this._template.pages.length)}setCurrentPage(t){this.currentPage=this._template.pages[t]}get templateValid(){return this._template?!this._template.templateID||this._template.templateID.length<1?(this.validMessage="Template title is missing.",!1):(this.validMessage="Ready to save.",!0):(this.validMessage="Template is missing.",!1)}get pagesEmpty(){return!this._template||!this._template.pages||this._template.pages.length<1}isDatagrid(t){return!(!t||"datagrid"!==t.type)}isSimpleInput(t){return!(!t||"simple-input"!==t.type)}hasInputs(t){return!(!t||"simple-input"!==t.type||!t.inputs||t.inputs.length<1)}getDatagrids(t){let e=[];return this._template&&this._template.pages&&this._template.pages[t].sections.forEach(t=>{"datagrid"===t.type&&e.push(t)}),e}addDatagrid(t){this._template&&this._template.pages&&(this._template.pages[t].sections.push({title:"Untitled",columns:[],value:[],type:"datagrid",index:this._template.pages[t].sections.length}),console.log("Datagrid added. Sections now: "+this._template.pages[t].sections))}getMagicText(){return this._template?JSON.stringify(this._template,null,4):"No template open"}getSectionsByType(t,e){let n=[];return this._template.pages[t].sections.forEach(t=>{t.type===e&&n.push(t)}),n}addMetaSection(t){if(this._template&&this._template.pages){let e={title:"Untitled",inputs:[],value:[],type:"meta",index:this._template.pages[t].sections.length};this._template.pages[t].sections.push(e),this.metaSection=e,console.log("Meta added. Sections now: "+this._template.pages[t].sections)}}getSimpleInputs(t){let e=[];return this._template&&this._template.pages&&this._template.pages[t].sections.forEach(t=>{"simple-input"===t.type&&e.push(t)}),e}addSimpleInput(t){this._template&&this._template.pages&&(this._template.pages[t].sections.push({title:"Untitled",inputs:[],value:[],type:"simple-input",index:this._template.pages[t].sections.length}),console.log("SimpleInput added. Sections now: "+this._template.pages[t].sections))}sectionTypeChanged(t){"simple-input"===t.type?t.inputs||(t.inputs=[]):"datagrid"===t.type?t.columns||(t.columns=[]):console.error("New section type unrecognized: "+t.type)}setSection(t,e){}cancelEditSection(){this.editSectionOpened=!1}openSaveTemplate(){this.saveTemplateOpen=!0}cancelSaveTemplate(){this.saveTemplateOpen=!1}openEditSection(t){this.sectionInEdit=JSON.parse(JSON.stringify(t)),this.originalSectionIndex=this.sectionInEdit.index,this.editSectionOpened=!0}openEditPage(t){this.editPageOpened=!0,console.log("Opening page")}closeEditPage(){this.editPageOpened=!1}movePageUp(){let t=this.currentPage.index;this.movePage(t,t-1),this.resetPageIndices()}movePageDown(){let t=this.currentPage.index;this.movePage(t,t+1),this.resetPageIndices()}movePage(t,e){if(console.log("Moving to "+e),e>=0&&e<this._template.pages.length){let n=this._template.pages;n.splice(e,0,n.splice(t,1)[0])}else console.error("Can't move page. Out of bounds.")}moveInArray(t,e,n){console.log("Moving to "+e),e>=0&&e<n.length?n.splice(e,0,n.splice(t,1)[0]):console.error("Can't move page. Out of bounds.")}deleteInArray(t,e){t>=0&&t<e.length?e.splice(t,1):console.error("Can't delete element. Out of bounds.")}linkChanged(t,e){console.log("Link changed"),"title"===t.link?t.type="text":"coverageDate"===t.link?t.type="month-select":"additionalInfo"===t.link?t.type="textarea":"subject"===t.link?t.type="text":"tags"===t.link&&(t.type="tag-select",t.tags||(t.tags=[])),this.refreshValueFromFields()}resetPageIndices(){this._template.pages.forEach((t,e)=>{t.index=e})}resetSectionIndices(){this.currentPage.sections.forEach((t,e)=>{t.index=e})}finishEditSection(){console.log(this.sectionInEdit),this.moveSection(this.originalSectionIndex,this.sectionInEdit.index),this._template.pages[this.currentPage.index].sections[this.sectionInEdit.index]=this.sectionInEdit,this.currentPage.sections.forEach((t,e)=>{t.index=e}),this.editSectionOpened=!1}finishEditPage(){this.editPageOpened=!1}isDatatype(t,e){return!(!this.sectionInEdit.columns||this.sectionInEdit.columns[t].type!==e)||!(!this.sectionInEdit.inputs||this.sectionInEdit.inputs[t].type!==e)}isEqual(t,e){return t===e}isSectionType(t,e){return!!t&&t.type===e}isPlainDt(t){let e=this.sectionInEdit.columns[t].type;return"tag-select"!==e&&"date-select"!==e&&"month-select"!==e}get tag(){return"Hello"}toggleTag(t,e,n,r){let i=this.sectionInEdit.value[t].row[e].tags;!0===n?i.push(r):i.forEach((t,e)=>{r.label===t.label&&i.splice(e,1)}),console.log(this.sectionInEdit)}renderDgCell(t,e){let n=this.sectionInEdit.value[t].row[e];if("tag-select"===this.sectionInEdit.columns[e].type){let t="";return n.tags.forEach(e=>{t=t+" "+e.icon}),t}return n}moveSection(t,e){if(console.log("Moving to "+e),e>=0&&e<this.currentPage.sections.length){let n=this.currentPage.sections;n.splice(e,0,n.splice(t,1)[0])}else console.error("Can't move section. Out of bounds.")}addColumn(t){t.stopPropagation(),this.sectionInEdit.columns?(this.sectionInEdit.columns.push({label:"New column",type:"text",tags:[]}),this.sectionInEdit.value.forEach(t=>{t.row.push("")})):this.sectionInEdit.columns=[{label:"New column",type:"text"}]}clearPrefill(){this.sectionInEdit.value&&(this.sectionInEdit.value=[])}deleteColumn(t){this.clearPrefill(),console.log(this.sectionInEdit.columns),this.sectionInEdit.columns.splice(t,1),console.log(this.sectionInEdit.columns)}deleteInput(t){this.clearPrefill(),this.sectionInEdit.inputs.splice(t,1)}deleteSection(t){confirm('Are you sure you want to delete "'+t.title+'"?')&&(this.currentPage.sections.splice(t.index,1),this.resetSectionIndices(),console.log("Section @ "+t.index+" deleted."),this.cancelEditSection())}deletePage(t){confirm("Delete page "+(t+1)+" ("+this._template.pages[t].title+")?")&&(this.currentPage.index===t&&(this.currentPage=null),this._template.pages.splice(t,1),this._template.pageCount--,this.closeEditPage())}addInput(t){t.stopPropagation();let e=this.sectionInEdit.inputs;e||(e=[]),e.push("meta"===this.sectionInEdit.type?{label:"Untitled",type:"month-select",link:"coverageDate",tags:[]}:{label:"Untitled",type:"text",link:null,tags:[]}),this.refreshValueFromFields()}hoverEnterPageSB(t){this.pageHovers[t]=!0}hoverLeavePageSB(t){this.pageHovers[t]=!1}hasTagSelect(t){let e=!1;return t.inputs?t.inputs.forEach(t=>{"tag-select"===t.type&&(e=!0)}):t.columns&&t.columns.forEach(t=>{"tag-select"===t.type&&(e=!0)}),e}hasTag(t,e,n){let r=[];return this.sectionInEdit.value[t].row[e].tags.forEach(t=>{r.push(t.icon)}),r.includes(n.icon)}hasPrefill(t){return!!(t.value&&t.value.length>0)}addTag(t,e){e.stopPropagation(),console.log(t),t.tags||(t.tags=[]),t.tags.push({icon:"\u2753",label:"Untitled"}),console.log(t),this.refreshValueFromFields()}refreshValueFromFields(){let t=[];this.sectionInEdit.inputs?(this.sectionInEdit.inputs.forEach(e=>{t.push("tag-select"===e.type?{tags:[]}:null)}),this.sectionInEdit.value=t,console.log("Value refreshed: "),console.log(this.sectionInEdit.value)):this.sectionInEdit.columns?(this.sectionInEdit.columns.forEach(e=>{t.push("tag-select"===e.type?{tags:[]}:null)}),this.sectionInEdit.value=[{row:t}],console.log("Value refreshed: "),console.log(this.sectionInEdit.value)):console.error("Could not refresh value from fields: no columns or inputs were found.")}typeChanged(t,e){this.refreshValueFromFields(),console.log(this.sectionInEdit)}deleteTag(t,e){console.log(t.tags.splice(e,1))}editTagEmoji(t,e,n){console.log(e,n.detail),t.tags[e].icon=n.detail.unicode,console.log(this.sectionInEdit)}saveTemplate(){this.saveLoadingStatus=SS.LOADING,this._TS.saveTemplate(this._template).then(()=>{this.saveLoadingStatus=SS.SUCCESS,setTimeout(()=>{this.saveTemplateOpen=!1},500),this._TS.openTemplate(this._template.templateID)}).catch(t=>{console.error("Save failed: "+t),alert("Save failed: "+t),this.saveLoadingStatus=SS.ERROR})}}return t.\u0275fac=function(e){return new(e||t)(Qs(nf),Qs(hd),Qs(dd),Qs(Bg),Qs(jg),Qs(hg))},t.\u0275cmp=he({type:t,selectors:[["app-builder"]],decls:14,vars:7,consts:[[1,"clr-row","clr-justify-content-between",2,"width","100vw","overflow","hidden"],[1,"clr-col-3","builder-sidebar",2,"box-shadow","0px 10px 18px #c7c6c6","margin-left","10px","overflow-y","auto"],[1,"clr-row",2,"margin","1rem 0 1rem 0"],[2,"margin-top","3rem"],["class","templateTitle","clrInput","","placeholder","Untitled template","name","name",3,"ngModel","ngModelChange",4,"ngIf"],["class","clr-row",4,"ngIf"],["class","clr-col preview-area",4,"ngIf"],[1,"btn","btn-primary","builder-save-button",3,"disabled","title","click"],["shape","floppy"],[3,"clrModalOpen","clrModalSize","clrModalOpenChange",4,"ngIf"],["clrInput","","placeholder","Untitled template","name","name",1,"templateTitle",3,"ngModel","ngModelChange"],[1,"clr-row"],["shape","help-info"],[4,"ngIf"],[3,"clrExpanded","clrExpandedChange","click",4,"ngFor","ngForOf"],[2,"margin","0"],["clrTooltipTrigger","","shape","help-info","size","16","aria-label","Uniq tooltip 3"],["clrPosition","bottom-right","clrSize","md",4,"clrIfOpen"],["title","Add page",1,"btn","btn-sm","btn-link","btn-icon",3,"click"],["shape","plus"],["clrPosition","bottom-right","clrSize","md"],[3,"clrExpanded","clrExpandedChange","click"],[1,"tree-text","clr-row",3,"dblclick"],["shape","file"],[1,"p4",2,"margin","0"],["class","btn btn-sm btn-link","title","Add Meta Section",3,"click",4,"ngIf"],["style","width: 100%;",3,"dblclick",4,"ngFor","ngForOf"],["title","Add Datagrid",1,"btn","btn-sm","btn-link","btn-icon",3,"click"],["title","Add Meta Section",1,"btn","btn-sm","btn-link",3,"click"],[2,"width","100%",3,"dblclick"],[1,"tree-text"],["shape","flag","title","Meta section",1,"is-solid","is-error"],["shape","table"],["shape","form"],[1,"clr-col","preview-area"],[1,"clr-col-1","clr-align-self-center",2,"padding","0"],[1,"clr-row","clr-justify-content-end","clr-align-items-end"],[1,"btn","btn-link","btn-icon",2,"margin-right","1rem",3,"click"],["shape","pencil",2,"color","black"],[1,"clr-col-11",2,"padding","0"],["class","clr-row",4,"ngFor","ngForOf"],[3,"clrModalOpen","clrModalSize","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body",2,"overflow","auto"],["clrTabLink","","id","link1"],["id","content1",4,"clrIfActive"],["clrTabLink",""],[4,"clrIfActive"],[1,"modal-footer"],["type","button",1,"btn",3,"click"],[1,"btn","btn-warning-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"clrModalOpen","clrModalOpenChange"],[1,"clr-col-12"],["clrInput","",3,"ngModel","ngModelChange"],[1,"clr-row",2,"padding-top","1rem"],[1,"clr-control-label"],["title","Move up",1,"btn","btn-link","btn-sm",2,"margin","0",3,"disabled","click"],["shape","angle","dir","up"],["title","Move down",1,"btn","btn-link","btn-sm",2,"margin","0",3,"disabled","click"],["shape","angle","dir","down"],["type","button",1,"btn","btn-danger",3,"click"],[1,"clr-row","clr-justify-content-end"],["class","grayout",3,"interface","sectionChanged",4,"ngIf","ngIfElse"],["simpleInput",""],[1,"grayout",3,"interface","sectionChanged"],["id","content1"],["type","text",1,"clr-input",3,"ngModel","ngModelChange"],["clrTooltipTrigger","","shape","help-info","size","16"],["clrPosition","right","clrSize","lg",4,"clrIfOpen"],[1,"clr-select",3,"ngModel","ngModelChange"],["value","datagrid"],["value","simple-input"],["value","meta"],["clrPosition","right","clrSize","lg"],["title","Add column",1,"btn","btn-sm","btn-link","btn-icon",2,"margin","0",3,"click"],[4,"ngFor","ngForOf"],["clrTooltipTrigger","","shape","warning-standard","size","16",1,"is-warning","is-solid"],["clrPosition","top-right","clrSize","md",4,"clrIfOpen"],["clrPosition","top-right","clrSize","md"],[1,"btn","btn-sm","btn-link","btn-icon",3,"click"],["shape","trash"],["type","text","placeholder","Label",1,"clr-input",3,"ngModel","ngModelChange"],["value","division-select"],["value","text"],["value","number"],["value","date-select"],["value","tag-select"],["class","clr-col",4,"ngIf"],[1,"clr-col"],[1,"btn","btn-link","btn-sm",3,"click"],[1,"btn","btn-link","btn-sm","btn-icon",2,"margin","0",3,"click"],["shape","trash",1,"is-danger"],["class","tagAccordion",4,"clrIfExpanded"],[1,"tagAccordion"],[3,"emoji-click"],["title","Add input",1,"btn","btn-sm","btn-link","btn-icon",2,"margin","0",3,"click"],["clrDropdownTrigger",""],["shape","ellipsis-vertical","size","16"],[4,"clrIfOpen"],["clrDropdownItem","",3,"click"],["clrDropdownItem","",3,"click",4,"ngIf"],["clrSelect","",3,"ngModel","ngModelChange"],["value","month-select"],["value","textarea"],["value","coverageDate"],["value","additionalInfo"],["value","title"],["value","subject"],["value","tags"],[3,"interface",4,"ngIf"],[3,"interface"],[1,"modal-body",2,"overflow-y","auto"],[2,"overflow-y","auto","overflow-x","hidden","height","75%"],[2,"max-height","400px","overflow-y","auto"],["type","button",1,"btn","btn-success",3,"clrLoading","click"]],template:function(t,e){1&t&&(Js(0,"div",0),Js(1,"div",1),Js(2,"div",2),Js(3,"clr-input-container",3),qs(4,SD,1,1,"input",4),Js(5,"clr-control-helper"),Uo(6,"Template title"),to(),to(),to(),qs(7,CD,4,0,"span",5),qs(8,DD,4,2,"div",5),to(),qs(9,uR,54,11,"div",6),Js(10,"button",7),co("click",(function(){return e.openSaveTemplate()})),eo(11,"clr-icon",8),Uo(12," Save template "),to(),qs(13,dR,24,7,"clr-modal",9),to()),2&t&&(Vr(4),Zs("ngIf",e._template),Vr(3),Zs("ngIf",e.pagesEmpty),Vr(1),Zs("ngIf",e._template),Vr(1),Zs("ngIf",e.currentPage),Vr(1),Zs("disabled",!e.templateValid)("title",e.validMessage),Vr(3),Zs("ngIf",e.saveTemplateOpen))},directives:[sE,Rh,ZS,nS,Vm,oE,$m,Jy,jT,Oh,VT,Yx,Jx,bC,Xx,Gx,$x,Vx,_x,Px,Rx,Sx,vC,tC,aD,_D,xx,ET,CT,IT,my,yy,_y,pk,gk,hk,mk,dk,aT,_C,fk,tx,ax,ox,nx,mE,yE,VS,CS],styles:[".templateTitle[_ngcontent-%COMP%]{font-size:1rem!important;width:100%!important}.builder-sidebar[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]{height:calc(100vh - 61px)}.preview-area[_ngcontent-%COMP%]{overflow-y:auto}.builder-save-button[_ngcontent-%COMP%]{position:absolute;right:1vw;bottom:1vh}.tree-text[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}emoji-picker[_ngcontent-%COMP%]{width:100%;max-height:15rem;--emoji-size:1.2rem;--emoji-padding:0.3rem;--input-font-size:0.67rem;--input-line-height:1rem;--num-columns:8}.tagAccordion[_ngcontent-%COMP%]{height:20rem}.clr-form-control[_ngcontent-%COMP%]{margin:0!important}"]}),t})();function fR(t,e){if(1&t&&(Js(0,"option",10),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t),Vr(1),Bo(t)}}let gR=(()=>{class t{constructor(t,e,n){this._ConstantService=t,this._UserService=e,this._Router=n,this.saveBtnState=SS.DEFAULT}ngOnInit(){this.formGroup=new By({branchSelect:new Uy("")}),this.constants=this._ConstantService.constants,this._UserService.getUserObservable().subscribe(t=>{t&&this.formGroup.get("branchSelect").setValue(t.branch)})}saveChanges(){this.saveBtnState=SS.LOADING,this._UserService.setBranch(this.formGroup.get("branchSelect").value).then(()=>{this.saveBtnState=SS.SUCCESS,console.log("[Preferences Component] Changes saved. Redirecting to home."),this._Router.navigate([""])}).catch(()=>{this.saveBtnState=SS.ERROR})}}return t.\u0275fac=function(e){return new(e||t)(Qs(dd),Qs(jg),Qs(hg))},t.\u0275cmp=he({type:t,selectors:[["app-preferences"]],decls:20,vars:5,consts:[[1,"clr-row","clr-justify-content-center",2,"width","100vw","margin-left","1rem"],[1,"clr-col","clr-col-md-6","clr-col-xl-6"],[1,"clr-row","clr-justify-content-between","clr-align-items-end"],[1,"clr-row"],["clrForm","",3,"formGroup"],[1,"clr-sr-only"],["clrSelect","","name","type","formControlName","branchSelect"],[3,"value",4,"ngFor","ngForOf"],[1,"clr-row",2,"margin-top","3rem"],[1,"btn","btn-primary",3,"clrLoading","click"],[3,"value"]],template:function(t,e){if(1&t&&(Js(0,"div",0),Js(1,"div",1),Js(2,"div",2),Js(3,"h1"),Uo(4,"User preferences"),to(),to(),Js(5,"div",3),Js(6,"form",4),Js(7,"h3"),Uo(8,"Change your branch affiliation"),to(),Js(9,"clr-select-container"),Js(10,"label",5),Uo(11,"Which branch do you work for?"),to(),Js(12,"select",6),qs(13,fR,2,2,"option",7),cc(14,"async"),to(),Js(15,"clr-control-helper"),Uo(16,"Which branch do you work for?"),to(),to(),to(),to(),Js(17,"div",8),Js(18,"button",9),co("click",(function(){return e.saveChanges()})),Uo(19," Save changes "),to(),to(),to(),to()),2&t){var n;const t=null==(n=lc(14,3,e.constants))?null:n.branches;Vr(6),Zs("formGroup",e.formGroup),Vr(7),Zs("ngForOf",t),Vr(5),Zs("clrLoading",e.saveBtnState)}},directives:[tv,qm,nC,sv,mE,tC,my,yE,$m,dv,Oh,ZS,VS,CS,yy,_y],pipes:[Gh],styles:[""]}),t})();function mR(t,e){1&t&&(Js(0,"clr-alert",28),Js(1,"clr-alert-item"),Js(2,"span",29),Uo(3," You're viewing a submitted report. It cannot be edited. "),to(),to(),to()),2&t&&Zs("clrAlertClosable",!1)}function yR(t,e){1&t&&(Js(0,"clr-alert",30),Js(1,"clr-alert-item"),Js(2,"span",29),Uo(3," You're viewing a submitted report. Only admins can edit it. "),to(),to(),to()),2&t&&Zs("clrAlertClosable",!1)("clrAlertType","warning")("clrAlertIcon","administrator")}function vR(t,e){if(1&t){const t=so();Js(0,"datagrid-section",33),co("sectionChanged",(function(e){Qe(t);const n=fo().$implicit;return fo().setSection(n,e)})),to()}2&t&&Zs("interface",fo().$implicit)}function bR(t,e){if(1&t){const t=so();Js(0,"simple-input",33),co("sectionChanged",(function(e){Qe(t);const n=fo().$implicit;return fo().setSection(n,e)})),to()}2&t&&Zs("interface",fo().$implicit)}function wR(t,e){if(1&t&&(Js(0,"div"),qs(1,vR,1,1,"datagrid-section",31),qs(2,bR,1,1,"ng-template",null,32,Fc),to()),2&t){const t=e.$implicit,n=Ws(3),r=fo();Vr(1),Zs("ngIf",r.isDatagrid(t))("ngIfElse",n)}}function _R(t,e){1&t&&(Js(0,"clr-alert",34),Js(1,"clr-alert-item"),Js(2,"span",29),Uo(3," Heads up: not all pages have been marked as complete. "),to(),to(),to()),2&t&&Zs("clrAlertType","warning")("clrAlertClosable",!1)}function SR(t,e){1&t&&(Js(0,"div",35),Js(1,"div",36),Js(2,"div",37),Js(3,"div",38),eo(4,"clr-icon",39),to(),Js(5,"span",29),Uo(6,"Page saved"),to(),to(),to(),to())}function CR(t,e){if(1&t){const t=so();Js(0,"button",40),co("click",(function(){return Qe(t),fo().savePage()})),eo(1,"clr-icon",41),Uo(2),to()}if(2&t){const t=fo();ko("btn-primary",t.saveStale)("btn-link",!t.saveStale),Zs("clrLoading",t.saveButtonState),Vr(1),ko("has-alert",t.saveStale),Vr(1),zo(" ",t.saveTimeElapsed," ")}}function ER(t,e){1&t&&eo(0,"clr-icon",47)}function IR(t,e){1&t&&Uo(0),2&t&&zo(" ",fo().index," ")}function TR(t,e){1&t&&eo(0,"clr-icon",48)}function xR(t,e){if(1&t){const t=so();Js(0,"clr-button",43),co("click",(function(){Qe(t);const n=e.index;return fo(2).goToPage(n)})),qs(1,ER,1,0,"clr-icon",44),qs(2,IR,1,1,"ng-template",null,45,Fc),qs(4,TR,1,0,"clr-icon",46),to()}if(2&t){const t=e.index,n=Ws(3),r=fo(2);Ao(r.getPageButtonClass(t)),Vr(1),Zs("ngIf",t<1)("ngIfElse",n),Vr(3),Zs("ngIf",r.pageComplete(t))}}function kR(t,e){if(1&t&&(Js(0,"clr-button-group"),qs(1,xR,5,5,"clr-button",42),cc(2,"async"),to()),2&t){var n;const t=null==(n=lc(2,1,fo().report$))?null:n.pageStatuses;Vr(1),Zs("ngForOf",t)}}function AR(t,e){if(1&t){const t=so();Js(0,"button",49),co("click",(function(){return Qe(t),fo().confirmSubmitReport()})),Uo(1," Finish report"),eo(2,"clr-icon",50),to()}if(2&t){const t=fo();ko("btn-success",t.reportFullyComplete),Zs("clrLoading",t.submitButtonState)}}function OR(t,e){1&t&&(Js(0,"label"),Uo(1,"Complete"),to())}function DR(t,e){1&t&&(Js(0,"label"),Uo(1,"Incomplete"),to())}function RR(t,e){if(1&t&&(Js(0,"div",51),Js(1,"clr-toggle-container",null,52),Js(3,"label",53),Uo(4,"Mark this page:"),to(),Js(5,"clr-toggle-wrapper"),eo(6,"input",54),qs(7,OR,2,0,"label",55),qs(8,DR,2,0,"ng-template",null,56,Fc),to(),to(),to()),2&t){const t=Ws(9),e=fo();Vr(6),Zs("formControl",e.markCompleteControl),Vr(1),Zs("ngIf",e.pageComplete(e.currentPageIndex))("ngIfElse",t)}}let PR=(()=>{class t{constructor(t,e,n,r){this.activeRoute=t,this._Router=e,this._ReportService=n,this._UserService=r,this.datagrids=[],this.simpleInputs=[],this.markCompleteControl=new Uy,this.submitButtonState=SS.DEFAULT,this.saveButtonState=SS.DEFAULT,this.saveSuccessful=!1,this.submitConfirmationVisible=!1}ngOnInit(){this.report$=this._ReportService.getReportObservable(),this.page$=this._ReportService.getPageObservable(),this.activeRoute.paramMap.subscribe(t=>{this.urlPageNumber=+t.get("page-number"),null!=this.urlPageNumber&&this.urlPageNumber!==this.currentPageIndex&&this._ReportService.report&&this._ReportService.openPage(this.urlPageNumber)}),this.markCompleteControl.valueChanges.subscribe(t=>{this._ReportService.setPageStatus(this.currentPageIndex,!0===t?"complete":"incomplete"),this._ReportService.saveReportOnline()}),this.report$.subscribe(t=>{if(!t){let t=this.activeRoute.snapshot.paramMap.get("report-id"),e=this.activeRoute.snapshot.paramMap.get("page-number");this._ReportService.openReport(t,+e)}}),this.page$.subscribe(t=>{t&&(this.datagrids=[],this.simpleInputs=[],t.sections.forEach(t=>{"datagrid"==t.type?this.datagrids.push(t):"simple-input"!==t.type&&"meta"!==t.type||this.simpleInputs.push(t)}),this.markCompleteControl.setValue("complete"===this._ReportService.report.pageStatuses[t.index]))})}getPageButtonClass(t){return t==this.currentPageIndex?"btn btn-primary":"btn"}pageComplete(t){return!!this._ReportService.report&&"complete"===this._ReportService.report.pageStatuses[t]}isDatagrid(t){return!(!t||"datagrid"!==t.type)}get reportFullyComplete(){let t=!0;return this._ReportService.report&&this._ReportService.report.pageStatuses.forEach(e=>{"complete"!==e&&(t=!1)}),t}ngOnDestroy(){this._ReportService.closeReport()}savePage(){this.saveButtonState=SS.LOADING,this._ReportService.page.sections.forEach(t=>{"meta"===t.type&&this._ReportService.saveReportOnline()}),this._ReportService.savePageOnline().then(()=>{this.saveButtonState=SS.DEFAULT,this.saveSuccessful=!0,this.saveTime=Date.now(),setTimeout(()=>this.saveSuccessful=!1,2500)}).catch(()=>{this.saveButtonState=SS.ERROR})}goToPage(t){this.editable&&this.savePage(),this._Router.navigate(["report",this._ReportService.report.id,t])}confirmSubmitReport(){this.submitConfirmationVisible=!0}cancelSubmitReport(){this.submitConfirmationVisible=!1}submitReport(){console.log("[R Comp] Submitting report..."),this.submitButtonState=SS.LOADING,this._ReportService.submitReport().then(()=>{this.submitButtonState=SS.SUCCESS,this._Router.navigate([""])})}get currentPageIndex(){return this._ReportService.page?this._ReportService.page.index:null}get currentSections(){return this._ReportService.page.sections}get saveTimeElapsed(){return this.saveTime?((Date.now()-this.saveTime)/6e4).toFixed()+" min since save":null}get saveStale(){return!this.saveTime||(Date.now()-this.saveTime)/6e4>10}setSection(t,e){this._ReportService.setSectionValue(this.currentPageIndex,t.order,e),t.meta&&this._ReportService.saveReportOnline()}get editable(){return!this._ReportService.report||"admin"===this._UserService.getUserSnapshot().role||"complete"!==this._ReportService.report.completionStatus}get adminSubmitted(){return!(!this._UserService.getUserSnapshot()||"admin"!==this._UserService.getUserSnapshot().role||!this._ReportService.report||"complete"!==this._ReportService.report.completionStatus)}}return t.\u0275fac=function(e){return new(e||t)(Qs(nf),Qs(hg),Qs(Ug),Qs(jg))},t.\u0275cmp=he({type:t,selectors:[["app-report"]],decls:44,vars:22,consts:[[1,"topDiv","clr-col"],[1,"clr-row","clr-justify-content-center"],[1,"clr-col","clr-col-lg-10","clr-col-xl-8","sectionCol"],[3,"clrAlertClosable",4,"ngIf"],[3,"clrAlertClosable","clrAlertType","clrAlertIcon",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-col-md-6","clr-offset-md-3","clr-align-self-end"],["shape","help-info"],[2,"height","48px"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[3,"clrAlertType","clrAlertClosable",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"clrLoading","click"],["class","alert alert-success","role","alert","style","\n      position: fixed;\n      bottom: 54px;\n      left: 6px;\n      width: 10rem;\n      z-index: 1000;\n    ",4,"ngIf"],[1,"stickybar","clr-row"],[1,"clr-col-8","clr-col-md-10"],[1,"clr-row","clr-justify-content-center","clr-align-items-center"],["type","button","class","btn","aria-label","save page","title","Save current page",3,"btn-primary","btn-link","clrLoading","click",4,"ngIf"],["type","button","aria-label","previous page",1,"btn","btn-icon","btn-link",3,"disabled","click"],["shape","angle","dir","left"],[4,"ngIf"],["type","button","aria-label","next page",1,"btn","btn-icon","btn-link",3,"disabled","click"],["shape","angle","dir","right"],["type","button","class","btn","aria-label","next page",3,"btn-success","clrLoading","click",4,"ngIf"],["class","clr-col-4 clr-col-md-2",4,"ngIf"],[3,"clrAlertClosable"],[1,"alert-text"],[3,"clrAlertClosable","clrAlertType","clrAlertIcon"],[3,"interface","sectionChanged",4,"ngIf","ngIfElse"],["simpleInput",""],[3,"interface","sectionChanged"],[3,"clrAlertType","clrAlertClosable"],["role","alert",1,"alert","alert-success",2,"position","fixed","bottom","54px","left","6px","width","10rem","z-index","1000"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","check-circle",1,"alert-icon"],["type","button","aria-label","save page","title","Save current page",1,"btn",3,"clrLoading","click"],["shape","floppy"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["shape","home",4,"ngIf","ngIfElse"],["showPageNumber",""],["shape","check","title","Marked complete",4,"ngIf"],["shape","home"],["shape","check","title","Marked complete"],["type","button","aria-label","next page",1,"btn",3,"clrLoading","click"],["shape","step-forward-2"],[1,"clr-col-4","clr-col-md-2"],["markCompleteToggle",""],[1,"p6",2,"margin-top","0.3rem"],["type","checkbox","clrToggle","","value","option1","name","options",3,"formControl"],[4,"ngIf","ngIfElse"],["incompleteLabel",""]],template:function(t,e){if(1&t&&(Js(0,"div",0),Js(1,"div",1),Js(2,"div",2),qs(3,mR,4,1,"clr-alert",3),qs(4,yR,4,3,"clr-alert",4),Js(5,"h1"),Uo(6),cc(7,"async"),to(),eo(8,"hr"),qs(9,wR,4,2,"div",5),Js(10,"div",6),eo(11,"clr-icon",7),Js(12,"em"),Uo(13,"Try the buttons below to continue the report."),to(),to(),eo(14,"div",8),to(),to(),Js(15,"clr-modal",9),co("clrModalOpenChange",(function(t){return e.submitConfirmationVisible=t})),Js(16,"h3",10),Uo(17,"Ready to submit?"),to(),Js(18,"div",11),qs(19,_R,4,2,"clr-alert",12),eo(20,"hr"),Uo(21," Once a report is submitted, "),Js(22,"b"),Uo(23,"it cannot be edited again"),to(),Uo(24,". Double-check to make sure that all sections are filled out. "),to(),Js(25,"div",13),Js(26,"button",14),co("click",(function(){return e.cancelSubmitReport()})),Uo(27," Cancel "),to(),Js(28,"button",15),co("click",(function(){return e.submitReport()})),Uo(29," Submit "),to(),to(),to(),qs(30,SR,7,0,"div",16),Js(31,"div",17),Js(32,"div",18),Js(33,"div",19),qs(34,CR,3,8,"button",20),Js(35,"button",21),co("click",(function(){return e.goToPage(e.currentPageIndex-1)})),eo(36,"clr-icon",22),to(),qs(37,kR,3,3,"clr-button-group",23),cc(38,"async"),Js(39,"button",24),co("click",(function(){return e.goToPage(e.currentPageIndex+1)})),cc(40,"async"),eo(41,"clr-icon",25),to(),qs(42,AR,3,3,"button",26),to(),to(),qs(43,RR,10,3,"div",27),to(),to()),2&t){var n,r;const t=null==(r=lc(38,18,e.report$))?null:r.id;var i;const s=e.currentPageIndex>(null==(i=lc(40,20,e.report$))?null:i.pageCount)-2;Vr(1),ko("block-clicks",!e.editable),Vr(2),Zs("ngIf",!e.editable),Vr(1),Zs("ngIf",e.adminSubmitted),Vr(2),zo(" ",null==(n=lc(7,16,e.page$))?null:n.title," "),Vr(3),Zs("ngForOf",e.currentSections),Vr(6),Zs("clrModalOpen",e.submitConfirmationVisible),Vr(4),Zs("ngIf",!e.reportFullyComplete),Vr(9),Zs("clrLoading",e.submitButtonState),Vr(2),Zs("ngIf",e.saveSuccessful),Vr(4),Zs("ngIf",e.editable),Vr(1),Zs("disabled",e.currentPageIndex<1),Vr(2),Zs("ngIf",t),Vr(2),Zs("disabled",s),Vr(3),Zs("ngIf",e.editable),Vr(1),Zs("ngIf",e.editable)}},directives:[Rh,Oh,nS,Gx,$x,VS,CS,px,fx,dx,aD,_D,FS,TS,dC,tC,uC,Fm,hC,$m,rv],pipes:[Gh],styles:[".topDiv[_ngcontent-%COMP%]{width:100vw!important;height:100%;margin:0!important;padding:0!important}.startSection[_ngcontent-%COMP%]{height:calc(100% - 48px)}.sectionCol[_ngcontent-%COMP%]{width:100%!important;padding:0 48px!important}.stickybar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;margin:0;z-index:1000;width:100%;height:48px;background-color:#f5f5f5;border-top:1px solid #a89f9f}clr-toggle-container[_ngcontent-%COMP%]{margin:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.save-success[_ngcontent-%COMP%]{position:fixed;bottom:54;left:6}.block-clicks[_ngcontent-%COMP%]{pointer-events:none}"]}),t})();const NR=new Mt("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:()=>window}:void 0);let FR=(()=>{let t=class{constructor(t,e){this.document=t,this.window=e,this.copySubject=new I,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(t){this.config=t}copy(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});const e=this.copyFromContent(t);return this.pushCopyResponse(e?{content:t,isSuccess:e}:{isSuccess:!1,content:t})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(t,e=!0){try{this.selectTarget(t);const n=this.copyText();return this.clearSelection(e?t:void 0,this.window),n&&this.isCopySuccessInIE11()}catch(n){return!1}}isCopySuccessInIE11(){const t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))}copyFromContent(t,e=this.document.body){if(this.tempTextArea&&!e.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{e.appendChild(this.tempTextArea)}catch(r){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;const n=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),n}destroy(t=this.document.body){this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(t,e){var n;t&&t.focus(),null===(n=e.getSelection())||void 0===n||n.removeAllRanges()}createTempTextArea(t,e){const n="rtl"===t.documentElement.getAttribute("dir");let r;return r=t.createElement("textarea"),r.style.fontSize="12pt",r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[n?"right":"left"]="-9999px",r.style.top=(e.pageYOffset||t.documentElement.scrollTop)+"px",r.setAttribute("readonly",""),r}pushCopyResponse(t){this.copySubject.next(t)}pushCopyReponse(t){this.pushCopyResponse(t)}};return t.\u0275fac=function(e){return new(e||t)(Wt(Pu),Wt(NR,8))},t.\u0275prov=lt({factory:function(){return new t(Wt(Pu),Wt(NR,8))},token:t,providedIn:"root"}),t})(),LR=(()=>{let t=class{};return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[qh]]}),t})();function MR(t,e){if(1&t){const t=so();Js(0,"div",4),Js(1,"div",5),Js(2,"div",6),Js(3,"div",7),eo(4,"clr-icon",8),to(),Js(5,"span",9),Uo(6," In order to continue, please verify your account using the link emailed to you, then refresh this page. If you don't receive a verification email (check your spam), "),Js(7,"a",10),co("click",(function(){return Qe(t),fo().resendVerification()})),Uo(8,"click here to resend one"),to(),Uo(9,". "),to(),to(),to(),to()}}function VR(t,e){1&t&&(Js(0,"div",11),Js(1,"div",5),Js(2,"div",6),Js(3,"div",7),eo(4,"clr-icon",8),to(),Js(5,"span",9),Uo(6," A new email has been sent to you. "),to(),to(),to(),to())}function jR(t,e){if(1&t&&(Js(0,"h1"),Uo(1),cc(2,"async"),to()),2&t){const t=fo(2);var n;Vr(1),zo("Reports for ",null==(n=lc(2,1,t.user))?null:n.branch,"")}}function UR(t,e){1&t&&(Js(0,"h1"),Uo(1,"Reports for all branches"),to())}function BR(t,e){if(1&t){const t=so();Js(0,"button",48),co("click",(function(){return Qe(t),fo(2).showTemplateModal()})),eo(1,"clr-icon",49),Uo(2," Templates "),to()}}function zR(t,e){if(1&t){const t=so();no(0),Js(1,"button",52),co("click",(function(){Qe(t);const n=e.$implicit,r=e.index;return fo(3).createReport(n.templateID,r)})),Uo(2),to(),ro()}if(2&t){const t=e.$implicit,n=e.index,r=fo(3);Vr(1),Zs("clrLoading",r.templateLoadStatuses[n]),Vr(1),zo(" ",t.templateID," ")}}function HR(t,e){1&t&&(no(0),eo(1,"clr-icon",53),Uo(2," No templates are available right now."),ro())}function GR(t,e){if(1&t&&(Js(0,"clr-dropdown-menu",50),qs(1,zR,3,2,"ng-container",51),qs(2,HR,3,0,"ng-container",14),to()),2&t){const t=fo(2);Vr(1),Zs("ngForOf",t._TemplateService.visibleTemplates),Vr(1),Zs("ngIf",t._TemplateService.visibleTemplates.length<1)}}function $R(t,e){if(1&t){const t=so();Js(0,"button",54),co("click",(function(){Qe(t);const e=fo(2);return e.copyMagic(e.selectedReports)})),eo(1,"clr-icon",55),Uo(2),to()}if(2&t){const t=fo(2);Zs("clrLoading",t.magicLoading),Vr(2),zo(" Copy magic for ",t.selectedReports.length," reports ")}}function qR(t,e){if(1&t){const t=so();Js(0,"button",57),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2).showDelete(e)})),eo(1,"clr-icon",63),Uo(2," Delete report "),Js(3,"span",64),Uo(4,"Admin"),to(),to()}}function WR(t,e){if(1&t){const t=so();Js(0,"button",57),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2).showDelete(e)})),eo(1,"clr-icon",63),Uo(2," Delete draft "),to()}}function QR(t,e){if(1&t){const t=so();Js(0,"button",57),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2).copyMagic([e])})),eo(1,"clr-icon",55),Uo(2," Copy magic text "),to()}}function YR(t,e){1&t&&(Js(0,"span"),Js(1,"em"),Uo(2,"Unsubmitted"),to(),to())}function KR(t,e){1&t&&(Js(0,"span",65),Uo(1,"Draft"),to())}function ZR(t,e){if(1&t){const t=so();Js(0,"clr-dg-row",56),Js(1,"clr-dg-action-overflow"),Js(2,"button",57),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),eo(3,"clr-icon",58),Uo(4," Open report "),to(),Js(5,"button",57),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).showCopy(n)})),eo(6,"clr-icon",59),Uo(7," Duplicate to new report "),to(),qs(8,qR,5,0,"button",60),qs(9,WR,3,0,"button",60),qs(10,QR,3,0,"button",60),to(),Js(11,"clr-dg-cell",61),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),Uo(12),to(),Js(13,"clr-dg-cell",61),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),Uo(14),cc(15,"date"),qs(16,YR,3,0,"span",14),to(),Js(17,"clr-dg-cell",61),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),Uo(18),qs(19,KR,2,0,"span",62),to(),Js(20,"clr-dg-cell",61),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),Uo(21),to(),Js(22,"clr-dg-cell",61),co("click",(function(){Qe(t);const n=e.$implicit;return fo(2).navigate(n)})),Uo(23),cc(24,"date"),to(),to()}if(2&t){const t=e.$implicit,n=fo(2);Zs("clrDgItem",t),Vr(8),Zs("ngIf",!n.isUnfinished(t)&&n.isAdmin),Vr(1),Zs("ngIf",n.isUnfinished(t)),Vr(1),Zs("ngIf",n.isUnfinished(t)),Vr(2),Bo(t.id),Vr(2),Bo(uc(15,11,t.submitDate,"shortDate")),Vr(2),Zs("ngIf",!t.submitDate),Vr(2),zo("",t.templateID," "),Vr(1),Zs("ngIf",n.isUnfinished(t)),Vr(2),Bo(t.author),Vr(2),Bo(uc(24,14,t.coverageDate,"MMMM \u2019yy"))}}function XR(t,e){if(1&t&&(Js(0,"clr-dg-detail"),Js(1,"clr-dg-detail-header"),Uo(2,"Report details"),to(),Js(3,"clr-dg-detail-body"),Js(4,"b"),Uo(5,"ID: "),to(),Uo(6),eo(7,"br"),Js(8,"b"),Uo(9,"Coverage date: "),to(),Uo(10),cc(11,"date"),eo(12,"br"),Js(13,"b"),Uo(14,"Submitted: "),to(),Uo(15),cc(16,"date"),eo(17,"br"),Js(18,"b"),Uo(19,"Author: "),to(),Uo(20),eo(21,"br"),Js(22,"b"),Uo(23,"Branch: "),to(),Uo(24),eo(25,"br"),Js(26,"b"),Uo(27,"Page count: "),to(),Uo(28),eo(29,"br"),Js(30,"b"),Uo(31,"Completion: "),to(),Uo(32),eo(33,"br"),Js(34,"b"),Uo(35,"Additional info: "),to(),Uo(36),eo(37,"br"),to(),to()),2&t){const t=e.$implicit;Vr(6),zo(" ",t.id," "),Vr(4),zo(" ",uc(11,8,t.coverageDate,"MMMM \u2019yy")," "),Vr(5),zo(" ",uc(16,11,t.submitDate,"longDate")," "),Vr(5),zo(" ",t.author," "),Vr(4),zo(" ",t.branch," "),Vr(4),zo(" ",t.pageCount," "),Vr(4),zo(" ",t.completionStatus," "),Vr(4),zo("",t.additionalInfo," ")}}function JR(t,e){1&t&&(Js(0,"span",65),Uo(1,"Draft"),to())}function tP(t,e){if(1&t&&(Js(0,"div",41),Js(1,"p"),Js(2,"strong"),Uo(3,"Template: "),to(),Uo(4),qs(5,JR,2,0,"span",62),to(),Js(6,"p"),Js(7,"strong"),Uo(8,"Coverage date: "),to(),Uo(9),to(),Js(10,"p"),Js(11,"strong"),Uo(12,"Author: "),to(),Uo(13),to(),to()),2&t){const t=fo(2);Vr(4),Bo(t.selectedReport.templateID),Vr(1),Zs("ngIf",t.isUnfinished(t.selectedReport)),Vr(4),zo("",t.selectedReport.coverageDate," "),Vr(4),Bo(t.selectedReport.author)}}function eP(t,e){if(1&t&&(Js(0,"option",80),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t),Vr(1),Bo(t)}}function nP(t,e){if(1&t&&(Js(0,"clr-select-container",77),Js(1,"label"),Uo(2,"Template"),to(),Js(3,"select",78),Js(4,"option",73),Uo(5,"All"),to(),qs(6,eP,2,2,"option",79),to(),to()),2&t){const t=fo(3);Vr(6),Zs("ngForOf",t._TemplateService.templateNames)}}function rP(t,e){if(1&t&&(Js(0,"option",80),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t),Vr(1),Bo(t)}}function iP(t,e){if(1&t&&(Js(0,"clr-select-container",77),Js(1,"label"),Uo(2,"Branch"),to(),Js(3,"select",81),Js(4,"option",73),Uo(5,"All"),to(),qs(6,rP,2,2,"option",79),to(),to()),2&t){const t=fo(3);Vr(6),Zs("ngForOf",t._constants.branches)}}function sP(t,e){if(1&t){const t=so();Js(0,"clr-modal",32),co("clrModalOpenChange",(function(e){return Qe(t),fo(2).filterVisible=e})),Js(1,"h3",33),Uo(2," Filter reports "),to(),Js(3,"div",41),Js(4,"p",66),Uo(5," Note: all fields are optional. Empty filters are not applied. "),to(),Js(6,"form",67),Js(7,"clr-input-container"),Js(8,"label"),Uo(9,"Report ID"),to(),eo(10,"input",68),to(),Js(11,"clr-input-container"),Js(12,"label"),Uo(13,"Author"),to(),eo(14,"input",69),to(),Js(15,"clr-date-container"),Js(16,"label"),Uo(17,"Coverage date from"),to(),eo(18,"input",70),to(),Js(19,"clr-date-container"),Js(20,"label"),Uo(21,"Coverage date to"),to(),eo(22,"input",71),to(),Js(23,"clr-select-container"),Js(24,"label"),Uo(25,"Completion status"),to(),Js(26,"select",72),Js(27,"option",73),Uo(28,"All"),to(),Js(29,"option",74),Uo(30,"Complete"),to(),Js(31,"option",75),Uo(32,"Incomplete (draft)"),to(),to(),to(),qs(33,nP,7,1,"clr-select-container",76),qs(34,iP,7,1,"clr-select-container",76),to(),to(),Js(35,"div",35),Js(36,"button",36),co("click",(function(){return Qe(t),fo(2).clearFilters()})),Uo(37," Clear filters "),to(),Js(38,"button",39),co("click",(function(){return Qe(t),fo(2).finishFilterModal()})),Uo(39," Finish "),to(),to(),to()}if(2&t){const t=fo(2);Zs("clrModalSize","lg")("clrModalOpen",t.filterVisible),Vr(6),Zs("formGroup",t.filterGroup),Vr(27),Zs("ngIf",t.filterVisible),Vr(1),Zs("ngIf",t.isAdmin),Vr(4),Zs("clrLoading",t.filterLoading)}}function oP(t,e){1&t&&(Js(0,"span",65),Uo(1,"Draft"),to())}function aP(t,e){if(1&t&&(Js(0,"div",41),Js(1,"p"),Uo(2,"This will open the new report in the editor."),to(),Js(3,"p"),Js(4,"strong"),Uo(5,"Template: "),to(),Uo(6),eo(7,"br"),Js(8,"strong"),Uo(9,"ID: "),to(),Uo(10),eo(11,"br"),Js(12,"b"),Uo(13,"Submitted: "),to(),Uo(14),cc(15,"date"),qs(16,oP,2,0,"span",62),to(),to()),2&t){const t=fo(2);Vr(6),Bo(t.selectedReport.templateID),Vr(4),Bo(t.selectedReport.id),Vr(4),Bo(lc(15,4,t.selectedReport.submitDate)),Vr(2),Zs("ngIf",t.isUnfinished(t.selectedReport))}}function cP(t,e){if(1&t){const t=so();Js(0,"div",88),co("click",(function(){Qe(t);const e=fo(2).$implicit;return fo(2)._TemplateService.markHidden(e)})),eo(1,"clr-icon",92),Uo(2," Hide from users "),to()}}function lP(t,e){if(1&t){const t=so();Js(0,"div",88),co("click",(function(){Qe(t);const e=fo(2).$implicit;return fo(2)._TemplateService.markVisible(e)})),eo(1,"clr-icon",93),Uo(2," Show to users "),to()}}function uP(t,e){if(1&t){const t=so();Js(0,"clr-dropdown-menu",86),Js(1,"label",87),Uo(2,"Template actions"),to(),Js(3,"div",88),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2)._TemplateService.openTemplate(e)})),eo(4,"clr-icon",89),Uo(5," Edit "),to(),Js(6,"div",88),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2).showDuplicateTemplate(e)})),eo(7,"clr-icon",59),Uo(8," Duplicate as... "),to(),qs(9,cP,3,0,"div",90),qs(10,lP,3,0,"ng-template",null,91,Fc),Js(12,"div",88),co("click",(function(){Qe(t);const e=fo().$implicit;return fo(2).deleteTemplate(e)})),eo(13,"clr-icon",63),Uo(14," Delete "),to(),to()}if(2&t){const t=Ws(11),e=fo().$implicit,n=fo(2);Vr(9),Zs("ngIf",!n.isHidden(e))("ngIfElse",t)}}function hP(t,e){if(1&t&&(Js(0,"div",82),Uo(1),Js(2,"clr-dropdown"),Js(3,"button",83),eo(4,"clr-icon",84),to(),qs(5,uP,15,2,"clr-dropdown-menu",85),to(),to()),2&t){const t=e.$implicit;Vr(1),zo(" ",t," ")}}function dP(t,e){if(1&t){const t=so();Js(0,"div",12),Js(1,"div",13),qs(2,jR,3,3,"h1",14),qs(3,UR,2,0,"h1",14),qs(4,BR,3,0,"button",15),Js(5,"clr-dropdown",16),Js(6,"button",17),eo(7,"clr-icon",18),Uo(8," New report "),to(),qs(9,GR,3,2,"clr-dropdown-menu",19),to(),to(),Js(10,"div",20),Js(11,"clr-datagrid",21),co("clrDgSelectedChange",(function(e){return Qe(t),fo().selectedReports=e})),Js(12,"clr-dg-placeholder"),Uo(13,"No reports found."),to(),Js(14,"clr-dg-column"),Uo(15,"ID"),to(),Js(16,"clr-dg-column"),Uo(17,"Submitted"),to(),Js(18,"clr-dg-column"),Uo(19,"Template"),to(),Js(20,"clr-dg-column"),Uo(21,"Author"),to(),Js(22,"clr-dg-column"),Uo(23,"Coverage date"),to(),Js(24,"clr-dg-action-bar"),Js(25,"button",22),co("click",(function(){return Qe(t),fo().showFilterModal()})),eo(26,"clr-icon",23),Uo(27," Filter reports "),to(),qs(28,$R,3,2,"button",24),to(),qs(29,ZR,25,17,"clr-dg-row",25),qs(30,XR,38,14,"clr-dg-detail",26),Js(31,"clr-dg-footer"),Uo(32,"Show "),Js(33,"select",27),co("ngModelChange",(function(e){return Qe(t),fo().sizeLimit=e})),Js(34,"option",28),Uo(35,"10"),to(),Js(36,"option",29),Uo(37,"30"),to(),Js(38,"option",30),Uo(39,"100"),to(),Js(40,"option",31),Uo(41,"all"),to(),to(),Uo(42),to(),to(),Js(43,"clr-modal",32),co("clrModalOpenChange",(function(e){return Qe(t),fo().deleteVisible=e})),Js(44,"h3",33),Uo(45," Are you sure you want to delete this report? "),to(),qs(46,tP,14,4,"div",34),Js(47,"div",35),Js(48,"button",36),co("click",(function(){return Qe(t),fo().hideDelete()})),Uo(49," Cancel "),to(),Js(50,"button",37),co("click",(function(){Qe(t);const e=fo();return e.deleteReport(e.selectedReport)})),Uo(51," Delete "),to(),to(),to(),qs(52,sP,40,6,"clr-modal",38),Js(53,"clr-modal",32),co("clrModalOpenChange",(function(e){return Qe(t),fo().copyVisible=e})),Js(54,"h3",33),Uo(55,"Create a deplicate report?"),to(),qs(56,aP,17,6,"div",34),Js(57,"div",35),Js(58,"button",36),co("click",(function(){return Qe(t),fo().hideCopy()})),Uo(59," Cancel "),to(),Js(60,"button",39),co("click",(function(){Qe(t);const e=fo();return e.duplicateReport(e.selectedReport)})),Uo(61," Duplicate "),to(),to(),to(),Js(62,"clr-modal",40),co("clrModalOpenChange",(function(e){return Qe(t),fo().templateModalVisible=e})),Js(63,"h3",33),Uo(64),to(),Js(65,"div",41),qs(66,hP,6,1,"div",42),Js(67,"div",43),Js(68,"button",44),co("click",(function(){return Qe(t),fo()._TemplateService.newTemplate()})),Uo(69," Create new "),eo(70,"clr-icon",45),to(),to(),to(),Js(71,"div",35),Js(72,"button",36),co("click",(function(){return Qe(t),fo().hideTemplateModal()})),Uo(73," Close "),to(),to(),to(),Js(74,"clr-modal",32),co("clrModalOpenChange",(function(e){return Qe(t),fo().tempDuplicateVisible=e})),Js(75,"h3",33),Uo(76),to(),Js(77,"div",41),Js(78,"clr-input-container"),Js(79,"label"),Uo(80,"New template name"),to(),Js(81,"input",46),co("ngModelChange",(function(e){return Qe(t),fo().newTemplateName=e})),to(),Js(82,"clr-control-helper"),Uo(83,"What should the new template be named?"),to(),to(),to(),Js(84,"div",35),Js(85,"button",36),co("click",(function(){return Qe(t),fo().hideTemplateModal()})),Uo(86," Cancel "),to(),Js(87,"button",47),co("click",(function(){Qe(t);const e=fo();return e.duplicateTemplate(e.selectedTemplateName,e.newTemplateName)})),Uo(88," Duplicate "),to(),to(),to(),to(),to()}if(2&t){const t=fo();Vr(2),Zs("ngIf",!t.isAdmin),Vr(1),Zs("ngIf",t.isAdmin),Vr(1),Zs("ngIf",t.isAdmin),Vr(1),Zs("clrCloseMenuOnItemClick",!1),Vr(6),Zs("clrDgSelected",t.selectedReports),Vr(17),Zs("ngIf",t.selectedReports.length>0),Vr(1),Zs("clrDgItemsOf",t.reports),Vr(4),Zs("ngModel",t.sizeLimit),Vr(9),Ho(" reports | ",t.reports.length," of ",t.reportCount,""),Vr(1),Zs("clrModalSize","sm")("clrModalOpen",t.deleteVisible),Vr(3),Zs("ngIf",t.selectedReport),Vr(4),Zs("clrLoading",t.deleteLoading),Vr(2),Zs("ngIf",t.filterVisible),Vr(1),Zs("clrModalSize","sm")("clrModalOpen",t.copyVisible),Vr(3),Zs("ngIf",t.selectedReport),Vr(4),Zs("clrLoading",t.templateDupStatus),Vr(2),Zs("clrModalOpen",t.templateModalVisible),Vr(2),zo(" ",t._TemplateService.templateNames.length," templates "),Vr(2),Zs("ngForOf",t._TemplateService.templateNames),Vr(8),Zs("clrModalSize","sm")("clrModalOpen",t.tempDuplicateVisible),Vr(2),zo("Duplicate ",t.selectedTemplateName,""),Vr(5),Zs("ngModel",t.newTemplateName),Vr(6),Zs("disabled",t.newTemplateName.length<1)}}let pP=(()=>{class t{constructor(t,e,n,r,i,s,o){this._TemplateService=t,this._ReportService=e,this._UserService=n,this._Router=r,this._clipboardService=i,this.fb=s,this.constantService=o,this.detailState=!1,this.editVisible=!1,this.copyVisible=!1,this.deleteVisible=!1,this.exportVisible=!1,this.filterVisible=!1,this.newTemplateName="",this.emailSent=!1,this.user=this._UserService.getUserObservable(),this.reports=[],this.templateModalVisible=!1,this.tempDuplicateVisible=!1,this.reportCount=-1,this.selectedReports=[],this._sizeLimit="10",this.selectedTemplates=[],this.selectedBranches=[],this.filterLoading=SS.DEFAULT,this.magicLoading=SS.DEFAULT,this.templateDupStatus=SS.DEFAULT}ngOnInit(){this.user.subscribe(t=>{t&&(this.showUnverifiedAlert=!t.emailVerified,"admin"===t.role?"all"!==this._sizeLimit?this._ReportService.fetchAllReportsWithLimit(+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):this._ReportService.fetchAllReports().then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):"all"!==this._sizeLimit?this._ReportService.fetchReportsByBranchWithLimit(t.branch,+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):this._ReportService.fetchReportsByBranch(t.branch).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}),this.getReportCount().then(t=>{this.reportCount=t}))}),this.templates=this._TemplateService.templateObservable,this.templateLoadStatuses=[],this._TemplateService.templateNames.forEach(()=>{this.templateLoadStatuses.push(SS.DEFAULT)}),this.constantService.constants.subscribe(t=>{this._constants=t}),this.filterGroup=this.fb.group({idSearch:[""],completionStatus:["All"],template:["All"],authorSearch:[""],coverageFrom:[""],coverageTo:[""],branch:["All"]})}get sizeLimit(){return this._sizeLimit}getReportCount(){return"admin"===this._UserService.getUserSnapshot().role?this._ReportService.getFullReportCount():this._ReportService.getReportCountByBranch(this._UserService.getUserSnapshot().branch)}set sizeLimit(t){this._sizeLimit=t;let e=this._UserService.getUserSnapshot();this.showUnverifiedAlert=!e.emailVerified,"admin"===e.role?"all"!==this._sizeLimit?this._ReportService.fetchAllReportsWithLimit(+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+e.email)}):this._ReportService.fetchAllReports().then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+e.email)}):"all"!==this._sizeLimit?this._ReportService.fetchReportsByBranchWithLimit(e.branch,+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+e.email)}):this._ReportService.fetchReportsByBranch(e.branch).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+e.email)})}showExport(t){this.selectedReport=t,this.exportVisible=!0}hideExport(){this.exportVisible=!1}isHidden(t){let e=this._TemplateService.templateSnapshot;return!(!e||!e.get(t))&&e.get(t).hidden}duplicateReport(t){console.log(t.id),this._ReportService.duplicateReport(t.id).then(t=>{this._ReportService.openReport(t).then(()=>{this._Router.navigate(["report",t,0])}).catch(e=>{console.error("Error opening new report with ID "+t+": "+e)})},()=>{console.error("Error duplicating report "+t.id)})}showCopy(t){this.selectedReport=t,this.copyVisible=!0}hideCopy(){this.copyVisible=!1}showFilterModal(){console.log("Showing filter modal"),this.filterVisible=!0}applyFilter(){return new Promise((t,e)=>{this.refreshReports().then(()=>{let e=this.reports,n=this.filterGroup.value;n.idSearch&&n.idSearch.length>0&&(e=e.filter(t=>t.id.includes(n.idSearch))),n.completionStatus&&"All"!==n.completionStatus&&(e=e.filter(t=>t.completionStatus===n.completionStatus)),n.template&&"All"!==n.template&&(e=e.filter(t=>t.templateID===n.template)),n.authorSearch&&n.authorSearch.length>0&&(e=e.filter(t=>t.author&&t.author.includes(n.authorSearch))),n.branch&&"All"!==n.branch&&(e=e.filter(t=>t.branch&&t.branch===n.branch)),n.completionStatus&&"All"!==n.completionStatus&&(e=e.filter(t=>t.completionStatus&&t.completionStatus===n.completionStatus)),n.coverageFrom&&n.coverageFrom.length>0&&(e=e.filter(t=>t.coverageDate&&t.coverageDate>=this.convertTraditionalToISO(n.coverageFrom))),n.coverageTo&&n.coverageTo.length>0&&(e=e.filter(t=>t.coverageDate&&t.coverageDate<=this.convertTraditionalToISO(n.coverageTo))),this.reports=e,console.log(e),t()})})}refreshReports(){return new Promise((t,e)=>{"admin"===this._UserService.getUserSnapshot().role&&("all"!==this._sizeLimit?this._ReportService.fetchAllReportsWithLimit(+this._sizeLimit).then(e=>{this.reports=e,console.log(e),t()}).catch(()=>{console.error("Could not fetch reports for "+this._UserService.getUserSnapshot().email),e()}):this._ReportService.fetchAllReports().then(e=>{this.reports=e,console.log(e),t()}).catch(()=>{console.error("Could not fetch reports for "+this._UserService.getUserSnapshot().email),e()}))})}convertTraditionalToISO(t){if(!t)return null;let e=t.split("/");if(3!==e.length)return console.warn("Invalid date: "+t),null;let n=+e[0]-1,r=+e[1],i=+e[2],s=new Date;s.setMonth(n),s.setDate(r),s.setFullYear(i);let o=s.toISOString();return console.log("Converting: "+t+" to "+o),o}getTemplateCBArray(t){return this.filterGroup.get("templateCBs")?this.filterGroup.get("templatesCBs").controls[t]:null}getBranchCBArray(t){return this.filterGroup.get("branchCBs")?this.filterGroup.get("branchCBs").controls[t]:null}clearFilters(){this.filterGroup=this.fb.group({idSearch:[""],completionStatus:["All"],template:["All"],authorSearch:[""],coverageFrom:[""],coverageTo:[""],branch:["All"]})}finishFilterModal(){this.filterLoading=SS.LOADING,console.log(this.filterGroup.value),this.applyFilter().then(()=>{this.filterLoading=SS.SUCCESS,this.hideFilterModal()}).catch(t=>{console.error("Filter application failed: "+t),this.filterLoading=SS.ERROR})}hideFilterModal(){this.filterVisible=!1}deleteReport(t){this.deleteLoading=SS.LOADING,this._ReportService.deleteReport(t).then(()=>{let t=this._UserService.getUserSnapshot();"admin"===t.role?"all"!==this._sizeLimit?this._ReportService.fetchAllReportsWithLimit(+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):this._ReportService.fetchAllReports().then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):"all"!==this._sizeLimit?this._ReportService.fetchReportsByBranchWithLimit(t.branch,+this._sizeLimit).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}):this._ReportService.fetchReportsByBranch(t.branch).then(t=>{this.reports=t,console.log(t)}).catch(()=>{console.error("Could not fetch reports for "+t.email)}),this.deleteLoading=SS.SUCCESS,this.deleteVisible=!1})}showDelete(t){this.selectedReport=t,this.deleteVisible=!0}copyMagic(t){this.magicLoading=SS.LOADING,this._ReportService.getMagicString(t).then(t=>{console.log(t),this._clipboardService.copyFromContent(t),this.magicLoading=SS.SUCCESS,alert("\u{1f52e} Magic string copied to clipboard.")})}hideDelete(){this.deleteVisible=!1}isUnfinished(t){return!!t&&"incomplete"===t.completionStatus}resendVerification(){this._UserService.sendVerificationEmail().then(()=>{this.emailSent=!0,this.showUnverifiedAlert=!1})}createReport(t,e){this.templateLoadStatuses[e]=SS.LOADING,this._ReportService.createNewReport(t).then(t=>{this._ReportService.openReport(t).then(()=>{console.log("Created report: "),console.log(this._ReportService.report),this._Router.navigate(["report",t,0])}).catch(e=>{console.error("Error opening new report with ID "+t+": "+e)})},()=>{console.error("Error creating new report with template "+t)})}navigate(t){console.log("Opening: "+t.id),this._Router.navigate(["report",t.id,0])}json(t){return JSON.stringify(t)}get isAdmin(){let t=this._UserService.getUserSnapshot();return!(!t||"admin"!==t.role)}showTemplateModal(){console.log(this._TemplateService.templateNames),this.templateModalVisible=!0}hideTemplateModal(){this.templateModalVisible=!1}showDuplicateTemplate(t){this.selectedTemplateName=t,this.tempDuplicateVisible=!0}hideDuplicateTemplate(){this.tempDuplicateVisible=!1}duplicateTemplate(t,e){this.templateDupStatus=SS.LOADING,this._TemplateService.duplicateTemplate(t,e).then(()=>{this.templateDupStatus=SS.SUCCESS,this.tempDuplicateVisible=!1})}deleteTemplate(t){this._TemplateService.deleteTemplate(t).then(()=>{console.log("Success"),console.log(this._TemplateService.templateNames)},t=>{console.log("Error "+t)})}}return t.\u0275fac=function(e){return new(e||t)(Qs(Bg),Qs(Ug),Qs(jg),Qs(hg),Qs(FR),Qs(mv),Qs(dd))},t.\u0275cmp=he({type:t,selectors:[["app-start"]],decls:5,vars:5,consts:[[1,"clr-row","clr-justify-content-center",2,"width","100vw"],["class","clr-col-md-6 alert alert-warning",4,"ngIf"],["class","clr-col-md-6 alert",4,"ngIf"],["class","clr-col clr-col-md-10 clr-col-xl-8",4,"ngIf"],[1,"clr-col-md-6","alert","alert-warning"],[1,"alert-items"],["role","alert",1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","exclamation-circle",1,"alert-icon"],[1,"alert-text"],["href","javascript://",3,"click"],[1,"clr-col-md-6","alert"],[1,"clr-col","clr-col-md-10","clr-col-xl-8"],[1,"clr-row","clr-justify-content-between","clr-align-items-end"],[4,"ngIf"],["class","btn",3,"click",4,"ngIf"],[3,"clrCloseMenuOnItemClick"],["clrDropdownTrigger","",1,"btn","btn-primary"],["shape","plus"],["clrPosition","bottom-right",4,"clrIfOpen"],[1,"clr-row"],[2,"width","100%",3,"clrDgSelected","clrDgSelectedChange"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["shape","filter"],["type","button","class","btn btn-sm btn-magic",3,"clrLoading","click",4,"ngIf"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[4,"clrIfDetail"],["name","options",3,"ngModel","ngModelChange"],["value","10"],["value","30"],["value","100"],["value","all"],[3,"clrModalSize","clrModalOpen","clrModalOpenChange"],[1,"modal-title"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-danger",3,"clrLoading","click"],[3,"clrModalSize","clrModalOpen","clrModalOpenChange",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"clrLoading","click"],[3,"clrModalOpen","clrModalOpenChange"],[1,"modal-body"],["class","clr-row clr-align-items-center template-row","style","padding-left: 12px;",4,"ngFor","ngForOf"],[1,"clr-row","clr-justify-content-end"],[1,"btn","btn-sm","btn-link","btn-icon",2,"margin","24px 0 0 0",3,"click"],["shape","plus","dir","right","title","This will open a blank template in the builder."],["clrInput","","required","",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"btn",3,"click"],["shape","scroll"],["clrPosition","bottom-right"],[4,"ngFor","ngForOf"],["clrDropdownItem","",3,"clrLoading","click"],["shape","exclamation-triangle"],["type","button",1,"btn","btn-sm","btn-magic",3,"clrLoading","click"],["shape","wand"],[3,"clrDgItem"],[1,"action-item",3,"click"],["shape","login"],["shape","copy"],["class","action-item",3,"click",4,"ngIf"],[1,"clickable",3,"click"],["class","label label-warning",4,"ngIf"],["shape","trash",1,"is-danger"],[1,"badge","badge-light-blue"],[1,"label","label-warning"],[1,"p5"],["clrForm","","clrLayout","compact",3,"formGroup"],["clrInput","","type","text","placeholder","All","formControlName","idSearch"],["clrInput","","type","text","placeholder","All","formControlName","authorSearch"],["type","date","name","date","formControlName","coverageFrom","clrDate",""],["type","date","name","date","formControlName","coverageTo","clrDate",""],["clrSelect","","name","options","formControlName","completionStatus"],["value","All","selected","selected"],["value","complete"],["value","incomplete"],["clrInline","",4,"ngIf"],["clrInline",""],["clrSelect","","formControlName","template"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["clrSelect","","formControlName","branch"],[1,"clr-row","clr-align-items-center","template-row",2,"padding-left","12px"],["clrDropdownTrigger","",1,"btn","btn-link","btn-sm","btn-icon",2,"padding","0 12px 0 12px"],["shape","angle","dir","down"],["clrPosition","top-left",4,"clrIfOpen"],["clrPosition","top-left"],["aria-hidden","true",1,"dropdown-header"],["clrDropdownItem","",3,"click"],["shape","angle-double","dir","right",1,"is-highlight"],["clrDropdownItem","",3,"click",4,"ngIf","ngIfElse"],["showTempl",""],["shape","eye-hide"],["shape","eye"]],template:function(t,e){if(1&t&&(Js(0,"div",0),qs(1,MR,10,0,"div",1),qs(2,VR,7,0,"div",2),qs(3,dP,89,27,"div",3),cc(4,"async"),to()),2&t){var n;const t=null==(n=lc(4,3,e.user))?null:n.emailVerified;Vr(1),Zs("ngIf",e.showUnverifiedAlert),Vr(1),Zs("ngIf",e.emailSent),Vr(1),Zs("ngIf",t)}},directives:[Rh,nS,dx,tx,ax,bC,XI,_T,pI,fI,yI,II,SI,yT,JI,EI,uT,dT,my,$m,Jy,yy,_y,Gx,VS,CS,$x,Oh,sE,tC,Vm,oE,fv,ZS,ox,nx,GI,bT,eT,RI,mT,lT,cT,hT,tv,qm,nC,rC,sv,dv,YC,ZC,mE,yE],pipes:[Gh,$h],styles:["clr-dropdown[_ngcontent-%COMP%]{margin:6px 0}.template-row[_ngcontent-%COMP%]{border-radius:5px;border:1px solid grey}.btn-magic[_ngcontent-%COMP%]{border-color:purple;color:#fff;background-color:purple}"]}),t})();function fP(t,e){1&t&&(Js(0,"h5",14),Uo(1," Use your staff email to sign in, or create a new account now "),to())}function gP(t,e){if(1&t){const t=so();Js(0,"clr-password-container"),Js(1,"label",8),Uo(2,"Password"),to(),eo(3,"input",15),Js(4,"clr-control-helper"),Uo(5,"Forgot your password? "),Js(6,"a",16),co("click",(function(){return Qe(t),fo(2).showReset()})),Uo(7,"Reset it here."),to(),to(),to()}}function mP(t,e){if(1&t&&(Js(0,"div",17),Js(1,"div",18),Js(2,"div",19),Js(3,"span",20),Uo(4),to(),to(),to(),to()),2&t){const t=fo(2);Zs("className",t.alertClass),Vr(4),zo(" ",t.alertMessage," ")}}function yP(t,e){if(1&t){const t=so();Js(0,"button",21),co("click",(function(){return Qe(t),fo(2).tryLogin()})),Uo(1," LOG IN "),to()}2&t&&Zs("disabled",fo(2).loginGroup.invalid)}function vP(t,e){if(1&t){const t=so();Js(0,"a",22),co("click",(function(){return Qe(t),fo(2).showSignup()})),Uo(1,"Or create a new account"),to()}}function bP(t,e){if(1&t&&(Js(0,"form",3),Js(1,"section",4),Js(2,"h3",5),Uo(3,"Welcome to the"),to(),Uo(4," Monthly Program Statistics tool "),qs(5,fP,2,0,"h5",6),to(),Js(6,"div",7),Js(7,"clr-input-container"),Js(8,"label",8),Uo(9,"Staff email"),to(),eo(10,"input",9),to(),qs(11,gP,8,0,"clr-password-container",10),qs(12,mP,5,2,"div",11),qs(13,yP,2,1,"button",12),qs(14,vP,2,0,"a",13),to(),to()),2&t){const t=fo();Zs("formGroup",t.loginGroup),Vr(5),Zs("ngIf",!t.resetVisible),Vr(6),Zs("ngIf",t.loginVisible),Vr(1),Zs("ngIf",t.alert),Vr(1),Zs("ngIf",t.loginVisible),Vr(1),Zs("ngIf",t.loginVisible)}}function wP(t,e){if(1&t&&(Js(0,"option",27),Uo(1),to()),2&t){const t=e.$implicit;Zs("value",t),Vr(1),Bo(t)}}function _P(t,e){if(1&t&&(Js(0,"div",17),Js(1,"div",18),Js(2,"div",19),Js(3,"span",20),Uo(4),to(),to(),to(),to()),2&t){const t=fo(2);Zs("className",t.alertClass),Vr(4),zo(" ",t.alertMessage," ")}}function SP(t,e){if(1&t){const t=so();Js(0,"a",22),co("click",(function(){return Qe(t),fo(2).showLogin()})),Uo(1,"Already have an account? Log in"),to()}}function CP(t,e){if(1&t){const t=so();Js(0,"form",3),Js(1,"section",4),Js(2,"h3",5),Uo(3,"Welcome to the"),to(),Uo(4," Monthly Program Statistics tool "),Js(5,"h5",14),Uo(6," Use your staff email to sign in, or create a new account now "),to(),to(),Js(7,"div",7),Js(8,"clr-input-container"),Js(9,"label",8),Uo(10,"Staff email"),to(),eo(11,"input",9),to(),Js(12,"clr-select-container"),Js(13,"label",8),Uo(14,"Which branch do you work for?"),to(),Js(15,"select",23),qs(16,wP,2,2,"option",24),to(),Js(17,"clr-control-helper"),Uo(18,"Which branch do you work for?"),to(),to(),Js(19,"clr-password-container"),Js(20,"label",8),Uo(21,"New password"),to(),eo(22,"input",25),to(),Js(23,"clr-password-container"),Js(24,"label",8),Uo(25,"Confirm password"),to(),eo(26,"input",26),to(),qs(27,_P,5,2,"div",11),Js(28,"button",21),co("click",(function(){return Qe(t),fo().createAccount()})),Uo(29," Create account "),to(),qs(30,SP,2,0,"a",13),to(),to()}if(2&t){const t=fo();Zs("formGroup",t.createAccountGroup),Vr(16),Zs("ngForOf",t.getConstant("branches")),Vr(11),Zs("ngIf",t.alert),Vr(1),Zs("disabled",t.createAccountGroup.invalid),Vr(2),Zs("ngIf",t.signupVisible)}}function EP(t,e){if(1&t&&(Js(0,"div",17),Js(1,"div",18),Js(2,"div",19),Js(3,"span",20),Uo(4),to(),to(),to(),to()),2&t){const t=fo(2);Zs("className",t.alertClass),Vr(4),zo(" ",t.alertMessage," ")}}function IP(t,e){if(1&t){const t=so();Js(0,"button",21),co("click",(function(){return Qe(t),fo(2).sendResetEmail()})),Uo(1," Send reset email "),to()}2&t&&Zs("disabled",fo(2).forgotPasswordGroup.invalid)}function TP(t,e){if(1&t){const t=so();Js(0,"form",3),Js(1,"section",4),Js(2,"h3",5),Uo(3,"Welcome to the"),to(),Uo(4," Monthly Program Statistics tool "),Js(5,"h5",14),eo(6,"hr"),Uo(7," Reset your password "),to(),to(),Js(8,"div",7),Js(9,"clr-input-container"),Js(10,"label",8),Uo(11,"Staff email"),to(),eo(12,"input",9),to(),qs(13,EP,5,2,"div",11),qs(14,IP,2,1,"button",12),Js(15,"a",22),co("click",(function(){return Qe(t),fo().showLogin()})),Uo(16,"Back to login"),to(),to(),to()}if(2&t){const t=fo();Zs("formGroup",t.forgotPasswordGroup),Vr(13),Zs("ngIf",!t.forgotPasswordGroup.valid),Vr(1),Zs("ngIf",t.resetVisible)}}function xP(t){return t.get("newPasswordInput").value!==t.get("confirmPasswordInput").value?{notMatching:!0}:null}function kP(t){let e=t.get("emailInput").value.split("@")[1];return"ebrpl.com"!==e&&"brla.gov"!==e?{outsideEmail:!0}:null}let AP=(()=>{class t{constructor(t,e){this._Router=t,this.userv=e,this.currentScreen="login",this.alert=null,this.alertMessage=""}ngOnInit(){this.loginGroup=new By({emailInput:new Uy("",Zm.required),passwordInput:new Uy("",Zm.required)}),this.createAccountGroup=new By({emailInput:new Uy("",Zm.required),newPasswordInput:new Uy("",Zm.required),confirmPasswordInput:new Uy("",Zm.required),branchSelect:new Uy("Branch",Zm.required)},[xP,kP]),this.forgotPasswordGroup=new By({emailInput:new Uy("",Zm.required)})}tryLogin(){console.log("Logging in...");let t=this.loginGroup.get("emailInput").value,e=this.loginGroup.get("passwordInput").value;console.log(this.loginGroup.get("emailInput").value),this.userv.logIn(t,e).then(()=>{console.log("Login successful."),this._Router.navigate([""])}).catch(t=>{console.log(t),this.showErrorAlert("Invalid username or password. Does this account exist?")})}createAccount(){let t=this.createAccountGroup.get("emailInput").value,e=this.createAccountGroup.get("newPasswordInput").value,n=(this.createAccountGroup.get("confirmPasswordInput"),this.createAccountGroup.get("branchSelect").value);this.createAccountGroup.errors?this.createAccountGroup.getError("notMatching")?(console.error("Passwords do not match"),this.showErrorAlert("Passwords do not match.")):this.createAccountGroup.getError("outsideEmail")?(console.error("Employee email required."),this.showErrorAlert("Please use your employee email.")):console.error(this.createAccountGroup.errors):(console.log("Creating account"),this.hideAlert(),this.userv.createAccount({email:t,emailVerified:!1,branch:n,role:"user"},e).then(()=>{Object(vu.auth)().currentUser.sendEmailVerification(),this.showSuccessAlert("Account successfully created. Please check your email to finish up. Redirecting..."),setTimeout(()=>{this._Router.navigate([""])},5e3)}).catch(t=>{console.error("ERROR"+t),this.showErrorAlert(t),this.createAccountGroup.setErrors({firebase:!0})}))}sendResetEmail(){Object(vu.auth)().sendPasswordResetEmail(this.forgotPasswordGroup.get("emailInput").value).catch(t=>{console.log(t.code)}),this.showSuccessAlert("If that account exists, a reset email has been sent."),this.showLogin()}showErrorAlert(t){this.alert="danger",this.alertMessage=t}showSuccessAlert(t){this.alert="success",this.alertMessage=t}hideAlert(){this.alert=null,this.alertMessage=""}showSignup(){this.currentScreen="signup",this.hideAlert()}showLogin(){this.currentScreen="login"}showReset(){this.currentScreen="reset",this.hideAlert()}get alertClass(){return"danger"===this.alert?"alert alert-danger":"warning"===this.alert?"alert alert-warning":"info"===this.alert?"alert alert-info":"success"===this.alert?"alert alert-success":null}get loginVisible(){return"login"===this.currentScreen}get signupVisible(){return"signup"===this.currentScreen}get resetVisible(){return"reset"===this.currentScreen}getConstant(t){return["Main Library","Baker Branch","Bluebonnet Regional Branch","Carver Branch","Central Branch","Delmont Gardens Branch","Eden Park Branch","Fairwood Branch","Greenwell Springs Rd. Regional Branch","Jones Creek Regional Branch","Pride-Chaneyville Branch","River Center Branch","Scotlandville Branch","Zachary Branch"]}}return t.\u0275fac=function(e){return new(e||t)(Qs(hg),Qs(jg))},t.\u0275cmp=he({type:t,selectors:[["app-login"]],decls:5,vars:3,consts:[[1,"clr-row","clr-justify-content-center",2,"width","95vw"],[1,"clr-col","clr-offset-md-4","login-wrapper"],["class","login",3,"formGroup",4,"ngIf"],[1,"login",3,"formGroup"],[1,"title"],[1,"welcome"],["class","hint",4,"ngIf"],[1,"login-group"],[1,"clr-sr-only"],["type","email","formControlName","emailInput","clrInput","","placeholder","Staff email"],[4,"ngIf"],["role","alert",3,"className",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","signup",3,"click",4,"ngIf"],[1,"hint"],["type","password","formControlName","passwordInput","clrPassword","","placeholder","Password","autocomplete","current-password"],[3,"click"],["role","alert",3,"className"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-text"],[1,"btn","btn-primary",3,"disabled","click"],[1,"signup",3,"click"],["clrSelect","","name","type","formControlName","branchSelect"],[3,"value",4,"ngFor","ngForOf"],["type","password","formControlName","newPasswordInput","clrPassword","","placeholder","New password","autocomplete","new-password"],["type","password","formControlName","confirmPasswordInput","clrPassword","","placeholder","Confirm password"],[3,"value"]],template:function(t,e){1&t&&(Js(0,"div",0),Js(1,"div",1),qs(2,bP,15,6,"form",2),qs(3,CP,31,5,"form",2),qs(4,TP,17,3,"form",2),to(),to()),2&t&&(Vr(2),Zs("ngIf",e.loginVisible),Vr(1),Zs("ngIf",e.signupVisible),Vr(1),Zs("ngIf",e.resetVisible))},directives:[Rh,tv,qm,sv,sE,tC,Vm,$m,dv,oE,uE,hE,ZS,dx,mE,my,yE,Oh,yy,_y],styles:[""]}),t})();const OP=M(t=>!!t);let DP=(()=>{class t{constructor(t,e,r,i){this.router=i,this.canActivate=(t,e)=>{const n=t.data.authGuardPipe||(()=>OP);return this.authState.pipe(gd(1),n(t,e),M(t=>"boolean"==typeof t?t:this.router.createUrlTree(t)))};const s=Cu(new Su(r)),o=Bl(void 0).pipe(Zl(new Su(r).outsideAngular),Bd(()=>r.runOutsideAngular(()=>n.e(1).then(n.bind(null,"6nsN")))),M(()=>ku(t,r,e)),M(t=>r.runOutsideAngular(()=>t.auth())),Mg({bufferSize:1,refCount:!1}));this.authState=o.pipe(Bd(t=>new w(t.onAuthStateChanged.bind(t))),s)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Iu),Wt(Tu,8),Wt(il),Wt(hg))},t.\u0275prov=lt({factory:function(){return new t(Wt(Iu),Wt(Tu,8),Wt(il),Wt(hg))},token:t,providedIn:"any"}),t})();const RP=M(t=>!!t&&t.emailVerified),PP=()=>RP;M(t=>{console.log(t)});const NP=[{path:"report/:report-id/:page-number",component:PR,canActivate:[DP],data:{authGuardPipe:PP}},{path:"preferences",component:gR,canActivate:[DP],data:{authGuardPipe:PP}},{path:"builder",component:pR,canActivate:[DP],data:{authGuardPipe:PP}},{path:"",component:pP,canActivate:[DP],data:{authGuardPipe:()=>{return t=["login"],v(OP,M(e=>e||t));var t}}},{path:"login",component:AP}];let FP=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},imports:[[Tg.forRoot(NP)],Tg]}),t})();function LP(t,e){1&t&&(Js(0,"clr-alert",9),Js(1,"clr-alert-item"),Js(2,"span",10),Uo(3," It looks like you aren't connected to the internet. "),to(),to(),to()),2&t&&Zs("clrAlertType","warning")("clrAlertAppLevel",!0)("clrAlertClosable",!1)}function MP(t,e){1&t&&eo(0,"img",11)}function VP(t,e){1&t&&(Js(0,"span",12),Uo(1,"Admin"),to())}function jP(t,e){if(1&t&&(Js(0,"p",15),Uo(1),cc(2,"date"),to()),2&t){const t=fo(2);Vr(1),Ho(" ",t.report.templateID,": ",uc(2,2,t.report.coverageDate,"MMMM \u2019yy")," ")}}function UP(t,e){if(1&t&&(Js(0,"div",13),qs(1,jP,3,5,"p",14),to()),2&t){const t=fo();Vr(1),Zs("ngIf",t.report.coverageDate)}}function BP(t,e){if(1&t&&(Js(0,"span"),Uo(1),to()),2&t){const t=fo().ngIf;Vr(1),Bo(t.email)}}const zP=function(){return["preferences"]};function HP(t,e){if(1&t){const t=so();Js(0,"clr-dropdown-menu",22),Js(1,"a",23),Uo(2,"Preferences"),to(),Js(3,"a",24),co("click",(function(){return Qe(t),fo(3).logout()})),Uo(4,"Log out"),to(),to()}2&t&&(Vr(1),Zs("routerLink",ic(1,zP)))}function GP(t,e){if(1&t&&(Js(0,"clr-dropdown"),Js(1,"button",19),eo(2,"clr-icon"),qs(3,BP,2,1,"span",20),to(),qs(4,HP,5,2,"clr-dropdown-menu",21),to()),2&t){const t=fo(2);Vr(2),Gs("shape",t.userShape),Vr(1),Zs("ngIf",t.vw>769)}}function $P(t,e){if(1&t){const t=so();Js(0,"a",25),co("click",(function(){return Qe(t),fo(2).login()})),Uo(1,"LOGIN"),to()}}function qP(t,e){if(1&t&&(Js(0,"div",16),qs(1,GP,5,2,"clr-dropdown",17),cc(2,"async"),qs(3,$P,2,0,"ng-template",null,18,Fc),to()),2&t){const t=Ws(4),e=fo();Vr(1),Zs("ngIf",lc(2,2,e.auth.user))("ngIfElse",t)}}let WP=(()=>{class t{constructor(t,e,n,r){this._ReportService=t,this.auth=e,this._Router=n,this.userv=r,this.vw=0}ngOnInit(){this._ReportService.getReportObservable().subscribe(t=>{this.report=t}),this.vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),window.onresize=t=>{this.vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)},onoffline=()=>{this.offline=!navigator.onLine},ononline=()=>{this.offline=!navigator.onLine}}login(){this._Router.navigate(["login"])}logout(){this.userv.logOut(),this._Router.navigate(["login"])}get userShape(){return this.userv.getUserSnapshot()&&"admin"===this.userv.getUserSnapshot().role?"administrator":"user"}get isAdmin(){let t=this.userv.getUserSnapshot();return!(!t||"admin"!==t.role)}}return t.\u0275fac=function(e){return new(e||t)(Qs(Ug),Qs(Vg),Qs(hg),Qs(jg))},t.\u0275cmp=he({type:t,selectors:[["app-navbar"]],decls:10,vars:5,consts:[[3,"clrAlertType","clrAlertAppLevel","clrAlertClosable",4,"ngIf"],[1,"header","header-7"],[1,"branding","app-title",2,"z-index","1000"],["routerLink","",1,"nav-link"],["src","assets/logo.svg",4,"ngIf"],[1,"title"],["class","badge badge-light-blue",4,"ngIf"],["class","reportTitle",4,"ngIf"],["class","header-actions navbar-links",4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosable"],[1,"alert-text"],["src","assets/logo.svg"],[1,"badge","badge-light-blue"],[1,"reportTitle"],["class","titleText",4,"ngIf"],[1,"titleText"],[1,"header-actions","navbar-links"],[4,"ngIf","ngIfElse"],["logIn",""],["clrDropdownTrigger","","aria-label","open user profile",1,"nav-text"],[4,"ngIf"],["clrPosition","bottom-right",4,"clrIfOpen"],["clrPosition","bottom-right"],["clrDropdownItem","",3,"routerLink"],["clrDropdownItem","",3,"click"],[1,"nav-link","nav-text",3,"click"]],template:function(t,e){1&t&&(qs(0,LP,4,3,"clr-alert",0),Js(1,"header",1),Js(2,"div",2),Js(3,"a",3),qs(4,MP,1,0,"img",4),Js(5,"span",5),Uo(6,"Monthly Program Statistics "),qs(7,VP,2,0,"span",6),to(),to(),to(),qs(8,UP,2,1,"div",7),qs(9,qP,5,4,"div",8),to()),2&t&&(Zs("ngIf",e.offline),Vr(4),Zs("ngIf",e.vw>600),Vr(3),Zs("ngIf",e.isAdmin),Vr(1),Zs("ngIf",e.report),Vr(1),Zs("ngIf",!e.offline))},directives:[Rh,dg,px,fx,dx,tx,ax,nS,bC,ox,nx],pipes:[$h,Gh],styles:["img[_ngcontent-%COMP%]{max-height:2rem;padding-right:.5rem}.reportTitle[_ngcontent-%COMP%]{max-width:30vw;height:60px;left:35vw;display:flex;align-items:center}.app-title[_ngcontent-%COMP%]{min-width:40vw!important;position:relative;top:0;left:0}.navbar-links[_ngcontent-%COMP%]{max-width:30vw!important;position:fixed;top:0;right:0}.titleText[_ngcontent-%COMP%]{margin:auto;text-align:center;color:grey}"]}),t})();function QP(t,e){1&t&&eo(0,"app-navbar")}let YP=(()=>{class t{constructor(t,e){this.router=t,this.tserv=e}ngOnInit(){this.router.events.subscribe(t=>{this.navHidden="/login"===this.router.url})}}return t.\u0275fac=function(e){return new(e||t)(Qs(hg),Qs(Bg))},t.\u0275cmp=he({type:t,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"main-container"],[4,"ngIf"],[1,"content-container"]],template:function(t,e){1&t&&(Js(0,"div",0),qs(1,QP,1,0,"app-navbar",1),Js(2,"div",2),eo(3,"router-outlet"),to(),to()),2&t&&(Vr(1),Zs("ngIf",!e.navHidden))},directives:[Rh,mg,WP],styles:[".content-container[_ngcontent-%COMP%]{overflow-x:hidden;margin:0}"]}),t})();function KP(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ZP(t){switch(t.length){case 0:return new Om;case 1:return t[0];default:return new Dm(t)}}function XP(t,e,n,r,i={},s={}){const o=[],a=[];let c=-1,l=null;if(r.forEach(t=>{const n=t.offset,r=n==c,u=r&&l||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case"*":a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}u[r]=a}),r||a.push(u),l=u,c=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function JP(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&tN(n,"start",t)));break;case"done":t.onDone(()=>r(n&&tN(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&tN(n,"destroy",t)))}}function tN(t,e,n){const r=n.totalTime,i=eN(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function eN(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function nN(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function rN(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let iN=(t,e)=>!1,sN=(t,e)=>!1,oN=(t,e,n)=>[];const aN=KP();(aN||"undefined"!=typeof Element)&&(iN=(t,e)=>t.contains(e),sN=(()=>{if(aN||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):sN}})(),oN=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let cN=null,lN=!1;function uN(t){cN||(cN=("undefined"!=typeof document?document.body:null)||{},lN=!!cN.style&&"WebkitAppearance"in cN.style);let e=!0;return cN.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in cN.style,!e&&lN)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in cN.style),e}const hN=sN,dN=iN,pN=oN;function fN(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let gN=(()=>{class t{validateStyleProperty(t){return uN(t)}matchesElement(t,e){return hN(t,e)}containsElement(t,e){return dN(t,e)}query(t,e,n){return pN(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Om(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})(),mN=(()=>{class t{}return t.NOOP=new gN,t})();function yN(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vN(parseFloat(e[1]),e[2])}function vN(t,e){switch(e){case"s":return 1e3*t;default:return t}}function bN(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=vN(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=vN(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function wN(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function _N(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else wN(t,n);return n}function SN(t,e,n){return n?e+":"+n+";":""}function CN(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=SN(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=SN(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function EN(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=RN(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),KP()&&CN(t))}function IN(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=RN(e);t.style[n]=""}),KP()&&CN(t))}function TN(t){return Array.isArray(t)?1==t.length?t[0]:Em(t):t}const xN=new RegExp("{{\\s*(.+?)\\s*}}","g");function kN(t){let e=[];if("string"==typeof t){let n;for(;n=xN.exec(t);)e.push(n[1]);xN.lastIndex=0}return e}function AN(t,e,n){const r=t.toString(),i=r.replace(xN,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param "+r),i=""),i.toString()});return i==r?t:i}function ON(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const DN=/-+([a-z0-9])/g;function RN(t){return t.replace(DN,(...t)=>t[1].toUpperCase())}function PN(t,e){return 0===t||0===e}function NN(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach((function(e){n[e]=LN(t,e)}))}}return e}function FN(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function LN(t,e){return window.getComputedStyle(t)[e]}function MN(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(UN(i,o)),"<"!=s[0]||"*"==i&&"*"==o||e.push(UN(o,i))}(t,n,e)):n.push(t),n}const VN=new Set(["true","1"]),jN=new Set(["false","0"]);function UN(t,e){const n=VN.has(t)||jN.has(t),r=VN.has(e)||jN.has(e);return(i,s)=>{let o="*"==t||t==i,a="*"==e||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?VN.has(t):jN.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?VN.has(e):jN.has(e)),o&&a}}const BN=new RegExp("s*:selfs*,?","g");function zN(t,e,n){return new HN(t).build(e,n)}class HN{constructor(t){this._driver=t}build(t,e){const n=new GN(e);return this._resetContextStyleTimingState(n),FN(this,TN(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if($N(t)){const e=t;Object.keys(e).forEach(t=>{kN(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=ON(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=FN(this,TN(t.animation),e);return{type:1,matchers:MN(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:qN(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>FN(this,t,e)),options:qN(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=FN(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:qN(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return WN(bN(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=WN(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||bN(r,e),WN(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Im({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Im(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if($N(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=kN(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const c=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let c=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if($N(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if($N(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),l=0;return null!=c&&(r++,l=n.offset=c),o=o||l<0||l>1,s=s||l<a,a=l,i.push(l),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const l=t.steps.length;let u=0;r>0&&r<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(l-1));const h=l-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return c.forEach((t,r)=>{const s=u>0?r==h?1:u*r:i[r],o=s*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:FN(this,TN(t.animation),e),options:qN(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:qN(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:qN(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(BN,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,nN(e.collectedStyles,e.currentQuerySelector,{});const o=FN(this,TN(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:qN(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:bN(t.timings,e.errors,!0);return{type:12,animation:FN(this,TN(t.animation),e),timings:n,options:null}}}class GN{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function $N(t){return!Array.isArray(t)&&"object"==typeof t}function qN(t){var e;return t?(t=wN(t)).params&&(t.params=(e=t.params)?wN(e):null):t={},t}function WN(t,e,n){return{duration:t,delay:e,easing:n}}function QN(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class YN{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const KN=new RegExp(":enter","g"),ZN=new RegExp(":leave","g");function XN(t,e,n,r,i,s={},o={},a,c,l=[]){return(new JN).buildKeyframes(t,e,n,r,i,s,o,a,c,l)}class JN{buildKeyframes(t,e,n,r,i,s,o,a,c,l=[]){c=c||new YN;const u=new eF(t,e,c,r,i,l,[]);u.options=a,u.currentTimeline.setStyles([s],null,u.errors,a),FN(this,n,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,u.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[QN(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?yN(n.duration):null,s=null!=n.delay?yN(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),FN(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=tF);const t=yN(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>FN(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?yN(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),FN(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return bN(e.params?AN(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?yN(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=tF);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),FN(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const c=e.currentTimeline;a&&c.delayNextStep(a);const l=c.currentTime;FN(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)}}const tF={};class eF{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tF,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new nF(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=yN(n.duration)),null!=n.delay&&(r.delay=yN(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=AN(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new eF(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=tF,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new rF(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(KN,"."+this._enterClassName)).replace(ZN,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class nF{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new nF(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):_N(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=AN(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=_N(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?ON(t.values()):[],s=e.size?ON(e.values()):[];if(n){const t=r[0],e=wN(t);t.offset=0,e.offset=1,r=[t,e]}return QN(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class rF extends nF{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=_N(t[0],!1);a.offset=0,i.push(a);const c=_N(t[0],!1);c.offset=iF(o),i.push(c);const l=t.length-1;for(let r=1;r<=l;r++){let o=_N(t[r],!1);o.offset=iF((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return QN(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function iF(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class sF{}class oF extends sF{normalizePropertyName(t,e){return RN(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(aF[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const aF=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function cF(t,e,n,r,i,s,o,a,c,l,u,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:h,errors:d}}const lF={};class uF{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,c,l){const u=[],h=this.ast.options&&this.ast.options.params||lF,d=this.buildStyles(n,o&&o.params||lF,u),p=a&&a.params||lF,f=this.buildStyles(r,p,u),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),p)},w=l?[]:XN(t,e,this.ast.animation,i,s,d,f,b,c,u);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),u.length)return cF(e,this._triggerName,n,r,v,d,f,[],[],m,y,_,u);w.forEach(t=>{const n=t.element,r=nN(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=nN(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const S=ON(g.values());return cF(e,this._triggerName,n,r,v,d,f,w,S,m,y,_)}}class hF{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=wN(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=AN(s,r,e)),n[t]=s})}}),n}}class dF{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new hF(t.style,t.options&&t.options.params||{})}),pF(this.states,"true","1"),pF(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new uF(t,e,this.states))}),this.fallbackTransition=new uF(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function pF(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const fF=new YN;class gF{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=zN(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=XP(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=XN(this._driver,e,i,"ng-enter","ng-leave",{},{},n,fF,r),s.forEach(t=>{const e=nN(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error("Unable to create the animation due to the following errors: "+r.join("\n"));o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=ZP(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e}listen(t,e,n,r){const i=eN(e,"","","");return JP(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const mF=[],yF={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class bF{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=wN(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const wF=new bF("void");class _F{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,kF(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=nN(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=nN(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(kF(t,"ng-trigger"),kF(t,"ng-trigger-"+e),a[e]=wF),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new CF(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(kF(t,"ng-trigger"),kF(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const c=new bF(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&c.absorbOptions(a.options),o[e]=c,a||(a=wF),"void"!==c.value&&a.value===c.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,c.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(c.value,c.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{IN(t,n),EN(t,r)})}return}const l=nN(this._engine.playersByElement,t,[]);l.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=i.matchTransition(a.value,c.value,t,c.params),h=!1;if(!u){if(!r)return;u=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:c,player:s,isFallbackTransition:h}),h||(kF(t,"ng-animate-queued"),s.onStart(()=>{AF(t,"ng-animate-queued")})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),l.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ZP(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(t)[r]||wF,o=new bF("void"),a=new CF(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:s,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==yF||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){kF(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=eN(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,JP(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class SF{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new _F(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(EF(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!EF(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),kF(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),AF(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(EF(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return EF(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ZP(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=yF,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)kF(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ZP(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))}_flushAnimations(t,e){const n=new YN,r=[],i=new Map,s=[],o=new Map,a=new Map,c=new Map,l=new Set;this.disabledNodes.forEach(t=>{l.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)l.add(e[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=xF(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n="ng-enter"+f++;p.set(e,n),t.forEach(t=>kF(t,n))});const g=[],m=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=xF(h,Array.from(m));b.forEach((t,e)=>{const n="ng-leave"+f++;v.set(e,n),t.forEach(t=>kF(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>AF(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>AF(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const l=!u||!this.driver.containsElement(u,i),h=v.get(i),d=p.get(i),f=this._buildInstruction(t,n,d,h,l);if(f.errors&&f.errors.length)_.push(f);else{if(l)return e.onStart(()=>IN(i,f.fromStyles)),e.onDestroy(()=>EN(i,f.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>IN(i,f.fromStyles)),e.onDestroy(()=>EN(i,f.toStyles)),void r.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,f.timelines),s.push({instruction:f,player:e,element:i}),f.queriedElements.forEach(t=>nN(o,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=c.get(e);r||c.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,C=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{nN(S,e,[]).push(t),t.destroy()})});const E=g.filter(t=>DF(t,a,c)),I=new Map;TF(I,this.driver,y,c,"*").forEach(t=>{DF(t,a,c)&&E.push(t)});const T=new Map;d.forEach((t,e)=>{TF(T,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=I.get(t),n=T.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const x=[],k=[],A={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(l.has(e))return s.onDestroy(()=>EN(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=A;if(C.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>C.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,T,I);if(s.setRealPlayer(n),t===A)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=ZP(e)),r.push(s)}}else IN(e,o.fromStyles),s.onDestroy(()=>EN(e,o.toStyles)),k.push(s),l.has(e)&&r.push(s)}),k.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ZP(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<g.length;O++){const t=g[O],e=t.__ng_removed;if(AF(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?OF(this,t,r):this.processLeaveNode(t)}return g.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,c=nN(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})}IN(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,c=[],l=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;l.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Om(e.duration,e.delay);const p=h!==a,f=function(t){const e=[];return function t(e,n){for(let r=0;r<e.length;r++){const i=e[r];i instanceof Dm?t(i.players,n):n.push(i)}}(t,e),e}((n.get(h)||mF).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=XP(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,f);if(e.subTimeline&&r&&u.add(h),p){const e=new CF(t,o,h);e.setRealPlayer(v),c.push(e)}return v});c.forEach(t=>{nN(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),l.forEach(t=>kF(t,"ng-animating"));const d=ZP(h);return d.onDestroy(()=>{l.forEach(t=>AF(t,"ng-animating")),EN(a,e.toStyles)}),u.forEach(t=>{nN(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Om(t.duration,t.delay)}}class CF{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Om,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>JP(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){nN(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function EF(t){return t&&1===t.nodeType}function IF(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function TF(t,e,n,r,i){const s=[];n.forEach(t=>s.push(IF(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=vF,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>IF(t,s[a++])),o}function xF(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=i.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:r.has(o)?1:t(o),i.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}function kF(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function AF(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function OF(t,e,n){ZP(n).onDone(()=>t.processLeaveNode(e))}function DF(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class RF{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new SF(t,e,n),this._timelineEngine=new gF(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=zN(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new dF(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=rN(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=rN(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function PF(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=FF(e[0]),e.length>1&&(r=FF(e[e.length-1]))):e&&(n=FF(e)),n||r?new NF(t,n,r):null}let NF=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&EN(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(EN(this._element,this._initialStyles),this._endStyles&&(EN(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(IN(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(IN(this._element,this._endStyles),this._endStyles=null),EN(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function FF(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];LF(i)&&(e=e||{},e[i]=t[i])}return e}function LF(t){return"display"===t||"position"===t}class MF{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=HF(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),zF(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),BF(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){VF(this._element,this._name,"paused")}resume(){VF(this._element,this._name,"running")}setPosition(t){const e=jF(this._element,this._name);this._position=t*this._duration,zF(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),BF(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=HF(t,"").split(","),r=UF(n,e);r>=0&&(n.splice(r,1),zF(t,"",n.join(",")))}(this._element,this._name))}}function VF(t,e,n){zF(t,"PlayState",n,jF(t,e))}function jF(t,e){const n=HF(t,"");return n.indexOf(",")>0?UF(n.split(","),e):UF([n],e)}function UF(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function BF(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function zF(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function HF(t,e){return t.style["animation"+e]}class GF{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new MF(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:LN(this.element,n))})}this.currentSnapshot=t}}class $F extends Om{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=fN(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class qF{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return uN(t)}matchesElement(t,e){return hN(t,e)}containsElement(t,e){return dN(t,e)}query(t,e,n){return pN(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>fN(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=i+"}\n"}),r+="}\n";const s=document.createElement("style");return s.innerHTML=r,s}animate(t,e,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const a=s.filter(t=>t instanceof GF),c={};PN(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const l=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=NN(t,e,c));if(0==n)return new $F(t,l);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(h);const d=PF(t,e),p=new GF(t,e,u,n,r,i,l,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class WF{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:LN(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class QF{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(YF().toString()),this._cssKeyframesDriver=new qF}validateStyleProperty(t){return uN(t)}matchesElement(t,e){return hN(t,e)}containsElement(t,e){return dN(t,e)}query(t,e,n){return pN(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const c={},l=s.filter(t=>t instanceof WF);PN(n,r)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>c[t]=e[t])});const u=PF(t,e=NN(t,e=e.map(t=>_N(t,!1)),c));return new WF(t,e,a,u)}}function YF(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let KF=(()=>{class t extends _m{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:ae.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Em(t):t;return JF(this._renderer,null,e,"register",[n]),new ZF(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Wt(ga),Wt(Pu))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class ZF extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new XF(this._id,t,e||{},this._renderer)}}class XF{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return JF(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function JF(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let tL=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new eL("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new nL(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Wt(ga),Wt(RF),Wt(il))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();class eL{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class nL extends eL{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return"@"!=i.charAt(0)&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let rL=(()=>{class t extends RF{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Wt(Pu),Wt(mN),Wt(sF))},t.\u0275prov=lt({token:t,factory:t.\u0275fac}),t})();const iL=[{provide:mN,useFactory:function(){return"function"==typeof YF()?new QF:new qF}},{provide:new Mt("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:_m,useClass:KF},{provide:sF,useFactory:function(){return new oF}},{provide:RF,useClass:rL},{provide:ga,useFactory:function(t,e,n){return new tL(t,e,n)},deps:[rm,RF,il]}];let sL=(()=>{class t{}return t.\u0275mod=ge({type:t}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:iL,imports:[gm]}),t})(),oL=(()=>{class t{}return t.\u0275mod=ge({type:t,bootstrap:[YP]}),t.\u0275inj=ut({factory:function(e){return new(e||t)},providers:[Bg,jg,dd,Ug],imports:[[gm,FP,_k,sL,vv,yv,LR,Ou.initializeApp(Nl)]]}),t})();(function(){if(pr)throw new Error("Cannot enable prod mode after platform setup.");dr=!1})(),pm().bootstrapModule(oL).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=(15&a)<<2|l>>6,h=63&l;c||(h=64,o||(u=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[u],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==c)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==c&&r.push(a<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}var f=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,g.prototype.create),i}return r.__extends(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?m(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",c=new f(i,a),l=0,u=Object.keys(r);l<u.length;l++){var h=u[l];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},t}();function m(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function v(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var s=t.split(".");e=v(l(s[0])||""),n=v(l(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(o){}return{header:e,claims:n,data:r,signature:i}},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=l^a&(c^l),s=1518500249):(i=a^c^l,s=1859775393):r<60?(i=a&c|l&(a|c),s=2400959708):(i=a^c^l,s=3395469782);var h=(o<<5|o>>>27)+i+u+s+n[r]&4294967295;u=l,l=c,c=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),_=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function S(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=g,e.FirebaseError=f,e.Sha1=w,e.assert=s,e.assertionError=o,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=c,e.base64Decode=l,e.base64Encode=function(t){var e=a(t);return c.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new _(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return u(void 0,t)},e.deepExtend=u,e.errorPrefix=C,e.getUA=d,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return d().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=p,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return d().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var s=i[r];n(s[0],s[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);